import{C as Re}from"./stimulus.js";import{C as la,d as na,b as ia}from"./debounce.js";const Cl=(e,t=0,l=1)=>e>l?l:e<t?t:e,$t=(e,t=0,l=Math.pow(10,t))=>Math.round(l*e)/l,sa=e=>ca(wi(e)),wi=e=>(e[0]==="#"&&(e=e.substring(1)),e.length<6?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:e.length===4?$t(parseInt(e[3]+e[3],16)/255,2):1}:{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16),a:e.length===8?$t(parseInt(e.substring(6,8),16)/255,2):1}),oa=e=>aa(ra(e)),Oo=({h:e,s:t,v:l,a:n})=>{const s=(200-t)*l/100;return{h:$t(e),s:$t(s>0&&s<200?t*l/100/(s<=100?s:200-s)*100:0),l:$t(s/2),a:$t(n,2)}},yi=e=>{const{h:t,s:l,l:n}=Oo(e);return`hsl(${t}, ${l}%, ${n}%)`},si=e=>{const{h:t,s:l,l:n,a:s}=Oo(e);return`hsla(${t}, ${l}%, ${n}%, ${s})`},ra=({h:e,s:t,v:l,a:n})=>{e=e/360*6,t=t/100,l=l/100;const s=Math.floor(e),r=l*(1-t),c=l*(1-(e-s)*t),f=l*(1-(1-e+s)*t),d=s%6;return{r:$t([l,c,r,r,f,l][d]*255),g:$t([f,l,l,c,r,r][d]*255),b:$t([r,r,f,l,l,c][d]*255),a:$t(n,2)}},hn=e=>{const t=e.toString(16);return t.length<2?"0"+t:t},aa=({r:e,g:t,b:l,a:n})=>{const s=n<1?hn($t(n*255)):"";return"#"+hn(e)+hn(t)+hn(l)+s},ca=({r:e,g:t,b:l,a:n})=>{const s=Math.max(e,t,l),r=s-Math.min(e,t,l),c=r?s===e?(t-l)/r:s===t?2+(l-e)/r:4+(e-t)/r:0;return{h:$t(60*(c<0?c+6:c)),s:$t(s?r/s*100:0),v:$t(s/255*100),a:n}},Ro=(e,t)=>{if(e===t)return!0;for(const l in e)if(e[l]!==t[l])return!1;return!0},ua=(e,t)=>e.toLowerCase()===t.toLowerCase()?!0:Ro(wi(e),wi(t)),$s={},zi=e=>{let t=$s[e];return t||(t=document.createElement("template"),t.innerHTML=e,$s[e]=t),t},Vi=(e,t,l)=>{e.dispatchEvent(new CustomEvent(t,{bubbles:!0,detail:l}))};let Ml=!1;const bi=e=>"touches"in e,fa=e=>Ml&&!bi(e)?!1:(Ml||(Ml=bi(e)),!0),zs=(e,t)=>{const l=bi(t)?t.touches[0]:t,n=e.el.getBoundingClientRect();Vi(e.el,"move",e.getMove({x:Cl((l.pageX-(n.left+window.pageXOffset))/n.width),y:Cl((l.pageY-(n.top+window.pageYOffset))/n.height)}))},ha=(e,t)=>{const l=t.keyCode;l>40||e.xy&&l<37||l<33||(t.preventDefault(),Vi(e.el,"move",e.getMove({x:l===39?.01:l===37?-.01:l===34?.05:l===33?-.05:l===35?1:l===36?-1:0,y:l===40?.01:l===38?-.01:0},!0)))};class Fi{constructor(t,l,n,s){const r=zi(`<div role="slider" tabindex="0" part="${l}" ${n}><div part="${l}-pointer"></div></div>`);t.appendChild(r.content.cloneNode(!0));const c=t.querySelector(`[part=${l}]`);c.addEventListener("mousedown",this),c.addEventListener("touchstart",this),c.addEventListener("keydown",this),this.el=c,this.xy=s,this.nodes=[c.firstChild,c]}set dragging(t){const l=t?document.addEventListener:document.removeEventListener;l(Ml?"touchmove":"mousemove",this),l(Ml?"touchend":"mouseup",this)}handleEvent(t){switch(t.type){case"mousedown":case"touchstart":if(t.preventDefault(),!fa(t)||!Ml&&t.button!=0)return;this.el.focus(),zs(this,t),this.dragging=!0;break;case"mousemove":case"touchmove":t.preventDefault(),zs(this,t);break;case"mouseup":case"touchend":this.dragging=!1;break;case"keydown":ha(this,t);break}}style(t){t.forEach((l,n)=>{for(const s in l)this.nodes[n].style.setProperty(s,l[s])})}}class da extends Fi{constructor(t){super(t,"hue",'aria-label="Hue" aria-valuemin="0" aria-valuemax="360"',!1)}update({h:t}){this.h=t,this.style([{left:`${t/360*100}%`,color:yi({h:t,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuenow",`${$t(t)}`)}getMove(t,l){return{h:l?Cl(this.h+t.x*360,0,360):360*t.x}}}class pa extends Fi{constructor(t){super(t,"saturation",'aria-label="Color"',!0)}update(t){this.hsva=t,this.style([{top:`${100-t.v}%`,left:`${t.s}%`,color:yi(t)},{"background-color":yi({h:t.h,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuetext",`Saturation ${$t(t.s)}%, Brightness ${$t(t.v)}%`)}getMove(t,l){return{s:l?Cl(this.hsva.s+t.x*100,0,100):t.x*100,v:l?Cl(this.hsva.v-t.y*100,0,100):Math.round(100-t.y*100)}}}const ma=':host{display:flex;flex-direction:column;position:relative;width:200px;height:200px;user-select:none;-webkit-user-select:none;cursor:default}:host([hidden]){display:none!important}[role=slider]{position:relative;touch-action:none;user-select:none;-webkit-user-select:none;outline:0}[role=slider]:last-child{border-radius:0 0 8px 8px}[part$=pointer]{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;display:flex;place-content:center center;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}[part$=pointer]::after{content:"";width:100%;height:100%;border-radius:inherit;background-color:currentColor}[role=slider]:focus [part$=pointer]{transform:translate(-50%,-50%) scale(1.1)}',ga="[part=hue]{flex:0 0 24px;background:linear-gradient(to right,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red 100%)}[part=hue-pointer]{top:50%;z-index:2}",va="[part=saturation]{flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(to top,#000,transparent),linear-gradient(to right,#fff,rgba(255,255,255,0));box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}[part=saturation-pointer]{z-index:3}",dn=Symbol("same"),oi=Symbol("color"),Vs=Symbol("hsva"),ri=Symbol("update"),Fs=Symbol("parts"),xn=Symbol("css"),Sn=Symbol("sliders");class wa extends HTMLElement{static get observedAttributes(){return["color"]}get[xn](){return[ma,ga,va]}get[Sn](){return[pa,da]}get color(){return this[oi]}set color(t){if(!this[dn](t)){const l=this.colorModel.toHsva(t);this[ri](l),this[oi]=t}}constructor(){super();const t=zi(`<style>${this[xn].join("")}</style>`),l=this.attachShadow({mode:"open"});l.appendChild(t.content.cloneNode(!0)),l.addEventListener("move",this),this[Fs]=this[Sn].map(n=>new n(l))}connectedCallback(){if(this.hasOwnProperty("color")){const t=this.color;delete this.color,this.color=t}else this.color||(this.color=this.colorModel.defaultColor)}attributeChangedCallback(t,l,n){const s=this.colorModel.fromAttr(n);this[dn](s)||(this.color=s)}handleEvent(t){const l=this[Vs],n={...l,...t.detail};this[ri](n);let s;!Ro(n,l)&&!this[dn](s=this.colorModel.fromHsva(n))&&(this[oi]=s,Vi(this,"color-changed",{value:s}))}[dn](t){return this.color&&this.colorModel.equal(t,this.color)}[ri](t){this[Vs]=t,this[Fs].forEach(l=>l.update(t))}}class ya extends Fi{constructor(t){super(t,"alpha",'aria-label="Alpha" aria-valuemin="0" aria-valuemax="1"',!1)}update(t){this.hsva=t;const l=si({...t,a:0}),n=si({...t,a:1}),s=t.a*100;this.style([{left:`${s}%`,color:si(t)},{"--gradient":`linear-gradient(90deg, ${l}, ${n}`}]);const r=$t(s);this.el.setAttribute("aria-valuenow",`${r}`),this.el.setAttribute("aria-valuetext",`${r}%`)}getMove(t,l){return{a:l?Cl(this.hsva.a+t.x):t.x}}}const ba=`[part=alpha]{flex:0 0 24px}[part=alpha]::after{display:block;content:"";position:absolute;top:0;left:0;right:0;bottom:0;border-radius:inherit;background-image:var(--gradient);box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}[part^=alpha]{background-color:#fff;background-image:url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><rect x="8" width="8" height="8"/><rect y="8" width="8" height="8"/></svg>')}[part=alpha-pointer]{top:50%}`;class xa extends wa{get[xn](){return[...super[xn],ba]}get[Sn](){return[...super[Sn],ya]}}const Sa={defaultColor:"#0001",toHsva:sa,fromHsva:oa,equal:ua,fromAttr:e=>e};class Ea extends xa{get colorModel(){return Sa}}class ka extends Ea{}customElements.define("hex-alpha-color-picker",ka);const Aa=/^#?([0-9A-F]{3,8})$/i,ai=(e,t)=>{const l=Aa.exec(e),n=l?l[1].length:0;return n===3||n===6||!!t&&n===4||!!t&&n===8},Ta=zi('<slot><input part="input" spellcheck="false"></slot>'),Ns=(e,t)=>e.replace(/([^0-9A-F]+)/gi,"").substring(0,t?8:6),Ws=Symbol("alpha"),pn=Symbol("color"),Bs=Symbol("saved"),ci=Symbol("input"),ui=Symbol("init"),Gs=Symbol("prefix"),ql=Symbol("update");class Ma extends HTMLElement{static get observedAttributes(){return["alpha","color","prefixed"]}get color(){return this[pn]}set color(t){this[pn]=t,this[ql](t)}get alpha(){return this[Ws]}set alpha(t){this[Ws]=t,this.toggleAttribute("alpha",t);const l=this.color;l&&!ai(l,t)&&(this.color=l.startsWith("#")?l.substring(0,l.length===5?4:7):l.substring(0,l.length===4?3:6))}get prefixed(){return this[Gs]}set prefixed(t){this[Gs]=t,this.toggleAttribute("prefixed",t),this[ql](this.color)}constructor(){super();const t=this.attachShadow({mode:"open"});t.appendChild(Ta.content.cloneNode(!0)),t.firstElementChild.addEventListener("slotchange",()=>this[ui](t))}connectedCallback(){if(this[ui](this.shadowRoot),this.hasOwnProperty("alpha")){const t=this.alpha;delete this.alpha,this.alpha=t}else this.alpha=this.hasAttribute("alpha");if(this.hasOwnProperty("prefixed")){const t=this.prefixed;delete this.prefixed,this.prefixed=t}else this.prefixed=this.hasAttribute("prefixed");if(this.hasOwnProperty("color")){const t=this.color;delete this.color,this.color=t}else this.color==null?this.color=this.getAttribute("color")||"":this[pn]&&this[ql](this[pn])}handleEvent(t){const l=t.target,{value:n}=l;switch(t.type){case"input":const s=Ns(n,this.alpha);this[Bs]=this.color,(ai(s,this.alpha)||n==="")&&(this.color=s,this.dispatchEvent(new CustomEvent("color-changed",{bubbles:!0,detail:{value:s?"#"+s:""}})));break;case"blur":n&&!ai(n,this.alpha)&&(this.color=this[Bs])}}attributeChangedCallback(t,l,n){t==="color"&&this.color!==n&&(this.color=n);const s=n!=null;t==="alpha"&&this.alpha!==s&&(this.alpha=s),t==="prefixed"&&this.prefixed!==s&&(this.prefixed=s)}[ui](t){let l=this.querySelector("input");if(!l){let n;for(;n=this.firstChild;)n.remove();l=t.querySelector("input")}l.addEventListener("input",this),l.addEventListener("blur",this),this[ci]=l,this[ql](this.color)}[ql](t){this[ci]&&(this[ci].value=t==null||t==""?"":(this.prefixed?"#":"")+Ns(t,this.alpha))}}class _a extends Ma{}customElements.define("hex-input",_a);const es=class es extends Re{show(){clearTimeout(this.timeout),this.pickerTarget.hidden=!1}hide(){clearTimeout(this.timeout),this.timeout=window.setTimeout(()=>this.pickerTarget.hidden=!0)}colorChanged(t){this.inputTarget.color=t.detail.value,this.pickerTarget.color=t.detail.value,this.swatchTarget.style.backgroundColor=t.detail.value}};es.targets=["input","picker","swatch"];let xi=es;function La(e){return e===""?document.execCommand("delete"):document.execCommand("insertText",!1,e)}function Ca(e,t){e.setRangeText(t,e.selectionStart||0,e.selectionEnd||0,"end"),e.dispatchEvent(new InputEvent("input",{data:t,inputType:"insertText"}))}function Da(e,t){var l=e.ownerDocument,n=l.activeElement;n!==e&&e.focus(),La(t)||Ca(e,t),n===l.body?e.blur():n instanceof HTMLElement&&n!==e&&n.focus()}function Pa(e,t){e.select(),Da(e,t)}const Ia=/([^\s"]*)"([^"]*)(?:"|$)|[^\s"]+/gi,ls=class ls extends Re{connect(){this.combobox=new la(this.inputTarget,this.listTarget)}focus(){var t;(t=this.combobox)==null||t.start(),this.update()}blur(){var t;(t=this.combobox)==null||t.stop(),this.listTarget.hidden=!0}tokens(){const t=this.inputTarget.value.matchAll(Ia);return Array.from(t).reverse()}currentToken(){const t=this.inputTarget.selectionStart||0;return this.tokens().find(l=>l.index!==void 0&&l.index<t&&l.index+l[0].length>=t)}update(){const t=this.tokens(),l=this.currentToken(),n=l&&l[0].toLowerCase(),s=Array.from(this.listTarget.children),r=[];s.forEach(c=>{var d;const f=((d=c.dataset.value||c.textContent)==null?void 0:d.trim().toLowerCase())||"";t.some(p=>p[0].toLowerCase()===f)?c.hidden=!0:n?c.hidden=!f.startsWith(n)||n.includes(":")===f.endsWith(":"):(c.hidden=r.some(p=>f.startsWith(p)),r.push(f))}),this.listTarget.hidden=!s.some(c=>!c.hidden)}commit(t){var r;const l=t.target,n=this.currentToken(),s=((r=l.dataset.value||l.textContent)==null?void 0:r.trim())||"";Pa(this.inputTarget,this.inputTarget.value.slice(0,n==null?void 0:n.index)+s+(s.endsWith(":")?"":" "))}preventBlur(t){t.preventDefault()}};ls.targets=["input","list"];let Si=ls;const ns=class ns extends Re{submit(){setTimeout(()=>{this.formTarget.requestSubmit()})}};ns.targets=["form"];let Ei=ns;const is=class is extends Re{change(){this.previewTarget.hidden=!0,this.formTarget.hidden=!1}emojiTargetConnected(t){const l=t.querySelector("input"),n=t.querySelector("ui-popup"),s=t.querySelector("button"),r=t.querySelector("emoji-picker");l.type="hidden",n.hidden=!1,r.addEventListener("emoji-click",c=>{l.value=c.detail.unicode||"",s.innerHTML=l.value,n.open=!1})}};is.targets=["preview","form","emoji"];let ki=is;class Oa extends Re{constructor(){super(...arguments),this.debouncedSubmit=na(this.submit,250)}input(t){t.target.value?this.debouncedSubmit():this.submit()}submit(){var t;(t=this.element.form)==null||t.requestSubmit()}}const Ra=!0,Ct="u-",Ha="uplot",$a=Ct+"hz",za=Ct+"vt",Va=Ct+"title",Fa=Ct+"wrap",Na=Ct+"under",Wa=Ct+"over",Ba=Ct+"axis",ll=Ct+"off",Ga=Ct+"select",Ya=Ct+"cursor-x",qa=Ct+"cursor-y",Ua=Ct+"cursor-pt",ja=Ct+"legend",Ka=Ct+"live",Ja=Ct+"inline",Za=Ct+"series",Qa=Ct+"marker",Ys=Ct+"label",Xa=Ct+"value",Kl="width",Jl="height",Ul="top",qs="bottom",Al="left",fi="right",Ni="#000",Us=Ni+"0",hi="mousemove",js="mousedown",di="mouseup",Ks="mouseenter",Js="mouseleave",Zs="dblclick",tc="resize",ec="scroll",Qs="change",En="dppxchange",Wi="--",Rl=typeof window<"u",Ai=Rl?document:null,_l=Rl?window:null,lc=Rl?navigator:null;let rt,mn;function Ti(){let e=devicePixelRatio;rt!=e&&(rt=e,mn&&_i(Qs,mn,Ti),mn=matchMedia(`(min-resolution: ${rt-.001}dppx) and (max-resolution: ${rt+.001}dppx)`),nl(Qs,mn,Ti),_l.dispatchEvent(new CustomEvent(En)))}function le(e,t){if(t!=null){let l=e.classList;!l.contains(t)&&l.add(t)}}function Mi(e,t){let l=e.classList;l.contains(t)&&l.remove(t)}function vt(e,t,l){e.style[t]=l+"px"}function we(e,t,l,n){let s=Ai.createElement(e);return t!=null&&le(s,t),l!=null&&l.insertBefore(s,n),s}function fe(e,t){return we("div",e,t)}const Xs=new WeakMap;function _e(e,t,l,n,s){let r="translate("+t+"px,"+l+"px)",c=Xs.get(e);r!=c&&(e.style.transform=r,Xs.set(e,r),t<0||l<0||t>n||l>s?le(e,ll):Mi(e,ll))}const to=new WeakMap;function eo(e,t,l){let n=t+l,s=to.get(e);n!=s&&(to.set(e,n),e.style.background=t,e.style.borderColor=l)}const lo=new WeakMap;function no(e,t,l,n){let s=t+""+l,r=lo.get(e);s!=r&&(lo.set(e,s),e.style.height=l+"px",e.style.width=t+"px",e.style.marginLeft=n?-t/2+"px":0,e.style.marginTop=n?-l/2+"px":0)}const Bi={passive:!0},nc={...Bi,capture:!0};function nl(e,t,l,n){t.addEventListener(e,l,n?nc:Bi)}function _i(e,t,l,n){t.removeEventListener(e,l,Bi)}Rl&&Ti();function ye(e,t,l,n){let s;l=l||0,n=n||t.length-1;let r=n<=2147483647;for(;n-l>1;)s=r?l+n>>1:ne((l+n)/2),t[s]<e?l=s:n=s;return e-t[l]<=t[n]-e?l:n}function Ho(e){return(l,n,s)=>{let r=-1,c=-1;for(let f=n;f<=s;f++)if(e(l[f])){r=f;break}for(let f=s;f>=n;f--)if(e(l[f])){c=f;break}return[r,c]}}const $o=e=>e!=null,zo=e=>e!=null&&e>0,_n=Ho($o),ic=Ho(zo);function sc(e,t,l,n=0,s=!1){let r=s?ic:_n,c=s?zo:$o;[t,l]=r(e,t,l);let f=e[t],d=e[t];if(t>-1)if(n==1)f=e[t],d=e[l];else if(n==-1)f=e[l],d=e[t];else for(let p=t;p<=l;p++){let y=e[p];c(y)&&(y<f?f=y:y>d&&(d=y))}return[f??ft,d??-ft]}function Ln(e,t,l,n){let s=oo(e),r=oo(t);e==t&&(s==-1?(e*=l,t/=l):(e/=l,t*=l));let c=l==10?Ie:Vo,f=s==1?ne:he,d=r==1?he:ne,p=f(c(Lt(e))),y=d(c(Lt(t))),g=Dl(l,p),v=Dl(l,y);return l==10&&(p<0&&(g=ht(g,-p)),y<0&&(v=ht(v,-y))),n||l==2?(e=g*s,t=v*r):(e=Bo(e,g),t=Cn(t,v)),[e,t]}function Gi(e,t,l,n){let s=Ln(e,t,l,n);return e==0&&(s[0]=0),t==0&&(s[1]=0),s}const Yi=.1,io={mode:3,pad:Yi},Ql={pad:0,soft:null,mode:0},oc={min:Ql,max:Ql};function kn(e,t,l,n){return Dn(l)?so(e,t,l):(Ql.pad=l,Ql.soft=n?0:null,Ql.mode=n?3:0,so(e,t,oc))}function st(e,t){return e??t}function rc(e,t,l){for(t=st(t,0),l=st(l,e.length-1);t<=l;){if(e[t]!=null)return!0;t++}return!1}function so(e,t,l){let n=l.min,s=l.max,r=st(n.pad,0),c=st(s.pad,0),f=st(n.hard,-ft),d=st(s.hard,ft),p=st(n.soft,ft),y=st(s.soft,-ft),g=st(n.mode,0),v=st(s.mode,0),k=t-e,A=Ie(k),O=Ut(Lt(e),Lt(t)),V=Ie(O),C=Lt(V-A);(k<1e-24||C>10)&&(k=0,(e==0||t==0)&&(k=1e-24,g==2&&p!=ft&&(r=0),v==2&&y!=-ft&&(c=0)));let b=k||O||1e3,D=Ie(b),S=Dl(10,ne(D)),W=b*(k==0?e==0?.1:1:r),P=ht(Bo(e-W,S/10),24),K=e>=p&&(g==1||g==3&&P<=p||g==2&&P>=p)?p:ft,q=Ut(f,P<K&&e>=K?K:be(K,P)),Q=b*(k==0?t==0?.1:1:c),Y=ht(Cn(t+Q,S/10),24),T=t<=y&&(v==1||v==3&&Y>=y||v==2&&Y<=y)?y:-ft,j=be(d,Y>T&&t<=T?T:Ut(T,Y));return q==j&&q==0&&(j=100),[q,j]}const ac=new Intl.NumberFormat(Rl?lc.language:"en-US"),qi=e=>ac.format(e),ie=Math,bn=ie.PI,Lt=ie.abs,ne=ie.floor,_t=ie.round,he=ie.ceil,be=ie.min,Ut=ie.max,Dl=ie.pow,oo=ie.sign,Ie=ie.log10,Vo=ie.log2,cc=(e,t=1)=>ie.sinh(e)*t,pi=(e,t=1)=>ie.asinh(e/t),ft=1/0;function ro(e){return(Ie((e^e>>31)-(e>>31))|0)+1}function Li(e,t,l){return be(Ut(e,t),l)}function Fo(e){return typeof e=="function"}function X(e){return Fo(e)?e:()=>e}const uc=()=>{},No=e=>e,Wo=(e,t)=>t,fc=e=>null,ao=e=>!0,co=(e,t)=>e==t,hc=/\.\d*?(?=9{6,}|0{6,})/gm,il=e=>{if(Yo(e)||Be.has(e))return e;const t=`${e}`,l=t.match(hc);if(l==null)return e;let n=l[0].length-1;if(t.indexOf("e-")!=-1){let[s,r]=t.split("e");return+`${il(s)}e${r}`}return ht(e,n)};function tl(e,t){return il(ht(il(e/t))*t)}function Cn(e,t){return il(he(il(e/t))*t)}function Bo(e,t){return il(ne(il(e/t))*t)}function ht(e,t=0){if(Yo(e))return e;let l=10**t,n=e*l*(1+Number.EPSILON);return _t(n)/l}const Be=new Map;function Go(e){return((""+e).split(".")[1]||"").length}function tn(e,t,l,n){let s=[],r=n.map(Go);for(let c=t;c<l;c++){let f=Lt(c),d=ht(Dl(e,c),f);for(let p=0;p<n.length;p++){let y=e==10?+`${n[p]}e${c}`:n[p]*d,g=(c>=0?0:f)+(c>=r[p]?0:r[p]),v=e==10?y:ht(y,g);s.push(v),Be.set(v,g)}}return s}const Xl={},Ui=[],Pl=[null,null],We=Array.isArray,Yo=Number.isInteger,dc=e=>e===void 0;function uo(e){return typeof e=="string"}function Dn(e){let t=!1;if(e!=null){let l=e.constructor;t=l==null||l==Object}return t}function pc(e){return e!=null&&typeof e=="object"}const mc=Object.getPrototypeOf(Uint8Array),qo="__proto__";function Il(e,t=Dn){let l;if(We(e)){let n=e.find(s=>s!=null);if(We(n)||t(n)){l=Array(e.length);for(let s=0;s<e.length;s++)l[s]=Il(e[s],t)}else l=e.slice()}else if(e instanceof mc)l=e.slice();else if(t(e)){l={};for(let n in e)n!=qo&&(l[n]=Il(e[n],t))}else l=e;return l}function At(e){let t=arguments;for(let l=1;l<t.length;l++){let n=t[l];for(let s in n)s!=qo&&(Dn(e[s])?At(e[s],Il(n[s])):e[s]=Il(n[s]))}return e}const gc=0,vc=1,wc=2;function yc(e,t,l){for(let n=0,s,r=-1;n<t.length;n++){let c=t[n];if(c>r){for(s=c-1;s>=0&&e[s]==null;)e[s--]=null;for(s=c+1;s<l&&e[s]==null;)e[r=s++]=null}}}function bc(e,t){if(Ec(e)){let c=e[0].slice();for(let f=1;f<e.length;f++)c.push(...e[f].slice(1));return kc(c[0])||(c=Sc(c)),c}let l=new Set;for(let c=0;c<e.length;c++){let d=e[c][0],p=d.length;for(let y=0;y<p;y++)l.add(d[y])}let n=[Array.from(l).sort((c,f)=>c-f)],s=n[0].length,r=new Map;for(let c=0;c<s;c++)r.set(n[0][c],c);for(let c=0;c<e.length;c++){let f=e[c],d=f[0];for(let p=1;p<f.length;p++){let y=f[p],g=Array(s).fill(void 0),v=t?t[c][p]:vc,k=[];for(let A=0;A<y.length;A++){let O=y[A],V=r.get(d[A]);O===null?v!=gc&&(g[V]=O,v==wc&&k.push(V)):g[V]=O}yc(g,k,s),n.push(g)}}return n}const xc=typeof queueMicrotask>"u"?e=>Promise.resolve().then(e):queueMicrotask;function Sc(e){let t=e[0],l=t.length,n=Array(l);for(let r=0;r<n.length;r++)n[r]=r;n.sort((r,c)=>t[r]-t[c]);let s=[];for(let r=0;r<e.length;r++){let c=e[r],f=Array(l);for(let d=0;d<l;d++)f[d]=c[n[d]];s.push(f)}return s}function Ec(e){let t=e[0][0],l=t.length;for(let n=1;n<e.length;n++){let s=e[n][0];if(s.length!=l)return!1;if(s!=t){for(let r=0;r<l;r++)if(s[r]!=t[r])return!1}}return!0}function kc(e,t=100){const l=e.length;if(l<=1)return!0;let n=0,s=l-1;for(;n<=s&&e[n]==null;)n++;for(;s>=n&&e[s]==null;)s--;if(s<=n)return!0;const r=Ut(1,ne((s-n+1)/t));for(let c=e[n],f=n+r;f<=s;f+=r){const d=e[f];if(d!=null){if(d<=c)return!1;c=d}}return!0}const Uo=["January","February","March","April","May","June","July","August","September","October","November","December"],jo=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function Ko(e){return e.slice(0,3)}const Ac=jo.map(Ko),Tc=Uo.map(Ko),Mc={MMMM:Uo,MMM:Tc,WWWW:jo,WWW:Ac};function jl(e){return(e<10?"0":"")+e}function _c(e){return(e<10?"00":e<100?"0":"")+e}const Lc={YYYY:e=>e.getFullYear(),YY:e=>(e.getFullYear()+"").slice(2),MMMM:(e,t)=>t.MMMM[e.getMonth()],MMM:(e,t)=>t.MMM[e.getMonth()],MM:e=>jl(e.getMonth()+1),M:e=>e.getMonth()+1,DD:e=>jl(e.getDate()),D:e=>e.getDate(),WWWW:(e,t)=>t.WWWW[e.getDay()],WWW:(e,t)=>t.WWW[e.getDay()],HH:e=>jl(e.getHours()),H:e=>e.getHours(),h:e=>{let t=e.getHours();return t==0?12:t>12?t-12:t},AA:e=>e.getHours()>=12?"PM":"AM",aa:e=>e.getHours()>=12?"pm":"am",a:e=>e.getHours()>=12?"p":"a",mm:e=>jl(e.getMinutes()),m:e=>e.getMinutes(),ss:e=>jl(e.getSeconds()),s:e=>e.getSeconds(),fff:e=>_c(e.getMilliseconds())};function ji(e,t){t=t||Mc;let l=[],n=/\{([a-z]+)\}|[^{]+/gi,s;for(;s=n.exec(e);)l.push(s[0][0]=="{"?Lc[s[1]]:s[0]);return r=>{let c="";for(let f=0;f<l.length;f++)c+=typeof l[f]=="string"?l[f]:l[f](r,t);return c}}const Cc=new Intl.DateTimeFormat().resolvedOptions().timeZone;function Dc(e,t){let l;return t=="UTC"||t=="Etc/UTC"?l=new Date(+e+e.getTimezoneOffset()*6e4):t==Cc?l=e:(l=new Date(e.toLocaleString("en-US",{timeZone:t})),l.setMilliseconds(e.getMilliseconds())),l}const Jo=e=>e%1==0,An=[1,2,2.5,5],Pc=tn(10,-32,0,An),Zo=tn(10,0,32,An),Ic=Zo.filter(Jo),el=Pc.concat(Zo),Ki=`
`,Qo="{YYYY}",fo=Ki+Qo,Xo="{M}/{D}",Zl=Ki+Xo,gn=Zl+"/{YY}",tr="{aa}",Oc="{h}:{mm}",Tl=Oc+tr,ho=Ki+Tl,po=":{ss}",at=null;function er(e){let t=e*1e3,l=t*60,n=l*60,s=n*24,r=s*30,c=s*365,d=(e==1?tn(10,0,3,An).filter(Jo):tn(10,-3,0,An)).concat([t,t*5,t*10,t*15,t*30,l,l*5,l*10,l*15,l*30,n,n*2,n*3,n*4,n*6,n*8,n*12,s,s*2,s*3,s*4,s*5,s*6,s*7,s*8,s*9,s*10,s*15,r,r*2,r*3,r*4,r*6,c,c*2,c*5,c*10,c*25,c*50,c*100]);const p=[[c,Qo,at,at,at,at,at,at,1],[s*28,"{MMM}",fo,at,at,at,at,at,1],[s,Xo,fo,at,at,at,at,at,1],[n,"{h}"+tr,gn,at,Zl,at,at,at,1],[l,Tl,gn,at,Zl,at,at,at,1],[t,po,gn+" "+Tl,at,Zl+" "+Tl,at,ho,at,1],[e,po+".{fff}",gn+" "+Tl,at,Zl+" "+Tl,at,ho,at,1]];function y(g){return(v,k,A,O,V,C)=>{let b=[],D=V>=c,S=V>=r&&V<c,W=g(A),P=ht(W*e,3),K=mi(W.getFullYear(),D?0:W.getMonth(),S||D?1:W.getDate()),q=ht(K*e,3);if(S||D){let Q=S?V/r:0,Y=D?V/c:0,T=P==q?P:ht(mi(K.getFullYear()+Y,K.getMonth()+Q,1)*e,3),j=new Date(_t(T/e)),R=j.getFullYear(),B=j.getMonth();for(let F=0;T<=O;F++){let tt=mi(R+Y*F,B+Q*F,1),z=tt-g(ht(tt*e,3));T=ht((+tt+z)*e,3),T<=O&&b.push(T)}}else{let Q=V>=s?s:V,Y=ne(A)-ne(P),T=q+Y+Cn(P-q,Q);b.push(T);let j=g(T),R=j.getHours()+j.getMinutes()/l+j.getSeconds()/n,B=V/n,F=v.axes[k]._space,tt=C/F;for(;T=ht(T+V,e==1?0:3),!(T>O);)if(B>1){let z=ne(ht(R+B,6))%24,lt=g(T).getHours()-z;lt>1&&(lt=-1),T-=lt*n,R=(R+B)%24;let ct=b[b.length-1];ht((T-ct)/V,3)*tt>=.7&&b.push(T)}else b.push(T)}return b}}return[d,p,y]}const[Rc,Hc,$c]=er(1),[zc,Vc,Fc]=er(.001);tn(2,-53,53,[1]);function mo(e,t){return e.map(l=>l.map((n,s)=>s==0||s==8||n==null?n:t(s==1||l[8]==0?n:l[1]+n)))}function go(e,t){return(l,n,s,r,c)=>{let f=t.find(A=>c>=A[0])||t[t.length-1],d,p,y,g,v,k;return n.map(A=>{let O=e(A),V=O.getFullYear(),C=O.getMonth(),b=O.getDate(),D=O.getHours(),S=O.getMinutes(),W=O.getSeconds(),P=V!=d&&f[2]||C!=p&&f[3]||b!=y&&f[4]||D!=g&&f[5]||S!=v&&f[6]||W!=k&&f[7]||f[1];return d=V,p=C,y=b,g=D,v=S,k=W,P(O)})}}function Nc(e,t){let l=ji(t);return(n,s,r,c,f)=>s.map(d=>l(e(d)))}function mi(e,t,l){return new Date(e,t,l)}function vo(e,t){return t(e)}const Wc="{YYYY}-{MM}-{DD} {h}:{mm}{aa}";function wo(e,t){return(l,n,s,r)=>r==null?Wi:t(e(n))}function Bc(e,t){let l=e.series[t];return l.width?l.stroke(e,t):l.points.width?l.points.stroke(e,t):null}function Gc(e,t){return e.series[t].fill(e,t)}const Yc={show:!0,live:!0,isolate:!1,mount:uc,markers:{show:!0,width:2,stroke:Bc,fill:Gc,dash:"solid"},idx:null,idxs:null,values:[]};function qc(e,t){let l=e.cursor.points,n=fe(),s=l.size(e,t);vt(n,Kl,s),vt(n,Jl,s);let r=s/-2;vt(n,"marginLeft",r),vt(n,"marginTop",r);let c=l.width(e,t,s);return c&&vt(n,"borderWidth",c),n}function Uc(e,t){let l=e.series[t].points;return l._fill||l._stroke}function jc(e,t){let l=e.series[t].points;return l._stroke||l._fill}function Kc(e,t){return e.series[t].points.size}const gi=[0,0];function Jc(e,t,l){return gi[0]=t,gi[1]=l,gi}function vn(e,t,l,n=!0){return s=>{s.button==0&&(!n||s.target==t)&&l(s)}}function vi(e,t,l,n=!0){return s=>{(!n||s.target==t)&&l(s)}}const Zc={show:!0,x:!0,y:!0,lock:!1,move:Jc,points:{one:!1,show:qc,size:Kc,width:0,stroke:jc,fill:Uc},bind:{mousedown:vn,mouseup:vn,click:vn,dblclick:vn,mousemove:vi,mouseleave:vi,mouseenter:vi},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,click:(e,t)=>{t.stopPropagation(),t.stopImmediatePropagation()},_x:!1,_y:!1},focus:{dist:(e,t,l,n,s)=>n-s,prox:-1,bias:0},hover:{skip:[void 0],prox:null,bias:0},left:-10,top:-10,idx:null,dataIdx:null,idxs:null,event:null},lr={show:!0,stroke:"rgba(0,0,0,0.07)",width:2},Ji=At({},lr,{filter:Wo}),nr=At({},Ji,{size:10}),ir=At({},lr,{show:!1}),Zi='12px system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',sr="bold "+Zi,or=1.5,yo={show:!0,scale:"x",stroke:Ni,space:50,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:sr,side:2,grid:Ji,ticks:nr,border:ir,font:Zi,lineGap:or,rotate:0},Qc="Value",Xc="Time",bo={show:!0,scale:"x",auto:!1,sorted:1,min:ft,max:-ft,idxs:[]};function tu(e,t,l,n,s){return t.map(r=>r==null?"":qi(r))}function eu(e,t,l,n,s,r,c){let f=[],d=Be.get(s)||0;l=c?l:ht(Cn(l,s),d);for(let p=l;p<=n;p=ht(p+s,d))f.push(Object.is(p,-0)?0:p);return f}function Ci(e,t,l,n,s,r,c){const f=[],d=e.scales[e.axes[t].scale].log,p=d==10?Ie:Vo,y=ne(p(l));s=Dl(d,y),d==10&&(s=el[ye(s,el)]);let g=l,v=s*d;d==10&&(v=el[ye(v,el)]);do f.push(g),g=g+s,d==10&&!Be.has(g)&&(g=ht(g,Be.get(s))),g>=v&&(s=g,v=s*d,d==10&&(v=el[ye(v,el)]));while(g<=n);return f}function lu(e,t,l,n,s,r,c){let d=e.scales[e.axes[t].scale].asinh,p=n>d?Ci(e,t,Ut(d,l),n,s):[d],y=n>=0&&l<=0?[0]:[];return(l<-d?Ci(e,t,Ut(d,-n),-l,s):[d]).reverse().map(v=>-v).concat(y,p)}const rr=/./,nu=/[12357]/,iu=/[125]/,xo=/1/,Di=(e,t,l,n)=>e.map((s,r)=>t==4&&s==0||r%n==0&&l.test(s.toExponential()[s<0?1:0])?s:null);function su(e,t,l,n,s){let r=e.axes[l],c=r.scale,f=e.scales[c],d=e.valToPos,p=r._space,y=d(10,c),g=d(9,c)-y>=p?rr:d(7,c)-y>=p?nu:d(5,c)-y>=p?iu:xo;if(g==xo){let v=Lt(d(1,c)-y);if(v<p)return Di(t.slice().reverse(),f.distr,g,he(p/v)).reverse()}return Di(t,f.distr,g,1)}function ou(e,t,l,n,s){let r=e.axes[l],c=r.scale,f=r._space,d=e.valToPos,p=Lt(d(1,c)-d(2,c));return p<f?Di(t.slice().reverse(),3,rr,he(f/p)).reverse():t}function ru(e,t,l,n){return n==null?Wi:t==null?"":qi(t)}const So={show:!0,scale:"y",stroke:Ni,space:30,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:sr,side:3,grid:Ji,ticks:nr,border:ir,font:Zi,lineGap:or,rotate:0};function au(e,t){let l=3+(e||1)*2;return ht(l*t,3)}function cu(e,t){let{scale:l,idxs:n}=e.series[0],s=e._data[0],r=e.valToPos(s[n[0]],l,!0),c=e.valToPos(s[n[1]],l,!0),f=Lt(c-r),d=e.series[t],p=f/(d.points.space*rt);return n[1]-n[0]<=p}const Eo={scale:null,auto:!0,sorted:0,min:ft,max:-ft},ar=(e,t,l,n,s)=>s,ko={show:!0,auto:!0,sorted:0,gaps:ar,alpha:1,facets:[At({},Eo,{scale:"x"}),At({},Eo,{scale:"y"})]},Ao={scale:"y",auto:!0,sorted:0,show:!0,spanGaps:!1,gaps:ar,alpha:1,points:{show:cu,filter:null},values:null,min:ft,max:-ft,idxs:[],path:null,clip:null};function uu(e,t,l,n,s){return l/10}const cr={time:Ra,auto:!0,distr:1,log:10,asinh:1,min:null,max:null,dir:1,ori:0},fu=At({},cr,{time:!1,ori:1}),To={};function ur(e,t){let l=To[e];return l||(l={key:e,plots:[],sub(n){l.plots.push(n)},unsub(n){l.plots=l.plots.filter(s=>s!=n)},pub(n,s,r,c,f,d,p){for(let y=0;y<l.plots.length;y++)l.plots[y]!=s&&l.plots[y].pub(n,s,r,c,f,d,p)}},e!=null&&(To[e]=l)),l}const Ol=1,Pi=2;function sl(e,t,l){const n=e.mode,s=e.series[t],r=n==2?e._data[t]:e._data,c=e.scales,f=e.bbox;let d=r[0],p=n==2?r[1]:r[t],y=n==2?c[s.facets[0].scale]:c[e.series[0].scale],g=n==2?c[s.facets[1].scale]:c[s.scale],v=f.left,k=f.top,A=f.width,O=f.height,V=e.valToPosH,C=e.valToPosV;return y.ori==0?l(s,d,p,y,g,V,C,v,k,A,O,In,Hl,Rn,hr,pr):l(s,d,p,y,g,C,V,k,v,O,A,On,$l,ts,dr,mr)}function Qi(e,t){let l=0,n=0,s=st(e.bands,Ui);for(let r=0;r<s.length;r++){let c=s[r];c.series[0]==t?l=c.dir:c.series[1]==t&&(c.dir==1?n|=1:n|=2)}return[l,n==1?-1:n==2?1:n==3?2:0]}function hu(e,t,l,n,s){let r=e.mode,c=e.series[t],f=r==2?c.facets[1].scale:c.scale,d=e.scales[f];return s==-1?d.min:s==1?d.max:d.distr==3?d.dir==1?d.min:d.max:0}function Oe(e,t,l,n,s,r){return sl(e,t,(c,f,d,p,y,g,v,k,A,O,V)=>{let C=c.pxRound;const b=p.dir*(p.ori==0?1:-1),D=p.ori==0?Hl:$l;let S,W;b==1?(S=l,W=n):(S=n,W=l);let P=C(g(f[S],p,O,k)),K=C(v(d[S],y,V,A)),q=C(g(f[W],p,O,k)),Q=C(v(r==1?y.max:y.min,y,V,A)),Y=new Path2D(s);return D(Y,q,Q),D(Y,P,Q),D(Y,P,K),Y})}function Pn(e,t,l,n,s,r){let c=null;if(e.length>0){c=new Path2D;const f=t==0?Rn:ts;let d=l;for(let g=0;g<e.length;g++){let v=e[g];if(v[1]>v[0]){let k=v[0]-d;k>0&&f(c,d,n,k,n+r),d=v[1]}}let p=l+s-d,y=10;p>0&&f(c,d,n-y/2,p,n+r+y)}return c}function du(e,t,l){let n=e[e.length-1];n&&n[0]==t?n[1]=l:e.push([t,l])}function Xi(e,t,l,n,s,r,c){let f=[],d=e.length;for(let p=s==1?l:n;p>=l&&p<=n;p+=s)if(t[p]===null){let g=p,v=p;if(s==1)for(;++p<=n&&t[p]===null;)v=p;else for(;--p>=l&&t[p]===null;)v=p;let k=r(e[g]),A=v==g?k:r(e[v]),O=g-s;k=c<=0&&O>=0&&O<d?r(e[O]):k;let C=v+s;A=c>=0&&C>=0&&C<d?r(e[C]):A,A>=k&&f.push([k,A])}return f}function Mo(e){return e==0?No:e==1?_t:t=>tl(t,e)}function fr(e){let t=e==0?In:On,l=e==0?(s,r,c,f,d,p)=>{s.arcTo(r,c,f,d,p)}:(s,r,c,f,d,p)=>{s.arcTo(c,r,d,f,p)},n=e==0?(s,r,c,f,d)=>{s.rect(r,c,f,d)}:(s,r,c,f,d)=>{s.rect(c,r,d,f)};return(s,r,c,f,d,p=0,y=0)=>{p==0&&y==0?n(s,r,c,f,d):(p=be(p,f/2,d/2),y=be(y,f/2,d/2),t(s,r+p,c),l(s,r+f,c,r+f,c+d,p),l(s,r+f,c+d,r,c+d,y),l(s,r,c+d,r,c,y),l(s,r,c,r+f,c,p),s.closePath())}}const In=(e,t,l)=>{e.moveTo(t,l)},On=(e,t,l)=>{e.moveTo(l,t)},Hl=(e,t,l)=>{e.lineTo(t,l)},$l=(e,t,l)=>{e.lineTo(l,t)},Rn=fr(0),ts=fr(1),hr=(e,t,l,n,s,r)=>{e.arc(t,l,n,s,r)},dr=(e,t,l,n,s,r)=>{e.arc(l,t,n,s,r)},pr=(e,t,l,n,s,r,c)=>{e.bezierCurveTo(t,l,n,s,r,c)},mr=(e,t,l,n,s,r,c)=>{e.bezierCurveTo(l,t,s,n,c,r)};function gr(e){return(t,l,n,s,r)=>sl(t,l,(c,f,d,p,y,g,v,k,A,O,V)=>{let{pxRound:C,points:b}=c,D,S;p.ori==0?(D=In,S=hr):(D=On,S=dr);const W=ht(b.width*rt,3);let P=(b.size-b.width)/2*rt,K=ht(P*2,3),q=new Path2D,Q=new Path2D,{left:Y,top:T,width:j,height:R}=t.bbox;Rn(Q,Y-K,T-K,j+K*2,R+K*2);const B=F=>{if(d[F]!=null){let tt=C(g(f[F],p,O,k)),z=C(v(d[F],y,V,A));D(q,tt+P,z),S(q,tt,z,P,0,bn*2)}};if(r)r.forEach(B);else for(let F=n;F<=s;F++)B(F);return{stroke:W>0?q:null,fill:q,clip:Q,flags:Ol|Pi}})}function vr(e){return(t,l,n,s,r,c)=>{n!=s&&(r!=n&&c!=n&&e(t,l,n),r!=s&&c!=s&&e(t,l,s),e(t,l,c))}}const pu=vr(Hl),mu=vr($l);function wr(e){const t=st(e==null?void 0:e.alignGaps,0);return(l,n,s,r)=>sl(l,n,(c,f,d,p,y,g,v,k,A,O,V)=>{[s,r]=_n(d,s,r);let C=c.pxRound,b=R=>C(g(R,p,O,k)),D=R=>C(v(R,y,V,A)),S,W;p.ori==0?(S=Hl,W=pu):(S=$l,W=mu);const P=p.dir*(p.ori==0?1:-1),K={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:Ol},q=K.stroke;let Q=!1;if(r-s>=O*4){let R=H=>l.posToVal(H,p.key,!0),B=null,F=null,tt,z,jt,wt=b(f[P==1?s:r]),lt=b(f[s]),ct=b(f[r]),J=R(P==1?lt+1:ct-1);for(let H=P==1?s:r;H>=s&&H<=r;H+=P){let Tt=f[H],yt=(P==1?Tt<J:Tt>J)?wt:b(Tt),nt=d[H];yt==wt?nt!=null?(z=nt,B==null?(S(q,yt,D(z)),tt=B=F=z):z<B?B=z:z>F&&(F=z)):nt===null&&(Q=!0):(B!=null&&W(q,wt,D(B),D(F),D(tt),D(z)),nt!=null?(z=nt,S(q,yt,D(z)),B=F=tt=z):(B=F=null,nt===null&&(Q=!0)),wt=yt,J=R(wt+P))}B!=null&&B!=F&&jt!=wt&&W(q,wt,D(B),D(F),D(tt),D(z))}else for(let R=P==1?s:r;R>=s&&R<=r;R+=P){let B=d[R];B===null?Q=!0:B!=null&&S(q,b(f[R]),D(B))}let[T,j]=Qi(l,n);if(c.fill!=null||T!=0){let R=K.fill=new Path2D(q),B=c.fillTo(l,n,c.min,c.max,T),F=D(B),tt=b(f[s]),z=b(f[r]);P==-1&&([z,tt]=[tt,z]),S(R,z,F),S(R,tt,F)}if(!c.spanGaps){let R=[];Q&&R.push(...Xi(f,d,s,r,P,b,t)),K.gaps=R=c.gaps(l,n,s,r,R),K.clip=Pn(R,p.ori,k,A,O,V)}return j!=0&&(K.band=j==2?[Oe(l,n,s,r,q,-1),Oe(l,n,s,r,q,1)]:Oe(l,n,s,r,q,j)),K})}function gu(e){const t=st(e.align,1),l=st(e.ascDesc,!1),n=st(e.alignGaps,0),s=st(e.extend,!1);return(r,c,f,d)=>sl(r,c,(p,y,g,v,k,A,O,V,C,b,D)=>{[f,d]=_n(g,f,d);let S=p.pxRound,{left:W,width:P}=r.bbox,K=lt=>S(A(lt,v,b,V)),q=lt=>S(O(lt,k,D,C)),Q=v.ori==0?Hl:$l;const Y={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:Ol},T=Y.stroke,j=v.dir*(v.ori==0?1:-1);let R=q(g[j==1?f:d]),B=K(y[j==1?f:d]),F=B,tt=B;s&&t==-1&&(tt=W,Q(T,tt,R)),Q(T,B,R);for(let lt=j==1?f:d;lt>=f&&lt<=d;lt+=j){let ct=g[lt];if(ct==null)continue;let J=K(y[lt]),H=q(ct);t==1?Q(T,J,R):Q(T,F,H),Q(T,J,H),R=H,F=J}let z=F;s&&t==1&&(z=W+P,Q(T,z,R));let[jt,wt]=Qi(r,c);if(p.fill!=null||jt!=0){let lt=Y.fill=new Path2D(T),ct=p.fillTo(r,c,p.min,p.max,jt),J=q(ct);Q(lt,z,J),Q(lt,tt,J)}if(!p.spanGaps){let lt=[];lt.push(...Xi(y,g,f,d,j,K,n));let ct=p.width*rt/2,J=l||t==1?ct:-ct,H=l||t==-1?-ct:ct;lt.forEach(Tt=>{Tt[0]+=J,Tt[1]+=H}),Y.gaps=lt=p.gaps(r,c,f,d,lt),Y.clip=Pn(lt,v.ori,V,C,b,D)}return wt!=0&&(Y.band=wt==2?[Oe(r,c,f,d,T,-1),Oe(r,c,f,d,T,1)]:Oe(r,c,f,d,T,wt)),Y})}function _o(e,t,l,n,s,r,c=ft){if(e.length>1){let f=null;for(let d=0,p=1/0;d<e.length;d++)if(t[d]!==void 0){if(f!=null){let y=Lt(e[d]-e[f]);y<p&&(p=y,c=Lt(l(e[d],n,s,r)-l(e[f],n,s,r)))}f=d}}return c}function vu(e){e=e||Xl;const t=st(e.size,[.6,ft,1]),l=e.align||0,n=e.gap||0;let s=e.radius;s=s==null?[0,0]:typeof s=="number"?[s,0]:s;const r=X(s),c=1-t[0],f=st(t[1],ft),d=st(t[2],1),p=st(e.disp,Xl),y=st(e.each,k=>{}),{fill:g,stroke:v}=p;return(k,A,O,V)=>sl(k,A,(C,b,D,S,W,P,K,q,Q,Y,T)=>{let j=C.pxRound,R=l,B=n*rt,F=f*rt,tt=d*rt,z,jt;S.ori==0?[z,jt]=r(k,A):[jt,z]=r(k,A);const wt=S.dir*(S.ori==0?1:-1);let lt=S.ori==0?Rn:ts,ct=S.ori==0?y:(L,dt,Mt,cl,qe,Se,Ue)=>{y(L,dt,Mt,qe,cl,Ue,Se)},J=st(k.bands,Ui).find(L=>L.series[0]==A),H=J!=null?J.dir:0,Tt=C.fillTo(k,A,C.min,C.max,H),Wt=j(K(Tt,W,T,Q)),yt,nt,de,Zt=Y,xt=j(C.width*rt),xe=!1,Le=null,se=null,He=null,ol=null;g!=null&&(xt==0||v!=null)&&(xe=!0,Le=g.values(k,A,O,V),se=new Map,new Set(Le).forEach(L=>{L!=null&&se.set(L,new Path2D)}),xt>0&&(He=v.values(k,A,O,V),ol=new Map,new Set(He).forEach(L=>{L!=null&&ol.set(L,new Path2D)})));let{x0:rl,size:zl}=p;if(rl!=null&&zl!=null){R=1,b=rl.values(k,A,O,V),rl.unit==2&&(b=b.map(Mt=>k.posToVal(q+Mt*Y,S.key,!0)));let L=zl.values(k,A,O,V);zl.unit==2?nt=L[0]*Y:nt=P(L[0],S,Y,q)-P(0,S,Y,q),Zt=_o(b,D,P,S,Y,q,Zt),de=Zt-nt+B}else Zt=_o(b,D,P,S,Y,q,Zt),de=Zt*c+B,nt=Zt-de;de<1&&(de=0),xt>=nt/2&&(xt=0),de<5&&(j=No);let en=de>0,Ge=Zt-de-(en?xt:0);nt=j(Li(Ge,tt,F)),yt=(R==0?nt/2:R==wt?0:nt)-R*wt*((R==0?B/2:0)+(en?xt/2:0));const Bt={stroke:null,fill:null,clip:null,band:null,gaps:null,flags:0},al=xe?null:new Path2D;let Ce=null;if(J!=null)Ce=k.data[J.series[1]];else{let{y0:L,y1:dt}=p;L!=null&&dt!=null&&(D=dt.values(k,A,O,V),Ce=L.values(k,A,O,V))}let Ye=z*nt,U=jt*nt;for(let L=wt==1?O:V;L>=O&&L<=V;L+=wt){let dt=D[L];if(dt==null)continue;if(Ce!=null){let Kt=Ce[L]??0;if(dt-Kt==0)continue;Wt=K(Kt,W,T,Q)}let Mt=S.distr!=2||p!=null?b[L]:L,cl=P(Mt,S,Y,q),qe=K(st(dt,Tt),W,T,Q),Se=j(cl-yt),Ue=j(Ut(qe,Wt)),Qt=j(be(qe,Wt)),oe=Ue-Qt;if(dt!=null){let Kt=dt<0?U:Ye,pe=dt<0?Ye:U;xe?(xt>0&&He[L]!=null&&lt(ol.get(He[L]),Se,Qt+ne(xt/2),nt,Ut(0,oe-xt),Kt,pe),Le[L]!=null&&lt(se.get(Le[L]),Se,Qt+ne(xt/2),nt,Ut(0,oe-xt),Kt,pe)):lt(al,Se,Qt+ne(xt/2),nt,Ut(0,oe-xt),Kt,pe),ct(k,A,L,Se-xt/2,Qt,nt+xt,oe)}}return xt>0?Bt.stroke=xe?ol:al:xe||(Bt._fill=C.width==0?C._fill:C._stroke??C._fill,Bt.width=0),Bt.fill=xe?se:al,Bt})}function wu(e,t){const l=st(t==null?void 0:t.alignGaps,0);return(n,s,r,c)=>sl(n,s,(f,d,p,y,g,v,k,A,O,V,C)=>{[r,c]=_n(p,r,c);let b=f.pxRound,D=z=>b(v(z,y,V,A)),S=z=>b(k(z,g,C,O)),W,P,K;y.ori==0?(W=In,K=Hl,P=pr):(W=On,K=$l,P=mr);const q=y.dir*(y.ori==0?1:-1);let Q=D(d[q==1?r:c]),Y=Q,T=[],j=[];for(let z=q==1?r:c;z>=r&&z<=c;z+=q)if(p[z]!=null){let wt=d[z],lt=D(wt);T.push(Y=lt),j.push(S(p[z]))}const R={stroke:e(T,j,W,K,P,b),fill:null,clip:null,band:null,gaps:null,flags:Ol},B=R.stroke;let[F,tt]=Qi(n,s);if(f.fill!=null||F!=0){let z=R.fill=new Path2D(B),jt=f.fillTo(n,s,f.min,f.max,F),wt=S(jt);K(z,Y,wt),K(z,Q,wt)}if(!f.spanGaps){let z=[];z.push(...Xi(d,p,r,c,q,D,l)),R.gaps=z=f.gaps(n,s,r,c,z),R.clip=Pn(z,y.ori,A,O,V,C)}return tt!=0&&(R.band=tt==2?[Oe(n,s,r,c,B,-1),Oe(n,s,r,c,B,1)]:Oe(n,s,r,c,B,tt)),R})}function yu(e){return wu(bu,e)}function bu(e,t,l,n,s,r){const c=e.length;if(c<2)return null;const f=new Path2D;if(l(f,e[0],t[0]),c==2)n(f,e[1],t[1]);else{let d=Array(c),p=Array(c-1),y=Array(c-1),g=Array(c-1);for(let v=0;v<c-1;v++)y[v]=t[v+1]-t[v],g[v]=e[v+1]-e[v],p[v]=y[v]/g[v];d[0]=p[0];for(let v=1;v<c-1;v++)p[v]===0||p[v-1]===0||p[v-1]>0!=p[v]>0?d[v]=0:(d[v]=3*(g[v-1]+g[v])/((2*g[v]+g[v-1])/p[v-1]+(g[v]+2*g[v-1])/p[v]),isFinite(d[v])||(d[v]=0));d[c-1]=p[c-2];for(let v=0;v<c-1;v++)s(f,e[v]+g[v]/3,t[v]+d[v]*g[v]/3,e[v+1]-g[v]/3,t[v+1]-d[v+1]*g[v]/3,e[v+1],t[v+1])}return f}const Ii=new Set;function Lo(){for(let e of Ii)e.syncRect(!0)}Rl&&(nl(tc,_l,Lo),nl(ec,_l,Lo,!0),nl(En,_l,()=>{Ft.pxRatio=rt}));const xu=wr(),Su=gr();function Co(e,t,l,n){return(n?[e[0],e[1]].concat(e.slice(2)):[e[0]].concat(e.slice(1))).map((r,c)=>Oi(r,c,t,l))}function Eu(e,t){return e.map((l,n)=>n==0?{}:At({},t,l))}function Oi(e,t,l,n){return At({},t==0?l:n,e)}function yr(e,t,l){return t==null?Pl:[t,l]}const ku=yr;function Au(e,t,l){return t==null?Pl:kn(t,l,Yi,!0)}function br(e,t,l,n){return t==null?Pl:Ln(t,l,e.scales[n].log,!1)}const Tu=br;function xr(e,t,l,n){return t==null?Pl:Gi(t,l,e.scales[n].log,!1)}const Mu=xr;function _u(e,t,l,n,s){let r=Ut(ro(e),ro(t)),c=t-e,f=ye(s/n*c,l);do{let d=l[f],p=n*d/c;if(p>=s&&r+(d<5?Be.get(d):0)<=17)return[d,p]}while(++f<l.length);return[0,0]}function Do(e){let t,l;return e=e.replace(/(\d+)px/,(n,s)=>(t=_t((l=+s)*rt))+"px"),[e,t,l]}function Lu(e){e.show&&[e.font,e.labelFont].forEach(t=>{let l=ht(t[2]*rt,1);t[0]=t[0].replace(/[0-9.]+px/,l+"px"),t[1]=l})}function Ft(e,t,l){const n={mode:st(e.mode,1)},s=n.mode;function r(i,o,a,u){let h=o.valToPct(i);return u+a*(o.dir==-1?1-h:h)}function c(i,o,a,u){let h=o.valToPct(i);return u+a*(o.dir==-1?h:1-h)}function f(i,o,a,u){return o.ori==0?r(i,o,a,u):c(i,o,a,u)}n.valToPosH=r,n.valToPosV=c;let d=!1;n.status=0;const p=n.root=fe(Ha);if(e.id!=null&&(p.id=e.id),le(p,e.class),e.title){let i=fe(Va,p);i.textContent=e.title}const y=we("canvas"),g=n.ctx=y.getContext("2d"),v=fe(Fa,p);nl("click",v,i=>{i.target===A&&(pt!=bl||bt!=xl)&&Vt.click(n,i)},!0);const k=n.under=fe(Na,v);v.appendChild(y);const A=n.over=fe(Wa,v);e=Il(e);const O=+st(e.pxAlign,1),V=Mo(O);(e.plugins||[]).forEach(i=>{i.opts&&(e=i.opts(n,e)||e)});const C=e.ms||.001,b=n.series=s==1?Co(e.series||[],bo,Ao,!1):Eu(e.series||[null],ko),D=n.axes=Co(e.axes||[],yo,So,!0),S=n.scales={},W=n.bands=e.bands||[];W.forEach(i=>{i.fill=X(i.fill||null),i.dir=st(i.dir,-1)});const P=s==2?b[1].facets[0].scale:b[0].scale,K={axes:Nr,series:Hr},q=(e.drawOrder||["axes","series"]).map(i=>K[i]);function Q(i){const o=i.distr==3?a=>Ie(a>0?a:i.clamp(n,a,i.min,i.max,i.key)):i.distr==4?a=>pi(a,i.asinh):i.distr==100?a=>i.fwd(a):a=>a;return a=>{let u=o(a),{_min:h,_max:m}=i,w=m-h;return(u-h)/w}}function Y(i){let o=S[i];if(o==null){let a=(e.scales||Xl)[i]||Xl;if(a.from!=null){Y(a.from);let u=At({},S[a.from],a,{key:i});u.valToPct=Q(u),S[i]=u}else{o=S[i]=At({},i==P?cr:fu,a),o.key=i;let u=o.time,h=o.range,m=We(h);if((i!=P||s==2&&!u)&&(m&&(h[0]==null||h[1]==null)&&(h={min:h[0]==null?io:{mode:1,hard:h[0],soft:h[0]},max:h[1]==null?io:{mode:1,hard:h[1],soft:h[1]}},m=!1),!m&&Dn(h))){let w=h;h=(x,E,M)=>E==null?Pl:kn(E,M,w)}o.range=X(h||(u?ku:i==P?o.distr==3?Tu:o.distr==4?Mu:yr:o.distr==3?br:o.distr==4?xr:Au)),o.auto=X(m?!1:o.auto),o.clamp=X(o.clamp||uu),o._min=o._max=null,o.valToPct=Q(o)}}}Y("x"),Y("y"),s==1&&b.forEach(i=>{Y(i.scale)}),D.forEach(i=>{Y(i.scale)});for(let i in e.scales)Y(i);const T=S[P],j=T.distr;let R,B;T.ori==0?(le(p,$a),R=r,B=c):(le(p,za),R=c,B=r);const F={};for(let i in S){let o=S[i];(o.min!=null||o.max!=null)&&(F[i]={min:o.min,max:o.max},o.min=o.max=null)}const tt=e.tzDate||(i=>new Date(_t(i/C))),z=e.fmtDate||ji,jt=C==1?$c(tt):Fc(tt),wt=go(tt,mo(C==1?Hc:Vc,z)),lt=wo(tt,vo(Wc,z)),ct=[],J=n.legend=At({},Yc,e.legend),H=n.cursor=At({},Zc,{drag:{y:s==2}},e.cursor),Tt=J.show,Wt=H.show,yt=J.markers;J.idxs=ct,yt.width=X(yt.width),yt.dash=X(yt.dash),yt.stroke=X(yt.stroke),yt.fill=X(yt.fill);let nt,de,Zt,xt=[],xe=[],Le,se=!1,He={};if(J.live){const i=b[1]?b[1].values:null;se=i!=null,Le=se?i(n,1,0):{_:0};for(let o in Le)He[o]=Wi}if(Tt)if(nt=we("table",ja,p),Zt=we("tbody",null,nt),J.mount(n,nt),se){de=we("thead",null,nt,Zt);let i=we("tr",null,de);we("th",null,i);for(var ol in Le)we("th",Ys,i).textContent=ol}else le(nt,Ja),J.live&&le(nt,Ka);const rl={show:!0},zl={show:!1};function en(i,o){if(o==0&&(se||!J.live||s==2))return Pl;let a=[],u=we("tr",Za,Zt,Zt.childNodes[o]);le(u,i.class),i.show||le(u,ll);let h=we("th",null,u);if(yt.show){let x=fe(Qa,h);if(o>0){let E=yt.width(n,o);E&&(x.style.border=E+"px "+yt.dash(n,o)+" "+yt.stroke(n,o)),x.style.background=yt.fill(n,o)}}let m=fe(Ys,h);i.label instanceof HTMLElement?m.appendChild(i.label):m.textContent=i.label,o>0&&(yt.show||(m.style.color=i.width>0?yt.stroke(n,o):yt.fill(n,o)),Bt("click",h,x=>{if(H._lock)return;Ke(x);let E=b.indexOf(i);if((x.ctrlKey||x.metaKey)!=J.isolate){let M=b.some((_,I)=>I>0&&I!=E&&_.show);b.forEach((_,I)=>{I>0&&ke(I,M?I==E?rl:zl:rl,!0,kt.setSeries)})}else ke(E,{show:!i.show},!0,kt.setSeries)},!1),fl&&Bt(Ks,h,x=>{H._lock||(Ke(x),ke(b.indexOf(i),El,!0,kt.setSeries))},!1));for(var w in Le){let x=we("td",Xa,u);x.textContent="--",a.push(x)}return[u,a]}const Ge=new Map;function Bt(i,o,a,u=!0){const h=Ge.get(o)||{},m=H.bind[i](n,o,a,u);m&&(nl(i,o,h[i]=m),Ge.set(o,h))}function al(i,o,a){const u=Ge.get(o)||{};for(let h in u)(i==null||h==i)&&(_i(h,o,u[h]),delete u[h]);i==null&&Ge.delete(o)}let Ce=0,Ye=0,U=0,L=0,dt=0,Mt=0,cl=dt,qe=Mt,Se=U,Ue=L,Qt=0,oe=0,Kt=0,pe=0;n.bbox={};let Hn=!1,ln=!1,ul=!1,je=!1,nn=!1,re=!1;function $n(i,o,a){(a||i!=n.width||o!=n.height)&&rs(i,o),gl(!1),ul=!0,ln=!0,vl()}function rs(i,o){n.width=Ce=U=i,n.height=Ye=L=o,dt=Mt=0,Lr(),Cr();let a=n.bbox;Qt=a.left=tl(dt*rt,.5),oe=a.top=tl(Mt*rt,.5),Kt=a.width=tl(U*rt,.5),pe=a.height=tl(L*rt,.5)}const Tr=3;function Mr(){let i=!1,o=0;for(;!i;){o++;let a=Vr(o),u=Fr(o);i=o==Tr||a&&u,i||(rs(n.width,n.height),ln=!0)}}function _r({width:i,height:o}){$n(i,o)}n.setSize=_r;function Lr(){let i=!1,o=!1,a=!1,u=!1;D.forEach((h,m)=>{if(h.show&&h._show){let{side:w,_size:x}=h,E=w%2,M=h.label!=null?h.labelSize:0,_=x+M;_>0&&(E?(U-=_,w==3?(dt+=_,u=!0):a=!0):(L-=_,w==0?(Mt+=_,i=!0):o=!0))}}),Je[0]=i,Je[1]=a,Je[2]=o,Je[3]=u,U-=$e[1]+$e[3],dt+=$e[3],L-=$e[2]+$e[0],Mt+=$e[0]}function Cr(){let i=dt+U,o=Mt+L,a=dt,u=Mt;function h(m,w){switch(m){case 1:return i+=w,i-w;case 2:return o+=w,o-w;case 3:return a-=w,a+w;case 0:return u-=w,u+w}}D.forEach((m,w)=>{if(m.show&&m._show){let x=m.side;m._pos=h(x,m._size),m.label!=null&&(m._lpos=h(x,m.labelSize))}})}if(H.dataIdx==null){let i=H.hover,o=i.skip=new Set(i.skip??[]);o.add(void 0);let a=i.prox=X(i.prox),u=i.bias??(i.bias=0);H.dataIdx=(h,m,w,x)=>{if(m==0)return w;let E=w,M=a(h,m,w,x)??ft,_=M>=0&&M<ft,I=T.ori==0?U:L,G=H.left,ot=t[0],it=t[m];if(o.has(it[w])){E=null;let Z=null,N=null,$;if(u==0||u==-1)for($=w;Z==null&&$-- >0;)o.has(it[$])||(Z=$);if(u==0||u==1)for($=w;N==null&&$++<it.length;)o.has(it[$])||(N=$);if(Z!=null||N!=null)if(_){let gt=Z==null?-1/0:R(ot[Z],T,I,0),St=N==null?1/0:R(ot[N],T,I,0),Ht=G-gt,ut=St-G;Ht<=ut?Ht<=M&&(E=Z):ut<=M&&(E=N)}else E=N==null?Z:Z==null?N:w-Z<=N-w?Z:N}else _&&Lt(G-R(ot[w],T,I,0))>M&&(E=null);return E}}const Ke=i=>{H.event=i};H.idxs=ct,H._lock=!1;let Nt=H.points;Nt.show=X(Nt.show),Nt.size=X(Nt.size),Nt.stroke=X(Nt.stroke),Nt.width=X(Nt.width),Nt.fill=X(Nt.fill);const Ee=n.focus=At({},e.focus||{alpha:.3},H.focus),fl=Ee.prox>=0,hl=fl&&Nt.one;let ae=[],dl=[],pl=[];function as(i,o){let a=Nt.show(n,o);if(a instanceof HTMLElement)return le(a,Ua),le(a,i.class),_e(a,-10,-10,U,L),A.insertBefore(a,ae[o]),a}function cs(i,o){if(s==1||o>0){let a=s==1&&S[i.scale].time,u=i.value;i.value=a?uo(u)?wo(tt,vo(u,z)):u||lt:u||ru,i.label=i.label||(a?Xc:Qc)}if(hl||o>0){i.width=i.width==null?1:i.width,i.paths=i.paths||xu||fc,i.fillTo=X(i.fillTo||hu),i.pxAlign=+st(i.pxAlign,O),i.pxRound=Mo(i.pxAlign),i.stroke=X(i.stroke||null),i.fill=X(i.fill||null),i._stroke=i._fill=i._paths=i._focus=null;let a=au(Ut(1,i.width),1),u=i.points=At({},{size:a,width:Ut(1,a*.2),stroke:i.stroke,space:a*2,paths:Su,_stroke:null,_fill:null},i.points);u.show=X(u.show),u.filter=X(u.filter),u.fill=X(u.fill),u.stroke=X(u.stroke),u.paths=X(u.paths),u.pxAlign=i.pxAlign}if(Tt){let a=en(i,o);xt.splice(o,0,a[0]),xe.splice(o,0,a[1]),J.values.push(null)}if(Wt){ct.splice(o,0,null);let a=null;hl?o==0&&(a=as(i,o)):o>0&&(a=as(i,o)),ae.splice(o,0,a),dl.splice(o,0,0),pl.splice(o,0,0)}Rt("addSeries",o)}function Dr(i,o){o=o??b.length,i=s==1?Oi(i,o,bo,Ao):Oi(i,o,{},ko),b.splice(o,0,i),cs(b[o],o)}n.addSeries=Dr;function Pr(i){if(b.splice(i,1),Tt){J.values.splice(i,1),xe.splice(i,1);let o=xt.splice(i,1)[0];al(null,o.firstChild),o.remove()}Wt&&(ct.splice(i,1),ae.splice(i,1)[0].remove(),dl.splice(i,1),pl.splice(i,1)),Rt("delSeries",i)}n.delSeries=Pr;const Je=[!1,!1,!1,!1];function Ir(i,o){if(i._show=i.show,i.show){let a=i.side%2,u=S[i.scale];u==null&&(i.scale=a?b[1].scale:P,u=S[i.scale]);let h=u.time;i.size=X(i.size),i.space=X(i.space),i.rotate=X(i.rotate),We(i.incrs)&&i.incrs.forEach(w=>{!Be.has(w)&&Be.set(w,Go(w))}),i.incrs=X(i.incrs||(u.distr==2?Ic:h?C==1?Rc:zc:el)),i.splits=X(i.splits||(h&&u.distr==1?jt:u.distr==3?Ci:u.distr==4?lu:eu)),i.stroke=X(i.stroke),i.grid.stroke=X(i.grid.stroke),i.ticks.stroke=X(i.ticks.stroke),i.border.stroke=X(i.border.stroke);let m=i.values;i.values=We(m)&&!We(m[0])?X(m):h?We(m)?go(tt,mo(m,z)):uo(m)?Nc(tt,m):m||wt:m||tu,i.filter=X(i.filter||(u.distr>=3&&u.log==10?su:u.distr==3&&u.log==2?ou:Wo)),i.font=Do(i.font),i.labelFont=Do(i.labelFont),i._size=i.size(n,null,o,0),i._space=i._rotate=i._incrs=i._found=i._splits=i._values=null,i._size>0&&(Je[o]=!0,i._el=fe(Ba,v))}}function Vl(i,o,a,u){let[h,m,w,x]=a,E=o%2,M=0;return E==0&&(x||m)&&(M=o==0&&!h||o==2&&!w?_t(yo.size/3):0),E==1&&(h||w)&&(M=o==1&&!m||o==3&&!x?_t(So.size/2):0),M}const us=n.padding=(e.padding||[Vl,Vl,Vl,Vl]).map(i=>X(st(i,Vl))),$e=n._padding=us.map((i,o)=>i(n,o,Je,0));let zt,Dt=null,Pt=null;const sn=s==1?b[0].idxs:null;let me=null,Fl=!1;function fs(i,o){if(t=i??[],n.data=n._data=t,s==2){zt=0;for(let a=1;a<b.length;a++)zt+=t[a][0].length}else{t.length==0&&(n.data=n._data=t=[[]]),me=t[0],zt=me.length;let a=t;if(j==2){a=t.slice();let u=a[0]=Array(zt);for(let h=0;h<zt;h++)u[h]=h}n._data=t=a}if(gl(!0),Rt("setData"),j==2&&(ul=!0),o!==!1){let a=T;a.auto(n,Fl)?zn():Ve(P,a.min,a.max),je=je||H.left>=0,re=!0,vl()}}n.setData=fs;function zn(){Fl=!0;let i,o;s==1&&(zt>0?(Dt=sn[0]=0,Pt=sn[1]=zt-1,i=t[0][Dt],o=t[0][Pt],j==2?(i=Dt,o=Pt):i==o&&(j==3?[i,o]=Ln(i,i,T.log,!1):j==4?[i,o]=Gi(i,i,T.log,!1):T.time?o=i+_t(86400/C):[i,o]=kn(i,o,Yi,!0))):(Dt=sn[0]=i=null,Pt=sn[1]=o=null)),Ve(P,i,o)}let on,ml,Vn,Fn,Nn,Wn,Bn,Gn,Yn,Jt;function hs(i,o,a,u,h,m){i??(i=Us),a??(a=Ui),u??(u="butt"),h??(h=Us),m??(m="round"),i!=on&&(g.strokeStyle=on=i),h!=ml&&(g.fillStyle=ml=h),o!=Vn&&(g.lineWidth=Vn=o),m!=Nn&&(g.lineJoin=Nn=m),u!=Wn&&(g.lineCap=Wn=u),a!=Fn&&g.setLineDash(Fn=a)}function ds(i,o,a,u){o!=ml&&(g.fillStyle=ml=o),i!=Bn&&(g.font=Bn=i),a!=Gn&&(g.textAlign=Gn=a),u!=Yn&&(g.textBaseline=Yn=u)}function qn(i,o,a,u,h=0){if(u.length>0&&i.auto(n,Fl)&&(o==null||o.min==null)){let m=st(Dt,0),w=st(Pt,u.length-1),x=a.min==null?sc(u,m,w,h,i.distr==3):[a.min,a.max];i.min=be(i.min,a.min=x[0]),i.max=Ut(i.max,a.max=x[1])}}const ps={min:null,max:null};function Or(){for(let u in S){let h=S[u];F[u]==null&&(h.min==null||F[P]!=null&&h.auto(n,Fl))&&(F[u]=ps)}for(let u in S){let h=S[u];F[u]==null&&h.from!=null&&F[h.from]!=null&&(F[u]=ps)}F[P]!=null&&gl(!0);let i={};for(let u in F){let h=F[u];if(h!=null){let m=i[u]=Il(S[u],pc);if(h.min!=null)At(m,h);else if(u!=P||s==2)if(zt==0&&m.from==null){let w=m.range(n,null,null,u);m.min=w[0],m.max=w[1]}else m.min=ft,m.max=-ft}}if(zt>0){b.forEach((u,h)=>{if(s==1){let m=u.scale,w=F[m];if(w==null)return;let x=i[m];if(h==0){let E=x.range(n,x.min,x.max,m);x.min=E[0],x.max=E[1],Dt=ye(x.min,t[0]),Pt=ye(x.max,t[0]),Pt-Dt>1&&(t[0][Dt]<x.min&&Dt++,t[0][Pt]>x.max&&Pt--),u.min=me[Dt],u.max=me[Pt]}else u.show&&u.auto&&qn(x,w,u,t[h],u.sorted);u.idxs[0]=Dt,u.idxs[1]=Pt}else if(h>0&&u.show&&u.auto){let[m,w]=u.facets,x=m.scale,E=w.scale,[M,_]=t[h],I=i[x],G=i[E];I!=null&&qn(I,F[x],m,M,m.sorted),G!=null&&qn(G,F[E],w,_,w.sorted),u.min=w.min,u.max=w.max}});for(let u in i){let h=i[u],m=F[u];if(h.from==null&&(m==null||m.min==null)){let w=h.range(n,h.min==ft?null:h.min,h.max==-ft?null:h.max,u);h.min=w[0],h.max=w[1]}}}for(let u in i){let h=i[u];if(h.from!=null){let m=i[h.from];if(m.min==null)h.min=h.max=null;else{let w=h.range(n,m.min,m.max,u);h.min=w[0],h.max=w[1]}}}let o={},a=!1;for(let u in i){let h=i[u],m=S[u];if(m.min!=h.min||m.max!=h.max){m.min=h.min,m.max=h.max;let w=m.distr;m._min=w==3?Ie(m.min):w==4?pi(m.min,m.asinh):w==100?m.fwd(m.min):m.min,m._max=w==3?Ie(m.max):w==4?pi(m.max,m.asinh):w==100?m.fwd(m.max):m.max,o[u]=a=!0}}if(a){b.forEach((u,h)=>{s==2?h>0&&o.y&&(u._paths=null):o[u.scale]&&(u._paths=null)});for(let u in o)ul=!0,Rt("setScale",u);Wt&&H.left>=0&&(je=re=!0)}for(let u in F)F[u]=null}function Rr(i){let o=Li(Dt-1,0,zt-1),a=Li(Pt+1,0,zt-1);for(;i[o]==null&&o>0;)o--;for(;i[a]==null&&a<zt-1;)a++;return[o,a]}function Hr(){if(zt>0){let i=b.some(o=>o._focus)&&Jt!=Ee.alpha;i&&(g.globalAlpha=Jt=Ee.alpha),b.forEach((o,a)=>{if(a>0&&o.show&&(ms(a,!1),ms(a,!0),o._paths==null)){let u=Jt;Jt!=o.alpha&&(g.globalAlpha=Jt=o.alpha);let h=s==2?[0,t[a][0].length-1]:Rr(t[a]);o._paths=o.paths(n,a,h[0],h[1]),Jt!=u&&(g.globalAlpha=Jt=u)}}),b.forEach((o,a)=>{if(a>0&&o.show){let u=Jt;Jt!=o.alpha&&(g.globalAlpha=Jt=o.alpha),o._paths!=null&&gs(a,!1);{let h=o._paths!=null?o._paths.gaps:null,m=o.points.show(n,a,Dt,Pt,h),w=o.points.filter(n,a,m,h);(m||w)&&(o.points._paths=o.points.paths(n,a,Dt,Pt,w),gs(a,!0))}Jt!=u&&(g.globalAlpha=Jt=u),Rt("drawSeries",a)}}),i&&(g.globalAlpha=Jt=1)}}function ms(i,o){let a=o?b[i].points:b[i];a._stroke=a.stroke(n,i),a._fill=a.fill(n,i)}function gs(i,o){let a=o?b[i].points:b[i],{stroke:u,fill:h,clip:m,flags:w,_stroke:x=a._stroke,_fill:E=a._fill,_width:M=a.width}=a._paths;M=ht(M*rt,3);let _=null,I=M%2/2;o&&E==null&&(E=M>0?"#fff":x);let G=a.pxAlign==1&&I>0;if(G&&g.translate(I,I),!o){let ot=Qt-M/2,it=oe-M/2,Z=Kt+M,N=pe+M;_=new Path2D,_.rect(ot,it,Z,N)}o?Un(x,M,a.dash,a.cap,E,u,h,w,m):$r(i,x,M,a.dash,a.cap,E,u,h,w,_,m),G&&g.translate(-I,-I)}function $r(i,o,a,u,h,m,w,x,E,M,_){let I=!1;E!=0&&W.forEach((G,ot)=>{if(G.series[0]==i){let it=b[G.series[1]],Z=t[G.series[1]],N=(it._paths||Xl).band;We(N)&&(N=G.dir==1?N[0]:N[1]);let $,gt=null;it.show&&N&&rc(Z,Dt,Pt)?(gt=G.fill(n,ot)||m,$=it._paths.clip):N=null,Un(o,a,u,h,gt,w,x,E,M,_,$,N),I=!0}}),I||Un(o,a,u,h,m,w,x,E,M,_)}const vs=Ol|Pi;function Un(i,o,a,u,h,m,w,x,E,M,_,I){hs(i,o,a,u,h),(E||M||I)&&(g.save(),E&&g.clip(E),M&&g.clip(M)),I?(x&vs)==vs?(g.clip(I),_&&g.clip(_),an(h,w),rn(i,m,o)):x&Pi?(an(h,w),g.clip(I),rn(i,m,o)):x&Ol&&(g.save(),g.clip(I),_&&g.clip(_),an(h,w),g.restore(),rn(i,m,o)):(an(h,w),rn(i,m,o)),(E||M||I)&&g.restore()}function rn(i,o,a){a>0&&(o instanceof Map?o.forEach((u,h)=>{g.strokeStyle=on=h,g.stroke(u)}):o!=null&&i&&g.stroke(o))}function an(i,o){o instanceof Map?o.forEach((a,u)=>{g.fillStyle=ml=u,g.fill(a)}):o!=null&&i&&g.fill(o)}function zr(i,o,a,u){let h=D[i],m;if(u<=0)m=[0,0];else{let w=h._space=h.space(n,i,o,a,u),x=h._incrs=h.incrs(n,i,o,a,u,w);m=_u(o,a,x,u,w)}return h._found=m}function jn(i,o,a,u,h,m,w,x,E,M){let _=w%2/2;O==1&&g.translate(_,_),hs(x,w,E,M,x),g.beginPath();let I,G,ot,it,Z=h+(u==0||u==3?-m:m);a==0?(G=h,it=Z):(I=h,ot=Z);for(let N=0;N<i.length;N++)o[N]!=null&&(a==0?I=ot=i[N]:G=it=i[N],g.moveTo(I,G),g.lineTo(ot,it));g.stroke(),O==1&&g.translate(-_,-_)}function Vr(i){let o=!0;return D.forEach((a,u)=>{if(!a.show)return;let h=S[a.scale];if(h.min==null){a._show&&(o=!1,a._show=!1,gl(!1));return}else a._show||(o=!1,a._show=!0,gl(!1));let m=a.side,w=m%2,{min:x,max:E}=h,[M,_]=zr(u,x,E,w==0?U:L);if(_==0)return;let I=h.distr==2,G=a._splits=a.splits(n,u,x,E,M,_,I),ot=h.distr==2?G.map($=>me[$]):G,it=h.distr==2?me[G[1]]-me[G[0]]:M,Z=a._values=a.values(n,a.filter(n,ot,u,_,it),u,_,it);a._rotate=m==2?a.rotate(n,Z,u,_):0;let N=a._size;a._size=he(a.size(n,Z,u,i)),N!=null&&a._size!=N&&(o=!1)}),o}function Fr(i){let o=!0;return us.forEach((a,u)=>{let h=a(n,u,Je,i);h!=$e[u]&&(o=!1),$e[u]=h}),o}function Nr(){for(let i=0;i<D.length;i++){let o=D[i];if(!o.show||!o._show)continue;let a=o.side,u=a%2,h,m,w=o.stroke(n,i),x=a==0||a==3?-1:1,[E,M]=o._found;if(o.label!=null){let Yt=o.labelGap*x,ee=_t((o._lpos+Yt)*rt);ds(o.labelFont[0],w,"center",a==2?Ul:qs),g.save(),u==1?(h=m=0,g.translate(ee,_t(oe+pe/2)),g.rotate((a==3?-bn:bn)/2)):(h=_t(Qt+Kt/2),m=ee);let Xe=Fo(o.label)?o.label(n,i,E,M):o.label;g.fillText(Xe,h,m),g.restore()}if(M==0)continue;let _=S[o.scale],I=u==0?Kt:pe,G=u==0?Qt:oe,ot=o._splits,it=_.distr==2?ot.map(Yt=>me[Yt]):ot,Z=_.distr==2?me[ot[1]]-me[ot[0]]:E,N=o.ticks,$=o.border,gt=N.show?N.size:0,St=_t(gt*rt),Ht=_t((o.alignTo==2?o._size-gt-o.gap:o.gap)*rt),ut=o._rotate*-bn/180,Et=V(o._pos*rt),Xt=(St+Ht)*x,Gt=Et+Xt;m=u==0?Gt:0,h=u==1?Gt:0;let ce=o.font[0],ge=o.align==1?Al:o.align==2?fi:ut>0?Al:ut<0?fi:u==0?"center":a==3?fi:Al,Te=ut||u==1?"middle":a==2?Ul:qs;ds(ce,w,ge,Te);let te=o.font[1]*o.lineGap,ue=ot.map(Yt=>V(f(Yt,_,I,G))),ve=o._values;for(let Yt=0;Yt<ve.length;Yt++){let ee=ve[Yt];if(ee!=null){u==0?h=ue[Yt]:m=ue[Yt],ee=""+ee;let Xe=ee.indexOf(`
`)==-1?[ee]:ee.split(/\n/gm);for(let qt=0;qt<Xe.length;qt++){let Hs=Xe[qt];ut?(g.save(),g.translate(h,m+qt*te),g.rotate(ut),g.fillText(Hs,0,0),g.restore()):g.fillText(Hs,h,m+qt*te)}}}N.show&&jn(ue,N.filter(n,it,i,M,Z),u,a,Et,St,ht(N.width*rt,3),N.stroke(n,i),N.dash,N.cap);let Me=o.grid;Me.show&&jn(ue,Me.filter(n,it,i,M,Z),u,u==0?2:1,u==0?oe:Qt,u==0?pe:Kt,ht(Me.width*rt,3),Me.stroke(n,i),Me.dash,Me.cap),$.show&&jn([Et],[1],u==0?1:0,u==0?1:2,u==1?oe:Qt,u==1?pe:Kt,ht($.width*rt,3),$.stroke(n,i),$.dash,$.cap)}Rt("drawAxes")}function gl(i){b.forEach((o,a)=>{a>0&&(o._paths=null,i&&(s==1?(o.min=null,o.max=null):o.facets.forEach(u=>{u.min=null,u.max=null})))})}let cn=!1,Kn=!1,Nl=[];function Wr(){Kn=!1;for(let i=0;i<Nl.length;i++)Rt(...Nl[i]);Nl.length=0}function vl(){cn||(xc(ws),cn=!0)}function Br(i,o=!1){cn=!0,Kn=o,i(n),ws(),o&&Nl.length>0&&queueMicrotask(Wr)}n.batch=Br;function ws(){if(Hn&&(Or(),Hn=!1),ul&&(Mr(),ul=!1),ln){if(vt(k,Al,dt),vt(k,Ul,Mt),vt(k,Kl,U),vt(k,Jl,L),vt(A,Al,dt),vt(A,Ul,Mt),vt(A,Kl,U),vt(A,Jl,L),vt(v,Kl,Ce),vt(v,Jl,Ye),y.width=_t(Ce*rt),y.height=_t(Ye*rt),D.forEach(({_el:i,_show:o,_size:a,_pos:u,side:h})=>{if(i!=null)if(o){let m=h===3||h===0?a:0,w=h%2==1;vt(i,w?"left":"top",u-m),vt(i,w?"width":"height",a),vt(i,w?"top":"left",w?Mt:dt),vt(i,w?"height":"width",w?L:U),Mi(i,ll)}else le(i,ll)}),on=ml=Vn=Nn=Wn=Bn=Gn=Yn=Fn=null,Jt=1,Gl(!0),dt!=cl||Mt!=qe||U!=Se||L!=Ue){gl(!1);let i=U/Se,o=L/Ue;if(Wt&&!je&&H.left>=0){H.left*=i,H.top*=o,wl&&_e(wl,_t(H.left),0,U,L),yl&&_e(yl,0,_t(H.top),U,L);for(let a=0;a<ae.length;a++){let u=ae[a];u!=null&&(dl[a]*=i,pl[a]*=o,_e(u,he(dl[a]),he(pl[a]),U,L))}}if(mt.show&&!nn&&mt.left>=0&&mt.width>0){mt.left*=i,mt.width*=i,mt.top*=o,mt.height*=o;for(let a in ei)vt(Sl,a,mt[a])}cl=dt,qe=Mt,Se=U,Ue=L}Rt("setSize"),ln=!1}Ce>0&&Ye>0&&(g.clearRect(0,0,y.width,y.height),Rt("drawClear"),q.forEach(i=>i()),Rt("draw")),mt.show&&nn&&(un(mt),nn=!1),Wt&&je&&(Qe(null,!0,!1),je=!1),J.show&&J.live&&re&&(Xn(),re=!1),d||(d=!0,n.status=1,Rt("ready")),Fl=!1,cn=!1}n.redraw=(i,o)=>{ul=o||!1,i!==!1?Ve(P,T.min,T.max):vl()};function Jn(i,o){let a=S[i];if(a.from==null){if(zt==0){let u=a.range(n,o.min,o.max,i);o.min=u[0],o.max=u[1]}if(o.min>o.max){let u=o.min;o.min=o.max,o.max=u}if(zt>1&&o.min!=null&&o.max!=null&&o.max-o.min<1e-16)return;i==P&&a.distr==2&&zt>0&&(o.min=ye(o.min,t[0]),o.max=ye(o.max,t[0]),o.min==o.max&&o.max++),F[i]=o,Hn=!0,vl()}}n.setScale=Jn;let Zn,Qn,wl,yl,ys,bs,bl,xl,xs,Ss,pt,bt,ze=!1;const Vt=H.drag;let It=Vt.x,Ot=Vt.y;Wt&&(H.x&&(Zn=fe(Ya,A)),H.y&&(Qn=fe(qa,A)),T.ori==0?(wl=Zn,yl=Qn):(wl=Qn,yl=Zn),pt=H.left,bt=H.top);const mt=n.select=At({show:!0,over:!0,left:0,width:0,top:0,height:0},e.select),Sl=mt.show?fe(Ga,mt.over?A:k):null;function un(i,o){if(mt.show){for(let a in i)mt[a]=i[a],a in ei&&vt(Sl,a,i[a]);o!==!1&&Rt("setSelect")}}n.setSelect=un;function Gr(i){if(b[i].show)Tt&&Mi(xt[i],ll);else if(Tt&&le(xt[i],ll),Wt){let a=hl?ae[0]:ae[i];a!=null&&_e(a,-10,-10,U,L)}}function Ve(i,o,a){Jn(i,{min:o,max:a})}function ke(i,o,a,u){o.focus!=null&&Kr(i),o.show!=null&&b.forEach((h,m)=>{m>0&&(i==m||i==null)&&(h.show=o.show,Gr(m),s==2?(Ve(h.facets[0].scale,null,null),Ve(h.facets[1].scale,null,null)):Ve(h.scale,null,null),vl())}),a!==!1&&Rt("setSeries",i,o),u&&Yl("setSeries",n,i,o)}n.setSeries=ke;function Yr(i,o){At(W[i],o)}function qr(i,o){i.fill=X(i.fill||null),i.dir=st(i.dir,-1),o=o??W.length,W.splice(o,0,i)}function Ur(i){i==null?W.length=0:W.splice(i,1)}n.addBand=qr,n.setBand=Yr,n.delBand=Ur;function jr(i,o){b[i].alpha=o,Wt&&ae[i]!=null&&(ae[i].style.opacity=o),Tt&&xt[i]&&(xt[i].style.opacity=o)}let De,Fe,Ze;const El={focus:!0};function Kr(i){if(i!=Ze){let o=i==null,a=Ee.alpha!=1;b.forEach((u,h)=>{if(s==1||h>0){let m=o||h==0||h==i;u._focus=o?null:m,a&&jr(h,m?1:Ee.alpha)}}),Ze=i,a&&vl()}}Tt&&fl&&Bt(Js,nt,i=>{H._lock||(Ke(i),Ze!=null&&ke(null,El,!0,kt.setSeries))});function Ae(i,o,a){let u=S[o];a&&(i=i/rt-(u.ori==1?Mt:dt));let h=U;u.ori==1&&(h=L,i=h-i),u.dir==-1&&(i=h-i);let m=u._min,w=u._max,x=i/h,E=m+(w-m)*x,M=u.distr;return M==3?Dl(10,E):M==4?cc(E,u.asinh):M==100?u.bwd(E):E}function Jr(i,o){let a=Ae(i,P,o);return ye(a,t[0],Dt,Pt)}n.valToIdx=i=>ye(i,t[0]),n.posToIdx=Jr,n.posToVal=Ae,n.valToPos=(i,o,a)=>S[o].ori==0?r(i,S[o],a?Kt:U,a?Qt:0):c(i,S[o],a?pe:L,a?oe:0),n.setCursor=(i,o,a)=>{pt=i.left,bt=i.top,Qe(null,o,a)};function Es(i,o){vt(Sl,Al,mt.left=i),vt(Sl,Kl,mt.width=o)}function ks(i,o){vt(Sl,Ul,mt.top=i),vt(Sl,Jl,mt.height=o)}let Wl=T.ori==0?Es:ks,Bl=T.ori==1?Es:ks;function Zr(){if(Tt&&J.live)for(let i=s==2?1:0;i<b.length;i++){if(i==0&&se)continue;let o=J.values[i],a=0;for(let u in o)xe[i][a++].firstChild.nodeValue=o[u]}}function Xn(i,o){if(i!=null&&(i.idxs?i.idxs.forEach((a,u)=>{ct[u]=a}):dc(i.idx)||ct.fill(i.idx),J.idx=ct[0]),Tt&&J.live){for(let a=0;a<b.length;a++)(a>0||s==1&&!se)&&Qr(a,ct[a]);Zr()}re=!1,o!==!1&&Rt("setLegend")}n.setLegend=Xn;function Qr(i,o){let a=b[i],u=i==0&&j==2?me:t[i],h;se?h=a.values(n,i,o)??He:(h=a.value(n,o==null?null:u[o],i,o),h=h==null?He:{_:h}),J.values[i]=h}function Qe(i,o,a){xs=pt,Ss=bt,[pt,bt]=H.move(n,pt,bt),H.left=pt,H.top=bt,Wt&&(wl&&_e(wl,_t(pt),0,U,L),yl&&_e(yl,0,_t(bt),U,L));let u,h=Dt>Pt;De=ft,Fe=null;let m=T.ori==0?U:L,w=T.ori==1?U:L;if(pt<0||zt==0||h){u=H.idx=null;for(let x=0;x<b.length;x++){let E=ae[x];E!=null&&_e(E,-10,-10,U,L)}fl&&ke(null,El,!0,i==null&&kt.setSeries),J.live&&(ct.fill(u),re=!0)}else{let x,E,M;s==1&&(x=T.ori==0?pt:bt,E=Ae(x,P),u=H.idx=ye(E,t[0],Dt,Pt),M=R(t[0][u],T,m,0));let _=-10,I=-10,G=0,ot=0,it=!0,Z="",N="";for(let $=s==2?1:0;$<b.length;$++){let gt=b[$],St=ct[$],Ht=St==null?null:s==1?t[$][St]:t[$][1][St],ut=H.dataIdx(n,$,u,E),Et=ut==null?null:s==1?t[$][ut]:t[$][1][ut];if(re=re||Et!=Ht||ut!=St,ct[$]=ut,$>0&&gt.show){let Xt=ut==null?-10:ut==u?M:R(s==1?t[0][ut]:t[$][0][ut],T,m,0),Gt=Et==null?-10:B(Et,s==1?S[gt.scale]:S[gt.facets[1].scale],w,0);if(fl&&Et!=null){let ce=T.ori==1?pt:bt,ge=Lt(Ee.dist(n,$,ut,Gt,ce));if(ge<De){let Te=Ee.bias;if(Te!=0){let te=Ae(ce,gt.scale),ue=Et>=0?1:-1,ve=te>=0?1:-1;ve==ue&&(ve==1?Te==1?Et>=te:Et<=te:Te==1?Et<=te:Et>=te)&&(De=ge,Fe=$)}else De=ge,Fe=$}}if(re||hl){let ce,ge;T.ori==0?(ce=Xt,ge=Gt):(ce=Gt,ge=Xt);let Te,te,ue,ve,Me,Yt,ee=!0,Xe=Nt.bbox;if(Xe!=null){ee=!1;let qt=Xe(n,$);ue=qt.left,ve=qt.top,Te=qt.width,te=qt.height}else ue=ce,ve=ge,Te=te=Nt.size(n,$);if(Yt=Nt.fill(n,$),Me=Nt.stroke(n,$),hl)$==Fe&&De<=Ee.prox&&(_=ue,I=ve,G=Te,ot=te,it=ee,Z=Yt,N=Me);else{let qt=ae[$];qt!=null&&(dl[$]=ue,pl[$]=ve,no(qt,Te,te,ee),eo(qt,Yt,Me),_e(qt,he(ue),he(ve),U,L))}}}}if(hl){let $=Ee.prox,gt=Ze==null?De<=$:De>$||Fe!=Ze;if(re||gt){let St=ae[0];St!=null&&(dl[0]=_,pl[0]=I,no(St,G,ot,it),eo(St,Z,N),_e(St,he(_),he(I),U,L))}}}if(mt.show&&ze)if(i!=null){let[x,E]=kt.scales,[M,_]=kt.match,[I,G]=i.cursor.sync.scales,ot=i.cursor.drag;if(It=ot._x,Ot=ot._y,It||Ot){let{left:it,top:Z,width:N,height:$}=i.select,gt=i.scales[I].ori,St=i.posToVal,Ht,ut,Et,Xt,Gt,ce=x!=null&&M(x,I),ge=E!=null&&_(E,G);ce&&It?(gt==0?(Ht=it,ut=N):(Ht=Z,ut=$),Et=S[x],Xt=R(St(Ht,I),Et,m,0),Gt=R(St(Ht+ut,I),Et,m,0),Wl(be(Xt,Gt),Lt(Gt-Xt))):Wl(0,m),ge&&Ot?(gt==1?(Ht=it,ut=N):(Ht=Z,ut=$),Et=S[E],Xt=B(St(Ht,G),Et,w,0),Gt=B(St(Ht+ut,G),Et,w,0),Bl(be(Xt,Gt),Lt(Gt-Xt))):Bl(0,w)}else li()}else{let x=Lt(xs-ys),E=Lt(Ss-bs);if(T.ori==1){let G=x;x=E,E=G}It=Vt.x&&x>=Vt.dist,Ot=Vt.y&&E>=Vt.dist;let M=Vt.uni;M!=null?It&&Ot&&(It=x>=M,Ot=E>=M,!It&&!Ot&&(E>x?Ot=!0:It=!0)):Vt.x&&Vt.y&&(It||Ot)&&(It=Ot=!0);let _,I;It&&(T.ori==0?(_=bl,I=pt):(_=xl,I=bt),Wl(be(_,I),Lt(I-_)),Ot||Bl(0,w)),Ot&&(T.ori==1?(_=bl,I=pt):(_=xl,I=bt),Bl(be(_,I),Lt(I-_)),It||Wl(0,m)),!It&&!Ot&&(Wl(0,0),Bl(0,0))}if(Vt._x=It,Vt._y=Ot,i==null){if(a){if(Rs!=null){let[x,E]=kt.scales;kt.values[0]=x!=null?Ae(T.ori==0?pt:bt,x):null,kt.values[1]=E!=null?Ae(T.ori==1?pt:bt,E):null}Yl(hi,n,pt,bt,U,L,u)}if(fl){let x=a&&kt.setSeries,E=Ee.prox;Ze==null?De<=E&&ke(Fe,El,!0,x):De>E?ke(null,El,!0,x):Fe!=Ze&&ke(Fe,El,!0,x)}}re&&(J.idx=u,Xn()),o!==!1&&Rt("setCursor")}let Ne=null;Object.defineProperty(n,"rect",{get(){return Ne==null&&Gl(!1),Ne}});function Gl(i=!1){i?Ne=null:(Ne=A.getBoundingClientRect(),Rt("syncRect",Ne))}function As(i,o,a,u,h,m,w){H._lock||ze&&i!=null&&i.movementX==0&&i.movementY==0||(ti(i,o,a,u,h,m,w,!1,i!=null),i!=null?Qe(null,!0,!0):Qe(o,!0,!1))}function ti(i,o,a,u,h,m,w,x,E){if(Ne==null&&Gl(!1),Ke(i),i!=null)a=i.clientX-Ne.left,u=i.clientY-Ne.top;else{if(a<0||u<0){pt=-10,bt=-10;return}let[M,_]=kt.scales,I=o.cursor.sync,[G,ot]=I.values,[it,Z]=I.scales,[N,$]=kt.match,gt=o.axes[0].side%2==1,St=T.ori==0?U:L,Ht=T.ori==1?U:L,ut=gt?m:h,Et=gt?h:m,Xt=gt?u:a,Gt=gt?a:u;if(it!=null?a=N(M,it)?f(G,S[M],St,0):-10:a=St*(Xt/ut),Z!=null?u=$(_,Z)?f(ot,S[_],Ht,0):-10:u=Ht*(Gt/Et),T.ori==1){let ce=a;a=u,u=ce}}E&&(o==null||o.cursor.event.type==hi)&&((a<=1||a>=U-1)&&(a=tl(a,U)),(u<=1||u>=L-1)&&(u=tl(u,L))),x?(ys=a,bs=u,[bl,xl]=H.move(n,a,u)):(pt=a,bt=u)}const ei={width:0,height:0,left:0,top:0};function li(){un(ei,!1)}let Ts,Ms,_s,Ls;function Cs(i,o,a,u,h,m,w){ze=!0,It=Ot=Vt._x=Vt._y=!1,ti(i,o,a,u,h,m,w,!0,!1),i!=null&&(Bt(di,Ai,Ds,!1),Yl(js,n,bl,xl,U,L,null));let{left:x,top:E,width:M,height:_}=mt;Ts=x,Ms=E,_s=M,Ls=_}function Ds(i,o,a,u,h,m,w){ze=Vt._x=Vt._y=!1,ti(i,o,a,u,h,m,w,!1,!0);let{left:x,top:E,width:M,height:_}=mt,I=M>0||_>0,G=Ts!=x||Ms!=E||_s!=M||Ls!=_;if(I&&G&&un(mt),Vt.setScale&&I&&G){let ot=x,it=M,Z=E,N=_;if(T.ori==1&&(ot=E,it=_,Z=x,N=M),It&&Ve(P,Ae(ot,P),Ae(ot+it,P)),Ot)for(let $ in S){let gt=S[$];$!=P&&gt.from==null&&gt.min!=ft&&Ve($,Ae(Z+N,$),Ae(Z,$))}li()}else H.lock&&(H._lock=!H._lock,Qe(o,!0,i!=null));i!=null&&(al(di,Ai),Yl(di,n,pt,bt,U,L,null))}function Xr(i,o,a,u,h,m,w){if(H._lock)return;Ke(i);let x=ze;if(ze){let E=!0,M=!0,_=10,I,G;T.ori==0?(I=It,G=Ot):(I=Ot,G=It),I&&G&&(E=pt<=_||pt>=U-_,M=bt<=_||bt>=L-_),I&&E&&(pt=pt<bl?0:U),G&&M&&(bt=bt<xl?0:L),Qe(null,!0,!0),ze=!1}pt=-10,bt=-10,ct.fill(null),Qe(null,!0,!0),x&&(ze=x)}function Ps(i,o,a,u,h,m,w){H._lock||(Ke(i),zn(),li(),i!=null&&Yl(Zs,n,pt,bt,U,L,null))}function Is(){D.forEach(Lu),$n(n.width,n.height,!0)}nl(En,_l,Is);const kl={};kl.mousedown=Cs,kl.mousemove=As,kl.mouseup=Ds,kl.dblclick=Ps,kl.setSeries=(i,o,a,u)=>{let h=kt.match[2];a=h(n,o,a),a!=-1&&ke(a,u,!0,!1)},Wt&&(Bt(js,A,Cs),Bt(hi,A,As),Bt(Ks,A,i=>{Ke(i),Gl(!1)}),Bt(Js,A,Xr),Bt(Zs,A,Ps),Ii.add(n),n.syncRect=Gl);const fn=n.hooks=e.hooks||{};function Rt(i,o,a){Kn?Nl.push([i,o,a]):i in fn&&fn[i].forEach(u=>{u.call(null,n,o,a)})}(e.plugins||[]).forEach(i=>{for(let o in i.hooks)fn[o]=(fn[o]||[]).concat(i.hooks[o])});const Os=(i,o,a)=>a,kt=At({key:null,setSeries:!1,filters:{pub:ao,sub:ao},scales:[P,b[1]?b[1].scale:null],match:[co,co,Os],values:[null,null]},H.sync);kt.match.length==2&&kt.match.push(Os),H.sync=kt;const Rs=kt.key,ni=ur(Rs);function Yl(i,o,a,u,h,m,w){kt.filters.pub(i,o,a,u,h,m,w)&&ni.pub(i,o,a,u,h,m,w)}ni.sub(n);function ta(i,o,a,u,h,m,w){kt.filters.sub(i,o,a,u,h,m,w)&&kl[i](null,o,a,u,h,m,w)}n.pub=ta;function ea(){ni.unsub(n),Ii.delete(n),Ge.clear(),_i(En,_l,Is),p.remove(),nt==null||nt.remove(),Rt("destroy")}n.destroy=ea;function ii(){Rt("init",e,t),fs(t||e.data,!1),F[P]?Jn(P,F[P]):zn(),nn=mt.show&&(mt.width>0||mt.height>0),je=re=!0,$n(e.width,e.height)}return b.forEach(cs),D.forEach(Ir),l?l instanceof HTMLElement?(l.appendChild(p),ii()):l(n,ii):ii(),n}Ft.assign=At;Ft.fmtNum=qi;Ft.rangeNum=kn;Ft.rangeLog=Ln;Ft.rangeAsinh=Gi;Ft.orient=sl;Ft.pxRatio=rt;Ft.join=bc;Ft.fmtDate=ji,Ft.tzDate=Dc;Ft.sync=ur;{Ft.addGap=du,Ft.clipGaps=Pn;let e=Ft.paths={points:gr};e.linear=wr,e.stepped=gu,e.bars=vu,e.spline=yu}const ss=class ss extends Re{getSize(){return{width:this.chartTarget.offsetWidth,height:this.chartTarget.offsetHeight}}connect(){this.tableTarget.hidden=!0,this.chartTarget.hidden=!1,this.axisTarget.hidden=!1,this.observer=new ResizeObserver(()=>{var r;(r=this.uplot)==null||r.setSize(this.getSize())}),this.observer.observe(this.chartTarget);const t=getComputedStyle(document.documentElement),l={...this.getSize(),padding:[1,1,1,1],series:[{},{stroke:t.getPropertyValue("--color-stroke"),width:2,points:{show:!1}},{stroke:t.getPropertyValue("--color-accent"),width:2,points:{show:!1}}],cursor:{y:!1},axes:[{show:!1},{show:!1}],scales:{y:{range:(r,c,f)=>[c,f]}},select:{show:!1},legend:{show:!1},hooks:{init:[r=>{r.over.addEventListener("mouseenter",()=>{this.summaryTarget.hidden=!0,this.legendTarget.hidden=!1}),r.over.addEventListener("mouseleave",()=>{this.summaryTarget.hidden=!1,this.legendTarget.hidden=!0})}],setCursor:[r=>{const{idx:c}=r.cursor;this.legendAmountTarget.textContent=typeof c=="number"?Ft.fmtNum(r.data[2][c]||0):"",this.legendPeriodTarget.textContent=typeof c=="number"?n[c].textContent:""}]}},n=Array.from(this.tableTarget.querySelectorAll("thead th")).slice(1),s=[n.map(r=>Number(r.dataset.timestamp)),...Array.from(this.tableTarget.querySelectorAll("tbody tr")).reverse().map(r=>Array.from(r.querySelectorAll("td")).map(c=>Number(c.textContent)))];this.uplot=new Ft(l,s,this.chartTarget)}disconnect(){var t,l;(t=this.observer)==null||t.disconnect(),(l=this.uplot)==null||l.destroy()}};ss.targets=["table","chart","summary","legend","legendAmount","legendPeriod","axis"];let Ri=ss;class Cu extends Re{constructor(){super(...arguments),this.mouseover=t=>{const l=t.target;if(l.closest("thead th")){const n=Array.from(l.parentElement.children).indexOf(l);this.element.querySelector("colgroup").children[n].classList.add("is-highlighted"),this.element.style.cursor="pointer"}l.closest("tbody th")&&(l.closest("tr").classList.add("is-highlighted"),this.element.style.cursor="pointer")},this.reset=()=>{this.element.querySelectorAll("col, tr").forEach(t=>t.classList.remove("is-highlighted")),this.element.style.cursor=""},this.click=t=>{var n,s;const l=t.target;if(l.closest("thead th")){const r=Array.from(l.parentElement.children).indexOf(l),c=Array.from(this.element.querySelectorAll(`tbody tr td:nth-child(${r+1}) input[type="checkbox"]`)).filter(d=>{var p;return!((p=this.disabled)!=null&&p.includes(d))}),f=!((n=c.find(d=>!d.disabled&&d.getAttribute("aria-disabled")!=="true"))!=null&&n.checked);c.forEach(d=>d.checked=f)}if(l.closest("tbody th")){const r=Array.from(l.closest("tr").querySelectorAll('td input[type="checkbox"]')).filter(f=>{var d;return!((d=this.disabled)!=null&&d.includes(f))}),c=!((s=r.find(f=>!f.disabled&&f.getAttribute("aria-disabled")!=="true"))!=null&&s.checked);r.forEach(f=>f.checked=c)}this.update()}}connect(){this.disabled=Array.from(this.element.querySelectorAll("input:disabled")),this.update(),this.element.addEventListener("click",this.click),this.element.addEventListener("mouseover",this.mouseover),this.element.addEventListener("mouseout",this.reset)}disconnect(){this.element.removeEventListener("click",this.click),this.element.removeEventListener("mouseover",this.mouseover),this.element.removeEventListener("mouseout",this.reset)}update(){this.element.querySelectorAll('tbody td input[type="checkbox"]').forEach(t=>{var l;(l=this.disabled)!=null&&l.includes(t)||(t.disabled=!1)}),this.element.querySelectorAll("[data-implied-by], [data-depends-on]").forEach(t=>{var l,n;(l=t.dataset.impliedBy)==null||l.trim().split(/\s+/).filter(Boolean).forEach(s=>{const r=document.querySelector(`[name="${s}"]:last-of-type`);r&&r.checked&&(t.checked=!0,t.disabled=!0)}),(n=t.dataset.dependsOn)==null||n.trim().split(/\s+/).filter(Boolean).forEach(s=>{const r=document.querySelector(`[name="${s}"]:last-of-type`);r&&!r.checked&&(t.checked=!1,t.disabled=!0)})})}}const os=class os extends Re{constructor(){super(...arguments),this.locked=!1}updateName(t){const l=t.target;this.locked||(this.slugTarget.value=ia(l.value),this.mirror())}updateSlug(t){const l=t.target;this.mirror(),this.locked=!!l.value}mirror(){this.mirrorTargets.forEach(t=>{t.textContent=this.slugTarget.value})}};os.targets=["slug","mirror"];let Hi=os;var Du=Object.defineProperty,Pu=(e,t,l)=>t in e?Du(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,et=(e,t,l)=>(Pu(e,typeof t!="symbol"?t+"":t,l),l);function Po(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Ll(e){return new DOMPoint(e.left+e.width/2,e.top+e.height/2)}const Iu=(e,t)=>{var l;const n=Array.from(t.entries()),s=Ll(e);return n.sort(([,r],[,c])=>Po(s,Ll(r))-Po(s,Ll(c))),(l=n[0])==null?void 0:l[0]};class Tn{constructor(t){et(this,"listeners",[]),et(this,"removeAll",()=>{this.listeners.forEach(l=>{var n;return(n=this.target)==null?void 0:n.removeEventListener(...l)})}),this.target=t}add(t,l,n){var s;(s=this.target)==null||s.addEventListener(t,l,n),this.listeners.push([t,l,n])}}function Sr(e){return/auto|scroll/.test(getComputedStyle(e).overflow)||e===document.scrollingElement}function Ou(e){let t=e;const l=[];for(;t=t.parentElement;)!Sr(t)||l.push(t);return l}function Er(e){return e===document.documentElement?new DOMRect(0,0,window.innerWidth,window.innerHeight):e.getBoundingClientRect()}const Io=.2,wn=20;class kr{constructor(){et(this,"scrollInterval"),et(this,"scrollAmounts",new Map),et(this,"documentListeners",new Tn(document)),et(this,"onPointerMove",(t,l)=>{l.preventDefault(),t.onMove(new DOMPoint(l.clientX,l.clientY),!0),this.scrollAmounts.clear(),document.elementsFromPoint(l.clientX,l.clientY).forEach(n=>{if(!Sr(n))return;const s=Er(n),r=Io*s.width,c=Io*s.height;let f=0,d=0;l.clientX>s.right-r?f=(l.clientX-s.right+r)/r*wn:l.clientX<s.left+r&&(f=(l.clientX-s.left-r)/r*wn),l.clientY>s.bottom-c?d=(l.clientY-s.bottom+c)/c*wn:l.clientY<s.top+c&&(d=(l.clientY-s.top-c)/c*wn),(f!==0||d!==0)&&this.scrollAmounts.set(n,[f,d])}),this.scrollAmounts.size?this.scrollInterval||(this.scrollInterval=window.setInterval(()=>{this.scrollAmounts.forEach(([n,s],r)=>r.scrollBy(n,s))},1e3/60)):this.clearScrollInterval()}),et(this,"onPointerUp",(t,l)=>{l.preventDefault(),t.onDrop()})}attach(t,l){const n=s=>{if(s.button!==0)return;const r=l(new DOMPoint(s.clientX,s.clientY));!r||(s.preventDefault(),this.documentListeners.add("pointermove",this.onPointerMove.bind(this,r)),this.documentListeners.add("pointerup",this.onPointerUp.bind(this,r)))};return t.addEventListener("pointerdown",n),t.style.touchAction="none",()=>{t.removeEventListener("pointerdown",n),t.style.touchAction=""}}deactivate(){this.clearScrollInterval(),this.documentListeners.removeAll()}destroy(){}clearScrollInterval(){clearInterval(this.scrollInterval),this.scrollInterval=void 0}}class Ru{constructor(t){et(this,"originalAttributes",new Map),this.target=t}set(t,l){this.saveOriginal(t),this.target.setAttribute(t,l)}add(t,l){this.target.hasAttribute(t)||this.set(t,l)}remove(t){this.saveOriginal(t),this.target.removeAttribute(t)}saveOriginal(t){this.originalAttributes.has(t)||this.originalAttributes.set(t,this.target.getAttribute(t))}revertAll(){for(let[t,l]of this.originalAttributes)l===null?this.target.removeAttribute(t):this.target.setAttribute(t,l);this.originalAttributes.clear()}}const Hu={instructions:"To pick up a sortable item, press space or enter. While dragging, use the arrow keys to move the item. Press space or enter again to drop the item in its new position, or press escape to cancel."};let $u=0;class Ar{constructor(t={}){et(this,"options"),et(this,"instructionsElement"),et(this,"documentListeners",new Tn(document)),this.options=Object.assign({},Hu,t),this.instructionsElement=this.createInstructionsElement()}attach(t,l){const n=r=>{if(!["Enter","Space"].includes(r.code))return;const c=l();!c||(r.preventDefault(),setTimeout(()=>this.documentListeners.add("keydown",this.onKeyDown.bind(this,c))))},s=new Ru(t);return s.add("tabindex","0"),s.add("role","button"),s.add("aria-roledescription","sortable"),this.instructionsElement&&s.add("aria-describedby",this.instructionsElement.id),t.addEventListener("keydown",n),()=>{s.revertAll(),t.removeEventListener("keydown",n)}}deactivate(){this.documentListeners.removeAll()}destroy(){var t;(t=this.instructionsElement)==null||t.remove()}onKeyDown(t,l){if(["Enter","Space"].includes(l.code)){l.preventDefault(),t.onDrop(),t.activator.focus();return}if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(l.code)){l.preventDefault();const{options:{collisionDetection:n,strategy:s},rects:r,itemsByContainer:c,pointer:f,position:d,activeItem:p,onMove:y,container:g}=t,v=new Map;for(let[C,b]of c)for(let D of b.size?b:[C]){const S=r.get(D);(l.key==="ArrowUp"&&S.bottom<f.y||l.key==="ArrowDown"&&S.top>f.y||l.key==="ArrowLeft"&&S.right<f.x||l.key==="ArrowRight"&&S.left>f.x)&&v.set(D,S)}const k=n(d,v);if(!k)return;y(Ll(r.get(k)));let A=Ll(r.get(p));for(let[,C]of c){if(!C.has(p))continue;const b=Array.from(C),D=b.indexOf(p);let S=b.indexOf(k);l.key==="ArrowUp"&&g!==t.container&&S++;const W=s({rects:b.map(P=>r.get(P)),activeIndex:D,overIndex:S===-1?D:S,index:D});A.x+=(W==null?void 0:W.x)||0,A.y+=(W==null?void 0:W.y)||0}let O=0,V=0;for(let C of Ou(p)){const b=Er(C),D=Math.min(C.scrollWidth-C.clientWidth-C.scrollLeft,Math.max(-C.scrollLeft,A.x-b.x-b.width/2)),S=Math.min(C.scrollHeight-C.clientHeight-C.scrollTop,Math.max(-C.scrollTop,A.y-b.y-b.height/2));C.scrollBy({left:D,top:S,behavior:"smooth"}),O+=D,V+=S}y(new DOMPoint(A.x-O,A.y-V))}}createInstructionsElement(){if(!this.options.instructions)return;const t=document.createElement("div");return t.id="SortableInstructions-"+$u++,t.style.display="none",t.textContent=this.options.instructions,document.body.appendChild(t),t}}function zu(e){let t=e.getBoundingClientRect();const{transform:l,transformOrigin:n}=window.getComputedStyle(e);return l&&(t=Vu(t,l,n)),t}function Vu(e,t,l){const n=Fu(t);if(!n)return e;const{scaleX:s,scaleY:r,x:c,y:f}=n,d=e.left-c-(1-s)*parseFloat(l),p=e.top-f-(1-r)*parseFloat(l.slice(l.indexOf(" ")+1)),y=s?e.width/s:e.width,g=r?e.height/r:e.height;return new DOMRect(d,p,y,g)}function Fu(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}class Nu{constructor(t,l,n,s,r,c){et(this,"overItem"),et(this,"overlay"),et(this,"pointer",new DOMPoint(0,0)),et(this,"pointerOffset",new DOMPoint(0,0)),et(this,"position"),et(this,"itemsByContainer"),et(this,"rects",new Map),et(this,"originalContainer"),et(this,"originalIndex",-1),et(this,"documentListeners",new Tn(document)),et(this,"windowListeners",new Tn(window)),et(this,"onMove",(f,d)=>{this.pointer=f,this.position.x=f.x+this.pointerOffset.x,this.position.y=f.y+this.pointerOffset.y;const p=new CustomEvent("dragmove",{detail:this});this.instance.dispatchEvent(p),this.updateOverlay(d);let y=new Map;this.itemsByContainer.forEach((v,k)=>{const A=this.rects.get(k);f.x>A.left&&f.x<A.right&&f.y>A.top&&f.y<A.bottom&&(v.size?v.forEach(O=>y.set(O,this.rects.get(O))):y.set(k,this.rects.get(k)))}),y.size||(y=this.rects);const g=this.options.collisionDetection(this.position,y);if(g!==this.overItem){const v=new CustomEvent("dragover",{cancelable:!0,detail:{...this,overItem:g}});if(this.instance.dispatchEvent(v),v.defaultPrevented)return;this.overItem=g}this.itemsByContainer.forEach((v,k)=>{v.has(this.activeItem)&&!k.contains(g)?v.delete(this.activeItem):k.contains(g)&&!v.has(this.activeItem)&&(v.add(this.activeItem),k.appendChild(this.activeItem),this.updateRects())}),this.instance.announce(this.instance.options.announcements.onDragOver(this)),this.itemsByContainer.forEach(v=>{const k=Array.from(v),A=k.indexOf(this.activeItem),O=k.indexOf(g),V=k.map(C=>this.rects.get(C));k.forEach((C,b)=>{if(C.style.transform="none",O===-1)return;const D=this.options.strategy({rects:V,activeIndex:A,overIndex:O,index:b});if(!D)return;const S=Math.round(D.x),W=Math.round(D.y);C.style.transform=`translate(${S}px, ${W}px)`})})}),et(this,"onDrop",()=>{const{activeItem:f,overItem:d}=this;if(f&&d){const p=new CustomEvent("drop",{cancelable:!0,detail:this});this.instance.dispatchEvent(p),p.defaultPrevented||(this.instance.containers.has(d)?d.appendChild(f):f.compareDocumentPosition(d)===Node.DOCUMENT_POSITION_PRECEDING?d.before(f):d.after(f),this.instance.announce(this.instance.options.announcements.onDrop(this)))}this.destroy()}),et(this,"onCancel",()=>{this.activeItem&&this.originalContainer&&this.originalIndex!==-1&&this.originalContainer.insertBefore(this.activeItem,this.originalContainer.children[this.originalIndex]);const f=new CustomEvent("dragcancel",{cancelable:!1,detail:this});this.instance.dispatchEvent(f),this.instance.announce(this.instance.options.announcements.onDragCancel(this)),this.activator.focus(),setTimeout(()=>this.destroy())}),et(this,"onScroll",()=>{this.updateRects(),this.onMove(this.pointer)}),et(this,"onKeyDown",f=>{f.key==="Escape"&&(f.preventDefault(),this.onCancel())}),this.instance=t,this.sensor=l,this.activeItem=n,this.activator=s,this.onFinished=r,this.itemsByContainer=new Map;for(let f of t.containers){const d=Array.from(f.children).filter(this.instance.options.filter),p=d.indexOf(n);p!==-1&&(this.originalContainer=f,this.originalIndex=p),this.itemsByContainer.set(f,new Set(d))}this.updateRects(),this.position=DOMRect.fromRect(this.rects.get(this.activeItem)),this.pointer=c||Ll(this.position),this.pointerOffset=new DOMPoint(this.position.x-this.pointer.x,this.position.y-this.pointer.y),this.overlay=this.createOverlay(n),this.updateOverlay(),document.body.appendChild(this.overlay),this.windowListeners.add("scroll",this.onScroll,{capture:!0,passive:!0}),this.documentListeners.add("keydown",this.onKeyDown),this.instance.announce(this.instance.options.announcements.onDragStart(this))}get options(){return this.instance.options}get container(){for(let[t,l]of this.itemsByContainer)if(l.has(this.activeItem))return t;return Array.from(this.itemsByContainer.keys())[0]}get activeIndex(){for(let[,t]of this.itemsByContainer)if(t.has(this.activeItem))return Array.from(t).indexOf(this.activeItem);return-1}get overIndex(){if(this.overItem){for(let[,t]of this.itemsByContainer)if(t.has(this.overItem))return Array.from(t).indexOf(this.overItem)}return-1}destroy(){this.sensor.deactivate(),this.itemsByContainer.forEach(n=>{n.forEach(s=>{s.style.transition="none",s.style.transform="none",s.offsetWidth,s.style.transition=""})});const{activeItem:t,overlay:l}=this;if(t&&l){const n=t.getBoundingClientRect();l.style.transform=`translate(${n.x}px, ${n.y}px)`,Promise.all(l.getAnimations().map(s=>s.finished)).then(()=>{l.remove();const s=new CustomEvent("dragend",{cancelable:!1,detail:this});this.instance.dispatchEvent(s)})}this.windowListeners.removeAll(),this.documentListeners.removeAll(),this.onFinished()}updateRects(){this.rects.clear(),this.itemsByContainer.forEach((t,l)=>{[l,...t].forEach(n=>{this.rects.set(n,zu(n))})})}createOverlay(t){const l=t.cloneNode(!0);return Object.assign(l.style,{position:"fixed",top:0,left:0,margin:0}),l}updateOverlay(t){if(Object.assign(this.overlay.style,{transform:`translate(${this.position.x}px, ${this.position.y}px)`,width:this.position.width+"px",height:this.position.height+"px"}),t){const l=this.overlay.style.transition;this.overlay.style.transition="none",this.overlay.offsetWidth,this.overlay.style.transition=l}}}function Wu(e,t,l){const n=e.slice();return n.splice(l<0?n.length+l:l,0,n.splice(t,1)[0]),n}const Bu=({rects:e,index:t,overIndex:l,activeIndex:n})=>{const s=Wu(e,l,n),r=e[t],c=s[t];return!c||!r?null:{x:c.left-r.left,y:c.top-r.top}},Gu=({rects:e,index:t,overIndex:l,activeIndex:n})=>{const s=e[n];if(t===n){const c=e[l];return{x:0,y:n<l?c.top+c.height-(s.top+s.height):c.top-s.top}}const r=Yu(e,t,n);return t>n&&t<=l?{x:0,y:-s.height-r}:t<n&&t>=l?{x:0,y:s.height+r}:{x:0,y:0}};function Yu(e,t,l){const n=e[t],s=e[t-1],r=e[t+1];return n?l<t?s?n.top-(s.top+s.height):r?r.top-(n.top+n.height):0:r?r.top-(n.top+n.height):s?n.top-(s.top+s.height):0:0}function Pe(e){var t;const l=e.getAttribute("aria-labelledby");return l&&((t=document.getElementById(l))==null?void 0:t.textContent)||e.getAttribute("aria-label")}const qu={filter:()=>!0,activator:e=>e,sensors:[new kr,new Ar],collisionDetection:Iu,strategy:Bu,announcements:{onDragStart({activeItem:e,activeIndex:t,container:l}){const n=Pe(e)||`item ${t+1}`,s=Pe(l);return`Picked up ${n}`+(s?` in ${s}`:"")},onDragOver({activeItem:e,activeIndex:t,container:l,overIndex:n}){const s=Pe(e)||`item ${t+1}`,r=Pe(l);return`${s} was moved to position ${n+1}`+(r?` in ${r}`:"")},onDrop({activeItem:e,activeIndex:t,container:l,overIndex:n}){const s=Pe(e)||`item ${t+1}`,r=Pe(l);return`${s} was dropped in position ${n+1}`+(r?` in ${r}`:"")},onDragCancel({activeItem:e,activeIndex:t}){return`Sorting was cancelled. ${Pe(e)||`item ${t+1}`} was dropped.`}}},Uu=EventTarget;class ju extends Uu{constructor(t={}){var l;super(),et(this,"containers",new Set),et(this,"options"),et(this,"context"),et(this,"containerObservers",new Map),et(this,"itemDetachers",new Map),et(this,"liveRegion"),this.options=Object.assign({},qu,t),this.liveRegion=this.createLiveRegion(),(l=t.containers)==null||l.forEach(n=>this.addContainer(n))}announce(t){this.liveRegion.textContent=t}destroy(){var t;(t=this.context)==null||t.onCancel(),this.liveRegion.remove(),this.containers.forEach(l=>this.removeContainer(l)),this.options.sensors.forEach(l=>l.destroy())}addContainer(t){if(this.containers.has(t))return;this.containers.add(t),Array.from(t.children).forEach(n=>this.attachItem(n));const l=new MutationObserver(n=>{n.forEach(s=>{s.addedNodes.forEach(r=>{r instanceof HTMLElement&&setTimeout(()=>this.attachItem(r))}),s.removedNodes.forEach(r=>{r instanceof HTMLElement&&this.detachItem(r)})})});l.observe(t,{childList:!0}),this.containerObservers.set(t,l)}removeContainer(t){var l;!this.containers.has(t)||(this.containers.delete(t),Array.from(t.children).forEach(n=>this.detachItem(n)),(l=this.containerObservers.get(t))==null||l.disconnect(),this.containerObservers.delete(t))}attachItem(t){if(!this.options.filter(t))return;const l=[];for(let n of this.options.sensors){const s=this.options.activator(t);if(!s)continue;const r=n.attach(s,c=>this.start(n,t,s,c));l.push(r)}this.itemDetachers.set(t,l)}detachItem(t){var l;(l=this.itemDetachers.get(t))==null||l.forEach(n=>n()),this.itemDetachers.delete(t)}start(t,l,n,s){if(this.context)return;const r=new Nu(this,t,l,n,()=>this.context=void 0,s),c=new CustomEvent("dragstart",{cancelable:!0,detail:r});if(this.dispatchEvent(c),!c.defaultPrevented)return this.context=r}createLiveRegion(){const t=document.createElement("div");return Object.assign(t.style,{clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:"1px",overflow:"hidden",position:"absolute",top:0,whiteSpace:"nowrap",width:"1px"}),t.setAttribute("role","status"),t.setAttribute("aria-live","assertive"),t.setAttribute("aria-atomic",""),document.body.appendChild(t),t}}function yn(e,{activeItem:t,overIndex:l,container:n}){const s=Pe(t)||"",r=Pe(n)||"";return e.replace("{$activeLabel}",s).replace("{$overPosition}",String(l+1)).replace("{$containerLabel}",r)}const Mn=class Mn extends Re{constructor(){super(...arguments),this.start=t=>{t.detail.activeItem.style.opacity="0",t.detail.overlay.classList.add("drag-overlay","drag-overlay-active")},this.beforeEnd=t=>{t.detail.overlay.classList.remove("drag-overlay-active")},this.end=t=>{t.detail.activeItem.style.opacity="";const l=this.containerTargets.flatMap((n,s)=>Array.from(n.querySelectorAll("[data-id]")).map(r=>({id:r.dataset.id,listIndex:s})));l&&(this.orderInputTarget.value=JSON.stringify(l),this.dispatch("update"))}}initialize(){this.sortable=new ju({filter:t=>!!t.querySelector("[data-handle]"),activator:t=>t.querySelector("[data-handle]"),strategy:Gu,sensors:[new kr,new Ar({instructions:this.instructionsValue})],announcements:{onDragStart:yn.bind(void 0,this.dragStartAnnouncementValue),onDragOver:yn.bind(void 0,this.dragOverAnnouncementValue),onDrop:yn.bind(void 0,this.dropAnnouncementValue),onDragCancel:yn.bind(void 0,this.dragCancelAnnouncementValue)}}),this.sortable.addEventListener("dragstart",this.start),this.sortable.addEventListener("drop",this.beforeEnd),this.sortable.addEventListener("dragcancel",this.beforeEnd),this.sortable.addEventListener("dragend",this.end)}containerTargetConnected(t){var l;(l=this.sortable)==null||l.addContainer(t)}containerTargetDisconnected(t){var l;(l=this.sortable)==null||l.removeContainer(t)}};Mn.targets=["container","orderInput"],Mn.values={instructions:String,dragStartAnnouncement:String,dragOverAnnouncement:String,dropAnnouncement:String,dragCancelAnnouncement:String};let $i=Mn;window.Stimulus.register("color-picker",xi);window.Stimulus.register("filter-input",Si);window.Stimulus.register("form",Ei);window.Stimulus.register("icon-picker",ki);window.Stimulus.register("incremental-search",Oa);window.Stimulus.register("line-chart",Ri);window.Stimulus.register("permission-grid",Cu);window.Stimulus.register("slugger",Hi);window.Stimulus.register("sortable",$i);
