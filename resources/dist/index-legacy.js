System.register(["./stimulus-legacy.js","./stimulus-webpack-helpers-legacy.js","./_commonjsHelpers-legacy.js"],(function(t,e){"use strict";var n,i,r;return{setters:[t=>{n=t.A},t=>{i=t.d},t=>{r=t.g}],execute:function(){var t,e=function(t,e,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(t,n):r?r.value=n:e.set(t,n),n},s=function(t,e,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(t):i?i.value:e.get(t)};const o="undefined"!=typeof Intl&&Intl.ListFormat||class{formatToParts(t){const e=[];for(const n of t)e.push({type:"element",value:n}),e.push({type:"literal",value:", "});return e.slice(0,-1)}},a=[["years","year"],["months","month"],["weeks","week"],["days","day"],["hours","hour"],["minutes","minute"],["seconds","second"],["milliseconds","millisecond"]],c={minimumIntegerDigits:2};class u{constructor(n,i={}){t.set(this,void 0);let r=String(i.style||"short");"long"!==r&&"short"!==r&&"narrow"!==r&&"digital"!==r&&(r="short");let s="digital"===r?"numeric":r;const o=i.hours||s;s="2-digit"===o?"numeric":o;const a=i.minutes||s;s="2-digit"===a?"numeric":a;const c=i.seconds||s;s="2-digit"===c?"numeric":c;const u=i.milliseconds||s;e(this,t,{locale:n,style:r,years:i.years||"digital"===r?"short":r,yearsDisplay:"always"===i.yearsDisplay?"always":"auto",months:i.months||"digital"===r?"short":r,monthsDisplay:"always"===i.monthsDisplay?"always":"auto",weeks:i.weeks||"digital"===r?"short":r,weeksDisplay:"always"===i.weeksDisplay?"always":"auto",days:i.days||"digital"===r?"short":r,daysDisplay:"always"===i.daysDisplay?"always":"auto",hours:o,hoursDisplay:"always"===i.hoursDisplay||"digital"===r?"always":"auto",minutes:a,minutesDisplay:"always"===i.minutesDisplay||"digital"===r?"always":"auto",seconds:c,secondsDisplay:"always"===i.secondsDisplay||"digital"===r?"always":"auto",milliseconds:u,millisecondsDisplay:"always"===i.millisecondsDisplay?"always":"auto"},"f")}resolvedOptions(){return s(this,t,"f")}formatToParts(e){const n=[],i=s(this,t,"f"),r=i.style,u=i.locale;for(const[t,s]of a){const r=e[t];if("auto"===i[`${t}Display`]&&!r)continue;const o=i[t],a="2-digit"===o?c:"numeric"===o?{}:{style:"unit",unit:s,unitDisplay:o};n.push(new Intl.NumberFormat(u,a).format(r))}return new o(u,{type:"unit",style:"digital"===r?"short":r}).formatToParts(n)}format(t){return this.formatToParts(t).map((t=>t.value)).join("")}}t=new WeakMap;const l=/^[-+]?P(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)W)?(?:(\d+)D)?(?:T(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?)?$/,h=["year","month","week","day","hour","minute","second","millisecond"];class d{constructor(t=0,e=0,n=0,i=0,r=0,s=0,o=0,a=0){this.years=t,this.months=e,this.weeks=n,this.days=i,this.hours=r,this.minutes=s,this.seconds=o,this.milliseconds=a,this.years||(this.years=0),this.sign||(this.sign=Math.sign(this.years)),this.months||(this.months=0),this.sign||(this.sign=Math.sign(this.months)),this.weeks||(this.weeks=0),this.sign||(this.sign=Math.sign(this.weeks)),this.days||(this.days=0),this.sign||(this.sign=Math.sign(this.days)),this.hours||(this.hours=0),this.sign||(this.sign=Math.sign(this.hours)),this.minutes||(this.minutes=0),this.sign||(this.sign=Math.sign(this.minutes)),this.seconds||(this.seconds=0),this.sign||(this.sign=Math.sign(this.seconds)),this.milliseconds||(this.milliseconds=0),this.sign||(this.sign=Math.sign(this.milliseconds)),this.blank=0===this.sign}abs(){return new d(Math.abs(this.years),Math.abs(this.months),Math.abs(this.weeks),Math.abs(this.days),Math.abs(this.hours),Math.abs(this.minutes),Math.abs(this.seconds),Math.abs(this.milliseconds))}static from(t){var e;if("string"==typeof t){const n=String(t).trim(),i=n.startsWith("-")?-1:1,r=null===(e=n.match(l))||void 0===e?void 0:e.slice(1).map((t=>(Number(t)||0)*i));return r?new d(...r):new d}if("object"==typeof t){const{years:e,months:n,weeks:i,days:r,hours:s,minutes:o,seconds:a,milliseconds:c}=t;return new d(e,n,i,r,s,o,a,c)}throw new RangeError("invalid duration")}static compare(t,e){const n=Date.now(),i=Math.abs(p(n,d.from(t)).getTime()-n),r=Math.abs(p(n,d.from(e)).getTime()-n);return i>r?-1:i<r?1:0}toLocaleString(t,e){return new u(t,e).format(this)}}function p(t,e){const n=new Date(t);return e.sign<0?(n.setUTCSeconds(n.getUTCSeconds()+e.seconds),n.setUTCMinutes(n.getUTCMinutes()+e.minutes),n.setUTCHours(n.getUTCHours()+e.hours),n.setUTCDate(n.getUTCDate()+7*e.weeks+e.days),n.setUTCMonth(n.getUTCMonth()+e.months),n.setUTCFullYear(n.getUTCFullYear()+e.years)):(n.setUTCFullYear(n.getUTCFullYear()+e.years),n.setUTCMonth(n.getUTCMonth()+e.months),n.setUTCDate(n.getUTCDate()+7*e.weeks+e.days),n.setUTCHours(n.getUTCHours()+e.hours),n.setUTCMinutes(n.getUTCMinutes()+e.minutes),n.setUTCSeconds(n.getUTCSeconds()+e.seconds)),n}function f(t,{relativeTo:e=Date.now()}={}){if(e=new Date(e),t.blank)return t;const n=t.sign;let i=Math.abs(t.years),r=Math.abs(t.months),s=Math.abs(t.weeks),o=Math.abs(t.days),a=Math.abs(t.hours),c=Math.abs(t.minutes),u=Math.abs(t.seconds),l=Math.abs(t.milliseconds);l>=900&&(u+=Math.round(l/1e3)),(u||c||a||o||s||r||i)&&(l=0),u>=55&&(c+=Math.round(u/60)),(c||a||o||s||r||i)&&(u=0),c>=55&&(a+=Math.round(c/60)),(a||o||s||r||i)&&(c=0),o&&a>=12&&(o+=Math.round(a/24)),!o&&a>=21&&(o+=Math.round(a/24)),(o||s||r||i)&&(a=0);const h=e.getFullYear(),p=e.getMonth(),f=e.getDate();if(o>=27||i+r+o){const t=new Date(e);t.setDate(1),t.setMonth(p+r*n+1),t.setDate(0);const a=Math.max(0,f-t.getDate()),c=new Date(e);c.setFullYear(h+i*n),c.setDate(f-a),c.setMonth(p+r*n),c.setDate(f-a+o*n);const u=c.getFullYear()-e.getFullYear(),l=c.getMonth()-e.getMonth(),d=Math.abs(Math.round((Number(c)-Number(e))/864e5))+a,m=Math.abs(12*u+l);d<27?(o>=6?(s+=Math.round(o/7),o=0):o=d,r=i=0):m<=11?(r=m,i=0):(r=0,i=u*n),(r||i)&&(o=0)}return i&&(r=0),s>=4&&(r+=Math.round(s/4)),(r||i)&&(s=0),o&&s&&!r&&!i&&(s+=Math.round(o/7),o=0),new d(i*n,r*n,s*n,o*n,a*n,c*n,u*n,l*n)}var m,g,v,b,y,w,E,S,k,T,C,L=function(t,e,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(t):i?i.value:e.get(t)},A=function(t,e,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(t,n):r?r.value=n:e.set(t,n),n};const R=globalThis.HTMLElement||null,P=new d,x=new d(0,0,0,0,0,1);class _ extends Event{constructor(t,e,n,i){super("relative-time-updated",{bubbles:!0,composed:!0}),this.oldText=t,this.newText=e,this.oldTitle=n,this.newTitle=i}}function O(t){if(!t.date)return 1/0;if("duration"===t.format||"elapsed"===t.format){const e=t.precision;if("second"===e)return 1e3;if("minute"===e)return 6e4}const e=Math.abs(Date.now()-t.date.getTime());return e<6e4?1e3:e<36e5?6e4:36e5}const M=new class{constructor(){this.elements=new Set,this.time=1/0,this.timer=-1}observe(t){if(this.elements.has(t))return;this.elements.add(t);const e=t.date;if(e&&e.getTime()){const e=O(t),n=Date.now()+e;n<this.time&&(clearTimeout(this.timer),this.timer=setTimeout((()=>this.update()),e),this.time=n)}}unobserve(t){this.elements.has(t)&&this.elements.delete(t)}update(){if(clearTimeout(this.timer),!this.elements.size)return;let t=1/0;for(const e of this.elements)t=Math.min(t,O(e)),e.update();this.time=Math.min(36e5,t),this.timer=setTimeout((()=>this.update()),this.time),this.time+=Date.now()}};class I extends R{constructor(){super(...arguments),m.add(this),g.set(this,!1),v.set(this,!1),y.set(this,this.shadowRoot?this.shadowRoot:this.attachShadow?this.attachShadow({mode:"open"}):this),C.set(this,null)}static define(t="relative-time",e=customElements){return e.define(t,this),this}static get observedAttributes(){return["second","minute","hour","weekday","day","month","year","time-zone-name","prefix","threshold","tense","precision","format","format-style","no-title","datetime","lang","title"]}get onRelativeTimeUpdated(){return L(this,C,"f")}set onRelativeTimeUpdated(t){L(this,C,"f")&&this.removeEventListener("relative-time-updated",L(this,C,"f")),A(this,C,"object"==typeof t||"function"==typeof t?t:null,"f"),"function"==typeof t&&this.addEventListener("relative-time-updated",t)}get second(){const t=this.getAttribute("second");if("numeric"===t||"2-digit"===t)return t}set second(t){this.setAttribute("second",t||"")}get minute(){const t=this.getAttribute("minute");if("numeric"===t||"2-digit"===t)return t}set minute(t){this.setAttribute("minute",t||"")}get hour(){const t=this.getAttribute("hour");if("numeric"===t||"2-digit"===t)return t}set hour(t){this.setAttribute("hour",t||"")}get weekday(){const t=this.getAttribute("weekday");return"long"===t||"short"===t||"narrow"===t?t:"datetime"===this.format&&""!==t?this.formatStyle:void 0}set weekday(t){this.setAttribute("weekday",t||"")}get day(){var t;const e=null!==(t=this.getAttribute("day"))&&void 0!==t?t:"numeric";if("numeric"===e||"2-digit"===e)return e}set day(t){this.setAttribute("day",t||"")}get month(){const t=this.format;let e=this.getAttribute("month");if(""!==e)return null!=e||(e="datetime"===t?this.formatStyle:"short"),"numeric"===e||"2-digit"===e||"short"===e||"long"===e||"narrow"===e?e:void 0}set month(t){this.setAttribute("month",t||"")}get year(){var t;const e=this.getAttribute("year");return"numeric"===e||"2-digit"===e?e:this.hasAttribute("year")||(new Date).getUTCFullYear()===(null===(t=this.date)||void 0===t?void 0:t.getUTCFullYear())?void 0:"numeric"}set year(t){this.setAttribute("year",t||"")}get timeZoneName(){const t=this.getAttribute("time-zone-name");if("long"===t||"short"===t||"shortOffset"===t||"longOffset"===t||"shortGeneric"===t||"longGeneric"===t)return t}set timeZoneName(t){this.setAttribute("time-zone-name",t||"")}get prefix(){var t;return null!==(t=this.getAttribute("prefix"))&&void 0!==t?t:"datetime"===this.format?"":"on"}set prefix(t){this.setAttribute("prefix",t)}get threshold(){const t=this.getAttribute("threshold");return t&&(e=t,l.test(e))?t:"P30D";var e}set threshold(t){this.setAttribute("threshold",t)}get tense(){const t=this.getAttribute("tense");return"past"===t?"past":"future"===t?"future":"auto"}set tense(t){this.setAttribute("tense",t)}get precision(){const t=this.getAttribute("precision");return h.includes(t)?t:"micro"===this.format?"minute":"second"}set precision(t){this.setAttribute("precision",t)}get format(){const t=this.getAttribute("format");return"datetime"===t?"datetime":"relative"===t?"relative":"duration"===t?"duration":"micro"===t?"micro":"elapsed"===t?"elapsed":"auto"}set format(t){this.setAttribute("format",t)}get formatStyle(){const t=this.getAttribute("format-style");if("long"===t)return"long";if("short"===t)return"short";if("narrow"===t)return"narrow";const e=this.format;return"elapsed"===e||"micro"===e?"narrow":"datetime"===e?"short":"long"}set formatStyle(t){this.setAttribute("format-style",t)}get noTitle(){return this.hasAttribute("no-title")}set noTitle(t){this.toggleAttribute("no-title",t)}get datetime(){return this.getAttribute("datetime")||""}set datetime(t){this.setAttribute("datetime",t)}get date(){const t=Date.parse(this.datetime);return Number.isNaN(t)?null:new Date(t)}set date(t){this.datetime=(null==t?void 0:t.toISOString())||""}connectedCallback(){this.update()}disconnectedCallback(){M.unobserve(this)}attributeChangedCallback(t,e,n){e!==n&&("title"===t&&A(this,g,null!==n&&(this.date&&L(this,m,"m",w).call(this,this.date))!==n,"f"),L(this,v,"f")||"title"===t&&L(this,g,"f")||A(this,v,(async()=>{await Promise.resolve(),this.update(),A(this,v,!1,"f")})(),"f"))}update(){const t=L(this,y,"f").textContent||this.textContent||"",e=this.getAttribute("title")||"";let n=e;const i=this.date;if("undefined"==typeof Intl||!Intl.DateTimeFormat||!i)return void(L(this,y,"f").textContent=t);const r=Date.now();L(this,g,"f")||(n=L(this,m,"m",w).call(this,i)||"",n&&!this.noTitle&&this.setAttribute("title",n));const s=function(t,e="second",n=Date.now()){const i=t.getTime()-n;if(0===i)return new d;const r=Math.sign(i),s=Math.abs(i),o=Math.floor(s/1e3),a=Math.floor(o/60),c=Math.floor(a/60),u=Math.floor(c/24),l=Math.floor(u/30),p=Math.floor(l/12),f=h.indexOf(e)||h.length;return new d(f>=0?p*r:0,f>=1?(l-12*p)*r:0,0,f>=3?(u-30*l)*r:0,f>=4?(c-24*u)*r:0,f>=5?(a-60*c)*r:0,f>=6?(o-60*a)*r:0,f>=7?(s-1e3*o)*r:0)}(i,this.precision,r),o=L(this,m,"m",E).call(this,s);let a=t;a="duration"===o?L(this,m,"m",S).call(this,s):"relative"===o?L(this,m,"m",k).call(this,s):L(this,m,"m",T).call(this,i),a?L(this,y,"f").textContent=a:this.shadowRoot===L(this,y,"f")&&this.textContent&&(L(this,y,"f").textContent=this.textContent),a===t&&n===e||this.dispatchEvent(new _(t,a,e,n)),"relative"===o||"duration"===o?M.observe(this):M.unobserve(this)}}g=new WeakMap,v=new WeakMap,y=new WeakMap,C=new WeakMap,m=new WeakSet,b=function(){var t;const e=(null===(t=this.closest("[lang]"))||void 0===t?void 0:t.getAttribute("lang"))||this.ownerDocument.documentElement.getAttribute("lang");try{return new Intl.Locale(null!=e?e:"").toString()}catch(n){return"default"}},w=function(t){return new Intl.DateTimeFormat(L(this,m,"a",b),{day:"numeric",month:"short",year:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"}).format(t)},E=function(t){const e=this.format;if("datetime"===e)return"datetime";if("duration"===e)return"duration";if("elapsed"===e)return"duration";if("micro"===e)return"duration";if(("auto"===e||"relative"===e)&&"undefined"!=typeof Intl&&Intl.RelativeTimeFormat){const e=this.tense;if("past"===e||"future"===e)return"relative";if(1===d.compare(t,this.threshold))return"relative"}return"datetime"},S=function(t){const e=L(this,m,"a",b),n=this.format,i=this.formatStyle,r=this.tense;let s=P;"micro"===n?(t=f(t),s=x,("past"===this.tense&&-1!==t.sign||"future"===this.tense&&1!==t.sign)&&(t=x)):("past"===r&&-1!==t.sign||"future"===r&&1!==t.sign)&&(t=s);const o=`${this.precision}sDisplay`;return t.blank?s.toLocaleString(e,{style:i,[o]:"always"}):t.abs().toLocaleString(e,{style:i})},k=function(t){const e=new Intl.RelativeTimeFormat(L(this,m,"a",b),{numeric:"auto",style:this.formatStyle}),n=this.tense;"future"===n&&1!==t.sign&&(t=P),"past"===n&&-1!==t.sign&&(t=P);const[i,r]=function(t,e){const n=f(t,e);if(n.blank)return[0,"second"];for(const i of h){if("millisecond"===i)continue;const t=n[`${i}s`];if(t)return[t,i]}return[0,"second"]}(t);return"second"===r&&i<10?e.format(0,"millisecond"===this.precision?"second":this.precision):e.format(i,r)},T=function(t){const e=new Intl.DateTimeFormat(L(this,m,"a",b),{second:this.second,minute:this.minute,hour:this.hour,weekday:this.weekday,day:this.day,month:this.month,year:this.year,timeZoneName:this.timeZoneName});return`${this.prefix} ${e.format(t)}`.trim()};const D="undefined"!=typeof globalThis?globalThis:window;try{D.RelativeTimeElement=I.define()}catch(Bn){if(!(D.DOMException&&Bn instanceof DOMException&&"NotSupportedError"===Bn.name||Bn instanceof ReferenceError))throw Bn}class F extends Error{constructor(t,e,n){const i=`${t.status||0===t.status?t.status:""} ${t.statusText||""}`.trim();super("Request failed with "+(i?`status code ${i}`:"an unknown error")),Object.defineProperty(this,"response",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="HTTPError",this.response=t,this.request=e,this.options=n}}class H extends Error{constructor(t){super("Request timed out"),Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="TimeoutError",this.request=t}}const N=t=>null!==t&&"object"==typeof t,q=(...t)=>{for(const e of t)if((!N(e)||Array.isArray(e))&&void 0!==e)throw new TypeError("The `options` argument must be an object");return B({},...t)},j=(t={},e={})=>{const n=new globalThis.Headers(t),i=e instanceof globalThis.Headers,r=new globalThis.Headers(e);for(const[s,o]of r.entries())i&&"undefined"===o||void 0===o?n.delete(s):n.set(s,o);return n},B=(...t)=>{let e={},n={};for(const i of t)if(Array.isArray(i))Array.isArray(e)||(e=[]),e=[...e,...i];else if(N(i)){for(let[t,n]of Object.entries(i))N(n)&&t in e&&(n=B(e[t],n)),e={...e,[t]:n};N(i.headers)&&(n=j(n,i.headers),e.headers=n)}return e},U=(()=>{let t=!1,e=!1;const n="function"==typeof globalThis.ReadableStream,i="function"==typeof globalThis.Request;return n&&i&&(e=new globalThis.Request("https://a.com",{body:new globalThis.ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type")),t&&!e})(),W="function"==typeof globalThis.AbortController,V="function"==typeof globalThis.ReadableStream,z="function"==typeof globalThis.FormData,$=["get","post","put","patch","head","delete"],K={json:"application/json",text:"text/*",formData:"multipart/form-data",arrayBuffer:"*/*",blob:"*/*"},X=2147483647,J=Symbol("stop"),G=t=>$.includes(t)?t.toUpperCase():t,Y=[413,429,503],Q={limit:2,methods:["get","put","head","delete","options","trace"],statusCodes:[408,413,429,500,502,503,504],afterStatusCodes:Y,maxRetryAfter:Number.POSITIVE_INFINITY,backoffLimit:Number.POSITIVE_INFINITY},Z=(t={})=>{if("number"==typeof t)return{...Q,limit:t};if(t.methods&&!Array.isArray(t.methods))throw new Error("retry.methods must be an array");if(t.statusCodes&&!Array.isArray(t.statusCodes))throw new Error("retry.statusCodes must be an array");return{...Q,...t,afterStatusCodes:Y}},tt=Boolean(globalThis.DOMException);function et(t){if(tt)return new DOMException(t?.reason??"The operation was aborted.","AbortError");const e=new Error(t?.reason??"The operation was aborted.");return e.name="AbortError",e}class nt{static create(t,e){const n=new nt(t,e),i=async()=>{if(n._options.timeout>X)throw new RangeError("The `timeout` option cannot be greater than 2147483647");await Promise.resolve();let t=await n._fetch();for(const e of n._options.hooks.afterResponse){const i=await e(n.request,n._options,n._decorateResponse(t.clone()));i instanceof globalThis.Response&&(t=i)}if(n._decorateResponse(t),!t.ok&&n._options.throwHttpErrors){let e=new F(t,n.request,n._options);for(const t of n._options.hooks.beforeError)e=await t(e);throw e}if(n._options.onDownloadProgress){if("function"!=typeof n._options.onDownloadProgress)throw new TypeError("The `onDownloadProgress` option must be a function");if(!V)throw new Error("Streams are not supported in your environment. `ReadableStream` is missing.");return n._stream(t.clone(),n._options.onDownloadProgress)}return t},r=n._options.retry.methods.includes(n.request.method.toLowerCase())?n._retry(i):i();for(const[s,o]of Object.entries(K))r[s]=async()=>{n.request.headers.set("accept",n.request.headers.get("accept")||o);const t=(await r).clone();if("json"===s){if(204===t.status)return"";if(0===(await t.clone().arrayBuffer()).byteLength)return"";if(e.parseJson)return e.parseJson(await t.text())}return t[s]()};return r}constructor(t,e={}){if(Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"abortController",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_retryCount",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_input",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._input=t,this._options={credentials:this._input.credentials||"same-origin",...e,headers:j(this._input.headers,e.headers),hooks:B({beforeRequest:[],beforeRetry:[],beforeError:[],afterResponse:[]},e.hooks),method:G(e.method??this._input.method),prefixUrl:String(e.prefixUrl||""),retry:Z(e.retry),throwHttpErrors:!1!==e.throwHttpErrors,timeout:void 0===e.timeout?1e4:e.timeout,fetch:e.fetch??globalThis.fetch.bind(globalThis)},"string"!=typeof this._input&&!(this._input instanceof URL||this._input instanceof globalThis.Request))throw new TypeError("`input` must be a string, URL, or Request");if(this._options.prefixUrl&&"string"==typeof this._input){if(this._input.startsWith("/"))throw new Error("`input` must not begin with a slash when using `prefixUrl`");this._options.prefixUrl.endsWith("/")||(this._options.prefixUrl+="/"),this._input=this._options.prefixUrl+this._input}if(W){if(this.abortController=new globalThis.AbortController,this._options.signal){const t=this._options.signal;this._options.signal.addEventListener("abort",(()=>{this.abortController.abort(t.reason)}))}this._options.signal=this.abortController.signal}if(U&&(this._options.duplex="half"),this.request=new globalThis.Request(this._input,this._options),this._options.searchParams){const t="?"+("string"==typeof this._options.searchParams?this._options.searchParams.replace(/^\?/,""):new URLSearchParams(this._options.searchParams).toString()),e=this.request.url.replace(/(?:\?.*?)?(?=#|$)/,t);!(z&&this._options.body instanceof globalThis.FormData||this._options.body instanceof URLSearchParams)||this._options.headers&&this._options.headers["content-type"]||this.request.headers.delete("content-type"),this.request=new globalThis.Request(new globalThis.Request(e,{...this.request}),this._options)}void 0!==this._options.json&&(this._options.body=JSON.stringify(this._options.json),this.request.headers.set("content-type",this._options.headers.get("content-type")??"application/json"),this.request=new globalThis.Request(this.request,{body:this._options.body}))}_calculateRetryDelay(t){if(this._retryCount++,this._retryCount<this._options.retry.limit&&!(t instanceof H)){if(t instanceof F){if(!this._options.retry.statusCodes.includes(t.response.status))return 0;const e=t.response.headers.get("Retry-After");if(e&&this._options.retry.afterStatusCodes.includes(t.response.status)){let t=Number(e);return Number.isNaN(t)?t=Date.parse(e)-Date.now():t*=1e3,void 0!==this._options.retry.maxRetryAfter&&t>this._options.retry.maxRetryAfter?0:t}if(413===t.response.status)return 0}const e=.3;return Math.min(this._options.retry.backoffLimit,e*2**(this._retryCount-1)*1e3)}return 0}_decorateResponse(t){return this._options.parseJson&&(t.json=async()=>this._options.parseJson(await t.text())),t}async _retry(t){try{return await t()}catch(e){const n=Math.min(this._calculateRetryDelay(e),X);if(0!==n&&this._retryCount>0){await async function(t,{signal:e}){return new Promise(((n,i)=>{if(e){if(e.aborted)return void i(et(e));e.addEventListener("abort",r,{once:!0})}function r(){i(et(e)),clearTimeout(s)}const s=setTimeout((()=>{e?.removeEventListener("abort",r),n()}),t)}))}(n,{signal:this._options.signal});for(const t of this._options.hooks.beforeRetry)if(await t({request:this.request,options:this._options,error:e,retryCount:this._retryCount})===J)return;return this._retry(t)}throw e}}async _fetch(){for(const t of this._options.hooks.beforeRequest){const e=await t(this.request,this._options);if(e instanceof Request){this.request=e;break}if(e instanceof Response)return e}return!1===this._options.timeout?this._options.fetch(this.request.clone()):async function(t,e,n){return new Promise(((i,r)=>{const s=setTimeout((()=>{e&&e.abort(),r(new H(t))}),n.timeout);n.fetch(t).then(i).catch(r).then((()=>{clearTimeout(s)}))}))}(this.request.clone(),this.abortController,this._options)}_stream(t,e){const n=Number(t.headers.get("content-length"))||0;let i=0;return 204===t.status?(e&&e({percent:1,totalBytes:n,transferredBytes:i},new Uint8Array),new globalThis.Response(null,{status:t.status,statusText:t.statusText,headers:t.headers})):new globalThis.Response(new globalThis.ReadableStream({async start(r){const s=t.body.getReader();e&&e({percent:0,transferredBytes:0,totalBytes:n},new Uint8Array),await async function t(){const{done:o,value:a}=await s.read();o?r.close():(e&&(i+=a.byteLength,e({percent:0===n?0:i/n,transferredBytes:i,totalBytes:n},a)),r.enqueue(a),await t())}()}}),{status:t.status,statusText:t.statusText,headers:t.headers})}}/*! MIT License © Sindre Sorhus */const it=t=>{const e=(e,n)=>nt.create(e,q(t,n));for(const n of $)e[n]=(e,i)=>nt.create(e,q(t,i,{method:n}));return e.create=t=>it(q(t)),e.extend=e=>it(q(t,e)),e.stop=J,e},rt=it();class st{constructor(t,e,{tabInsertsSuggestions:n,defaultFirstOption:i}={}){this.input=t,this.list=e,this.tabInsertsSuggestions=null==n||n,this.defaultFirstOption=null!=i&&i,this.isComposing=!1,e.id||(e.id=`combobox-${Math.random().toString().slice(2,6)}`),this.ctrlBindings=!!navigator.userAgent.match(/Macintosh/),this.keyboardEventHandler=t=>function(t,e){if(!(t.shiftKey||t.metaKey||t.altKey)&&(e.ctrlBindings||!t.ctrlKey)&&!e.isComposing)switch(t.key){case"Enter":at(e.input,e.list)&&t.preventDefault();break;case"Tab":e.tabInsertsSuggestions&&at(e.input,e.list)&&t.preventDefault();break;case"Escape":e.clearSelection();break;case"ArrowDown":e.navigate(1),t.preventDefault();break;case"ArrowUp":e.navigate(-1),t.preventDefault();break;case"n":e.ctrlBindings&&t.ctrlKey&&(e.navigate(1),t.preventDefault());break;case"p":e.ctrlBindings&&t.ctrlKey&&(e.navigate(-1),t.preventDefault());break;default:if(t.ctrlKey)break;e.clearSelection()}}(t,this),this.compositionEventHandler=t=>function(t,e){e.isComposing="compositionstart"===t.type;const n=document.getElementById(e.input.getAttribute("aria-controls")||"");n&&e.clearSelection()}(t,this),this.inputHandler=this.clearSelection.bind(this),t.setAttribute("role","combobox"),t.setAttribute("aria-controls",e.id),t.setAttribute("aria-expanded","false"),t.setAttribute("aria-autocomplete","list"),t.setAttribute("aria-haspopup","listbox")}destroy(){this.clearSelection(),this.stop(),this.input.removeAttribute("role"),this.input.removeAttribute("aria-controls"),this.input.removeAttribute("aria-expanded"),this.input.removeAttribute("aria-autocomplete"),this.input.removeAttribute("aria-haspopup")}start(){this.input.setAttribute("aria-expanded","true"),this.input.addEventListener("compositionstart",this.compositionEventHandler),this.input.addEventListener("compositionend",this.compositionEventHandler),this.input.addEventListener("input",this.inputHandler),this.input.addEventListener("keydown",this.keyboardEventHandler),this.list.addEventListener("click",ot),this.indicateDefaultOption()}stop(){this.clearSelection(),this.input.setAttribute("aria-expanded","false"),this.input.removeEventListener("compositionstart",this.compositionEventHandler),this.input.removeEventListener("compositionend",this.compositionEventHandler),this.input.removeEventListener("input",this.inputHandler),this.input.removeEventListener("keydown",this.keyboardEventHandler),this.list.removeEventListener("click",ot)}indicateDefaultOption(){var t;this.defaultFirstOption&&(null===(t=Array.from(this.list.querySelectorAll('[role="option"]:not([aria-disabled="true"])')).filter(ut)[0])||void 0===t||t.setAttribute("data-combobox-option-default","true"))}navigate(t=1){const e=Array.from(this.list.querySelectorAll('[aria-selected="true"]')).filter(ut)[0],n=Array.from(this.list.querySelectorAll('[role="option"]')).filter(ut),i=n.indexOf(e);if(i===n.length-1&&1===t||0===i&&-1===t)return this.clearSelection(),void this.input.focus();let r=1===t?0:n.length-1;if(e&&i>=0){const e=i+t;e>=0&&e<n.length&&(r=e)}const s=n[r];if(s)for(const o of n)o.removeAttribute("data-combobox-option-default"),s===o?(this.input.setAttribute("aria-activedescendant",s.id),s.setAttribute("aria-selected","true"),ct(s),lt(this.list,s)):o.removeAttribute("aria-selected")}clearSelection(){this.input.removeAttribute("aria-activedescendant");for(const t of this.list.querySelectorAll('[aria-selected="true"]'))t.removeAttribute("aria-selected");this.indicateDefaultOption()}}function ot(t){if(!(t.target instanceof Element))return;const e=t.target.closest('[role="option"]');e&&"true"!==e.getAttribute("aria-disabled")&&function(t,e){t.dispatchEvent(new CustomEvent("combobox-commit",{bubbles:!0,detail:e}))}(e,{event:t})}function at(t,e){const n=e.querySelector('[aria-selected="true"], [data-combobox-option-default="true"]');return!!n&&("true"===n.getAttribute("aria-disabled")||n.click(),!0)}function ct(t){t.dispatchEvent(new Event("combobox-select",{bubbles:!0}))}function ut(t){return!t.hidden&&!(t instanceof HTMLInputElement&&"hidden"===t.type)&&(t.offsetWidth>0||t.offsetHeight>0)}function lt(t,e){(function(t,e){const n=t.scrollTop,i=n+t.clientHeight,r=e.offsetTop,s=r+e.clientHeight;return r>=n&&s<=i})(t,e)||(t.scrollTop=e.offsetTop)}const ht=/\s|\(|\[/;function dt(t,e,n,{multiWord:i,lookBackIndex:r,lastMatchPosition:s}={multiWord:!1,lookBackIndex:0,lastMatchPosition:null}){let o=t.lastIndexOf(e,n-1);if(-1===o)return;if(o<r)return;if(i){if(null!=s){if(s===o)return;o=s-e.length}if(" "===t[o+1]&&n>=o+e.length+1)return;if(t.lastIndexOf("\n",n-1)>o)return;if(t.lastIndexOf(".",n-1)>o)return}else if(t.lastIndexOf(" ",n-1)>o)return;const a=t[o-1];return!a||ht.test(a)?{text:t.substring(o+e.length,n),position:o+e.length}:void 0}class pt extends HTMLElement{}class ft extends Event{constructor(){super("update")}}const mt=new WeakMap;class gt extends pt{#t=(()=>new MutationObserver((()=>this.#e())))();#n=(()=>new ResizeObserver((()=>this.#i())))();#r;#s;static for(t){let e=mt.get(t);return e||(e=new gt,e.connect(t),mt.set(t,e)),e}connect(t){this.#r=new WeakRef(t),this.#s=document.createElement("div"),this.#s.style.position="absolute",this.#s.style.pointerEvents="none",t.after(this.#s),this.#s.appendChild(this)}forceUpdate(){this.#e(),this.#o()}connectedCallback(){this.#a((t=>{this.style.pointerEvents="none",this.style.userSelect="none",this.style.overflow="hidden",this.style.display="block",this.style.visibility="hidden",t instanceof HTMLTextAreaElement?(this.style.whiteSpace="pre-wrap",this.style.wordWrap="break-word"):(this.style.whiteSpace="nowrap",this.style.display="table-cell",this.style.verticalAlign="middle"),this.setAttribute("aria-hidden","true"),this.#e(),this.#o(),this.#t.observe(t,{attributeFilter:["style","dir"]}),this.#n.observe(t),document.addEventListener("scroll",this.#c,{capture:!0}),window.addEventListener("resize",this.#c,{capture:!0}),t.addEventListener("input",this.#u,{capture:!0})}))}disconnectedCallback(){this.#s?.remove(),this.#t.disconnect(),this.#n.disconnect(),document.removeEventListener("scroll",this.#c,{capture:!0}),window.removeEventListener("resize",this.#c,{capture:!0});const t=this.#l;t&&(t.removeEventListener("input",this.#u,{capture:!0}),mt.delete(t))}get#l(){return this.#r?.deref()}#a(t){const e=this.#l;return e?t(e):this.remove()}#h=0;#d=0;#p(){this.#a((t=>{const e=window.getComputedStyle(t);this.style.height=e.height,this.style.width=e.width,t.clientHeight!==this.clientHeight&&(this.style.height=`calc(${e.height} + ${t.clientHeight-this.clientHeight}px)`),t.clientWidth!==this.clientWidth&&(this.style.width=`calc(${e.width} + ${t.clientWidth-this.clientWidth}px)`);const n=t.getBoundingClientRect(),i=this.getBoundingClientRect();this.#h=this.#h+n.left-i.left,this.#d=this.#d+n.top-i.top,this.style.transform=`translate(${this.#h}px, ${this.#d}px)`,this.scrollTop=t.scrollTop,this.scrollLeft=t.scrollLeft,this.dispatchEvent(new ft)}))}#f=!1;#i(){this.#f||(this.#f=!0,requestAnimationFrame((()=>{this.#p(),this.#f=!1})))}#e(){this.#a((t=>{const e=window.getComputedStyle(t);for(const n of vt)this.style[n]=e[n];this.#i()}))}#o(){this.#a((t=>{this.textContent=t.value,this.#p()}))}#u=()=>this.#o();#c=t=>{this.#a((e=>{(t.target===document||t.target===window||t.target instanceof Node&&t.target.contains(e))&&this.#i()}))}}const vt=["direction","writingMode","unicodeBidi","textOrientation","boxSizing","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"];try{customElements.define("input-style-clone",gt)}catch(Bn){if(!(Bn instanceof DOMException&&"NotSupportedError"===Bn.name))throw Bn}class bt{#m;#g;#v;constructor(t,e=0,n=e){this.#m=t,this.#g=e,this.#v=n}static fromSelection(t){const{selectionStart:e,selectionEnd:n}=t;return new bt(t,e??void 0,n??void 0)}get collapsed(){return this.startOffset===this.endOffset}get commonAncestorContainer(){return this.#m}get endContainer(){return this.#m}get startContainer(){return this.#m}get startOffset(){return this.#g}get endOffset(){return this.#v}setStartOffset(t){this.#g=this.#b(t)}setEndOffset(t){this.#v=this.#b(t)}collapse(t=!1){t?this.setEndOffset(this.startOffset):this.setStartOffset(this.endOffset)}cloneContents(){return this.#y().cloneContents()}cloneRange(){return new bt(this.#m,this.startOffset,this.endOffset)}getBoundingClientRect(){return this.#y().getBoundingClientRect()}getClientRects(){return this.#y().getClientRects()}toString(){return this.#y().toString()}getStyleClone(){return this.#w}get#w(){return gt.for(this.#m)}get#E(){return this.#w}#b(t){return Math.max(0,Math.min(t,this.#m.value.length))}#y(){const t=document.createRange(),e=this.#E.childNodes[0];return e&&(t.setStart(e,this.startOffset),t.setEnd(e,this.endOffset)),t}}const yt=new WeakMap;class wt{constructor(t,e){this.expander=t,this.input=e,this.combobox=null,this.menu=null,this.match=null,this.justPasted=!1,this.lookBackIndex=0,this.oninput=this.onInput.bind(this),this.onpaste=this.onPaste.bind(this),this.onkeydown=this.onKeydown.bind(this),this.oncommit=this.onCommit.bind(this),this.onmousedown=this.onMousedown.bind(this),this.onblur=this.onBlur.bind(this),this.interactingWithList=!1,e.addEventListener("paste",this.onpaste),e.addEventListener("input",this.oninput),e.addEventListener("keydown",this.onkeydown),e.addEventListener("blur",this.onblur)}destroy(){this.input.removeEventListener("paste",this.onpaste),this.input.removeEventListener("input",this.oninput),this.input.removeEventListener("keydown",this.onkeydown),this.input.removeEventListener("blur",this.onblur)}dismissMenu(){this.deactivate()&&(this.lookBackIndex=this.input.selectionEnd||this.lookBackIndex)}activate(t,e){var n,i;this.input!==document.activeElement&&this.input!==(null===(i=null===(n=document.activeElement)||void 0===n?void 0:n.shadowRoot)||void 0===i?void 0:i.activeElement)||(this.deactivate(),this.menu=e,e.id||(e.id=`text-expander-${Math.floor(1e5*Math.random()).toString()}`),this.expander.append(e),this.combobox=new st(this.input,e),this.expander.dispatchEvent(new Event("text-expander-activate")),this.positionMenu(e,t.position),this.combobox.start(),e.addEventListener("combobox-commit",this.oncommit),e.addEventListener("mousedown",this.onmousedown),this.combobox.navigate(1))}positionMenu(t,e){const n=new bt(this.input,e).getBoundingClientRect(),i=n.left,r=n.top+n.height,s=t.getBoundingClientRect(),o=i-s.left,a=r-s.top;if(0!==o||0!==a){const e=getComputedStyle(t);t.style.left=e.left?`calc(${e.left} + ${o}px)`:`${o}px`,t.style.top=e.top?`calc(${e.top} + ${a}px)`:`${a}px`}}deactivate(){const t=this.menu;return!(!t||!this.combobox||(this.expander.dispatchEvent(new Event("text-expander-deactivate")),this.menu=null,t.removeEventListener("combobox-commit",this.oncommit),t.removeEventListener("mousedown",this.onmousedown),this.combobox.destroy(),this.combobox=null,t.remove(),0))}onCommit({target:t}){var e;const n=t;if(!(n instanceof HTMLElement))return;if(!this.combobox)return;const i=this.match;if(!i)return;const r=this.input.value.substring(0,i.position-i.key.length),s=this.input.value.substring(i.position+i.text.length),o={item:n,key:i.key,value:null,continue:!1};if(!this.expander.dispatchEvent(new CustomEvent("text-expander-value",{cancelable:!0,detail:o})))return;if(!o.value)return;let a=null!==(e=this.expander.getAttribute("suffix"))&&void 0!==e?e:" ";o.continue&&(a="");const c=`${o.value}${a}`;this.input.value=r+c+s;const u=r.length+c.length;this.deactivate(),this.input.focus({preventScroll:!0}),this.input.selectionStart=u,this.input.selectionEnd=u,o.continue||(this.lookBackIndex=u,this.match=null),this.expander.dispatchEvent(new CustomEvent("text-expander-committed",{cancelable:!1,detail:{input:this.input}}))}onBlur(){this.interactingWithList?this.interactingWithList=!1:this.deactivate()}onPaste(){this.justPasted=!0}async onInput(){if(this.justPasted)return void(this.justPasted=!1);const t=this.findMatch();if(t){this.match=t;const e=await this.notifyProviders(t);if(!this.match)return;e?this.activate(t,e):this.deactivate()}else this.match=null,this.deactivate()}findMatch(){const t=this.input.selectionEnd||0,e=this.input.value;t<=this.lookBackIndex&&(this.lookBackIndex=t-1);for(const{key:n,multiWord:i}of this.expander.keys){const r=dt(e,n,t,{multiWord:i,lookBackIndex:this.lookBackIndex,lastMatchPosition:this.match?this.match.position:null});if(r)return{text:r.text,key:n,position:r.position}}}async notifyProviders(t){const e=[],n=new CustomEvent("text-expander-change",{cancelable:!0,detail:{provide:t=>e.push(t),text:t.text,key:t.key}});if(!this.expander.dispatchEvent(n))return;const i=(await Promise.all(e)).filter((t=>t.matched)).map((t=>t.fragment));return i[0]}onMousedown(){this.interactingWithList=!0}onKeydown(t){"Escape"===t.key&&(this.match=null,this.deactivate()&&(this.lookBackIndex=this.input.selectionEnd||this.lookBackIndex,t.stopImmediatePropagation(),t.preventDefault()))}}class Et extends HTMLElement{get keys(){const t=this.getAttribute("keys"),e=t?t.split(" "):[],n=this.getAttribute("multiword"),i=n?n.split(" "):[],r=0===i.length&&this.hasAttribute("multiword");return e.map((t=>({key:t,multiWord:r||i.includes(t)})))}set keys(t){this.setAttribute("keys",t)}connectedCallback(){const t=this.querySelector('input[type="text"], textarea');if(!(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement))return;const e=new wt(this,t);yt.set(this,e)}disconnectedCallback(){const t=yt.get(this);t&&(t.destroy(),yt.delete(this))}dismiss(){const t=yt.get(this);t&&t.dismissMenu()}}window.customElements.get("text-expander")||(window.TextExpanderElement=Et,window.customElements.define("text-expander",Et));var St=Object.defineProperty,kt=(t,e,n)=>(((t,e,n)=>{e in t?St(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n})(t,e+"",n),n);let Tt=class extends HTMLElement{constructor(){super(...arguments),kt(this,"onToggle",(t=>{const e=t.target;e.open&&this.querySelectorAll(":scope > :is(ui-disclosure, details)").forEach((t=>{t.toggleAttribute("open",t===e),this.required&&t.toggleAttribute("disabled",t===e)}))}))}connectedCallback(){this.addEventListener("toggle",this.onToggle,{capture:!0})}disconnectedCallback(){this.removeEventListener("toggle",this.onToggle,{capture:!0})}get required(){return this.hasAttribute("required")}};function Ct(t,e,n={}){const i=new WeakMap,r=Ot(n);t instanceof HTMLCollection&&(t=Array.from(t)),t.forEach((t=>{"none"!==getComputedStyle(t).display&&i.set(t,t.getBoundingClientRect())})),e(),t.forEach((t=>{const e=i.get(t);if(!e)return;const n=e.left-t.getBoundingClientRect().left,s=e.top-t.getBoundingClientRect().top;if(!n&&!s)return;const o=t.style;o.transitionDuration="0s",o.transform=`translate(${n}px, ${s}px)`,requestAnimationFrame((async()=>{t.classList.add(r+"move"),o.transitionDuration=o.transform="",await _t(t),t.classList.remove(r+"move")}))}))}function Lt(t){t._currentTransition&&(t.classList.remove(...["active","from","to"].map((e=>t._currentTransition+e))),t._currentTransition=null)}async function At(t,e,n={}){const i=Ot(n)+e+"-",r=t.classList;Lt(t),t._currentTransition=i,r.add(i+"active",i+"from"),await xt(),r.add(i+"to"),r.remove(i+"from"),await _t(t),r.remove(i+"to",i+"active"),t._currentTransition===i&&(t._currentTransition=null)}function Rt(t,e={}){return At(t,"enter",e)}function Pt(t,e={}){return At(t,"leave",e)}function xt(){return new Promise((t=>requestAnimationFrame((()=>requestAnimationFrame((()=>t()))))))}async function _t(t){if(getComputedStyle(t).transitionDuration.startsWith("0s"))return;let e=!1;const n=n=>e||(e=n.target===t);return t.addEventListener("transitionstart",n),await xt(),t.removeEventListener("transitionstart",n),e?new Promise((e=>{const n=i=>{i.target===t&&(e(),t.removeEventListener("transitionend",n),t.removeEventListener("transitioncancel",n))};t.addEventListener("transitionend",n),t.addEventListener("transitioncancel",n)})):void 0}function Ot(t){return null!=t&&t.prefix?t.prefix+"-":""}var Mt=Object.defineProperty,It=(t,e,n)=>(((t,e,n)=>{e in t?Mt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n})(t,"symbol"!=typeof e?e+"":e,n),n);const Dt=class extends HTMLElement{constructor(){super(),It(this,"added",new Set),It(this,"timeouts",new Map),It(this,"index",0),new MutationObserver((t=>{t.forEach((t=>{t.addedNodes.forEach((t=>{t instanceof HTMLElement&&!this.added.has(t)&&this.show(t)}))}))})).observe(this,{childList:!0})}connectedCallback(){this.hasAttribute("role")||this.setAttribute("role","status"),this.hasAttribute("aria-live")||this.setAttribute("aria-live","polite"),this.hasAttribute("aria-relevant")||this.setAttribute("aria-relevant","additions");for(const t of this.children)this.show(t,{animate:!1})}show(t,e={}){const n=e.key||t.dataset.key||String(this.index++);this.dismiss(n),t.dataset.key=n,this.contains(t)?Rt(t):!1===e.animate?this.append(t):Ct(this.children,(()=>{this.append(t),Rt(t)})),this.added.add(t);const i=Number(void 0!==e.duration?e.duration:t.dataset.duration||Dt.duration);return i>0&&(this.startTimeout(t,i),t.addEventListener("mouseenter",this.clearTimeout.bind(this,t)),t.addEventListener("focusin",this.clearTimeout.bind(this,t)),t.addEventListener("mouseleave",this.startTimeout.bind(this,t,i)),t.addEventListener("focusout",this.startTimeout.bind(this,t,i))),n}dismiss(t){"string"!=typeof t?(this.added.delete(t),Ct(this.children,(()=>Pt(t).then((()=>t.remove())))),this.clearTimeout(t)):this.querySelectorAll(`[data-key="${t}"]`).forEach((t=>this.dismiss(t)))}clear(){Array.from(this.children).forEach((t=>{this.dismiss(t)}))}speak(t){const e=document.createElement("div");Object.assign(e.style,{clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",width:"1px"}),e.textContent=t,this.show(e)}startTimeout(t,e){this.clearTimeout(t),this.timeouts.set(t,window.setTimeout((()=>{this.dismiss(t)}),e))}clearTimeout(t){this.timeouts.has(t)&&clearTimeout(this.timeouts.get(t))}};let Ft=Dt;function Ht(t){return t.altKey||t.ctrlKey||t.metaKey||t.shiftKey||void 0!==t.button&&0!==t.button}It(Ft,"duration",1e4);var Nt=Object.defineProperty,qt=(t,e,n)=>(((t,e,n)=>{e in t?Nt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n})(t,e+"",n),n);class jt extends HTMLElement{constructor(){super(...arguments),qt(this,"onButtonClick",(t=>{!Ht(t)&&!this.disabled&&(this.open=!this.open,t.preventDefault())}))}static get observedAttributes(){return["open"]}connectedCallback(){this.content.hidden=!this.open,this.button.setAttribute("aria-expanded",String(this.open)),this.button.addEventListener("click",this.onButtonClick)}disconnectedCallback(){Lt(this.content),this.button.removeAttribute("aria-expanded"),this.button.removeEventListener("click",this.onButtonClick)}get open(){return this.hasAttribute("open")}set open(t){t?this.setAttribute("open",""):this.removeAttribute("open")}get disabled(){return this.hasAttribute("disabled")}attributeChangedCallback(t,e,n){"open"===t&&(null!==n?this.wasOpened():this.wasClosed())}wasOpened(){this.content.hidden&&(this.content.hidden=!1,Rt(this.content)),this.button.setAttribute("aria-expanded","true"),this.dispatchEvent(new Event("toggle"))}wasClosed(){this.content.hidden||Pt(this.content).then((()=>this.content.hidden=!0)),this.button.setAttribute("aria-expanded","false"),this.dispatchEvent(new Event("toggle"))}get button(){return this.querySelector("button, [role=button]")}get content(){return this.children[1]}}
/*!
            * tabbable 5.3.3
            * @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
            */var Bt=["input","select","textarea","a[href]","button","[tabindex]:not(slot)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],Ut=Bt.join(","),Wt="undefined"==typeof Element,Vt=Wt?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,zt=!Wt&&Element.prototype.getRootNode?function(t){return t.getRootNode()}:function(t){return t.ownerDocument},$t=function(t,e,n){var i=Array.prototype.slice.apply(t.querySelectorAll(Ut));return e&&Vt.call(t,Ut)&&i.unshift(t),i=i.filter(n)},Kt=function t(e,n,i){for(var r=[],s=Array.from(e);s.length;){var o=s.shift();if("SLOT"===o.tagName){var a=o.assignedElements(),c=t(a.length?a:o.children,!0,i);i.flatten?r.push.apply(r,c):r.push({scope:o,candidates:c})}else{Vt.call(o,Ut)&&i.filter(o)&&(n||!e.includes(o))&&r.push(o);var u=o.shadowRoot||"function"==typeof i.getShadowRoot&&i.getShadowRoot(o),l=!i.shadowRootFilter||i.shadowRootFilter(o);if(u&&l){var h=t(!0===u?o.children:u.children,!0,i);i.flatten?r.push.apply(r,h):r.push({scope:o,candidates:h})}else s.unshift.apply(s,o.children)}}return r},Xt=function(t,e){return t.tabIndex<0&&(e||/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||t.isContentEditable)&&isNaN(parseInt(t.getAttribute("tabindex"),10))?0:t.tabIndex},Jt=function(t,e){return t.tabIndex===e.tabIndex?t.documentOrder-e.documentOrder:t.tabIndex-e.tabIndex},Gt=function(t){return"INPUT"===t.tagName},Yt=function(t){return function(t){return Gt(t)&&"radio"===t.type}(t)&&!function(t){if(!t.name)return!0;var e,n=t.form||zt(t),i=function(t){return n.querySelectorAll('input[type="radio"][name="'+t+'"]')};if("undefined"!=typeof window&&void 0!==window.CSS&&"function"==typeof window.CSS.escape)e=i(window.CSS.escape(t.name));else try{e=i(t.name)}catch(s){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",s.message),!1}var r=function(t,e){for(var n=0;n<t.length;n++)if(t[n].checked&&t[n].form===e)return t[n]}(e,t.form);return!r||r===t}(t)},Qt=function(t){var e=t.getBoundingClientRect(),n=e.width,i=e.height;return 0===n&&0===i},Zt=function(t,e){return!(e.disabled||function(t){return Gt(t)&&"hidden"===t.type}(e)||function(t,e){var n=e.displayCheck,i=e.getShadowRoot;if("hidden"===getComputedStyle(t).visibility)return!0;var r=Vt.call(t,"details>summary:first-of-type")?t.parentElement:t;if(Vt.call(r,"details:not([open]) *"))return!0;var s=zt(t).host,o=(null==s?void 0:s.ownerDocument.contains(s))||t.ownerDocument.contains(t);if(n&&"full"!==n){if("non-zero-area"===n)return Qt(t)}else{if("function"==typeof i){for(var a=t;t;){var c=t.parentElement,u=zt(t);if(c&&!c.shadowRoot&&!0===i(c))return Qt(t);t=t.assignedSlot?t.assignedSlot:c||u===t.ownerDocument?c:u.host}t=a}if(o)return!t.getClientRects().length}return!1}(e,t)||function(t){return"DETAILS"===t.tagName&&Array.prototype.slice.apply(t.children).some((function(t){return"SUMMARY"===t.tagName}))}(e)||function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var e=t.parentElement;e;){if("FIELDSET"===e.tagName&&e.disabled){for(var n=0;n<e.children.length;n++){var i=e.children.item(n);if("LEGEND"===i.tagName)return!!Vt.call(e,"fieldset[disabled] *")||!i.contains(t)}return!0}e=e.parentElement}return!1}(e))},te=function(t,e){return!(Yt(e)||Xt(e)<0||!Zt(t,e))},ee=function(t){var e=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(e)||e>=0)},ne=function t(e){var n=[],i=[];return e.forEach((function(e,r){var s=!!e.scope,o=s?e.scope:e,a=Xt(o,s),c=s?t(e.candidates):o;0===a?s?n.push.apply(n,c):n.push(o):i.push({documentOrder:r,tabIndex:a,item:e,isScope:s,content:c})})),i.sort(Jt).reduce((function(t,e){return e.isScope?t.push.apply(t,e.content):t.push(e.content),t}),[]).concat(n)},ie=function(t,e){var n;return n=(e=e||{}).getShadowRoot?Kt([t],e.includeContainer,{filter:te.bind(null,e),flatten:!1,getShadowRoot:e.getShadowRoot,shadowRootFilter:ee}):$t(t,e.includeContainer,te.bind(null,e)),ne(n)},re=function(t,e){return(e=e||{}).getShadowRoot?Kt([t],e.includeContainer,{filter:Zt.bind(null,e),flatten:!0,getShadowRoot:e.getShadowRoot}):$t(t,e.includeContainer,Zt.bind(null,e))},se=function(t,e){if(e=e||{},!t)throw new Error("No node provided");return!1!==Vt.call(t,Ut)&&te(e,t)},oe=Bt.concat("iframe").join(","),ae=function(t,e){if(e=e||{},!t)throw new Error("No node provided");return!1!==Vt.call(t,oe)&&Zt(e,t)},ce=Object.defineProperty,ue=(t,e,n)=>(((t,e,n)=>{e in t?ce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n})(t,"symbol"!=typeof e?e+"":e,n),n);const le=class extends HTMLElement{constructor(){super(...arguments),ue(this,"search",""),ue(this,"searchTimeout"),ue(this,"onKeyDown",(t=>{if(!this.hidden){if("ArrowUp"===t.key)return this.navigate(-1),void t.preventDefault();if("ArrowDown"===t.key)return this.navigate(1),void t.preventDefault();t.key.length>1||t.ctrlKey||t.metaKey||t.altKey||(this.search+=t.key.toLowerCase(),t.preventDefault(),clearTimeout(this.searchTimeout),this.searchTimeout=window.setTimeout((()=>{this.search=""}),le.searchDelay),this.items.some((t=>{var e;return 0===(null==(e=t.textContent)?void 0:e.trim().toLowerCase().indexOf(this.search))&&(t.focus(),!0)})))}}))}connectedCallback(){this.hasAttribute("role")||this.setAttribute("role","menu"),this.hasAttribute("tabindex")||this.setAttribute("tabindex","-1"),this.items.forEach((t=>{t.hasAttribute("tabindex")||t.setAttribute("tabindex","-1")})),this.addEventListener("keydown",this.onKeyDown)}disconnectedCallback(){this.removeEventListener("keydown",this.onKeyDown)}get items(){return Array.from(this.querySelectorAll("[role^=menuitem]")).filter((t=>ae(t)))}navigate(t){var e;const n=this.items;let i=(document.activeElement instanceof HTMLElement?n.indexOf(document.activeElement):-1)+t;i<0&&(i=n.length-1),i>=n.length&&(i=0),null==(e=n[i])||e.focus()}};let he=le;
/*!
            * focus-trap 6.9.4
            * @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
            */
function de(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function pe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?de(Object(n),!0).forEach((function(e){fe(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function fe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}ue(he,"searchDelay",800);var me,ge=(me=[],{activateTrap:function(t){if(me.length>0){var e=me[me.length-1];e!==t&&e.pause()}var n=me.indexOf(t);-1===n||me.splice(n,1),me.push(t)},deactivateTrap:function(t){var e=me.indexOf(t);-1!==e&&me.splice(e,1),me.length>0&&me[me.length-1].unpause()}}),ve=function(t){return setTimeout(t,0)},be=function(t,e){var n=-1;return t.every((function(t,i){return!e(t)||(n=i,!1)})),n},ye=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return"function"==typeof t?t.apply(void 0,n):t},we=function(t){return t.target.shadowRoot&&"function"==typeof t.composedPath?t.composedPath()[0]:t.target},Ee=function(t,e){var n,i=(null==e?void 0:e.document)||document,r=pe({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},e),s={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},o=function(t,e,n){return t&&void 0!==t[e]?t[e]:r[n||e]},a=function(t){return s.containerGroups.findIndex((function(e){var n=e.container,i=e.tabbableNodes;return n.contains(t)||i.find((function(e){return e===t}))}))},c=function(t){var e=r[t];if("function"==typeof e){for(var n=arguments.length,s=new Array(n>1?n-1:0),o=1;o<n;o++)s[o-1]=arguments[o];e=e.apply(void 0,s)}if(!0===e&&(e=void 0),!e){if(void 0===e||!1===e)return e;throw new Error("`".concat(t,"` was specified but was not a node, or did not return a node"))}var a=e;if("string"==typeof e&&!(a=i.querySelector(e)))throw new Error("`".concat(t,"` as selector refers to no known node"));return a},u=function(){var t=c("initialFocus");if(!1===t)return!1;if(void 0===t)if(a(i.activeElement)>=0)t=i.activeElement;else{var e=s.tabbableGroups[0];t=e&&e.firstTabbableNode||c("fallbackFocus")}if(!t)throw new Error("Your focus-trap needs to have at least one focusable element");return t},l=function(){if(s.containerGroups=s.containers.map((function(t){var e=ie(t,r.tabbableOptions),n=re(t,r.tabbableOptions);return{container:t,tabbableNodes:e,focusableNodes:n,firstTabbableNode:e.length>0?e[0]:null,lastTabbableNode:e.length>0?e[e.length-1]:null,nextTabbableNode:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=n.findIndex((function(e){return e===t}));if(!(i<0))return e?n.slice(i+1).find((function(t){return se(t,r.tabbableOptions)})):n.slice(0,i).reverse().find((function(t){return se(t,r.tabbableOptions)}))}}})),s.tabbableGroups=s.containerGroups.filter((function(t){return t.tabbableNodes.length>0})),s.tabbableGroups.length<=0&&!c("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},h=function t(e){!1!==e&&e!==i.activeElement&&(e&&e.focus?(e.focus({preventScroll:!!r.preventScroll}),s.mostRecentlyFocusedNode=e,function(t){return t.tagName&&"input"===t.tagName.toLowerCase()&&"function"==typeof t.select}(e)&&e.select()):t(u()))},d=function(t){var e=c("setReturnFocus",t);return e||!1!==e&&t},p=function(t){var e=we(t);a(e)>=0||(ye(r.clickOutsideDeactivates,t)?n.deactivate({returnFocus:r.returnFocusOnDeactivate&&!ae(e,r.tabbableOptions)}):ye(r.allowOutsideClick,t)||t.preventDefault())},f=function(t){var e=we(t),n=a(e)>=0;n||e instanceof Document?n&&(s.mostRecentlyFocusedNode=e):(t.stopImmediatePropagation(),h(s.mostRecentlyFocusedNode||u()))},m=function(t){if(function(t){return"Escape"===t.key||"Esc"===t.key||27===t.keyCode}(t)&&!1!==ye(r.escapeDeactivates,t))return t.preventDefault(),void n.deactivate();(function(t){return"Tab"===t.key||9===t.keyCode})(t)&&function(t){var e=we(t);l();var n=null;if(s.tabbableGroups.length>0){var i=a(e),o=i>=0?s.containerGroups[i]:void 0;if(i<0)n=t.shiftKey?s.tabbableGroups[s.tabbableGroups.length-1].lastTabbableNode:s.tabbableGroups[0].firstTabbableNode;else if(t.shiftKey){var u=be(s.tabbableGroups,(function(t){var n=t.firstTabbableNode;return e===n}));if(u<0&&(o.container===e||ae(e,r.tabbableOptions)&&!se(e,r.tabbableOptions)&&!o.nextTabbableNode(e,!1))&&(u=i),u>=0){var d=0===u?s.tabbableGroups.length-1:u-1;n=s.tabbableGroups[d].lastTabbableNode}}else{var p=be(s.tabbableGroups,(function(t){var n=t.lastTabbableNode;return e===n}));if(p<0&&(o.container===e||ae(e,r.tabbableOptions)&&!se(e,r.tabbableOptions)&&!o.nextTabbableNode(e))&&(p=i),p>=0){var f=p===s.tabbableGroups.length-1?0:p+1;n=s.tabbableGroups[f].firstTabbableNode}}}else n=c("fallbackFocus");n&&(t.preventDefault(),h(n))}(t)},g=function(t){var e=we(t);a(e)>=0||ye(r.clickOutsideDeactivates,t)||ye(r.allowOutsideClick,t)||(t.preventDefault(),t.stopImmediatePropagation())},v=function(){if(s.active)return ge.activateTrap(n),s.delayInitialFocusTimer=r.delayInitialFocus?ve((function(){h(u())})):h(u()),i.addEventListener("focusin",f,!0),i.addEventListener("mousedown",p,{capture:!0,passive:!1}),i.addEventListener("touchstart",p,{capture:!0,passive:!1}),i.addEventListener("click",g,{capture:!0,passive:!1}),i.addEventListener("keydown",m,{capture:!0,passive:!1}),n},b=function(){if(s.active)return i.removeEventListener("focusin",f,!0),i.removeEventListener("mousedown",p,!0),i.removeEventListener("touchstart",p,!0),i.removeEventListener("click",g,!0),i.removeEventListener("keydown",m,!0),n};return(n={get active(){return s.active},get paused(){return s.paused},activate:function(t){if(s.active)return this;var e=o(t,"onActivate"),n=o(t,"onPostActivate"),r=o(t,"checkCanFocusTrap");r||l(),s.active=!0,s.paused=!1,s.nodeFocusedBeforeActivation=i.activeElement,e&&e();var a=function(){r&&l(),v(),n&&n()};return r?(r(s.containers.concat()).then(a,a),this):(a(),this)},deactivate:function(t){if(!s.active)return this;var e=pe({onDeactivate:r.onDeactivate,onPostDeactivate:r.onPostDeactivate,checkCanReturnFocus:r.checkCanReturnFocus},t);clearTimeout(s.delayInitialFocusTimer),s.delayInitialFocusTimer=void 0,b(),s.active=!1,s.paused=!1,ge.deactivateTrap(n);var i=o(e,"onDeactivate"),a=o(e,"onPostDeactivate"),c=o(e,"checkCanReturnFocus"),u=o(e,"returnFocus","returnFocusOnDeactivate");i&&i();var l=function(){ve((function(){u&&h(d(s.nodeFocusedBeforeActivation)),a&&a()}))};return u&&c?(c(d(s.nodeFocusedBeforeActivation)).then(l,l),this):(l(),this)},pause:function(){return s.paused||!s.active||(s.paused=!0,b()),this},unpause:function(){return s.paused&&s.active?(s.paused=!1,l(),v(),this):this},updateContainerElements:function(t){var e=[].concat(t).filter(Boolean);return s.containers=e.map((function(t){return"string"==typeof t?i.querySelector(t):t})),s.active&&l(),this}}).updateContainerElements(t),n},Se=Object.defineProperty,ke=(t,e,n)=>(((t,e,n)=>{e in t?Se(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n})(t,"symbol"!=typeof e?e+"":e,n),n);const Te=class extends HTMLElement{constructor(){super(),ke(this,"focusTrap"),ke(this,"connected",!1);const t=document.createElement("template");t.innerHTML='\n            <div part="backdrop" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0"></div>\n            <div part="content" style="z-index: 1"><slot></slot></div>\n        ';const e=this.attachShadow({mode:"open"});e.appendChild(t.content.cloneNode(!0)),this.backdrop.addEventListener("click",(()=>{var t;this.hasAttribute("static")?null==(t=Te.attention)||t.call(Te,e.children[1]):this.close()})),this.focusTrap=Ee(this,{escapeDeactivates:!1,allowOutsideClick:!0,preventScroll:!0})}static get observedAttributes(){return["open"]}connectedCallback(){var t,e,n,i,r,s;this.connected=!0,null!=(t=this.content)&&t.hasAttribute("role")||null==(e=this.content)||e.setAttribute("role","dialog"),null!=(n=this.content)&&n.hasAttribute("aria-modal")||null==(i=this.content)||i.setAttribute("aria-modal","true"),null!=(r=this.content)&&r.hasAttribute("tabindex")||null==(s=this.content)||s.setAttribute("tabindex","-1"),this.addEventListener("keydown",(t=>{"Escape"===t.key&&this.open&&(t.preventDefault(),t.stopPropagation(),this.close())})),this.open&&this.wasOpened()}disconnectedCallback(){this.connected=!1}get open(){return this.hasAttribute("open")}set open(t){t?this.setAttribute("open",""):this.removeAttribute("open")}close(){if(!this.open)return;const t=new Event("beforeclose",{cancelable:!0});this.dispatchEvent(t)&&(this.open=!1)}attributeChangedCallback(t,e,n){"open"!==t||!this.connected||(null!==n?this.wasOpened():this.wasClosed())}wasOpened(){var t,e;this.hidden=!1,Rt(this),null==(t=this.focusTrap)||t.activate(),null==(e=this.querySelector("[autofocus]"))||e.focus(),this.dispatchEvent(new Event("open"))}wasClosed(){var t;null==(t=this.focusTrap)||t.deactivate(),Pt(this).then((()=>this.hidden=!0)),this.dispatchEvent(new Event("close"))}get backdrop(){var t;return null==(t=this.shadowRoot)?void 0:t.firstElementChild}get content(){return this.firstElementChild}};let Ce=Te;ke(Ce,"attention",(t=>t.animate([{transform:"scale(1)"},{transform:"scale(1.1)"},{transform:"scale(1)"}],300)));const Le=Math.min,Ae=Math.max,Re=Math.round,Pe=Math.floor,xe=t=>({x:t,y:t}),_e={left:"right",right:"left",bottom:"top",top:"bottom"},Oe={start:"end",end:"start"};function Me(t,e,n){return Ae(t,Le(e,n))}function Ie(t,e){return"function"==typeof t?t(e):t}function De(t){return t.split("-")[0]}function Fe(t){return t.split("-")[1]}function He(t){return"x"===t?"y":"x"}function Ne(t){return"y"===t?"height":"width"}function qe(t){return["top","bottom"].includes(De(t))?"y":"x"}function je(t){return He(qe(t))}function Be(t){return t.replace(/start|end/g,(t=>Oe[t]))}function Ue(t){return t.replace(/left|right|bottom|top/g,(t=>_e[t]))}function We(t){const{x:e,y:n,width:i,height:r}=t;return{width:i,height:r,top:n,left:e,right:e+i,bottom:n+r,x:e,y:n}}function Ve(t,e,n){let{reference:i,floating:r}=t;const s=qe(e),o=je(e),a=Ne(o),c=De(e),u="y"===s,l=i.x+i.width/2-r.width/2,h=i.y+i.height/2-r.height/2,d=i[a]/2-r[a]/2;let p;switch(c){case"top":p={x:l,y:i.y-r.height};break;case"bottom":p={x:l,y:i.y+i.height};break;case"right":p={x:i.x+i.width,y:h};break;case"left":p={x:i.x-r.width,y:h};break;default:p={x:i.x,y:i.y}}switch(Fe(e)){case"start":p[o]-=d*(n&&u?-1:1);break;case"end":p[o]+=d*(n&&u?-1:1)}return p}async function ze(t,e){var n;void 0===e&&(e={});const{x:i,y:r,platform:s,rects:o,elements:a,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:l="viewport",elementContext:h="floating",altBoundary:d=!1,padding:p=0}=Ie(e,t),f=function(t){return"number"!=typeof t?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(t):{top:t,right:t,bottom:t,left:t}}(p),m=a[d?"floating"===h?"reference":"floating":h],g=We(await s.getClippingRect({element:null==(n=await(null==s.isElement?void 0:s.isElement(m)))||n?m:m.contextElement||await(null==s.getDocumentElement?void 0:s.getDocumentElement(a.floating)),boundary:u,rootBoundary:l,strategy:c})),v="floating"===h?{x:i,y:r,width:o.floating.width,height:o.floating.height}:o.reference,b=await(null==s.getOffsetParent?void 0:s.getOffsetParent(a.floating)),y=await(null==s.isElement?void 0:s.isElement(b))&&await(null==s.getScale?void 0:s.getScale(b))||{x:1,y:1},w=We(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:b,strategy:c}):v);return{top:(g.top-w.top+f.top)/y.y,bottom:(w.bottom-g.bottom+f.bottom)/y.y,left:(g.left-w.left+f.left)/y.x,right:(w.right-g.right+f.right)/y.x}}function $e(){return"undefined"!=typeof window}function Ke(t){return Ge(t)?(t.nodeName||"").toLowerCase():"#document"}function Xe(t){var e;return(null==t||null==(e=t.ownerDocument)?void 0:e.defaultView)||window}function Je(t){var e;return null==(e=(Ge(t)?t.ownerDocument:t.document)||window.document)?void 0:e.documentElement}function Ge(t){return!!$e()&&(t instanceof Node||t instanceof Xe(t).Node)}function Ye(t){return!!$e()&&(t instanceof Element||t instanceof Xe(t).Element)}function Qe(t){return!!$e()&&(t instanceof HTMLElement||t instanceof Xe(t).HTMLElement)}function Ze(t){return!(!$e()||"undefined"==typeof ShadowRoot)&&(t instanceof ShadowRoot||t instanceof Xe(t).ShadowRoot)}function tn(t){const{overflow:e,overflowX:n,overflowY:i,display:r}=an(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!["inline","contents"].includes(r)}function en(t){return["table","td","th"].includes(Ke(t))}function nn(t){return[":popover-open",":modal"].some((e=>{try{return t.matches(e)}catch(Bn){return!1}}))}function rn(t){const e=sn(),n=Ye(t)?an(t):t;return["transform","translate","scale","rotate","perspective"].some((t=>!!n[t]&&"none"!==n[t]))||!!n.containerType&&"normal"!==n.containerType||!e&&!!n.backdropFilter&&"none"!==n.backdropFilter||!e&&!!n.filter&&"none"!==n.filter||["transform","translate","scale","rotate","perspective","filter"].some((t=>(n.willChange||"").includes(t)))||["paint","layout","strict","content"].some((t=>(n.contain||"").includes(t)))}function sn(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function on(t){return["html","body","#document"].includes(Ke(t))}function an(t){return Xe(t).getComputedStyle(t)}function cn(t){return Ye(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function un(t){if("html"===Ke(t))return t;const e=t.assignedSlot||t.parentNode||Ze(t)&&t.host||Je(t);return Ze(e)?e.host:e}function ln(t){const e=un(t);return on(e)?t.ownerDocument?t.ownerDocument.body:t.body:Qe(e)&&tn(e)?e:ln(e)}function hn(t,e,n){var i;void 0===e&&(e=[]),void 0===n&&(n=!0);const r=ln(t),s=r===(null==(i=t.ownerDocument)?void 0:i.body),o=Xe(r);if(s){const t=dn(o);return e.concat(o,o.visualViewport||[],tn(r)?r:[],t&&n?hn(t):[])}return e.concat(r,hn(r,[],n))}function dn(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function pn(t){const e=an(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=Qe(t),s=r?t.offsetWidth:n,o=r?t.offsetHeight:i,a=Re(n)!==s||Re(i)!==o;return a&&(n=s,i=o),{width:n,height:i,$:a}}function fn(t){return Ye(t)?t:t.contextElement}function mn(t){const e=fn(t);if(!Qe(e))return xe(1);const n=e.getBoundingClientRect(),{width:i,height:r,$:s}=pn(e);let o=(s?Re(n.width):n.width)/i,a=(s?Re(n.height):n.height)/r;return o&&Number.isFinite(o)||(o=1),a&&Number.isFinite(a)||(a=1),{x:o,y:a}}const gn=xe(0);function vn(t){const e=Xe(t);return sn()&&e.visualViewport?{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}:gn}function bn(t,e,n,i){void 0===e&&(e=!1),void 0===n&&(n=!1);const r=t.getBoundingClientRect(),s=fn(t);let o=xe(1);e&&(i?Ye(i)&&(o=mn(i)):o=mn(t));const a=function(t,e,n){return void 0===e&&(e=!1),!(!n||e&&n!==Xe(t))&&e}(s,n,i)?vn(s):xe(0);let c=(r.left+a.x)/o.x,u=(r.top+a.y)/o.y,l=r.width/o.x,h=r.height/o.y;if(s){const t=Xe(s),e=i&&Ye(i)?Xe(i):i;let n=t,r=dn(n);for(;r&&i&&e!==n;){const t=mn(r),e=r.getBoundingClientRect(),i=an(r),s=e.left+(r.clientLeft+parseFloat(i.paddingLeft))*t.x,o=e.top+(r.clientTop+parseFloat(i.paddingTop))*t.y;c*=t.x,u*=t.y,l*=t.x,h*=t.y,c+=s,u+=o,n=Xe(r),r=dn(n)}}return We({width:l,height:h,x:c,y:u})}function yn(t,e){const n=cn(t).scrollLeft;return e?e.left+n:bn(Je(t)).left+n}function wn(t,e,n){void 0===n&&(n=!1);const i=t.getBoundingClientRect();return{x:i.left+e.scrollLeft-(n?0:yn(t,i)),y:i.top+e.scrollTop}}function En(t,e,n){let i;if("viewport"===e)i=function(t,e){const n=Xe(t),i=Je(t),r=n.visualViewport;let s=i.clientWidth,o=i.clientHeight,a=0,c=0;if(r){s=r.width,o=r.height;const t=sn();(!t||t&&"fixed"===e)&&(a=r.offsetLeft,c=r.offsetTop)}return{width:s,height:o,x:a,y:c}}(t,n);else if("document"===e)i=function(t){const e=Je(t),n=cn(t),i=t.ownerDocument.body,r=Ae(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),s=Ae(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let o=-n.scrollLeft+yn(t);const a=-n.scrollTop;return"rtl"===an(i).direction&&(o+=Ae(e.clientWidth,i.clientWidth)-r),{width:r,height:s,x:o,y:a}}(Je(t));else if(Ye(e))i=function(t,e){const n=bn(t,!0,"fixed"===e),i=n.top+t.clientTop,r=n.left+t.clientLeft,s=Qe(t)?mn(t):xe(1);return{width:t.clientWidth*s.x,height:t.clientHeight*s.y,x:r*s.x,y:i*s.y}}(e,n);else{const n=vn(t);i={x:e.x-n.x,y:e.y-n.y,width:e.width,height:e.height}}return We(i)}function Sn(t,e){const n=un(t);return!(n===e||!Ye(n)||on(n))&&("fixed"===an(n).position||Sn(n,e))}function kn(t,e,n){const i=Qe(e),r=Je(e),s="fixed"===n,o=bn(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const c=xe(0);if(i||!i&&!s)if(("body"!==Ke(e)||tn(r))&&(a=cn(e)),i){const t=bn(e,!0,s,e);c.x=t.x+e.clientLeft,c.y=t.y+e.clientTop}else r&&(c.x=yn(r));const u=!r||i||s?xe(0):wn(r,a);return{x:o.left+a.scrollLeft-c.x-u.x,y:o.top+a.scrollTop-c.y-u.y,width:o.width,height:o.height}}function Tn(t){return"static"===an(t).position}function Cn(t,e){if(!Qe(t)||"fixed"===an(t).position)return null;if(e)return e(t);let n=t.offsetParent;return Je(t)===n&&(n=n.ownerDocument.body),n}function Ln(t,e){const n=Xe(t);if(nn(t))return n;if(!Qe(t)){let e=un(t);for(;e&&!on(e);){if(Ye(e)&&!Tn(e))return e;e=un(e)}return n}let i=Cn(t,e);for(;i&&en(i)&&Tn(i);)i=Cn(i,e);return i&&on(i)&&Tn(i)&&!rn(i)?n:i||function(t){let e=un(t);for(;Qe(e)&&!on(e);){if(rn(e))return e;if(nn(e))return null;e=un(e)}return null}(t)||n}const An={convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{elements:e,rect:n,offsetParent:i,strategy:r}=t;const s="fixed"===r,o=Je(i),a=!!e&&nn(e.floating);if(i===o||a&&s)return n;let c={scrollLeft:0,scrollTop:0},u=xe(1);const l=xe(0),h=Qe(i);if((h||!h&&!s)&&(("body"!==Ke(i)||tn(o))&&(c=cn(i)),Qe(i))){const t=bn(i);u=mn(i),l.x=t.x+i.clientLeft,l.y=t.y+i.clientTop}const d=!o||h||s?xe(0):wn(o,c,!0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+l.x+d.x,y:n.y*u.y-c.scrollTop*u.y+l.y+d.y}},getDocumentElement:Je,getClippingRect:function(t){let{element:e,boundary:n,rootBoundary:i,strategy:r}=t;const s="clippingAncestors"===n?nn(e)?[]:function(t,e){const n=e.get(t);if(n)return n;let i=hn(t,[],!1).filter((t=>Ye(t)&&"body"!==Ke(t))),r=null;const s="fixed"===an(t).position;let o=s?un(t):t;for(;Ye(o)&&!on(o);){const e=an(o),n=rn(o);n||"fixed"!==e.position||(r=null),(s?!n&&!r:!n&&"static"===e.position&&r&&["absolute","fixed"].includes(r.position)||tn(o)&&!n&&Sn(t,o))?i=i.filter((t=>t!==o)):r=e,o=un(o)}return e.set(t,i),i}(e,this._c):[].concat(n),o=[...s,i],a=o[0],c=o.reduce(((t,n)=>{const i=En(e,n,r);return t.top=Ae(i.top,t.top),t.right=Le(i.right,t.right),t.bottom=Le(i.bottom,t.bottom),t.left=Ae(i.left,t.left),t}),En(e,a,r));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}},getOffsetParent:Ln,getElementRects:async function(t){const e=this.getOffsetParent||Ln,n=this.getDimensions,i=await n(t.floating);return{reference:kn(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}},getClientRects:function(t){return Array.from(t.getClientRects())},getDimensions:function(t){const{width:e,height:n}=pn(t);return{width:e,height:n}},getScale:mn,isElement:Ye,isRTL:function(t){return"rtl"===an(t).direction}};function Rn(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Pn(t,e,n,i){void 0===i&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o="function"==typeof ResizeObserver,layoutShift:a="function"==typeof IntersectionObserver,animationFrame:c=!1}=i,u=fn(t),l=r||s?[...u?hn(u):[],...hn(e)]:[];l.forEach((t=>{r&&t.addEventListener("scroll",n,{passive:!0}),s&&t.addEventListener("resize",n)}));const h=u&&a?function(t,e){let n,i=null;const r=Je(t);function s(){var t;clearTimeout(n),null==(t=i)||t.disconnect(),i=null}return function o(a,c){void 0===a&&(a=!1),void 0===c&&(c=1),s();const u=t.getBoundingClientRect(),{left:l,top:h,width:d,height:p}=u;if(a||e(),!d||!p)return;const f={rootMargin:-Pe(h)+"px "+-Pe(r.clientWidth-(l+d))+"px "+-Pe(r.clientHeight-(h+p))+"px "+-Pe(l)+"px",threshold:Ae(0,Le(1,c))||1};let m=!0;function g(e){const i=e[0].intersectionRatio;if(i!==c){if(!m)return o();i?o(!1,i):n=setTimeout((()=>{o(!1,1e-7)}),1e3)}1!==i||Rn(u,t.getBoundingClientRect())||o(),m=!1}try{i=new IntersectionObserver(g,{...f,root:r.ownerDocument})}catch(Bn){i=new IntersectionObserver(g,f)}i.observe(t)}(!0),s}(u,n):null;let d,p=-1,f=null;o&&(f=new ResizeObserver((t=>{let[i]=t;i&&i.target===u&&f&&(f.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame((()=>{var t;null==(t=f)||t.observe(e)}))),n()})),u&&!c&&f.observe(u),f.observe(e));let m=c?bn(t):null;return c&&function e(){const i=bn(t);m&&!Rn(m,i)&&n(),m=i,d=requestAnimationFrame(e)}(),n(),()=>{var t;l.forEach((t=>{r&&t.removeEventListener("scroll",n),s&&t.removeEventListener("resize",n)})),null==h||h(),null==(t=f)||t.disconnect(),f=null,c&&cancelAnimationFrame(d)}}const xn=function(t){return void 0===t&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:i,placement:r}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:t=>{let{x:e,y:n}=t;return{x:e,y:n}}},...c}=Ie(t,e),u={x:n,y:i},l=await ze(e,c),h=qe(De(r)),d=He(h);let p=u[d],f=u[h];if(s){const t="y"===d?"bottom":"right";p=Me(p+l["y"===d?"top":"left"],p,p-l[t])}if(o){const t="y"===h?"bottom":"right";f=Me(f+l["y"===h?"top":"left"],f,f-l[t])}const m=a.fn({...e,[d]:p,[h]:f});return{...m,data:{x:m.x-n,y:m.y-i,enabled:{[d]:s,[h]:o}}}}}},_n=function(t){return void 0===t&&(t={}),{name:"flip",options:t,async fn(e){var n,i;const{placement:r,middlewareData:s,rects:o,initialPlacement:a,platform:c,elements:u}=e,{mainAxis:l=!0,crossAxis:h=!0,fallbackPlacements:d,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:f="none",flipAlignment:m=!0,...g}=Ie(t,e);if(null!=(n=s.arrow)&&n.alignmentOffset)return{};const v=De(r),b=qe(a),y=De(a)===a,w=await(null==c.isRTL?void 0:c.isRTL(u.floating)),E=d||(y||!m?[Ue(a)]:function(t){const e=Ue(t);return[Be(t),e,Be(e)]}(a)),S="none"!==f;!d&&S&&E.push(...function(t,e,n,i){const r=Fe(t);let s=function(t,e,n){const i=["left","right"],r=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?r:i:e?i:r;case"left":case"right":return e?s:o;default:return[]}}(De(t),"start"===n,i);return r&&(s=s.map((t=>t+"-"+r)),e&&(s=s.concat(s.map(Be)))),s}(a,m,f,w));const k=[a,...E],T=await ze(e,g),C=[];let L=(null==(i=s.flip)?void 0:i.overflows)||[];if(l&&C.push(T[v]),h){const t=function(t,e,n){void 0===n&&(n=!1);const i=Fe(t),r=je(t),s=Ne(r);let o="x"===r?i===(n?"end":"start")?"right":"left":"start"===i?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=Ue(o)),[o,Ue(o)]}(r,o,w);C.push(T[t[0]],T[t[1]])}if(L=[...L,{placement:r,overflows:C}],!C.every((t=>t<=0))){var A,R;const t=((null==(A=s.flip)?void 0:A.index)||0)+1,e=k[t];if(e)return{data:{index:t,overflows:L},reset:{placement:e}};let n=null==(R=L.filter((t=>t.overflows[0]<=0)).sort(((t,e)=>t.overflows[1]-e.overflows[1]))[0])?void 0:R.placement;if(!n)switch(p){case"bestFit":{var P;const t=null==(P=L.filter((t=>{if(S){const e=qe(t.placement);return e===b||"y"===e}return!0})).map((t=>[t.placement,t.overflows.filter((t=>t>0)).reduce(((t,e)=>t+e),0)])).sort(((t,e)=>t[1]-e[1]))[0])?void 0:P[0];t&&(n=t);break}case"initialPlacement":n=a}if(r!==n)return{reset:{placement:n}}}return{}}}},On=function(t){return void 0===t&&(t={}),{name:"size",options:t,async fn(e){var n,i;const{placement:r,rects:s,platform:o,elements:a}=e,{apply:c=()=>{},...u}=Ie(t,e),l=await ze(e,u),h=De(r),d=Fe(r),p="y"===qe(r),{width:f,height:m}=s.floating;let g,v;"top"===h||"bottom"===h?(g=h,v=d===(await(null==o.isRTL?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(v=h,g="end"===d?"top":"bottom");const b=m-l.top-l.bottom,y=f-l.left-l.right,w=Le(m-l[g],b),E=Le(f-l[v],y),S=!e.middlewareData.shift;let k=w,T=E;if(null!=(n=e.middlewareData.shift)&&n.enabled.x&&(T=y),null!=(i=e.middlewareData.shift)&&i.enabled.y&&(k=b),S&&!d){const t=Ae(l.left,0),e=Ae(l.right,0),n=Ae(l.top,0),i=Ae(l.bottom,0);p?T=f-2*(0!==t||0!==e?t+e:Ae(l.left,l.right)):k=m-2*(0!==n||0!==i?n+i:Ae(l.top,l.bottom))}await c({...e,availableWidth:T,availableHeight:k});const C=await o.getDimensions(a.floating);return f!==C.width||m!==C.height?{reset:{rects:!0}}:{}}}},Mn=(t,e,n)=>{const i=new Map,r={platform:An,...n},s={...r.platform,_c:i};return(async(t,e,n)=>{const{placement:i="bottom",strategy:r="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),c=await(null==o.isRTL?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:r}),{x:l,y:h}=Ve(u,i,c),d=i,p={},f=0;for(let m=0;m<a.length;m++){const{name:n,fn:s}=a[m],{x:g,y:v,data:b,reset:y}=await s({x:l,y:h,initialPlacement:i,placement:d,strategy:r,middlewareData:p,rects:u,platform:o,elements:{reference:t,floating:e}});l=null!=g?g:l,h=null!=v?v:h,p={...p,[n]:{...p[n],...b}},y&&f<=50&&(f++,"object"==typeof y&&(y.placement&&(d=y.placement),y.rects&&(u=!0===y.rects?await o.getElementRects({reference:t,floating:e,strategy:r}):y.rects),({x:l,y:h}=Ve(u,d,c))),m=-1)}return{x:l,y:h,placement:d,strategy:r,middlewareData:p}})(t,e,{...r,platform:s})};var In=Object.defineProperty,Dn=(t,e,n)=>(((t,e,n)=>{e in t?In(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n})(t,"symbol"!=typeof e?e+"":e,n),n);class Fn extends HTMLElement{constructor(){super(),Dn(this,"cleanup"),Dn(this,"onButtonClick",(t=>{!Ht(t)&&!this.disabled&&(this.open=!this.open,t.preventDefault())})),Dn(this,"onButtonKeyDown",(t=>{var e;"ArrowDown"===t.key&&!this.disabled&&(t.preventDefault(),this.open=!0,null==(e=re(this.content)[0])||e.focus())})),Dn(this,"onKeyDown",(t=>{"Escape"===t.key&&this.open&&(t.preventDefault(),t.stopPropagation(),this.open=!1,this.button.focus())})),Dn(this,"onFocusOut",(t=>{t.relatedTarget instanceof Node&&this.contains(t.relatedTarget)||(this.open=!1)})),Dn(this,"onContentClick",(t=>{t.target instanceof Element&&t.target.closest("[role=menuitem], [role=menuitemradio]")&&(this.open=!1,this.button.focus())}));const t=document.createElement("template");t.innerHTML='\n            <div part="backdrop" hidden style="position: fixed; top: 0; left: 0; right: 0; bottom: 0"></div>\n            <slot></slot>\n        ',this.attachShadow({mode:"open"}).appendChild(t.content.cloneNode(!0)),this.backdrop.onclick=()=>this.open=!1}static get observedAttributes(){return["open"]}connectedCallback(){this.backdrop.hidden=!0,this.content.hidden=!0,this.open=!1,this.button.setAttribute("aria-expanded","false"),setTimeout((()=>{"menu"===this.content.getAttribute("role")&&this.button.setAttribute("aria-haspopup","true")})),this.button.addEventListener("click",this.onButtonClick),this.button.addEventListener("keydown",this.onButtonKeyDown),this.addEventListener("keydown",this.onKeyDown),this.addEventListener("focusout",this.onFocusOut),this.content.addEventListener("click",this.onContentClick)}disconnectedCallback(){Lt(this.backdrop),Lt(this.content),this.button.removeAttribute("aria-expanded"),this.button.removeAttribute("aria-haspopup"),this.button.removeEventListener("click",this.onButtonClick),this.button.removeEventListener("keydown",this.onButtonKeyDown),this.removeEventListener("keydown",this.onKeyDown),this.removeEventListener("focusout",this.onFocusOut),this.content.removeEventListener("click",this.onContentClick)}get open(){return this.hasAttribute("open")}set open(t){t?this.setAttribute("open",""):this.removeAttribute("open")}get disabled(){return this.hasAttribute("disabled")}attributeChangedCallback(t,e,n){"open"===t&&(null!==n?this.wasOpened():this.wasClosed())}wasOpened(){if(!this.content.hidden)return;this.content.hidden=!1,this.content.style.position="absolute",this.backdrop.hidden=!1,Rt(this.content),Rt(this.backdrop),this.button.setAttribute("aria-expanded","true"),this.cleanup=Pn(this.button,this.content,(()=>{Mn(this.button,this.content,{placement:this.getAttribute("placement")||"bottom",middleware:[xn(),_n(),On({apply:({availableWidth:t,availableHeight:e})=>{Object.assign(this.content.style,{maxWidth:"",maxHeight:""});const n=getComputedStyle(this.content);("none"===n.maxWidth||t<parseInt(n.maxWidth))&&(this.content.style.maxWidth=`${t}px`),("none"===n.maxHeight||e<parseInt(n.maxHeight))&&(this.content.style.maxHeight=`${e}px`)}})]}).then((({x:t,y:e,placement:n})=>{Object.assign(this.content.style,{left:`${t}px`,top:`${e}px`}),this.content.dataset.placement=n}))}),{ancestorScroll:!1});const t=this.content.querySelector("[autofocus]");t?t.focus():this.content.focus(),this.dispatchEvent(new Event("open"))}wasClosed(){var t;this.content.hidden||(this.button.setAttribute("aria-expanded","false"),null==(t=this.cleanup)||t.call(this),Pt(this.backdrop).then((()=>this.backdrop.hidden=!0)),Pt(this.content).then((()=>this.content.hidden=!0)),this.dispatchEvent(new Event("close")))}get backdrop(){var t;return null==(t=this.shadowRoot)?void 0:t.firstElementChild}get button(){return this.querySelector("button, [role=button]")}get content(){return this.children[1]}}var Hn=Object.defineProperty,Nn=(t,e,n)=>(((t,e,n)=>{e in t?Hn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n})(t,"symbol"!=typeof e?e+"":e,n),n);class qn extends HTMLElement{constructor(){super(...arguments),Nn(this,"onInitialFocus",(()=>{this.removeAttribute("tabindex"),this.focusControlAtIndex(0)})),Nn(this,"onKeyDown",(t=>{if("ArrowRight"!==t.key&&"ArrowLeft"!==t.key&&"Home"!==t.key&&"End"!==t.key)return;const e=this.controls,n=this.controls.length,i=e.indexOf(t.target);if(-1===i)return;let r=0;"ArrowLeft"===t.key&&(r=i-1),"ArrowRight"===t.key&&(r=i+1),"End"===t.key&&(r=n-1),r<0&&(r=n-1),r>n-1&&(r=0),this.focusControlAtIndex(r),t.preventDefault()}))}connectedCallback(){this.hasAttribute("role")||this.setAttribute("role","toolbar"),this.setAttribute("tabindex","0"),this.addEventListener("focus",this.onInitialFocus,{once:!0}),this.addEventListener("keydown",this.onKeyDown)}disconnectedCallback(){this.removeEventListener("keydown",this.onKeyDown)}focusControlAtIndex(t){this.controls.forEach(((e,n)=>{n===t?(e.setAttribute("tabindex","0"),e.focus()):e.setAttribute("tabindex","-1")}))}get controls(){return re(this)}}var jn=Object.defineProperty,Bn=(t,e,n)=>(((t,e,n)=>{e in t?jn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n})(t,"symbol"!=typeof e?e+"":e,n),n);const Un=class extends HTMLElement{constructor(){super(...arguments),Bn(this,"parent"),Bn(this,"tooltip"),Bn(this,"timeout"),Bn(this,"disabledObserver"),Bn(this,"showing",!1),Bn(this,"cleanup"),Bn(this,"prevInnerHTML"),Bn(this,"onMouseEnter",this.afterDelay.bind(this,this.show)),Bn(this,"onFocus",this.show.bind(this)),Bn(this,"onMouseLeave",this.afterDelay.bind(this,this.hide)),Bn(this,"onBlur",this.hide.bind(this)),Bn(this,"onPointerUp",(t=>{"mouse"===t.pointerType?this.hide():this.show()})),Bn(this,"onKeyDown",(t=>{"Escape"===t.key&&this.hide()}))}connectedCallback(){this.parent=this.parentNode,this.parent&&(this.parent.addEventListener("mouseenter",this.onMouseEnter),this.parent.addEventListener("focus",this.onFocus),this.parent.addEventListener("mouseleave",this.onMouseLeave),this.parent.addEventListener("blur",this.onBlur),this.parent.addEventListener("pointerup",this.onPointerUp),this.disabledObserver=new MutationObserver((t=>{t.forEach((t=>{"disabled"===t.attributeName&&this.hide()}))})),this.disabledObserver.observe(this.parent,{attributes:!0})),document.addEventListener("keydown",this.onKeyDown),document.addEventListener("scroll",this.onBlur)}disconnectedCallback(){var t,e;null==(t=this.cleanup)||t.call(this),this.tooltip&&(this.tooltip.remove(),this.tooltip=void 0),this.parent&&(this.parent.removeEventListener("mouseenter",this.onMouseEnter),this.parent.removeEventListener("focus",this.onFocus),this.parent.removeEventListener("mouseleave",this.onMouseLeave),this.parent.removeEventListener("blur",this.onBlur),this.parent.removeEventListener("pointerup",this.onPointerUp),this.parent=void 0),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("scroll",this.onBlur),null==(e=this.disabledObserver)||e.disconnect(),clearTimeout(this.timeout)}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}show(){var t;if(this.disabled)return;const e=this.createTooltip();clearTimeout(this.timeout),this.showing||(e.hidden=!1,Rt(e),this.showing=!0),this.innerHTML!==this.prevInnerHTML&&(this.prevInnerHTML=e.innerHTML=this.innerHTML),e.style.position="absolute",null==(t=this.cleanup)||t.call(this),this.cleanup=Pn(this.parent,e,(()=>Mn(this.parent,e,{placement:this.getAttribute("placement")||Un.placement,middleware:[xn(),_n()]}).then((({x:t,y:n,placement:i})=>{Object.assign(e.style,{left:`${t}px`,top:`${n}px`}),e.dataset.placement=i}))))}hide(){var t;clearTimeout(this.timeout),null==(t=this.cleanup)||t.call(this),this.showing&&(this.showing=!1,Pt(this.tooltip).then((()=>{this.tooltip&&(this.tooltip.hidden=!0)})))}afterDelay(t){clearTimeout(this.timeout);const e=parseInt(this.getAttribute("delay")||"");this.timeout=window.setTimeout(t.bind(this),isNaN(e)?Un.delay:e)}createTooltip(){return this.tooltip||(this.tooltip=document.createElement("div"),this.tooltip.className=this.getAttribute("tooltip-class")||Un.tooltipClass,this.tooltip.hidden=!0,this.tooltip.addEventListener("mouseenter",this.show.bind(this)),this.tooltip.addEventListener("mouseleave",this.afterDelay.bind(this,this.hide)),document.body.appendChild(this.tooltip)),this.tooltip}};let Wn=Un;function Vn(t){return Vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vn(t)}function zn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $n(t,e,n){return e&&function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Kn(){return Kn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Kn.apply(this,arguments)}function Xn(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Gn(t,e)}function Jn(t){return Jn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Jn(t)}function Gn(t,e){return Gn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Gn(t,e)}function Yn(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Qn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Bn){return!1}}();return function(){var n,i=Jn(t);if(e){var r=Jn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Yn(this,n)}}Bn(Wn,"delay",100),Bn(Wn,"placement","top"),Bn(Wn,"tooltipClass","tooltip"),window.customElements.define("ui-accordion",Tt),window.customElements.define("ui-alerts",Ft),window.customElements.define("ui-disclosure",jt),window.customElements.define("ui-menu",he),window.customElements.define("ui-modal",Ce),window.customElements.define("ui-popup",Fn),window.customElements.define("ui-toolbar",qn),window.customElements.define("ui-tooltip",Wn),Waterhole.documentTitle=new class{constructor(){this.title="",this.count=0}initialize(){this.title=document.title,this.count=0}increment(){this.count++,this.update()}reset(){this.count=0,this.update()}update(){document.title=(this.count?`(${this.count}) `:"")+this.title}},document.addEventListener("turbo:load",(()=>Waterhole.documentTitle.initialize())),window.addEventListener("focus",(()=>Waterhole.documentTitle.reset()));var Zn=function(){function t(){zn(this,t)}return $n(t,[{key:"listenForWhisper",value:function(t,e){return this.listen(".client-"+t,e)}},{key:"notification",value:function(t){return this.listen(".Illuminate\\Notifications\\Events\\BroadcastNotificationCreated",t)}},{key:"stopListeningForWhisper",value:function(t,e){return this.stopListening(".client-"+t,e)}}]),t}(),ti=function(){function t(e){zn(this,t),this.namespace=e}return $n(t,[{key:"format",value:function(t){return[".","\\"].includes(t.charAt(0))?t.substring(1):(this.namespace&&(t=this.namespace+"."+t),t.replace(/\./g,"\\"))}},{key:"setNamespace",value:function(t){this.namespace=t}}]),t}(),ei=function(t){Xn(n,t);var e=Qn(n);function n(t,i,r){var s;return zn(this,n),(s=e.call(this)).name=i,s.pusher=t,s.options=r,s.eventFormatter=new ti(s.options.namespace),s.subscribe(),s}return $n(n,[{key:"subscribe",value:function(){this.subscription=this.pusher.subscribe(this.name)}},{key:"unsubscribe",value:function(){this.pusher.unsubscribe(this.name)}},{key:"listen",value:function(t,e){return this.on(this.eventFormatter.format(t),e),this}},{key:"listenToAll",value:function(t){var e=this;return this.subscription.bind_global((function(n,i){if(!n.startsWith("pusher:")){var r=e.options.namespace.replace(/\./g,"\\"),s=n.startsWith(r)?n.substring(r.length+1):"."+n;t(s,i)}})),this}},{key:"stopListening",value:function(t,e){return e?this.subscription.unbind(this.eventFormatter.format(t),e):this.subscription.unbind(this.eventFormatter.format(t)),this}},{key:"stopListeningToAll",value:function(t){return t?this.subscription.unbind_global(t):this.subscription.unbind_global(),this}},{key:"subscribed",value:function(t){return this.on("pusher:subscription_succeeded",(function(){t()})),this}},{key:"error",value:function(t){return this.on("pusher:subscription_error",(function(e){t(e)})),this}},{key:"on",value:function(t,e){return this.subscription.bind(t,e),this}}]),n}(Zn),ni=function(t){Xn(n,t);var e=Qn(n);function n(){return zn(this,n),e.apply(this,arguments)}return $n(n,[{key:"whisper",value:function(t,e){return this.pusher.channels.channels[this.name].trigger("client-".concat(t),e),this}}]),n}(ei),ii=function(t){Xn(n,t);var e=Qn(n);function n(){return zn(this,n),e.apply(this,arguments)}return $n(n,[{key:"whisper",value:function(t,e){return this.pusher.channels.channels[this.name].trigger("client-".concat(t),e),this}}]),n}(ei),ri=function(t){Xn(n,t);var e=Qn(n);function n(){return zn(this,n),e.apply(this,arguments)}return $n(n,[{key:"here",value:function(t){return this.on("pusher:subscription_succeeded",(function(e){t(Object.keys(e.members).map((function(t){return e.members[t]})))})),this}},{key:"joining",value:function(t){return this.on("pusher:member_added",(function(e){t(e.info)})),this}},{key:"whisper",value:function(t,e){return this.pusher.channels.channels[this.name].trigger("client-".concat(t),e),this}},{key:"leaving",value:function(t){return this.on("pusher:member_removed",(function(e){t(e.info)})),this}}]),n}(ni),si=function(t){Xn(n,t);var e=Qn(n);function n(t,i,r){var s;return zn(this,n),(s=e.call(this)).events={},s.listeners={},s.name=i,s.socket=t,s.options=r,s.eventFormatter=new ti(s.options.namespace),s.subscribe(),s}return $n(n,[{key:"subscribe",value:function(){this.socket.emit("subscribe",{channel:this.name,auth:this.options.auth||{}})}},{key:"unsubscribe",value:function(){this.unbind(),this.socket.emit("unsubscribe",{channel:this.name,auth:this.options.auth||{}})}},{key:"listen",value:function(t,e){return this.on(this.eventFormatter.format(t),e),this}},{key:"stopListening",value:function(t,e){return this.unbindEvent(this.eventFormatter.format(t),e),this}},{key:"subscribed",value:function(t){return this.on("connect",(function(e){t(e)})),this}},{key:"error",value:function(t){return this}},{key:"on",value:function(t,e){var n=this;return this.listeners[t]=this.listeners[t]||[],this.events[t]||(this.events[t]=function(e,i){n.name===e&&n.listeners[t]&&n.listeners[t].forEach((function(t){return t(i)}))},this.socket.on(t,this.events[t])),this.listeners[t].push(e),this}},{key:"unbind",value:function(){var t=this;Object.keys(this.events).forEach((function(e){t.unbindEvent(e)}))}},{key:"unbindEvent",value:function(t,e){this.listeners[t]=this.listeners[t]||[],e&&(this.listeners[t]=this.listeners[t].filter((function(t){return t!==e}))),e&&0!==this.listeners[t].length||(this.events[t]&&(this.socket.removeListener(t,this.events[t]),delete this.events[t]),delete this.listeners[t])}}]),n}(Zn),oi=function(t){Xn(n,t);var e=Qn(n);function n(){return zn(this,n),e.apply(this,arguments)}return $n(n,[{key:"whisper",value:function(t,e){return this.socket.emit("client event",{channel:this.name,event:"client-".concat(t),data:e}),this}}]),n}(si),ai=function(t){Xn(n,t);var e=Qn(n);function n(){return zn(this,n),e.apply(this,arguments)}return $n(n,[{key:"here",value:function(t){return this.on("presence:subscribed",(function(e){t(e.map((function(t){return t.user_info})))})),this}},{key:"joining",value:function(t){return this.on("presence:joining",(function(e){return t(e.user_info)})),this}},{key:"whisper",value:function(t,e){return this.socket.emit("client event",{channel:this.name,event:"client-".concat(t),data:e}),this}},{key:"leaving",value:function(t){return this.on("presence:leaving",(function(e){return t(e.user_info)})),this}}]),n}(oi),ci=function(t){Xn(n,t);var e=Qn(n);function n(){return zn(this,n),e.apply(this,arguments)}return $n(n,[{key:"subscribe",value:function(){}},{key:"unsubscribe",value:function(){}},{key:"listen",value:function(t,e){return this}},{key:"listenToAll",value:function(t){return this}},{key:"stopListening",value:function(t,e){return this}},{key:"subscribed",value:function(t){return this}},{key:"error",value:function(t){return this}},{key:"on",value:function(t,e){return this}}]),n}(Zn),ui=function(t){Xn(n,t);var e=Qn(n);function n(){return zn(this,n),e.apply(this,arguments)}return $n(n,[{key:"whisper",value:function(t,e){return this}}]),n}(ci),li=function(t){Xn(n,t);var e=Qn(n);function n(){return zn(this,n),e.apply(this,arguments)}return $n(n,[{key:"whisper",value:function(t,e){return this}}]),n}(ci),hi=function(t){Xn(n,t);var e=Qn(n);function n(){return zn(this,n),e.apply(this,arguments)}return $n(n,[{key:"here",value:function(t){return this}},{key:"joining",value:function(t){return this}},{key:"whisper",value:function(t,e){return this}},{key:"leaving",value:function(t){return this}}]),n}(ui),di=function(){function t(e){zn(this,t),this._defaultOptions={auth:{headers:{}},authEndpoint:"/broadcasting/auth",userAuthentication:{endpoint:"/broadcasting/user-auth",headers:{}},broadcaster:"pusher",csrfToken:null,bearerToken:null,host:null,key:null,namespace:"App.Events"},this.setOptions(e),this.connect()}return $n(t,[{key:"setOptions",value:function(t){this.options=Kn(this._defaultOptions,t);var e=this.csrfToken();return e&&(this.options.auth.headers["X-CSRF-TOKEN"]=e,this.options.userAuthentication.headers["X-CSRF-TOKEN"]=e),(e=this.options.bearerToken)&&(this.options.auth.headers.Authorization="Bearer "+e,this.options.userAuthentication.headers.Authorization="Bearer "+e),t}},{key:"csrfToken",value:function(){var t;return"undefined"!=typeof window&&window.Laravel&&window.Laravel.csrfToken?window.Laravel.csrfToken:this.options.csrfToken?this.options.csrfToken:"undefined"!=typeof document&&"function"==typeof document.querySelector&&(t=document.querySelector('meta[name="csrf-token"]'))?t.getAttribute("content"):null}}]),t}(),pi=function(t){Xn(n,t);var e=Qn(n);function n(){var t;return zn(this,n),(t=e.apply(this,arguments)).channels={},t}return $n(n,[{key:"connect",value:function(){void 0!==this.options.client?this.pusher=this.options.client:this.options.Pusher?this.pusher=new this.options.Pusher(this.options.key,this.options):this.pusher=new Pusher(this.options.key,this.options)}},{key:"signin",value:function(){this.pusher.signin()}},{key:"listen",value:function(t,e,n){return this.channel(t).listen(e,n)}},{key:"channel",value:function(t){return this.channels[t]||(this.channels[t]=new ei(this.pusher,t,this.options)),this.channels[t]}},{key:"privateChannel",value:function(t){return this.channels["private-"+t]||(this.channels["private-"+t]=new ni(this.pusher,"private-"+t,this.options)),this.channels["private-"+t]}},{key:"encryptedPrivateChannel",value:function(t){return this.channels["private-encrypted-"+t]||(this.channels["private-encrypted-"+t]=new ii(this.pusher,"private-encrypted-"+t,this.options)),this.channels["private-encrypted-"+t]}},{key:"presenceChannel",value:function(t){return this.channels["presence-"+t]||(this.channels["presence-"+t]=new ri(this.pusher,"presence-"+t,this.options)),this.channels["presence-"+t]}},{key:"leave",value:function(t){var e=this;[t,"private-"+t,"private-encrypted-"+t,"presence-"+t].forEach((function(t,n){e.leaveChannel(t)}))}},{key:"leaveChannel",value:function(t){this.channels[t]&&(this.channels[t].unsubscribe(),delete this.channels[t])}},{key:"socketId",value:function(){return this.pusher.connection.socket_id}},{key:"disconnect",value:function(){this.pusher.disconnect()}}]),n}(di),fi=function(t){Xn(n,t);var e=Qn(n);function n(){var t;return zn(this,n),(t=e.apply(this,arguments)).channels={},t}return $n(n,[{key:"connect",value:function(){var t=this,e=this.getSocketIO();return this.socket=e(this.options.host,this.options),this.socket.on("reconnect",(function(){Object.values(t.channels).forEach((function(t){t.subscribe()}))})),this.socket}},{key:"getSocketIO",value:function(){if(void 0!==this.options.client)return this.options.client;if("undefined"!=typeof io)return io;throw new Error("Socket.io client not found. Should be globally available or passed via options.client")}},{key:"listen",value:function(t,e,n){return this.channel(t).listen(e,n)}},{key:"channel",value:function(t){return this.channels[t]||(this.channels[t]=new si(this.socket,t,this.options)),this.channels[t]}},{key:"privateChannel",value:function(t){return this.channels["private-"+t]||(this.channels["private-"+t]=new oi(this.socket,"private-"+t,this.options)),this.channels["private-"+t]}},{key:"presenceChannel",value:function(t){return this.channels["presence-"+t]||(this.channels["presence-"+t]=new ai(this.socket,"presence-"+t,this.options)),this.channels["presence-"+t]}},{key:"leave",value:function(t){var e=this;[t,"private-"+t,"presence-"+t].forEach((function(t){e.leaveChannel(t)}))}},{key:"leaveChannel",value:function(t){this.channels[t]&&(this.channels[t].unsubscribe(),delete this.channels[t])}},{key:"socketId",value:function(){return this.socket.id}},{key:"disconnect",value:function(){this.socket.disconnect()}}]),n}(di),mi=function(t){Xn(n,t);var e=Qn(n);function n(){var t;return zn(this,n),(t=e.apply(this,arguments)).channels={},t}return $n(n,[{key:"connect",value:function(){}},{key:"listen",value:function(t,e,n){return new ci}},{key:"channel",value:function(t){return new ci}},{key:"privateChannel",value:function(t){return new ui}},{key:"encryptedPrivateChannel",value:function(t){return new li}},{key:"presenceChannel",value:function(t){return new hi}},{key:"leave",value:function(t){}},{key:"leaveChannel",value:function(t){}},{key:"socketId",value:function(){return"fake-socket-id"}},{key:"disconnect",value:function(){}}]),n}(di),gi=function(){function t(e){zn(this,t),this.options=e,this.connect(),this.options.withoutInterceptors||this.registerInterceptors()}return $n(t,[{key:"channel",value:function(t){return this.connector.channel(t)}},{key:"connect",value:function(){if("reverb"==this.options.broadcaster)this.connector=new pi(Kn(Kn({},this.options),{cluster:""}));else if("pusher"==this.options.broadcaster)this.connector=new pi(this.options);else if("socket.io"==this.options.broadcaster)this.connector=new fi(this.options);else if("null"==this.options.broadcaster)this.connector=new mi(this.options);else{if("function"!=typeof this.options.broadcaster||!function(t){try{new t}catch(e){if(e.message.includes("is not a constructor"))return!1}return!0}(this.options.broadcaster))throw new Error("Broadcaster ".concat(Vn(this.options.broadcaster)," ").concat(this.options.broadcaster," is not supported."));this.connector=new this.options.broadcaster(this.options)}}},{key:"disconnect",value:function(){this.connector.disconnect()}},{key:"join",value:function(t){return this.connector.presenceChannel(t)}},{key:"leave",value:function(t){this.connector.leave(t)}},{key:"leaveChannel",value:function(t){this.connector.leaveChannel(t)}},{key:"leaveAllChannels",value:function(){for(var t in this.connector.channels)this.leaveChannel(t)}},{key:"listen",value:function(t,e,n){return this.connector.listen(t,e,n)}},{key:"private",value:function(t){return this.connector.privateChannel(t)}},{key:"encryptedPrivate",value:function(t){if(this.connector instanceof fi)throw new Error("Broadcaster ".concat(Vn(this.options.broadcaster)," ").concat(this.options.broadcaster," does not support encrypted private channels."));return this.connector.encryptedPrivateChannel(t)}},{key:"socketId",value:function(){return this.connector.socketId()}},{key:"registerInterceptors",value:function(){"function"==typeof Vue&&Vue.http&&this.registerVueRequestInterceptor(),"function"==typeof axios&&this.registerAxiosRequestInterceptor(),"function"==typeof jQuery&&this.registerjQueryAjaxSetup(),"object"===("undefined"==typeof Turbo?"undefined":Vn(Turbo))&&this.registerTurboRequestInterceptor()}},{key:"registerVueRequestInterceptor",value:function(){var t=this;Vue.http.interceptors.push((function(e,n){t.socketId()&&e.headers.set("X-Socket-ID",t.socketId()),n()}))}},{key:"registerAxiosRequestInterceptor",value:function(){var t=this;axios.interceptors.request.use((function(e){return t.socketId()&&(e.headers["X-Socket-Id"]=t.socketId()),e}))}},{key:"registerjQueryAjaxSetup",value:function(){var t=this;void 0!==jQuery.ajax&&jQuery.ajaxPrefilter((function(e,n,i){t.socketId()&&i.setRequestHeader("X-Socket-Id",t.socketId())}))}},{key:"registerTurboRequestInterceptor",value:function(){var t=this;document.addEventListener("turbo:before-fetch-request",(function(e){e.detail.fetchOptions.headers["X-Socket-Id"]=t.socketId()}))}}]),t}(),vi={exports:{}};
/*!
             * Pusher JavaScript Library v7.6.0
             * https://pusher.com/
             *
             * Copyright 2020, Pusher
             * Released under the MIT licence.
             */
!function(t){var e;window,e=function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e,n){var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},i(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var s=256,o=function(){function t(t){void 0===t&&(t="="),this._paddingCharacter=t}return t.prototype.encodedLength=function(t){return this._paddingCharacter?(t+2)/3*4|0:(8*t+5)/6|0},t.prototype.encode=function(t){for(var e="",n=0;n<t.length-2;n+=3){var i=t[n]<<16|t[n+1]<<8|t[n+2];e+=this._encodeByte(i>>>18&63),e+=this._encodeByte(i>>>12&63),e+=this._encodeByte(i>>>6&63),e+=this._encodeByte(i>>>0&63)}var r=t.length-n;return r>0&&(i=t[n]<<16|(2===r?t[n+1]<<8:0),e+=this._encodeByte(i>>>18&63),e+=this._encodeByte(i>>>12&63),e+=2===r?this._encodeByte(i>>>6&63):this._paddingCharacter||"",e+=this._paddingCharacter||""),e},t.prototype.maxDecodedLength=function(t){return this._paddingCharacter?t/4*3|0:(6*t+7)/8|0},t.prototype.decodedLength=function(t){return this.maxDecodedLength(t.length-this._getPaddingLength(t))},t.prototype.decode=function(t){if(0===t.length)return new Uint8Array(0);for(var e=this._getPaddingLength(t),n=t.length-e,i=new Uint8Array(this.maxDecodedLength(n)),r=0,o=0,a=0,c=0,u=0,l=0,h=0;o<n-4;o+=4)c=this._decodeChar(t.charCodeAt(o+0)),u=this._decodeChar(t.charCodeAt(o+1)),l=this._decodeChar(t.charCodeAt(o+2)),h=this._decodeChar(t.charCodeAt(o+3)),i[r++]=c<<2|u>>>4,i[r++]=u<<4|l>>>2,i[r++]=l<<6|h,a|=c&s,a|=u&s,a|=l&s,a|=h&s;if(o<n-1&&(c=this._decodeChar(t.charCodeAt(o)),u=this._decodeChar(t.charCodeAt(o+1)),i[r++]=c<<2|u>>>4,a|=c&s,a|=u&s),o<n-2&&(l=this._decodeChar(t.charCodeAt(o+2)),i[r++]=u<<4|l>>>2,a|=l&s),o<n-3&&(h=this._decodeChar(t.charCodeAt(o+3)),i[r++]=l<<6|h,a|=h&s),0!==a)throw new Error("Base64Coder: incorrect characters for decoding");return i},t.prototype._encodeByte=function(t){var e=t;return e+=65,e+=25-t>>>8&6,e+=51-t>>>8&-75,e+=61-t>>>8&-15,e+=62-t>>>8&3,String.fromCharCode(e)},t.prototype._decodeChar=function(t){var e=s;return e+=(42-t&t-44)>>>8&-256+t-43+62,e+=(46-t&t-48)>>>8&-256+t-47+63,e+=(47-t&t-58)>>>8&-256+t-48+52,e+=(64-t&t-91)>>>8&-256+t-65+0,e+=(96-t&t-123)>>>8&-256+t-97+26},t.prototype._getPaddingLength=function(t){var e=0;if(this._paddingCharacter){for(var n=t.length-1;n>=0&&t[n]===this._paddingCharacter;n--)e++;if(t.length<4||e>2)throw new Error("Base64Coder: incorrect padding")}return e},t}();e.Coder=o;var a=new o;e.encode=function(t){return a.encode(t)},e.decode=function(t){return a.decode(t)};var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype._encodeByte=function(t){var e=t;return e+=65,e+=25-t>>>8&6,e+=51-t>>>8&-75,e+=61-t>>>8&-13,e+=62-t>>>8&49,String.fromCharCode(e)},e.prototype._decodeChar=function(t){var e=s;return e+=(44-t&t-46)>>>8&-256+t-45+62,e+=(94-t&t-96)>>>8&-256+t-95+63,e+=(47-t&t-58)>>>8&-256+t-48+52,e+=(64-t&t-91)>>>8&-256+t-65+0,e+=(96-t&t-123)>>>8&-256+t-97+26},e}(o);e.URLSafeCoder=c;var u=new c;e.encodeURLSafe=function(t){return u.encode(t)},e.decodeURLSafe=function(t){return u.decode(t)},e.encodedLength=function(t){return a.encodedLength(t)},e.maxDecodedLength=function(t){return a.maxDecodedLength(t)},e.decodedLength=function(t){return a.decodedLength(t)}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i="utf8: invalid string",r="utf8: invalid source encoding";function s(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<128)e+=1;else if(r<2048)e+=2;else if(r<55296)e+=3;else{if(!(r<=57343))throw new Error(i);if(n>=t.length-1)throw new Error(i);n++,e+=4}}return e}e.encode=function(t){for(var e=new Uint8Array(s(t)),n=0,i=0;i<t.length;i++){var r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=192|r>>6,e[n++]=128|63&r):r<55296?(e[n++]=224|r>>12,e[n++]=128|r>>6&63,e[n++]=128|63&r):(i++,r=(1023&r)<<10,r|=1023&t.charCodeAt(i),r+=65536,e[n++]=240|r>>18,e[n++]=128|r>>12&63,e[n++]=128|r>>6&63,e[n++]=128|63&r)}return e},e.encodedLength=s,e.decode=function(t){for(var e=[],n=0;n<t.length;n++){var i=t[n];if(128&i){var s=void 0;if(i<224){if(n>=t.length)throw new Error(r);if(128!=(192&(o=t[++n])))throw new Error(r);i=(31&i)<<6|63&o,s=128}else if(i<240){if(n>=t.length-1)throw new Error(r);var o=t[++n],a=t[++n];if(128!=(192&o)||128!=(192&a))throw new Error(r);i=(15&i)<<12|(63&o)<<6|63&a,s=2048}else{if(!(i<248))throw new Error(r);if(n>=t.length-2)throw new Error(r);o=t[++n],a=t[++n];var c=t[++n];if(128!=(192&o)||128!=(192&a)||128!=(192&c))throw new Error(r);i=(15&i)<<18|(63&o)<<12|(63&a)<<6|63&c,s=65536}if(i<s||i>=55296&&i<=57343)throw new Error(r);if(i>=65536){if(i>1114111)throw new Error(r);i-=65536,e.push(String.fromCharCode(55296|i>>10)),i=56320|1023&i}}e.push(String.fromCharCode(i))}return e.join("")}},function(t,e,n){t.exports=n(3).default},function(t,e,n){n.r(e);var i,r=function(){function t(t,e){this.lastId=0,this.prefix=t,this.name=e}return t.prototype.create=function(t){this.lastId++;var e=this.lastId,n=this.prefix+e,i=this.name+"["+e+"]",r=!1,s=function(){r||(t.apply(null,arguments),r=!0)};return this[e]=s,{number:e,id:n,name:i,callback:s}},t.prototype.remove=function(t){delete this[t.number]},t}(),s=new r("_pusher_script_","Pusher.ScriptReceivers"),o={VERSION:"7.6.0",PROTOCOL:7,wsPort:80,wssPort:443,wsPath:"",httpHost:"sockjs.pusher.com",httpPort:80,httpsPort:443,httpPath:"/pusher",stats_host:"stats.pusher.com",authEndpoint:"/pusher/auth",authTransport:"ajax",activityTimeout:12e4,pongTimeout:3e4,unavailableTimeout:1e4,cluster:"mt1",userAuthentication:{endpoint:"/pusher/user-auth",transport:"ajax"},channelAuthorization:{endpoint:"/pusher/auth",transport:"ajax"},cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",dependency_suffix:""},a=function(){function t(t){this.options=t,this.receivers=t.receivers||s,this.loading={}}return t.prototype.load=function(t,e,n){var i=this;if(i.loading[t]&&i.loading[t].length>0)i.loading[t].push(n);else{i.loading[t]=[n];var r=Ve.createScriptRequest(i.getPath(t,e)),s=i.receivers.create((function(e){if(i.receivers.remove(s),i.loading[t]){var n=i.loading[t];delete i.loading[t];for(var o=function(t){t||r.cleanup()},a=0;a<n.length;a++)n[a](e,o)}}));r.send(s)}},t.prototype.getRoot=function(t){var e=Ve.getDocument().location.protocol;return(t&&t.useTLS||"https:"===e?this.options.cdn_https:this.options.cdn_http).replace(/\/*$/,"")+"/"+this.options.version},t.prototype.getPath=function(t,e){return this.getRoot(e)+"/"+t+this.options.suffix+".js"},t}(),c=a,u=new r("_pusher_dependencies","Pusher.DependenciesReceivers"),l=new c({cdn_http:o.cdn_http,cdn_https:o.cdn_https,version:o.VERSION,suffix:o.dependency_suffix,receivers:u}),h={baseUrl:"https://pusher.com",urls:{authenticationEndpoint:{path:"/docs/channels/server_api/authenticating_users"},authorizationEndpoint:{path:"/docs/channels/server_api/authorizing-users/"},javascriptQuickStart:{path:"/docs/javascript_quick_start"},triggeringClientEvents:{path:"/docs/client_api_guide/client_events#trigger-events"},encryptedChannelSupport:{fullUrl:"https://github.com/pusher/pusher-js/tree/cc491015371a4bde5743d1c87a0fbac0feb53195#encrypted-channel-support"}}},d=function(t){var e,n=h.urls[t];return n?(n.fullUrl?e=n.fullUrl:n.path&&(e=h.baseUrl+n.path),e?"See: "+e:""):""};!function(t){t.UserAuthentication="user-authentication",t.ChannelAuthorization="channel-authorization"}(i||(i={}));var p,f=(p=function(t,e){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},p(t,e)},function(t,e){function n(){this.constructor=t}p(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),m=function(t){function e(e){var n=this.constructor,i=t.call(this,e)||this;return Object.setPrototypeOf(i,n.prototype),i}return f(e,t),e}(Error),g=function(t){function e(e){var n=this.constructor,i=t.call(this,e)||this;return Object.setPrototypeOf(i,n.prototype),i}return f(e,t),e}(Error),v=function(t){function e(e){var n=this.constructor,i=t.call(this,e)||this;return Object.setPrototypeOf(i,n.prototype),i}return f(e,t),e}(Error),b=function(t){function e(e){var n=this.constructor,i=t.call(this,e)||this;return Object.setPrototypeOf(i,n.prototype),i}return f(e,t),e}(Error),y=function(t){function e(e){var n=this.constructor,i=t.call(this,e)||this;return Object.setPrototypeOf(i,n.prototype),i}return f(e,t),e}(Error),w=function(t){function e(e){var n=this.constructor,i=t.call(this,e)||this;return Object.setPrototypeOf(i,n.prototype),i}return f(e,t),e}(Error),E=function(t){function e(e){var n=this.constructor,i=t.call(this,e)||this;return Object.setPrototypeOf(i,n.prototype),i}return f(e,t),e}(Error),S=function(t){function e(e){var n=this.constructor,i=t.call(this,e)||this;return Object.setPrototypeOf(i,n.prototype),i}return f(e,t),e}(Error),k=function(t){function e(e,n){var i=this.constructor,r=t.call(this,n)||this;return r.status=e,Object.setPrototypeOf(r,i.prototype),r}return f(e,t),e}(Error),T=function(t,e,n,r,s){var o=Ve.createXHR();for(var a in o.open("POST",n.endpoint,!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.headers)o.setRequestHeader(a,n.headers[a]);if(null!=n.headersProvider){var c=n.headersProvider();for(var a in c)o.setRequestHeader(a,c[a])}return o.onreadystatechange=function(){if(4===o.readyState)if(200===o.status){var t=void 0,e=!1;try{t=JSON.parse(o.responseText),e=!0}catch(Bn){s(new k(200,"JSON returned from "+r.toString()+" endpoint was invalid, yet status code was 200. Data was: "+o.responseText),null)}e&&s(null,t)}else{var a="";switch(r){case i.UserAuthentication:a=d("authenticationEndpoint");break;case i.ChannelAuthorization:a="Clients must be authorized to join private or presence channels. "+d("authorizationEndpoint")}s(new k(o.status,"Unable to retrieve auth string from "+r.toString()+" endpoint - received status: "+o.status+" from "+n.endpoint+". "+a),null)}},o.send(e),o},C=String.fromCharCode,L="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",A=function(t){var e=t.charCodeAt(0);return e<128?t:e<2048?C(192|e>>>6)+C(128|63&e):C(224|e>>>12&15)+C(128|e>>>6&63)+C(128|63&e)},R=function(t){return t.replace(/[^\x00-\x7F]/g,A)},P=function(t){var e=[0,2,1][t.length%3],n=t.charCodeAt(0)<<16|(t.length>1?t.charCodeAt(1):0)<<8|(t.length>2?t.charCodeAt(2):0);return[L.charAt(n>>>18),L.charAt(n>>>12&63),e>=2?"=":L.charAt(n>>>6&63),e>=1?"=":L.charAt(63&n)].join("")},x=window.btoa||function(t){return t.replace(/[\s\S]{1,3}/g,P)},_=function(){function t(t,e,n,i){var r=this;this.clear=e,this.timer=t((function(){r.timer&&(r.timer=i(r.timer))}),n)}return t.prototype.isRunning=function(){return null!==this.timer},t.prototype.ensureAborted=function(){this.timer&&(this.clear(this.timer),this.timer=null)},t}(),O=_,M=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();function I(t){window.clearTimeout(t)}function D(t){window.clearInterval(t)}var F=function(t){function e(e,n){return t.call(this,setTimeout,I,e,(function(t){return n(),null}))||this}return M(e,t),e}(O),H=function(t){function e(e,n){return t.call(this,setInterval,D,e,(function(t){return n(),t}))||this}return M(e,t),e}(O),N={now:function(){return Date.now?Date.now():(new Date).valueOf()},defer:function(t){return new F(0,t)},method:function(t){var e=Array.prototype.slice.call(arguments,1);return function(n){return n[t].apply(n,e.concat(arguments))}}},q=N;function j(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var i=0;i<e.length;i++){var r=e[i];for(var s in r)r[s]&&r[s].constructor&&r[s].constructor===Object?t[s]=j(t[s]||{},r[s]):t[s]=r[s]}return t}function B(){for(var t=["Pusher"],e=0;e<arguments.length;e++)"string"==typeof arguments[e]?t.push(arguments[e]):t.push(Q(arguments[e]));return t.join(" : ")}function U(t,e){var n=Array.prototype.indexOf;if(null===t)return-1;if(n&&t.indexOf===n)return t.indexOf(e);for(var i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1}function W(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(t[n],n,t)}function V(t){var e=[];return W(t,(function(t,n){e.push(n)})),e}function z(t,e,n){for(var i=0;i<t.length;i++)e.call(n||window,t[i],i,t)}function $(t,e){for(var n=[],i=0;i<t.length;i++)n.push(e(t[i],i,t,n));return n}function K(t,e){e=e||function(t){return!!t};for(var n=[],i=0;i<t.length;i++)e(t[i],i,t,n)&&n.push(t[i]);return n}function X(t,e){var n={};return W(t,(function(i,r){(e&&e(i,r,t,n)||Boolean(i))&&(n[r]=i)})),n}function J(t,e){for(var n=0;n<t.length;n++)if(e(t[n],n,t))return!0;return!1}function G(t){return function(t,e){var n={};return W(t,(function(t,i){n[i]=e(t)})),n}(t,(function(t){return"object"==typeof t&&(t=Q(t)),encodeURIComponent(function(t){return x(R(t))}(t.toString()))}))}function Y(t){var e,n,i=X(t,(function(t){return void 0!==t}));return $((e=G(i),n=[],W(e,(function(t,e){n.push([e,t])})),n),q.method("join","=")).join("&")}function Q(t){try{return JSON.stringify(t)}catch(Bn){return JSON.stringify((e=[],n=[],function t(i,r){var s,o,a;switch(typeof i){case"object":if(!i)return null;for(s=0;s<e.length;s+=1)if(e[s]===i)return{$ref:n[s]};if(e.push(i),n.push(r),"[object Array]"===Object.prototype.toString.apply(i))for(a=[],s=0;s<i.length;s+=1)a[s]=t(i[s],r+"["+s+"]");else for(o in a={},i)Object.prototype.hasOwnProperty.call(i,o)&&(a[o]=t(i[o],r+"["+JSON.stringify(o)+"]"));return a;case"number":case"string":case"boolean":return i}}(t,"$")))}var e,n}var Z=function(){function t(){this.globalLog=function(t){window.console&&window.console.log&&window.console.log(t)}}return t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.log(this.globalLog,t)},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.log(this.globalLogWarn,t)},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.log(this.globalLogError,t)},t.prototype.globalLogWarn=function(t){window.console&&window.console.warn?window.console.warn(t):this.globalLog(t)},t.prototype.globalLogError=function(t){window.console&&window.console.error?window.console.error(t):this.globalLogWarn(t)},t.prototype.log=function(t){var e=B.apply(this,arguments);yn.log?yn.log(e):yn.logToConsole&&t.bind(this)(e)},t}(),tt=new Z,et=function(t,e,n,i,r){void 0===n.headers&&null==n.headersProvider||tt.warn("To send headers with the "+i.toString()+" request, you must use AJAX, rather than JSONP.");var s=t.nextAuthCallbackID.toString();t.nextAuthCallbackID++;var o=t.getDocument(),a=o.createElement("script");t.auth_callbacks[s]=function(t){r(null,t)};var c="Pusher.auth_callbacks['"+s+"']";a.src=n.endpoint+"?callback="+encodeURIComponent(c)+"&"+e;var u=o.getElementsByTagName("head")[0]||o.documentElement;u.insertBefore(a,u.firstChild)},nt=function(){function t(t){this.src=t}return t.prototype.send=function(t){var e=this,n="Error loading "+e.src;e.script=document.createElement("script"),e.script.id=t.id,e.script.src=e.src,e.script.type="text/javascript",e.script.charset="UTF-8",e.script.addEventListener?(e.script.onerror=function(){t.callback(n)},e.script.onload=function(){t.callback(null)}):e.script.onreadystatechange=function(){"loaded"!==e.script.readyState&&"complete"!==e.script.readyState||t.callback(null)},void 0===e.script.async&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(e.errorScript=document.createElement("script"),e.errorScript.id=t.id+"_error",e.errorScript.text=t.name+"('"+n+"');",e.script.async=e.errorScript.async=!1):e.script.async=!0;var i=document.getElementsByTagName("head")[0];i.insertBefore(e.script,i.firstChild),e.errorScript&&i.insertBefore(e.errorScript,e.script.nextSibling)},t.prototype.cleanup=function(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null},t}(),it=function(){function t(t,e){this.url=t,this.data=e}return t.prototype.send=function(t){if(!this.request){var e=Y(this.data),n=this.url+"/"+t.number+"?"+e;this.request=Ve.createScriptRequest(n),this.request.send(t)}},t.prototype.cleanup=function(){this.request&&this.request.cleanup()},t}(),rt=it,st={name:"jsonp",getAgent:function(t,e){return function(n,i){var r="http"+(e?"s":"")+"://"+(t.host||t.options.host)+t.options.path,o=Ve.createJSONPRequest(r,n),a=Ve.ScriptReceivers.create((function(e,n){s.remove(a),o.cleanup(),n&&n.host&&(t.host=n.host),i&&i(e,n)}));o.send(a)}}};function ot(t,e,n){return t+(e.useTLS?"s":"")+"://"+(e.useTLS?e.hostTLS:e.hostNonTLS)+n}function at(t,e){return"/app/"+t+"?protocol="+o.PROTOCOL+"&client=js&version="+o.VERSION+(e?"&"+e:"")}var ct={getInitial:function(t,e){return ot("ws",e,(e.httpPath||"")+at(t,"flash=false"))}},ut={getInitial:function(t,e){return ot("http",e,(e.httpPath||"/pusher")+at(t))}},lt={getInitial:function(t,e){return ot("http",e,e.httpPath||"/pusher")},getPath:function(t,e){return at(t)}},ht=function(){function t(){this._callbacks={}}return t.prototype.get=function(t){return this._callbacks[dt(t)]},t.prototype.add=function(t,e,n){var i=dt(t);this._callbacks[i]=this._callbacks[i]||[],this._callbacks[i].push({fn:e,context:n})},t.prototype.remove=function(t,e,n){if(t||e||n){var i=t?[dt(t)]:V(this._callbacks);e||n?this.removeCallback(i,e,n):this.removeAllCallbacks(i)}else this._callbacks={}},t.prototype.removeCallback=function(t,e,n){z(t,(function(t){this._callbacks[t]=K(this._callbacks[t]||[],(function(t){return e&&e!==t.fn||n&&n!==t.context})),0===this._callbacks[t].length&&delete this._callbacks[t]}),this)},t.prototype.removeAllCallbacks=function(t){z(t,(function(t){delete this._callbacks[t]}),this)},t}();function dt(t){return"_"+t}var pt=function(){function t(t){this.callbacks=new ht,this.global_callbacks=[],this.failThrough=t}return t.prototype.bind=function(t,e,n){return this.callbacks.add(t,e,n),this},t.prototype.bind_global=function(t){return this.global_callbacks.push(t),this},t.prototype.unbind=function(t,e,n){return this.callbacks.remove(t,e,n),this},t.prototype.unbind_global=function(t){return t?(this.global_callbacks=K(this.global_callbacks||[],(function(e){return e!==t})),this):(this.global_callbacks=[],this)},t.prototype.unbind_all=function(){return this.unbind(),this.unbind_global(),this},t.prototype.emit=function(t,e,n){for(var i=0;i<this.global_callbacks.length;i++)this.global_callbacks[i](t,e);var r=this.callbacks.get(t),s=[];if(n?s.push(e,n):e&&s.push(e),r&&r.length>0)for(i=0;i<r.length;i++)r[i].fn.apply(r[i].context||window,s);else this.failThrough&&this.failThrough(t,e);return this},t}(),ft=pt,mt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),gt=function(t){function e(e,n,i,r,s){var o=t.call(this)||this;return o.initialize=Ve.transportConnectionInitializer,o.hooks=e,o.name=n,o.priority=i,o.key=r,o.options=s,o.state="new",o.timeline=s.timeline,o.activityTimeout=s.activityTimeout,o.id=o.timeline.generateUniqueID(),o}return mt(e,t),e.prototype.handlesActivityChecks=function(){return Boolean(this.hooks.handlesActivityChecks)},e.prototype.supportsPing=function(){return Boolean(this.hooks.supportsPing)},e.prototype.connect=function(){var t=this;if(this.socket||"initialized"!==this.state)return!1;var e=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(e,this.options)}catch(Bn){return q.defer((function(){t.onError(Bn),t.changeState("closed")})),!1}return this.bindListeners(),tt.debug("Connecting",{transport:this.name,url:e}),this.changeState("connecting"),!0},e.prototype.close=function(){return!!this.socket&&(this.socket.close(),!0)},e.prototype.send=function(t){var e=this;return"open"===this.state&&(q.defer((function(){e.socket&&e.socket.send(t)})),!0)},e.prototype.ping=function(){"open"===this.state&&this.supportsPing()&&this.socket.ping()},e.prototype.onOpen=function(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0},e.prototype.onError=function(t){this.emit("error",{type:"WebSocketError",error:t}),this.timeline.error(this.buildTimelineMessage({error:t.toString()}))},e.prototype.onClose=function(t){t?this.changeState("closed",{code:t.code,reason:t.reason,wasClean:t.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0},e.prototype.onMessage=function(t){this.emit("message",t)},e.prototype.onActivity=function(){this.emit("activity")},e.prototype.bindListeners=function(){var t=this;this.socket.onopen=function(){t.onOpen()},this.socket.onerror=function(e){t.onError(e)},this.socket.onclose=function(e){t.onClose(e)},this.socket.onmessage=function(e){t.onMessage(e)},this.supportsPing()&&(this.socket.onactivity=function(){t.onActivity()})},e.prototype.unbindListeners=function(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))},e.prototype.changeState=function(t,e){this.state=t,this.timeline.info(this.buildTimelineMessage({state:t,params:e})),this.emit(t,e)},e.prototype.buildTimelineMessage=function(t){return j({cid:this.id},t)},e}(ft),vt=gt,bt=function(){function t(t){this.hooks=t}return t.prototype.isSupported=function(t){return this.hooks.isSupported(t)},t.prototype.createConnection=function(t,e,n,i){return new vt(this.hooks,t,e,n,i)},t}(),yt=new bt({urls:ct,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return Boolean(Ve.getWebSocketAPI())},isSupported:function(){return Boolean(Ve.getWebSocketAPI())},getSocket:function(t){return Ve.createWebSocket(t)}}),wt={urls:ut,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}},Et=j({getSocket:function(t){return Ve.HTTPFactory.createStreamingSocket(t)}},wt),St=j({getSocket:function(t){return Ve.HTTPFactory.createPollingSocket(t)}},wt),kt={isSupported:function(){return Ve.isXHRSupported()}},Tt={ws:yt,xhr_streaming:new bt(j({},Et,kt)),xhr_polling:new bt(j({},St,kt))},Ct=new bt({file:"sockjs",urls:lt,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return void 0!==window.SockJS},getSocket:function(t,e){return new window.SockJS(t,null,{js_path:l.getPath("sockjs",{useTLS:e.useTLS}),ignore_null_origin:e.ignoreNullOrigin})},beforeOpen:function(t,e){t.send(JSON.stringify({path:e}))}}),Lt={isSupported:function(t){return Ve.isXDRSupported(t.useTLS)}},At=new bt(j({},Et,Lt)),Rt=new bt(j({},St,Lt));Tt.xdr_streaming=At,Tt.xdr_polling=Rt,Tt.sockjs=Ct;var Pt=Tt,xt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),_t=new(function(t){function e(){var e=t.call(this)||this,n=e;return void 0!==window.addEventListener&&(window.addEventListener("online",(function(){n.emit("online")}),!1),window.addEventListener("offline",(function(){n.emit("offline")}),!1)),e}return xt(e,t),e.prototype.isOnline=function(){return void 0===window.navigator.onLine||window.navigator.onLine},e}(ft)),Ot=function(){function t(t,e,n){this.manager=t,this.transport=e,this.minPingDelay=n.minPingDelay,this.maxPingDelay=n.maxPingDelay,this.pingDelay=void 0}return t.prototype.createConnection=function(t,e,n,i){var r=this;i=j({},i,{activityTimeout:this.pingDelay});var s=this.transport.createConnection(t,e,n,i),o=null,a=function(){s.unbind("open",a),s.bind("closed",c),o=q.now()},c=function(t){if(s.unbind("closed",c),1002===t.code||1003===t.code)r.manager.reportDeath();else if(!t.wasClean&&o){var e=q.now()-o;e<2*r.maxPingDelay&&(r.manager.reportDeath(),r.pingDelay=Math.max(e/2,r.minPingDelay))}};return s.bind("open",a),s},t.prototype.isSupported=function(t){return this.manager.isAlive()&&this.transport.isSupported(t)},t}(),Mt={decodeMessage:function(t){try{var e=JSON.parse(t.data),n=e.data;if("string"==typeof n)try{n=JSON.parse(e.data)}catch(Bn){}var i={event:e.event,channel:e.channel,data:n};return e.user_id&&(i.user_id=e.user_id),i}catch(Bn){throw{type:"MessageParseError",error:Bn,data:t.data}}},encodeMessage:function(t){return JSON.stringify(t)},processHandshake:function(t){var e=Mt.decodeMessage(t);if("pusher:connection_established"===e.event){if(!e.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:e.data.socket_id,activityTimeout:1e3*e.data.activity_timeout}}if("pusher:error"===e.event)return{action:this.getCloseAction(e.data),error:this.getCloseError(e.data)};throw"Invalid handshake"},getCloseAction:function(t){return t.code<4e3?t.code>=1002&&t.code<=1004?"backoff":null:4e3===t.code?"tls_only":t.code<4100?"refused":t.code<4200?"backoff":t.code<4300?"retry":"refused"},getCloseError:function(t){return 1e3!==t.code&&1001!==t.code?{type:"PusherError",data:{code:t.code,message:t.reason||t.message}}:null}},It=Mt,Dt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Ft=function(t){function e(e,n){var i=t.call(this)||this;return i.id=e,i.transport=n,i.activityTimeout=n.activityTimeout,i.bindListeners(),i}return Dt(e,t),e.prototype.handlesActivityChecks=function(){return this.transport.handlesActivityChecks()},e.prototype.send=function(t){return this.transport.send(t)},e.prototype.send_event=function(t,e,n){var i={event:t,data:e};return n&&(i.channel=n),tt.debug("Event sent",i),this.send(It.encodeMessage(i))},e.prototype.ping=function(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})},e.prototype.close=function(){this.transport.close()},e.prototype.bindListeners=function(){var t=this,e={message:function(e){var n;try{n=It.decodeMessage(e)}catch(Bn){t.emit("error",{type:"MessageParseError",error:Bn,data:e.data})}if(void 0!==n){switch(tt.debug("Event recd",n),n.event){case"pusher:error":t.emit("error",{type:"PusherError",data:n.data});break;case"pusher:ping":t.emit("ping");break;case"pusher:pong":t.emit("pong")}t.emit("message",n)}},activity:function(){t.emit("activity")},error:function(e){t.emit("error",e)},closed:function(e){n(),e&&e.code&&t.handleCloseEvent(e),t.transport=null,t.emit("closed")}},n=function(){W(e,(function(e,n){t.transport.unbind(n,e)}))};W(e,(function(e,n){t.transport.bind(n,e)}))},e.prototype.handleCloseEvent=function(t){var e=It.getCloseAction(t),n=It.getCloseError(t);n&&this.emit("error",n),e&&this.emit(e,{action:e,error:n})},e}(ft),Ht=Ft,Nt=function(){function t(t,e){this.transport=t,this.callback=e,this.bindListeners()}return t.prototype.close=function(){this.unbindListeners(),this.transport.close()},t.prototype.bindListeners=function(){var t=this;this.onMessage=function(e){var n;t.unbindListeners();try{n=It.processHandshake(e)}catch(Bn){return t.finish("error",{error:Bn}),void t.transport.close()}"connected"===n.action?t.finish("connected",{connection:new Ht(n.id,t.transport),activityTimeout:n.activityTimeout}):(t.finish(n.action,{error:n.error}),t.transport.close())},this.onClosed=function(e){t.unbindListeners();var n=It.getCloseAction(e)||"backoff",i=It.getCloseError(e);t.finish(n,{error:i})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)},t.prototype.unbindListeners=function(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)},t.prototype.finish=function(t,e){this.callback(j({transport:this.transport,action:t},e))},t}(),qt=Nt,jt=function(){function t(t,e){this.timeline=t,this.options=e||{}}return t.prototype.send=function(t,e){this.timeline.isEmpty()||this.timeline.send(Ve.TimelineTransport.getAgent(this,t),e)},t}(),Bt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Ut=function(t){function e(e,n){var i=t.call(this,(function(t,n){tt.debug("No callbacks on "+e+" for "+t)}))||this;return i.name=e,i.pusher=n,i.subscribed=!1,i.subscriptionPending=!1,i.subscriptionCancelled=!1,i}return Bt(e,t),e.prototype.authorize=function(t,e){return e(null,{auth:""})},e.prototype.trigger=function(t,e){if(0!==t.indexOf("client-"))throw new m("Event '"+t+"' does not start with 'client-'");if(!this.subscribed){var n=d("triggeringClientEvents");tt.warn("Client event triggered before channel 'subscription_succeeded' event . "+n)}return this.pusher.send_event(t,e,this.name)},e.prototype.disconnect=function(){this.subscribed=!1,this.subscriptionPending=!1},e.prototype.handleEvent=function(t){var e=t.event,n=t.data;"pusher_internal:subscription_succeeded"===e?this.handleSubscriptionSucceededEvent(t):"pusher_internal:subscription_count"===e?this.handleSubscriptionCountEvent(t):0!==e.indexOf("pusher_internal:")&&this.emit(e,n,{})},e.prototype.handleSubscriptionSucceededEvent=function(t){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",t.data)},e.prototype.handleSubscriptionCountEvent=function(t){t.data.subscription_count&&(this.subscriptionCount=t.data.subscription_count),this.emit("pusher:subscription_count",t.data)},e.prototype.subscribe=function(){var t=this;this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,(function(e,n){e?(t.subscriptionPending=!1,tt.error(e.toString()),t.emit("pusher:subscription_error",Object.assign({},{type:"AuthError",error:e.message},e instanceof k?{status:e.status}:{}))):t.pusher.send_event("pusher:subscribe",{auth:n.auth,channel_data:n.channel_data,channel:t.name})})))},e.prototype.unsubscribe=function(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})},e.prototype.cancelSubscription=function(){this.subscriptionCancelled=!0},e.prototype.reinstateSubscription=function(){this.subscriptionCancelled=!1},e}(ft),Wt=Ut,Vt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),zt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Vt(e,t),e.prototype.authorize=function(t,e){return this.pusher.config.channelAuthorizer({channelName:this.name,socketId:t},e)},e}(Wt),$t=zt,Kt=function(){function t(){this.reset()}return t.prototype.get=function(t){return Object.prototype.hasOwnProperty.call(this.members,t)?{id:t,info:this.members[t]}:null},t.prototype.each=function(t){var e=this;W(this.members,(function(n,i){t(e.get(i))}))},t.prototype.setMyID=function(t){this.myID=t},t.prototype.onSubscription=function(t){this.members=t.presence.hash,this.count=t.presence.count,this.me=this.get(this.myID)},t.prototype.addMember=function(t){return null===this.get(t.user_id)&&this.count++,this.members[t.user_id]=t.user_info,this.get(t.user_id)},t.prototype.removeMember=function(t){var e=this.get(t.user_id);return e&&(delete this.members[t.user_id],this.count--),e},t.prototype.reset=function(){this.members={},this.count=0,this.myID=null,this.me=null},t}(),Xt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Jt=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(Bn){s(Bn)}}function a(t){try{c(i.throw(t))}catch(Bn){s(Bn)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))},Gt=function(t,e){var n,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(Bn){s=[6,Bn],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},Yt=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.members=new Kt,i}return Xt(e,t),e.prototype.authorize=function(e,n){var i=this;t.prototype.authorize.call(this,e,(function(t,e){return Jt(i,void 0,void 0,(function(){var i,r;return Gt(this,(function(s){switch(s.label){case 0:return t?[3,3]:null==e.channel_data?[3,1]:(i=JSON.parse(e.channel_data),this.members.setMyID(i.user_id),[3,3]);case 1:return[4,this.pusher.user.signinDonePromise];case 2:if(s.sent(),null==this.pusher.user.user_data)return r=d("authorizationEndpoint"),tt.error("Invalid auth response for channel '"+this.name+"', expected 'channel_data' field. "+r+", or the user should be signed in."),n("Invalid auth response"),[2];this.members.setMyID(this.pusher.user.user_data.id),s.label=3;case 3:return n(t,e),[2]}}))}))}))},e.prototype.handleEvent=function(t){var e=t.event;if(0===e.indexOf("pusher_internal:"))this.handleInternalEvent(t);else{var n=t.data,i={};t.user_id&&(i.user_id=t.user_id),this.emit(e,n,i)}},e.prototype.handleInternalEvent=function(t){var e=t.event,n=t.data;switch(e){case"pusher_internal:subscription_succeeded":this.handleSubscriptionSucceededEvent(t);break;case"pusher_internal:subscription_count":this.handleSubscriptionCountEvent(t);break;case"pusher_internal:member_added":var i=this.members.addMember(n);this.emit("pusher:member_added",i);break;case"pusher_internal:member_removed":var r=this.members.removeMember(n);r&&this.emit("pusher:member_removed",r)}},e.prototype.handleSubscriptionSucceededEvent=function(t){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(t.data),this.emit("pusher:subscription_succeeded",this.members))},e.prototype.disconnect=function(){this.members.reset(),t.prototype.disconnect.call(this)},e}($t),Qt=Yt,Zt=n(1),te=n(0),ee=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ne=function(t){function e(e,n,i){var r=t.call(this,e,n)||this;return r.key=null,r.nacl=i,r}return ee(e,t),e.prototype.authorize=function(e,n){var i=this;t.prototype.authorize.call(this,e,(function(t,e){if(t)n(t,e);else{var r=e.shared_secret;r?(i.key=Object(te.decode)(r),delete e.shared_secret,n(null,e)):n(new Error("No shared_secret key in auth payload for encrypted channel: "+i.name),null)}}))},e.prototype.trigger=function(t,e){throw new w("Client events are not currently supported for encrypted channels")},e.prototype.handleEvent=function(e){var n=e.event,i=e.data;0!==n.indexOf("pusher_internal:")&&0!==n.indexOf("pusher:")?this.handleEncryptedEvent(n,i):t.prototype.handleEvent.call(this,e)},e.prototype.handleEncryptedEvent=function(t,e){var n=this;if(this.key)if(e.ciphertext&&e.nonce){var i=Object(te.decode)(e.ciphertext);if(i.length<this.nacl.secretbox.overheadLength)tt.error("Expected encrypted event ciphertext length to be "+this.nacl.secretbox.overheadLength+", got: "+i.length);else{var r=Object(te.decode)(e.nonce);if(r.length<this.nacl.secretbox.nonceLength)tt.error("Expected encrypted event nonce length to be "+this.nacl.secretbox.nonceLength+", got: "+r.length);else{var s=this.nacl.secretbox.open(i,r,this.key);if(null===s)return tt.debug("Failed to decrypt an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint..."),void this.authorize(this.pusher.connection.socket_id,(function(e,o){e?tt.error("Failed to make a request to the authEndpoint: "+o+". Unable to fetch new key, so dropping encrypted event"):null!==(s=n.nacl.secretbox.open(i,r,n.key))?n.emit(t,n.getDataToEmit(s)):tt.error("Failed to decrypt event with new key. Dropping encrypted event")}));this.emit(t,this.getDataToEmit(s))}}}else tt.error("Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: "+e);else tt.debug("Received encrypted event before key has been retrieved from the authEndpoint")},e.prototype.getDataToEmit=function(t){var e=Object(Zt.decode)(t);try{return JSON.parse(e)}catch(n){return e}},e}($t),ie=ne,re=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),se=function(t){function e(e,n){var i=t.call(this)||this;i.state="initialized",i.connection=null,i.key=e,i.options=n,i.timeline=i.options.timeline,i.usingTLS=i.options.useTLS,i.errorCallbacks=i.buildErrorCallbacks(),i.connectionCallbacks=i.buildConnectionCallbacks(i.errorCallbacks),i.handshakeCallbacks=i.buildHandshakeCallbacks(i.errorCallbacks);var r=Ve.getNetwork();return r.bind("online",(function(){i.timeline.info({netinfo:"online"}),"connecting"!==i.state&&"unavailable"!==i.state||i.retryIn(0)})),r.bind("offline",(function(){i.timeline.info({netinfo:"offline"}),i.connection&&i.sendActivityCheck()})),i.updateStrategy(),i}return re(e,t),e.prototype.connect=function(){this.connection||this.runner||(this.strategy.isSupported()?(this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()):this.updateState("failed"))},e.prototype.send=function(t){return!!this.connection&&this.connection.send(t)},e.prototype.send_event=function(t,e,n){return!!this.connection&&this.connection.send_event(t,e,n)},e.prototype.disconnect=function(){this.disconnectInternally(),this.updateState("disconnected")},e.prototype.isUsingTLS=function(){return this.usingTLS},e.prototype.startConnecting=function(){var t=this,e=function(n,i){n?t.runner=t.strategy.connect(0,e):"error"===i.action?(t.emit("error",{type:"HandshakeError",error:i.error}),t.timeline.error({handshakeError:i.error})):(t.abortConnecting(),t.handshakeCallbacks[i.action](i))};this.runner=this.strategy.connect(0,e)},e.prototype.abortConnecting=function(){this.runner&&(this.runner.abort(),this.runner=null)},e.prototype.disconnectInternally=function(){this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection&&this.abandonConnection().close()},e.prototype.updateStrategy=function(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,useTLS:this.usingTLS})},e.prototype.retryIn=function(t){var e=this;this.timeline.info({action:"retry",delay:t}),t>0&&this.emit("connecting_in",Math.round(t/1e3)),this.retryTimer=new F(t||0,(function(){e.disconnectInternally(),e.connect()}))},e.prototype.clearRetryTimer=function(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)},e.prototype.setUnavailableTimer=function(){var t=this;this.unavailableTimer=new F(this.options.unavailableTimeout,(function(){t.updateState("unavailable")}))},e.prototype.clearUnavailableTimer=function(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()},e.prototype.sendActivityCheck=function(){var t=this;this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new F(this.options.pongTimeout,(function(){t.timeline.error({pong_timed_out:t.options.pongTimeout}),t.retryIn(0)}))},e.prototype.resetActivityCheck=function(){var t=this;this.stopActivityCheck(),this.connection&&!this.connection.handlesActivityChecks()&&(this.activityTimer=new F(this.activityTimeout,(function(){t.sendActivityCheck()})))},e.prototype.stopActivityCheck=function(){this.activityTimer&&this.activityTimer.ensureAborted()},e.prototype.buildConnectionCallbacks=function(t){var e=this;return j({},t,{message:function(t){e.resetActivityCheck(),e.emit("message",t)},ping:function(){e.send_event("pusher:pong",{})},activity:function(){e.resetActivityCheck()},error:function(t){e.emit("error",t)},closed:function(){e.abandonConnection(),e.shouldRetry()&&e.retryIn(1e3)}})},e.prototype.buildHandshakeCallbacks=function(t){var e=this;return j({},t,{connected:function(t){e.activityTimeout=Math.min(e.options.activityTimeout,t.activityTimeout,t.connection.activityTimeout||1/0),e.clearUnavailableTimer(),e.setConnection(t.connection),e.socket_id=e.connection.id,e.updateState("connected",{socket_id:e.socket_id})}})},e.prototype.buildErrorCallbacks=function(){var t=this,e=function(e){return function(n){n.error&&t.emit("error",{type:"WebSocketError",error:n.error}),e(n)}};return{tls_only:e((function(){t.usingTLS=!0,t.updateStrategy(),t.retryIn(0)})),refused:e((function(){t.disconnect()})),backoff:e((function(){t.retryIn(1e3)})),retry:e((function(){t.retryIn(0)}))}},e.prototype.setConnection=function(t){for(var e in this.connection=t,this.connectionCallbacks)this.connection.bind(e,this.connectionCallbacks[e]);this.resetActivityCheck()},e.prototype.abandonConnection=function(){if(this.connection){for(var t in this.stopActivityCheck(),this.connectionCallbacks)this.connection.unbind(t,this.connectionCallbacks[t]);var e=this.connection;return this.connection=null,e}},e.prototype.updateState=function(t,e){var n=this.state;if(this.state=t,n!==t){var i=t;"connected"===i&&(i+=" with new socket ID "+e.socket_id),tt.debug("State changed",n+" -> "+i),this.timeline.info({state:t,params:e}),this.emit("state_change",{previous:n,current:t}),this.emit(t,e)}},e.prototype.shouldRetry=function(){return"connecting"===this.state||"connected"===this.state},e}(ft),oe=se,ae=function(){function t(){this.channels={}}return t.prototype.add=function(t,e){return this.channels[t]||(this.channels[t]=function(t,e){if(0===t.indexOf("private-encrypted-")){if(e.config.nacl)return le.createEncryptedChannel(t,e,e.config.nacl);var n="Tried to subscribe to a private-encrypted- channel but no nacl implementation available",i=d("encryptedChannelSupport");throw new w(n+". "+i)}if(0===t.indexOf("private-"))return le.createPrivateChannel(t,e);if(0===t.indexOf("presence-"))return le.createPresenceChannel(t,e);if(0===t.indexOf("#"))throw new g('Cannot create a channel with name "'+t+'".');return le.createChannel(t,e)}(t,e)),this.channels[t]},t.prototype.all=function(){return function(t){var e=[];return W(t,(function(t){e.push(t)})),e}(this.channels)},t.prototype.find=function(t){return this.channels[t]},t.prototype.remove=function(t){var e=this.channels[t];return delete this.channels[t],e},t.prototype.disconnect=function(){W(this.channels,(function(t){t.disconnect()}))},t}(),ce=ae,ue={createChannels:function(){return new ce},createConnectionManager:function(t,e){return new oe(t,e)},createChannel:function(t,e){return new Wt(t,e)},createPrivateChannel:function(t,e){return new $t(t,e)},createPresenceChannel:function(t,e){return new Qt(t,e)},createEncryptedChannel:function(t,e,n){return new ie(t,e,n)},createTimelineSender:function(t,e){return new jt(t,e)},createHandshake:function(t,e){return new qt(t,e)},createAssistantToTheTransportManager:function(t,e,n){return new Ot(t,e,n)}},le=ue,he=function(){function t(t){this.options=t||{},this.livesLeft=this.options.lives||1/0}return t.prototype.getAssistant=function(t){return le.createAssistantToTheTransportManager(this,t,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})},t.prototype.isAlive=function(){return this.livesLeft>0},t.prototype.reportDeath=function(){this.livesLeft-=1},t}(),de=function(){function t(t,e){this.strategies=t,this.loop=Boolean(e.loop),this.failFast=Boolean(e.failFast),this.timeout=e.timeout,this.timeoutLimit=e.timeoutLimit}return t.prototype.isSupported=function(){return J(this.strategies,q.method("isSupported"))},t.prototype.connect=function(t,e){var n=this,i=this.strategies,r=0,s=this.timeout,o=null,a=function(c,u){u?e(null,u):(r+=1,n.loop&&(r%=i.length),r<i.length?(s&&(s*=2,n.timeoutLimit&&(s=Math.min(s,n.timeoutLimit))),o=n.tryStrategy(i[r],t,{timeout:s,failFast:n.failFast},a)):e(!0))};return o=this.tryStrategy(i[r],t,{timeout:s,failFast:this.failFast},a),{abort:function(){o.abort()},forceMinPriority:function(e){t=e,o&&o.forceMinPriority(e)}}},t.prototype.tryStrategy=function(t,e,n,i){var r=null,s=null;return n.timeout>0&&(r=new F(n.timeout,(function(){s.abort(),i(!0)}))),s=t.connect(e,(function(t,e){t&&r&&r.isRunning()&&!n.failFast||(r&&r.ensureAborted(),i(t,e))})),{abort:function(){r&&r.ensureAborted(),s.abort()},forceMinPriority:function(t){s.forceMinPriority(t)}}},t}(),pe=de,fe=function(){function t(t){this.strategies=t}return t.prototype.isSupported=function(){return J(this.strategies,q.method("isSupported"))},t.prototype.connect=function(t,e){return function(t,e,n){var i=$(t,(function(t,i,r,s){return t.connect(e,n(i,s))}));return{abort:function(){z(i,ge)},forceMinPriority:function(t){z(i,(function(e){e.forceMinPriority(t)}))}}}(this.strategies,t,(function(t,n){return function(i,r){n[t].error=i,i?function(t){return function(t,e){for(var n=0;n<t.length;n++)if(!e(t[n],n,t))return!1;return!0}(t,(function(t){return Boolean(t.error)}))}(n)&&e(!0):(z(n,(function(t){t.forceMinPriority(r.transport.priority)})),e(null,r))}}))},t}(),me=fe;function ge(t){t.error||t.aborted||(t.abort(),t.aborted=!0)}var ve=function(){function t(t,e,n){this.strategy=t,this.transports=e,this.ttl=n.ttl||18e5,this.usingTLS=n.useTLS,this.timeline=n.timeline}return t.prototype.isSupported=function(){return this.strategy.isSupported()},t.prototype.connect=function(t,e){var n=this.usingTLS,i=function(t){var e=Ve.getLocalStorage();if(e)try{var n=e[ye(t)];if(n)return JSON.parse(n)}catch(Bn){we(t)}return null}(n),r=[this.strategy];if(i&&i.timestamp+this.ttl>=q.now()){var s=this.transports[i.transport];s&&(this.timeline.info({cached:!0,transport:i.transport,latency:i.latency}),r.push(new pe([s],{timeout:2*i.latency+1e3,failFast:!0})))}var o=q.now(),a=r.pop().connect(t,(function i(s,c){s?(we(n),r.length>0?(o=q.now(),a=r.pop().connect(t,i)):e(s)):(function(t,e,n){var i=Ve.getLocalStorage();if(i)try{i[ye(t)]=Q({timestamp:q.now(),transport:e,latency:n})}catch(Bn){}}(n,c.transport.name,q.now()-o),e(null,c))}));return{abort:function(){a.abort()},forceMinPriority:function(e){t=e,a&&a.forceMinPriority(e)}}},t}(),be=ve;function ye(t){return"pusherTransport"+(t?"TLS":"NonTLS")}function we(t){var e=Ve.getLocalStorage();if(e)try{delete e[ye(t)]}catch(Bn){}}var Ee=function(){function t(t,e){var n=e.delay;this.strategy=t,this.options={delay:n}}return t.prototype.isSupported=function(){return this.strategy.isSupported()},t.prototype.connect=function(t,e){var n,i=this.strategy,r=new F(this.options.delay,(function(){n=i.connect(t,e)}));return{abort:function(){r.ensureAborted(),n&&n.abort()},forceMinPriority:function(e){t=e,n&&n.forceMinPriority(e)}}},t}(),Se=Ee,ke=function(){function t(t,e,n){this.test=t,this.trueBranch=e,this.falseBranch=n}return t.prototype.isSupported=function(){return(this.test()?this.trueBranch:this.falseBranch).isSupported()},t.prototype.connect=function(t,e){return(this.test()?this.trueBranch:this.falseBranch).connect(t,e)},t}(),Te=function(){function t(t){this.strategy=t}return t.prototype.isSupported=function(){return this.strategy.isSupported()},t.prototype.connect=function(t,e){var n=this.strategy.connect(t,(function(t,i){i&&n.abort(),e(t,i)}));return n},t}();function Ce(t){return function(){return t.isSupported()}}var Le,Ae=function(t,e,n){var i={};function r(e,r,s,o,a){var c=n(t,e,r,s,o,a);return i[e]=c,c}var s,o=Object.assign({},e,{hostNonTLS:t.wsHost+":"+t.wsPort,hostTLS:t.wsHost+":"+t.wssPort,httpPath:t.wsPath}),a=Object.assign({},o,{useTLS:!0}),c=Object.assign({},e,{hostNonTLS:t.httpHost+":"+t.httpPort,hostTLS:t.httpHost+":"+t.httpsPort,httpPath:t.httpPath}),u={loop:!0,timeout:15e3,timeoutLimit:6e4},l=new he({lives:2,minPingDelay:1e4,maxPingDelay:t.activityTimeout}),h=new he({lives:2,minPingDelay:1e4,maxPingDelay:t.activityTimeout}),d=r("ws","ws",3,o,l),p=r("wss","ws",3,a,l),f=r("sockjs","sockjs",1,c),m=r("xhr_streaming","xhr_streaming",1,c,h),g=r("xdr_streaming","xdr_streaming",1,c,h),v=r("xhr_polling","xhr_polling",1,c),b=r("xdr_polling","xdr_polling",1,c),y=new pe([d],u),w=new pe([p],u),E=new pe([f],u),S=new pe([new ke(Ce(m),m,g)],u),k=new pe([new ke(Ce(v),v,b)],u),T=new pe([new ke(Ce(S),new me([S,new Se(k,{delay:4e3})]),k)],u),C=new ke(Ce(T),T,E);return s=e.useTLS?new me([y,new Se(C,{delay:2e3})]):new me([y,new Se(w,{delay:2e3}),new Se(C,{delay:5e3})]),new be(new Te(new ke(Ce(d),s,C)),i,{ttl:18e5,timeline:e.timeline,useTLS:e.useTLS})},Re={getRequest:function(t){var e=new window.XDomainRequest;return e.ontimeout=function(){t.emit("error",new v),t.close()},e.onerror=function(e){t.emit("error",e),t.close()},e.onprogress=function(){e.responseText&&e.responseText.length>0&&t.onChunk(200,e.responseText)},e.onload=function(){e.responseText&&e.responseText.length>0&&t.onChunk(200,e.responseText),t.emit("finished",200),t.close()},e},abortRequest:function(t){t.ontimeout=t.onerror=t.onprogress=t.onload=null,t.abort()}},Pe=Re,xe=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),_e=function(t){function e(e,n,i){var r=t.call(this)||this;return r.hooks=e,r.method=n,r.url=i,r}return xe(e,t),e.prototype.start=function(t){var e=this;this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=function(){e.close()},Ve.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(t)},e.prototype.close=function(){this.unloader&&(Ve.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)},e.prototype.onChunk=function(t,e){for(;;){var n=this.advanceBuffer(e);if(!n)break;this.emit("chunk",{status:t,data:n})}this.isBufferTooLong(e)&&this.emit("buffer_too_long")},e.prototype.advanceBuffer=function(t){var e=t.slice(this.position),n=e.indexOf("\n");return-1!==n?(this.position+=n+1,e.slice(0,n)):null},e.prototype.isBufferTooLong=function(t){return this.position===t.length&&t.length>262144},e}(ft);!function(t){t[t.CONNECTING=0]="CONNECTING",t[t.OPEN=1]="OPEN",t[t.CLOSED=3]="CLOSED"}(Le||(Le={}));var Oe=Le,Me=1,Ie=function(){function t(t,e){this.hooks=t,this.session=Fe(1e3)+"/"+function(t){for(var e=[],n=0;n<t;n++)e.push(Fe(32).toString(32));return e.join("")}(8),this.location=function(t){var e=/([^\?]*)\/*(\??.*)/.exec(t);return{base:e[1],queryString:e[2]}}(e),this.readyState=Oe.CONNECTING,this.openStream()}return t.prototype.send=function(t){return this.sendRaw(JSON.stringify([t]))},t.prototype.ping=function(){this.hooks.sendHeartbeat(this)},t.prototype.close=function(t,e){this.onClose(t,e,!0)},t.prototype.sendRaw=function(t){if(this.readyState!==Oe.OPEN)return!1;try{return Ve.createSocketRequest("POST",De(function(t,e){return t.base+"/"+e+"/xhr_send"}(this.location,this.session))).start(t),!0}catch(Bn){return!1}},t.prototype.reconnect=function(){this.closeStream(),this.openStream()},t.prototype.onClose=function(t,e,n){this.closeStream(),this.readyState=Oe.CLOSED,this.onclose&&this.onclose({code:t,reason:e,wasClean:n})},t.prototype.onChunk=function(t){var e;if(200===t.status)switch(this.readyState===Oe.OPEN&&this.onActivity(),t.data.slice(0,1)){case"o":e=JSON.parse(t.data.slice(1)||"{}"),this.onOpen(e);break;case"a":e=JSON.parse(t.data.slice(1)||"[]");for(var n=0;n<e.length;n++)this.onEvent(e[n]);break;case"m":e=JSON.parse(t.data.slice(1)||"null"),this.onEvent(e);break;case"h":this.hooks.onHeartbeat(this);break;case"c":e=JSON.parse(t.data.slice(1)||"[]"),this.onClose(e[0],e[1],!0)}},t.prototype.onOpen=function(t){var e,n,i;this.readyState===Oe.CONNECTING?(t&&t.hostname&&(this.location.base=(e=this.location.base,n=t.hostname,(i=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(e))[1]+n+i[3])),this.readyState=Oe.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)},t.prototype.onEvent=function(t){this.readyState===Oe.OPEN&&this.onmessage&&this.onmessage({data:t})},t.prototype.onActivity=function(){this.onactivity&&this.onactivity()},t.prototype.onError=function(t){this.onerror&&this.onerror(t)},t.prototype.openStream=function(){var t=this;this.stream=Ve.createSocketRequest("POST",De(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",(function(e){t.onChunk(e)})),this.stream.bind("finished",(function(e){t.hooks.onFinished(t,e)})),this.stream.bind("buffer_too_long",(function(){t.reconnect()}));try{this.stream.start()}catch(e){q.defer((function(){t.onError(e),t.onClose(1006,"Could not start streaming",!1)}))}},t.prototype.closeStream=function(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)},t}();function De(t){var e=-1===t.indexOf("?")?"?":"&";return t+e+"t="+ +new Date+"&n="+Me++}function Fe(t){return Ve.randomInt(t)}var He,Ne=Ie,qe={getReceiveURL:function(t,e){return t.base+"/"+e+"/xhr_streaming"+t.queryString},onHeartbeat:function(t){t.sendRaw("[]")},sendHeartbeat:function(t){t.sendRaw("[]")},onFinished:function(t,e){t.onClose(1006,"Connection interrupted ("+e+")",!1)}},je={getReceiveURL:function(t,e){return t.base+"/"+e+"/xhr"+t.queryString},onHeartbeat:function(){},sendHeartbeat:function(t){t.sendRaw("[]")},onFinished:function(t,e){200===e?t.reconnect():t.onClose(1006,"Connection interrupted ("+e+")",!1)}},Be={getRequest:function(t){var e=new(Ve.getXHRAPI());return e.onreadystatechange=e.onprogress=function(){switch(e.readyState){case 3:e.responseText&&e.responseText.length>0&&t.onChunk(e.status,e.responseText);break;case 4:e.responseText&&e.responseText.length>0&&t.onChunk(e.status,e.responseText),t.emit("finished",e.status),t.close()}},e},abortRequest:function(t){t.onreadystatechange=null,t.abort()}},Ue={createStreamingSocket:function(t){return this.createSocket(qe,t)},createPollingSocket:function(t){return this.createSocket(je,t)},createSocket:function(t,e){return new Ne(t,e)},createXHR:function(t,e){return this.createRequest(Be,t,e)},createRequest:function(t,e,n){return new _e(t,e,n)},createXDR:function(t,e){return this.createRequest(Pe,t,e)}},We={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:s,DependenciesReceivers:u,getDefaultStrategy:Ae,Transports:Pt,transportConnectionInitializer:function(){var t=this;t.timeline.info(t.buildTimelineMessage({transport:t.name+(t.options.useTLS?"s":"")})),t.hooks.isInitialized()?t.changeState("initialized"):t.hooks.file?(t.changeState("initializing"),l.load(t.hooks.file,{useTLS:t.options.useTLS},(function(e,n){t.hooks.isInitialized()?(t.changeState("initialized"),n(!0)):(e&&t.onError(e),t.onClose(),n(!1))}))):t.onClose()},HTTPFactory:Ue,TimelineTransport:st,getXHRAPI:function(){return window.XMLHttpRequest},getWebSocketAPI:function(){return window.WebSocket||window.MozWebSocket},setup:function(t){var e=this;window.Pusher=t;var n=function(){e.onDocumentBody(t.ready)};window.JSON?n():l.load("json2",{},n)},getDocument:function(){return document},getProtocol:function(){return this.getDocument().location.protocol},getAuthorizers:function(){return{ajax:T,jsonp:et}},onDocumentBody:function(t){var e=this;document.body?t():setTimeout((function(){e.onDocumentBody(t)}),0)},createJSONPRequest:function(t,e){return new rt(t,e)},createScriptRequest:function(t){return new nt(t)},getLocalStorage:function(){try{return window.localStorage}catch(Bn){return}},createXHR:function(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest:function(){return new(this.getXHRAPI())},createMicrosoftXHR:function(){return new ActiveXObject("Microsoft.XMLHTTP")},getNetwork:function(){return _t},createWebSocket:function(t){return new(this.getWebSocketAPI())(t)},createSocketRequest:function(t,e){if(this.isXHRSupported())return this.HTTPFactory.createXHR(t,e);if(this.isXDRSupported(0===e.indexOf("https:")))return this.HTTPFactory.createXDR(t,e);throw"Cross-origin HTTP requests are not supported"},isXHRSupported:function(){var t=this.getXHRAPI();return Boolean(t)&&void 0!==(new t).withCredentials},isXDRSupported:function(t){var e=t?"https:":"http:",n=this.getProtocol();return Boolean(window.XDomainRequest)&&n===e},addUnloadListener:function(t){void 0!==window.addEventListener?window.addEventListener("unload",t,!1):void 0!==window.attachEvent&&window.attachEvent("onunload",t)},removeUnloadListener:function(t){void 0!==window.addEventListener?window.removeEventListener("unload",t,!1):void 0!==window.detachEvent&&window.detachEvent("onunload",t)},randomInt:function(t){return Math.floor((window.crypto||window.msCrypto).getRandomValues(new Uint32Array(1))[0]/Math.pow(2,32)*t)}},Ve=We;!function(t){t[t.ERROR=3]="ERROR",t[t.INFO=6]="INFO",t[t.DEBUG=7]="DEBUG"}(He||(He={}));var ze=He,$e=function(){function t(t,e,n){this.key=t,this.session=e,this.events=[],this.options=n||{},this.sent=0,this.uniqueID=0}return t.prototype.log=function(t,e){t<=this.options.level&&(this.events.push(j({},e,{timestamp:q.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())},t.prototype.error=function(t){this.log(ze.ERROR,t)},t.prototype.info=function(t){this.log(ze.INFO,t)},t.prototype.debug=function(t){this.log(ze.DEBUG,t)},t.prototype.isEmpty=function(){return 0===this.events.length},t.prototype.send=function(t,e){var n=this,i=j({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],t(i,(function(t,i){t||n.sent++,e&&e(t,i)})),!0},t.prototype.generateUniqueID=function(){return this.uniqueID++,this.uniqueID},t}(),Ke=$e,Xe=function(){function t(t,e,n,i){this.name=t,this.priority=e,this.transport=n,this.options=i||{}}return t.prototype.isSupported=function(){return this.transport.isSupported({useTLS:this.options.useTLS})},t.prototype.connect=function(t,e){var n=this;if(!this.isSupported())return Ge(new S,e);if(this.priority<t)return Ge(new b,e);var i=!1,r=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),s=null,o=function(){r.unbind("initialized",o),r.connect()},a=function(){s=le.createHandshake(r,(function(t){i=!0,l(),e(null,t)}))},c=function(t){l(),e(t)},u=function(){var t;l(),t=Q(r),e(new y(t))},l=function(){r.unbind("initialized",o),r.unbind("open",a),r.unbind("error",c),r.unbind("closed",u)};return r.bind("initialized",o),r.bind("open",a),r.bind("error",c),r.bind("closed",u),r.initialize(),{abort:function(){i||(l(),s?s.close():r.close())},forceMinPriority:function(t){i||n.priority<t&&(s?s.close():r.close())}}},t}(),Je=Xe;function Ge(t,e){return q.defer((function(){e(t)})),{abort:function(){},forceMinPriority:function(){}}}var Ye=Ve.Transports,Qe=function(t,e,n,i,r,s){var o,a=Ye[n];if(!a)throw new E(n);return t.enabledTransports&&-1===U(t.enabledTransports,e)||t.disabledTransports&&-1!==U(t.disabledTransports,e)?o=Ze:(r=Object.assign({ignoreNullOrigin:t.ignoreNullOrigin},r),o=new Je(e,i,s?s.getAssistant(a):a,r)),o},Ze={isSupported:function(){return!1},connect:function(t,e){var n=q.defer((function(){e(new S)}));return{abort:function(){n.ensureAborted()},forceMinPriority:function(){}}}},tn=function(t){if(void 0===Ve.getAuthorizers()[t.transport])throw"'"+t.transport+"' is not a recognized auth transport";return function(e,n){var r=function(t,e){var n="socket_id="+encodeURIComponent(t.socketId);for(var i in e.params)n+="&"+encodeURIComponent(i)+"="+encodeURIComponent(e.params[i]);if(null!=e.paramsProvider){var r=e.paramsProvider();for(var i in r)n+="&"+encodeURIComponent(i)+"="+encodeURIComponent(r[i])}return n}(e,t);Ve.getAuthorizers()[t.transport](Ve,r,t,i.UserAuthentication,n)}},en=function(t){if(void 0===Ve.getAuthorizers()[t.transport])throw"'"+t.transport+"' is not a recognized auth transport";return function(e,n){var r=function(t,e){var n="socket_id="+encodeURIComponent(t.socketId);for(var i in n+="&channel_name="+encodeURIComponent(t.channelName),e.params)n+="&"+encodeURIComponent(i)+"="+encodeURIComponent(e.params[i]);if(null!=e.paramsProvider){var r=e.paramsProvider();for(var i in r)n+="&"+encodeURIComponent(i)+"="+encodeURIComponent(r[i])}return n}(e,t);Ve.getAuthorizers()[t.transport](Ve,r,t,i.ChannelAuthorization,n)}},nn=function(){return nn=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},nn.apply(this,arguments)};function rn(t){return t.httpHost?t.httpHost:t.cluster?"sockjs-"+t.cluster+".pusher.com":o.httpHost}function sn(t){return t.wsHost?t.wsHost:t.cluster?on(t.cluster):on(o.cluster)}function on(t){return"ws-"+t+".pusher.com"}function an(t){return"https:"===Ve.getProtocol()||!1!==t.forceTLS}function cn(t){return"enableStats"in t?t.enableStats:"disableStats"in t&&!t.disableStats}function un(t){var e=nn(nn({},o.userAuthentication),t.userAuthentication);return"customHandler"in e&&null!=e.customHandler?e.customHandler:tn(e)}function ln(t,e){var n=function(t,e){var n;return"channelAuthorization"in t?n=nn(nn({},o.channelAuthorization),t.channelAuthorization):(n={transport:t.authTransport||o.authTransport,endpoint:t.authEndpoint||o.authEndpoint},"auth"in t&&("params"in t.auth&&(n.params=t.auth.params),"headers"in t.auth&&(n.headers=t.auth.headers)),"authorizer"in t&&(n.customHandler=function(t,e,n){var i={authTransport:e.transport,authEndpoint:e.endpoint,auth:{params:e.params,headers:e.headers}};return function(e,r){var s=t.channel(e.channelName);n(s,i).authorize(e.socketId,r)}}(e,n,t.authorizer))),n}(t,e);return"customHandler"in n&&null!=n.customHandler?n.customHandler:en(n)}var hn=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),dn=function(t){function e(e){var n=t.call(this,(function(t,e){tt.debug("No callbacks on watchlist events for "+t)}))||this;return n.pusher=e,n.bindWatchlistInternalEvent(),n}return hn(e,t),e.prototype.handleEvent=function(t){var e=this;t.data.events.forEach((function(t){e.emit(t.name,t)}))},e.prototype.bindWatchlistInternalEvent=function(){var t=this;this.pusher.connection.bind("message",(function(e){"pusher_internal:watchlist_events"===e.event&&t.handleEvent(e)}))},e}(ft),pn=dn,fn=function(){var t,e;return{promise:new Promise((function(n,i){t=n,e=i})),resolve:t,reject:e}},mn=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),gn=function(t){function e(e){var n=t.call(this,(function(t,e){tt.debug("No callbacks on user for "+t)}))||this;return n.signin_requested=!1,n.user_data=null,n.serverToUserChannel=null,n.signinDonePromise=null,n._signinDoneResolve=null,n._onAuthorize=function(t,e){if(t)return tt.warn("Error during signin: "+t),void n._cleanup();n.pusher.send_event("pusher:signin",{auth:e.auth,user_data:e.user_data})},n.pusher=e,n.pusher.connection.bind("state_change",(function(t){var e=t.previous,i=t.current;"connected"!==e&&"connected"===i&&n._signin(),"connected"===e&&"connected"!==i&&(n._cleanup(),n._newSigninPromiseIfNeeded())})),n.watchlist=new pn(e),n.pusher.connection.bind("message",(function(t){"pusher:signin_success"===t.event&&n._onSigninSuccess(t.data),n.serverToUserChannel&&n.serverToUserChannel.name===t.channel&&n.serverToUserChannel.handleEvent(t)})),n}return mn(e,t),e.prototype.signin=function(){this.signin_requested||(this.signin_requested=!0,this._signin())},e.prototype._signin=function(){this.signin_requested&&(this._newSigninPromiseIfNeeded(),"connected"===this.pusher.connection.state&&this.pusher.config.userAuthenticator({socketId:this.pusher.connection.socket_id},this._onAuthorize))},e.prototype._onSigninSuccess=function(t){try{this.user_data=JSON.parse(t.user_data)}catch(Bn){return tt.error("Failed parsing user data after signin: "+t.user_data),void this._cleanup()}if("string"!=typeof this.user_data.id||""===this.user_data.id)return tt.error("user_data doesn't contain an id. user_data: "+this.user_data),void this._cleanup();this._signinDoneResolve(),this._subscribeChannels()},e.prototype._subscribeChannels=function(){var t,e=this;this.serverToUserChannel=new Wt("#server-to-user-"+this.user_data.id,this.pusher),this.serverToUserChannel.bind_global((function(t,n){0!==t.indexOf("pusher_internal:")&&0!==t.indexOf("pusher:")&&e.emit(t,n)})),(t=this.serverToUserChannel).subscriptionPending&&t.subscriptionCancelled?t.reinstateSubscription():t.subscriptionPending||"connected"!==e.pusher.connection.state||t.subscribe()},e.prototype._cleanup=function(){this.user_data=null,this.serverToUserChannel&&(this.serverToUserChannel.unbind_all(),this.serverToUserChannel.disconnect(),this.serverToUserChannel=null),this.signin_requested&&this._signinDoneResolve()},e.prototype._newSigninPromiseIfNeeded=function(){if(this.signin_requested&&(!this.signinDonePromise||this.signinDonePromise.done)){var t=fn(),e=t.promise,n=t.resolve;e.done=!1;var i=function(){e.done=!0};e.then(i).catch(i),this.signinDonePromise=e,this._signinDoneResolve=n}},e}(ft),vn=gn,bn=function(){function t(e,n){var i=this;if(function(t){if(null==t)throw"You must pass your app key when you instantiate Pusher."}(e),!(n=n||{}).cluster&&!n.wsHost&&!n.httpHost){var r=d("javascriptQuickStart");tt.warn("You should always specify a cluster when connecting. "+r)}"disableStats"in n&&tt.warn("The disableStats option is deprecated in favor of enableStats"),this.key=e,this.config=function(t,e){var n={activityTimeout:t.activityTimeout||o.activityTimeout,cluster:t.cluster||o.cluster,httpPath:t.httpPath||o.httpPath,httpPort:t.httpPort||o.httpPort,httpsPort:t.httpsPort||o.httpsPort,pongTimeout:t.pongTimeout||o.pongTimeout,statsHost:t.statsHost||o.stats_host,unavailableTimeout:t.unavailableTimeout||o.unavailableTimeout,wsPath:t.wsPath||o.wsPath,wsPort:t.wsPort||o.wsPort,wssPort:t.wssPort||o.wssPort,enableStats:cn(t),httpHost:rn(t),useTLS:an(t),wsHost:sn(t),userAuthenticator:un(t),channelAuthorizer:ln(t,e)};return"disabledTransports"in t&&(n.disabledTransports=t.disabledTransports),"enabledTransports"in t&&(n.enabledTransports=t.enabledTransports),"ignoreNullOrigin"in t&&(n.ignoreNullOrigin=t.ignoreNullOrigin),"timelineParams"in t&&(n.timelineParams=t.timelineParams),"nacl"in t&&(n.nacl=t.nacl),n}(n,this),this.channels=le.createChannels(),this.global_emitter=new ft,this.sessionID=Ve.randomInt(1e9),this.timeline=new Ke(this.key,this.sessionID,{cluster:this.config.cluster,features:t.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:ze.INFO,version:o.VERSION}),this.config.enableStats&&(this.timelineSender=le.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+Ve.TimelineTransport.name})),this.connection=le.createConnectionManager(this.key,{getStrategy:function(t){return Ve.getDefaultStrategy(i.config,t,Qe)},timeline:this.timeline,activityTimeout:this.config.activityTimeout,pongTimeout:this.config.pongTimeout,unavailableTimeout:this.config.unavailableTimeout,useTLS:Boolean(this.config.useTLS)}),this.connection.bind("connected",(function(){i.subscribeAll(),i.timelineSender&&i.timelineSender.send(i.connection.isUsingTLS())})),this.connection.bind("message",(function(t){var e=0===t.event.indexOf("pusher_internal:");if(t.channel){var n=i.channel(t.channel);n&&n.handleEvent(t)}e||i.global_emitter.emit(t.event,t.data)})),this.connection.bind("connecting",(function(){i.channels.disconnect()})),this.connection.bind("disconnected",(function(){i.channels.disconnect()})),this.connection.bind("error",(function(t){tt.warn(t)})),t.instances.push(this),this.timeline.info({instances:t.instances.length}),this.user=new vn(this),t.isReady&&this.connect()}return t.ready=function(){t.isReady=!0;for(var e=0,n=t.instances.length;e<n;e++)t.instances[e].connect()},t.getClientFeatures=function(){return V(X({ws:Ve.Transports.ws},(function(t){return t.isSupported({})})))},t.prototype.channel=function(t){return this.channels.find(t)},t.prototype.allChannels=function(){return this.channels.all()},t.prototype.connect=function(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var t=this.connection.isUsingTLS(),e=this.timelineSender;this.timelineSenderTimer=new H(6e4,(function(){e.send(t)}))}},t.prototype.disconnect=function(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)},t.prototype.bind=function(t,e,n){return this.global_emitter.bind(t,e,n),this},t.prototype.unbind=function(t,e,n){return this.global_emitter.unbind(t,e,n),this},t.prototype.bind_global=function(t){return this.global_emitter.bind_global(t),this},t.prototype.unbind_global=function(t){return this.global_emitter.unbind_global(t),this},t.prototype.unbind_all=function(t){return this.global_emitter.unbind_all(),this},t.prototype.subscribeAll=function(){var t;for(t in this.channels.channels)this.channels.channels.hasOwnProperty(t)&&this.subscribe(t)},t.prototype.subscribe=function(t){var e=this.channels.add(t,this);return e.subscriptionPending&&e.subscriptionCancelled?e.reinstateSubscription():e.subscriptionPending||"connected"!==this.connection.state||e.subscribe(),e},t.prototype.unsubscribe=function(t){var e=this.channels.find(t);e&&e.subscriptionPending?e.cancelSubscription():(e=this.channels.remove(t))&&e.subscribed&&e.unsubscribe()},t.prototype.send_event=function(t,e,n){return this.connection.send_event(t,e,n)},t.prototype.shouldUseTLS=function(){return this.config.useTLS},t.prototype.signin=function(){this.user.signin()},t.instances=[],t.isReady=!1,t.logToConsole=!1,t.Runtime=Ve,t.ScriptReceivers=Ve.ScriptReceivers,t.DependenciesReceivers=Ve.DependenciesReceivers,t.auth_callbacks=Ve.auth_callbacks,t}(),yn=e.default=bn;Ve.setup(bn)}])},t.exports=e()}(vi);const bi=r(vi.exports);!function(){if(void 0===window.Reflect||void 0===window.customElements||window.customElements.polyfillWrapFlushCallback)return;const t=HTMLElement,e=function(){return Reflect.construct(t,[],this.constructor)};window.HTMLElement=e,HTMLElement.prototype=t.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,t)}(),function(t){function e(t,e,n){throw new t("Failed to execute 'requestSubmit' on 'HTMLFormElement': "+e+".",n)}"function"!=typeof t.requestSubmit&&(t.requestSubmit=function(t){t?(function(t,n){t instanceof HTMLElement||e(TypeError,"parameter 1 is not of type 'HTMLElement'"),"submit"==t.type||e(TypeError,"The specified element is not a submit button"),t.form==n||e(DOMException,"The specified element is not owned by this form element","NotFoundError")}(t,this),t.click()):((t=document.createElement("input")).type="submit",t.hidden=!0,this.appendChild(t),t.click(),this.removeChild(t))})}(HTMLFormElement.prototype);const yi=new WeakMap;function wi(t){const e=function(t){const e=t instanceof Element?t:t instanceof Node?t.parentElement:null,n=e?e.closest("input, button"):null;return"submit"==(null==n?void 0:n.type)?n:null}(t.target);e&&e.form&&yi.set(e.form,e)}var Ei,Si,ki,Ti,Ci,Li;!function(){if("submitter"in Event.prototype)return;let t=window.Event.prototype;if("SubmitEvent"in window&&/Apple Computer/.test(navigator.vendor))t=window.SubmitEvent.prototype;else if("SubmitEvent"in window)return;addEventListener("click",wi,!0),Object.defineProperty(t,"submitter",{get(){if("submit"==this.type&&this.target instanceof HTMLFormElement)return yi.get(this.target)}})}(),function(t){t.eager="eager",t.lazy="lazy"}(Ei||(Ei={}));class Ai extends HTMLElement{static get observedAttributes(){return["disabled","complete","loading","src"]}constructor(){super(),this.loaded=Promise.resolve(),this.delegate=new Ai.delegateConstructor(this)}connectedCallback(){this.delegate.connect()}disconnectedCallback(){this.delegate.disconnect()}reload(){return this.delegate.sourceURLReloaded()}attributeChangedCallback(t){"loading"==t?this.delegate.loadingStyleChanged():"complete"==t?this.delegate.completeChanged():"src"==t?this.delegate.sourceURLChanged():this.delegate.disabledChanged()}get src(){return this.getAttribute("src")}set src(t){t?this.setAttribute("src",t):this.removeAttribute("src")}get loading(){return"lazy"===(this.getAttribute("loading")||"").toLowerCase()?Ei.lazy:Ei.eager}set loading(t){t?this.setAttribute("loading",t):this.removeAttribute("loading")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get autoscroll(){return this.hasAttribute("autoscroll")}set autoscroll(t){t?this.setAttribute("autoscroll",""):this.removeAttribute("autoscroll")}get complete(){return!this.delegate.isLoading}get isActive(){return this.ownerDocument===document&&!this.isPreview}get isPreview(){var t,e;return null===(e=null===(t=this.ownerDocument)||void 0===t?void 0:t.documentElement)||void 0===e?void 0:e.hasAttribute("data-turbo-preview")}}function Ri(t){return new URL(t.toString(),document.baseURI)}function Pi(t){let e;return t.hash?t.hash.slice(1):(e=t.href.match(/#(.*)$/))?e[1]:void 0}function xi(t,e){return Ri((null==e?void 0:e.getAttribute("formaction"))||t.getAttribute("action")||t.action)}function _i(t){return(function(t){return function(t){return t.pathname.split("/").slice(1)}(t).slice(-1)[0]}(t).match(/\.[^.]*$/)||[])[0]||""}function Oi(t,e){const n=function(t){return(e=t.origin+t.pathname).endsWith("/")?e:e+"/";var e}(e);return t.href===Ri(n).href||t.href.startsWith(n)}function Mi(t,e){return Oi(t,e)&&!!_i(t).match(/^(?:|\.(?:htm|html|xhtml|php))$/)}function Ii(t){const e=Pi(t);return null!=e?t.href.slice(0,-(e.length+1)):t.href}function Di(t){return Ii(t)}class Fi{constructor(t){this.response=t}get succeeded(){return this.response.ok}get failed(){return!this.succeeded}get clientError(){return this.statusCode>=400&&this.statusCode<=499}get serverError(){return this.statusCode>=500&&this.statusCode<=599}get redirected(){return this.response.redirected}get location(){return Ri(this.response.url)}get isHTML(){return this.contentType&&this.contentType.match(/^(?:text\/([^\s;,]+\b)?html|application\/xhtml\+xml)\b/)}get statusCode(){return this.response.status}get contentType(){return this.header("Content-Type")}get responseText(){return this.response.clone().text()}get responseHTML(){return this.isHTML?this.response.clone().text():Promise.resolve(void 0)}header(t){return this.response.headers.get(t)}}function Hi(t){if("false"==t.getAttribute("data-turbo-eval"))return t;{const e=document.createElement("script"),n=Gi("csp-nonce");return n&&(e.nonce=n),e.textContent=t.textContent,e.async=!1,function(t,e){for(const{name:n,value:i}of e.attributes)t.setAttribute(n,i)}(e,t),e}}function Ni(t,{target:e,cancelable:n,detail:i}={}){const r=new CustomEvent(t,{cancelable:n,bubbles:!0,composed:!0,detail:i});return e&&e.isConnected?e.dispatchEvent(r):document.documentElement.dispatchEvent(r),r}function qi(){return new Promise((t=>requestAnimationFrame((()=>t()))))}function ji(t=""){return(new DOMParser).parseFromString(t,"text/html")}function Bi(t,...e){const n=function(t,e){return t.reduce(((t,n,i)=>t+n+(null==e[i]?"":e[i])),"")}(t,e).replace(/^\n/,"").split("\n"),i=n[0].match(/^\s+/),r=i?i[0].length:0;return n.map((t=>t.slice(r))).join("\n")}function Ui(){return Array.from({length:36}).map(((t,e)=>8==e||13==e||18==e||23==e?"-":14==e?"4":19==e?(Math.floor(4*Math.random())+8).toString(16):Math.floor(15*Math.random()).toString(16))).join("")}function Wi(t,...e){for(const n of e.map((e=>null==e?void 0:e.getAttribute(t))))if("string"==typeof n)return n;return null}function Vi(...t){for(const e of t)"turbo-frame"==e.localName&&e.setAttribute("busy",""),e.setAttribute("aria-busy","true")}function zi(...t){for(const e of t)"turbo-frame"==e.localName&&e.removeAttribute("busy"),e.removeAttribute("aria-busy")}function $i(t,e=2e3){return new Promise((n=>{const i=()=>{t.removeEventListener("error",i),t.removeEventListener("load",i),n()};t.addEventListener("load",i,{once:!0}),t.addEventListener("error",i,{once:!0}),setTimeout(n,e)}))}function Ki(t){switch(t){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}function Xi(...t){const e=Wi("data-turbo-action",...t);return function(t){return"advance"==t||"replace"==t||"restore"==t}(e)?e:null}function Ji(t){return document.querySelector(`meta[name="${t}"]`)}function Gi(t){const e=Ji(t);return e&&e.content}function Yi(t,e){var n;if(t instanceof Element)return t.closest(e)||Yi(t.assignedSlot||(null===(n=t.getRootNode())||void 0===n?void 0:n.host),e)}!function(t){t[t.get=0]="get",t[t.post=1]="post",t[t.put=2]="put",t[t.patch=3]="patch",t[t.delete=4]="delete"}(Si||(Si={}));class Qi{constructor(t,e,n,i=new URLSearchParams,r=null){this.abortController=new AbortController,this.resolveRequestPromise=t=>{},this.delegate=t,this.method=e,this.headers=this.defaultHeaders,this.body=i,this.url=n,this.target=r}get location(){return this.url}get params(){return this.url.searchParams}get entries(){return this.body?Array.from(this.body.entries()):[]}cancel(){this.abortController.abort()}async perform(){const{fetchOptions:t}=this;this.delegate.prepareRequest(this),await this.allowRequestToBeIntercepted(t);try{this.delegate.requestStarted(this);const e=await fetch(this.url.href,t);return await this.receive(e)}catch(e){if("AbortError"!==e.name)throw this.willDelegateErrorHandling(e)&&this.delegate.requestErrored(this,e),e}finally{this.delegate.requestFinished(this)}}async receive(t){const e=new Fi(t);return Ni("turbo:before-fetch-response",{cancelable:!0,detail:{fetchResponse:e},target:this.target}).defaultPrevented?this.delegate.requestPreventedHandlingResponse(this,e):e.succeeded?this.delegate.requestSucceededWithResponse(this,e):this.delegate.requestFailedWithResponse(this,e),e}get fetchOptions(){var t;return{method:Si[this.method].toUpperCase(),credentials:"same-origin",headers:this.headers,redirect:"follow",body:this.isSafe?null:this.body,signal:this.abortSignal,referrer:null===(t=this.delegate.referrer)||void 0===t?void 0:t.href}}get defaultHeaders(){return{Accept:"text/html, application/xhtml+xml"}}get isSafe(){return this.method===Si.get}get abortSignal(){return this.abortController.signal}acceptResponseType(t){this.headers.Accept=[t,this.headers.Accept].join(", ")}async allowRequestToBeIntercepted(t){const e=new Promise((t=>this.resolveRequestPromise=t));Ni("turbo:before-fetch-request",{cancelable:!0,detail:{fetchOptions:t,url:this.url,resume:this.resolveRequestPromise},target:this.target}).defaultPrevented&&await e}willDelegateErrorHandling(t){return!Ni("turbo:fetch-request-error",{target:this.target,cancelable:!0,detail:{request:this,error:t}}).defaultPrevented}}class Zi{constructor(t,e){this.started=!1,this.intersect=t=>{const e=t.slice(-1)[0];(null==e?void 0:e.isIntersecting)&&this.delegate.elementAppearedInViewport(this.element)},this.delegate=t,this.element=e,this.intersectionObserver=new IntersectionObserver(this.intersect)}start(){this.started||(this.started=!0,this.intersectionObserver.observe(this.element))}stop(){this.started&&(this.started=!1,this.intersectionObserver.unobserve(this.element))}}class tr{static wrap(t){return"string"==typeof t?new this(function(t){const e=document.createElement("template");return e.innerHTML=t,e.content}(t)):t}constructor(t){this.fragment=function(t){for(const e of t.querySelectorAll("turbo-stream")){const t=document.importNode(e,!0);for(const e of t.templateElement.content.querySelectorAll("script"))e.replaceWith(Hi(e));e.replaceWith(t)}return t}(t)}}tr.contentType="text/vnd.turbo-stream.html",function(t){t[t.initialized=0]="initialized",t[t.requesting=1]="requesting",t[t.waiting=2]="waiting",t[t.receiving=3]="receiving",t[t.stopping=4]="stopping",t[t.stopped=5]="stopped"}(ki||(ki={})),function(t){t.urlEncoded="application/x-www-form-urlencoded",t.multipart="multipart/form-data",t.plain="text/plain"}(Ti||(Ti={}));class er{static confirmMethod(t,e,n){return Promise.resolve(confirm(t))}constructor(t,e,n,i=!1){this.state=ki.initialized,this.delegate=t,this.formElement=e,this.submitter=n,this.formData=function(t,e){const n=new FormData(t),i=null==e?void 0:e.getAttribute("name"),r=null==e?void 0:e.getAttribute("value");return i&&n.append(i,r||""),n}(e,n),this.location=Ri(this.action),this.method==Si.get&&function(t,e){const n=new URLSearchParams;for(const[i,r]of e)r instanceof File||n.append(i,r);t.search=n.toString()}(this.location,[...this.body.entries()]),this.fetchRequest=new Qi(this,this.method,this.location,this.body,this.formElement),this.mustRedirect=i}get method(){var t;return function(t){switch(t.toLowerCase()){case"get":return Si.get;case"post":return Si.post;case"put":return Si.put;case"patch":return Si.patch;case"delete":return Si.delete}}(((null===(t=this.submitter)||void 0===t?void 0:t.getAttribute("formmethod"))||this.formElement.getAttribute("method")||"").toLowerCase())||Si.get}get action(){var t;const e="string"==typeof this.formElement.action?this.formElement.action:null;return(null===(t=this.submitter)||void 0===t?void 0:t.hasAttribute("formaction"))?this.submitter.getAttribute("formaction")||"":this.formElement.getAttribute("action")||e||""}get body(){return this.enctype==Ti.urlEncoded||this.method==Si.get?new URLSearchParams(this.stringFormData):this.formData}get enctype(){var t;return function(t){switch(t.toLowerCase()){case Ti.multipart:return Ti.multipart;case Ti.plain:return Ti.plain;default:return Ti.urlEncoded}}((null===(t=this.submitter)||void 0===t?void 0:t.getAttribute("formenctype"))||this.formElement.enctype)}get isSafe(){return this.fetchRequest.isSafe}get stringFormData(){return[...this.formData].reduce(((t,[e,n])=>t.concat("string"==typeof n?[[e,n]]:[])),[])}async start(){const{initialized:t,requesting:e}=ki,n=Wi("data-turbo-confirm",this.submitter,this.formElement);if("string"!=typeof n||await er.confirmMethod(n,this.formElement,this.submitter))return this.state==t?(this.state=e,this.fetchRequest.perform()):void 0}stop(){const{stopping:t,stopped:e}=ki;if(this.state!=t&&this.state!=e)return this.state=t,this.fetchRequest.cancel(),!0}prepareRequest(t){if(!t.isSafe){const e=function(t){if(null!=t){const e=(document.cookie?document.cookie.split("; "):[]).find((e=>e.startsWith(t)));if(e){const t=e.split("=").slice(1).join("=");return t?decodeURIComponent(t):void 0}}}(Gi("csrf-param"))||Gi("csrf-token");e&&(t.headers["X-CSRF-Token"]=e)}this.requestAcceptsTurboStreamResponse(t)&&t.acceptResponseType(tr.contentType)}requestStarted(t){var e;this.state=ki.waiting,null===(e=this.submitter)||void 0===e||e.setAttribute("disabled",""),this.setSubmitsWith(),Ni("turbo:submit-start",{target:this.formElement,detail:{formSubmission:this}}),this.delegate.formSubmissionStarted(this)}requestPreventedHandlingResponse(t,e){this.result={success:e.succeeded,fetchResponse:e}}requestSucceededWithResponse(t,e){if(e.clientError||e.serverError)this.delegate.formSubmissionFailedWithResponse(this,e);else if(this.requestMustRedirect(t)&&function(t){return 200==t.statusCode&&!t.redirected}(e)){const t=new Error("Form responses must redirect to another location");this.delegate.formSubmissionErrored(this,t)}else this.state=ki.receiving,this.result={success:!0,fetchResponse:e},this.delegate.formSubmissionSucceededWithResponse(this,e)}requestFailedWithResponse(t,e){this.result={success:!1,fetchResponse:e},this.delegate.formSubmissionFailedWithResponse(this,e)}requestErrored(t,e){this.result={success:!1,error:e},this.delegate.formSubmissionErrored(this,e)}requestFinished(t){var e;this.state=ki.stopped,null===(e=this.submitter)||void 0===e||e.removeAttribute("disabled"),this.resetSubmitterText(),Ni("turbo:submit-end",{target:this.formElement,detail:Object.assign({formSubmission:this},this.result)}),this.delegate.formSubmissionFinished(this)}setSubmitsWith(){if(this.submitter&&this.submitsWith)if(this.submitter.matches("button"))this.originalSubmitText=this.submitter.innerHTML,this.submitter.innerHTML=this.submitsWith;else if(this.submitter.matches("input")){const t=this.submitter;this.originalSubmitText=t.value,t.value=this.submitsWith}}resetSubmitterText(){this.submitter&&this.originalSubmitText&&(this.submitter.matches("button")?this.submitter.innerHTML=this.originalSubmitText:this.submitter.matches("input")&&(this.submitter.value=this.originalSubmitText))}requestMustRedirect(t){return!t.isSafe&&this.mustRedirect}requestAcceptsTurboStreamResponse(t){return!t.isSafe||function(t,...e){return e.some((e=>e&&e.hasAttribute(t)))}("data-turbo-stream",this.submitter,this.formElement)}get submitsWith(){var t;return null===(t=this.submitter)||void 0===t?void 0:t.getAttribute("data-turbo-submits-with")}}class nr{constructor(t){this.element=t}get activeElement(){return this.element.ownerDocument.activeElement}get children(){return[...this.element.children]}hasAnchor(t){return null!=this.getElementForAnchor(t)}getElementForAnchor(t){return t?this.element.querySelector(`[id='${t}'], a[name='${t}']`):null}get isConnected(){return this.element.isConnected}get firstAutofocusableElement(){for(const t of this.element.querySelectorAll("[autofocus]"))if(null==t.closest("[inert], :disabled, [hidden], details:not([open]), dialog:not([open])"))return t;return null}get permanentElements(){return rr(this.element)}getPermanentElementById(t){return ir(this.element,t)}getPermanentElementMapForSnapshot(t){const e={};for(const n of this.permanentElements){const{id:i}=n,r=t.getPermanentElementById(i);r&&(e[i]=[n,r])}return e}}function ir(t,e){return t.querySelector(`#${e}[data-turbo-permanent]`)}function rr(t){return t.querySelectorAll("[id][data-turbo-permanent]")}class sr{constructor(t,e){this.started=!1,this.submitCaptured=()=>{this.eventTarget.removeEventListener("submit",this.submitBubbled,!1),this.eventTarget.addEventListener("submit",this.submitBubbled,!1)},this.submitBubbled=t=>{if(!t.defaultPrevented){const e=t.target instanceof HTMLFormElement?t.target:void 0,n=t.submitter||void 0;e&&function(t,e){const n=(null==e?void 0:e.getAttribute("formmethod"))||t.getAttribute("method");return"dialog"!=n}(e,n)&&function(t,e){if((null==e?void 0:e.hasAttribute("formtarget"))||t.hasAttribute("target")){const n=(null==e?void 0:e.getAttribute("formtarget"))||t.target;for(const t of document.getElementsByName(n))if(t instanceof HTMLIFrameElement)return!1;return!0}return!0}(e,n)&&this.delegate.willSubmitForm(e,n)&&(t.preventDefault(),t.stopImmediatePropagation(),this.delegate.formSubmitted(e,n))}},this.delegate=t,this.eventTarget=e}start(){this.started||(this.eventTarget.addEventListener("submit",this.submitCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("submit",this.submitCaptured,!0),this.started=!1)}}class or{constructor(t,e){this.resolveRenderPromise=t=>{},this.resolveInterceptionPromise=t=>{},this.delegate=t,this.element=e}scrollToAnchor(t){const e=this.snapshot.getElementForAnchor(t);e?(this.scrollToElement(e),this.focusElement(e)):this.scrollToPosition({x:0,y:0})}scrollToAnchorFromLocation(t){this.scrollToAnchor(Pi(t))}scrollToElement(t){t.scrollIntoView()}focusElement(t){t instanceof HTMLElement&&(t.hasAttribute("tabindex")?t.focus():(t.setAttribute("tabindex","-1"),t.focus(),t.removeAttribute("tabindex")))}scrollToPosition({x:t,y:e}){this.scrollRoot.scrollTo(t,e)}scrollToTop(){this.scrollToPosition({x:0,y:0})}get scrollRoot(){return window}async render(t){const{isPreview:e,shouldRender:n,newSnapshot:i}=t;if(n)try{this.renderPromise=new Promise((t=>this.resolveRenderPromise=t)),this.renderer=t,await this.prepareToRenderSnapshot(t);const n=new Promise((t=>this.resolveInterceptionPromise=t)),r={resume:this.resolveInterceptionPromise,render:this.renderer.renderElement};this.delegate.allowsImmediateRender(i,r)||await n,await this.renderSnapshot(t),this.delegate.viewRenderedSnapshot(i,e),this.delegate.preloadOnLoadLinksForView(this.element),this.finishRenderingSnapshot(t)}finally{delete this.renderer,this.resolveRenderPromise(void 0),delete this.renderPromise}else this.invalidate(t.reloadReason)}invalidate(t){this.delegate.viewInvalidated(t)}async prepareToRenderSnapshot(t){this.markAsPreview(t.isPreview),await t.prepareToRender()}markAsPreview(t){t?this.element.setAttribute("data-turbo-preview",""):this.element.removeAttribute("data-turbo-preview")}async renderSnapshot(t){await t.render()}finishRenderingSnapshot(t){t.finishRendering()}}class ar extends or{missing(){this.element.innerHTML='<strong class="turbo-frame-error">Content missing</strong>'}get snapshot(){return new nr(this.element)}}class cr{constructor(t,e){this.clickBubbled=t=>{this.respondsToEventTarget(t.target)?this.clickEvent=t:delete this.clickEvent},this.linkClicked=t=>{this.clickEvent&&this.respondsToEventTarget(t.target)&&t.target instanceof Element&&this.delegate.shouldInterceptLinkClick(t.target,t.detail.url,t.detail.originalEvent)&&(this.clickEvent.preventDefault(),t.preventDefault(),this.delegate.linkClickIntercepted(t.target,t.detail.url,t.detail.originalEvent)),delete this.clickEvent},this.willVisit=t=>{delete this.clickEvent},this.delegate=t,this.element=e}start(){this.element.addEventListener("click",this.clickBubbled),document.addEventListener("turbo:click",this.linkClicked),document.addEventListener("turbo:before-visit",this.willVisit)}stop(){this.element.removeEventListener("click",this.clickBubbled),document.removeEventListener("turbo:click",this.linkClicked),document.removeEventListener("turbo:before-visit",this.willVisit)}respondsToEventTarget(t){const e=t instanceof Element?t:t instanceof Node?t.parentElement:null;return e&&e.closest("turbo-frame, html")==this.element}}class ur{constructor(t,e){this.started=!1,this.clickCaptured=()=>{this.eventTarget.removeEventListener("click",this.clickBubbled,!1),this.eventTarget.addEventListener("click",this.clickBubbled,!1)},this.clickBubbled=t=>{if(t instanceof MouseEvent&&this.clickEventIsSignificant(t)){const e=t.composedPath&&t.composedPath()[0]||t.target,n=this.findLinkFromClickTarget(e);if(n&&function(t){if(t.hasAttribute("target")){for(const e of document.getElementsByName(t.target))if(e instanceof HTMLIFrameElement)return!1;return!0}return!0}(n)){const e=this.getLocationForLink(n);this.delegate.willFollowLinkToLocation(n,e,t)&&(t.preventDefault(),this.delegate.followedLinkToLocation(n,e))}}},this.delegate=t,this.eventTarget=e}start(){this.started||(this.eventTarget.addEventListener("click",this.clickCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("click",this.clickCaptured,!0),this.started=!1)}clickEventIsSignificant(t){return!(t.target&&t.target.isContentEditable||t.defaultPrevented||t.which>1||t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)}findLinkFromClickTarget(t){return Yi(t,"a[href]:not([target^=_]):not([download])")}getLocationForLink(t){return Ri(t.getAttribute("href")||"")}}class lr{constructor(t,e){this.delegate=t,this.linkInterceptor=new ur(this,e)}start(){this.linkInterceptor.start()}stop(){this.linkInterceptor.stop()}willFollowLinkToLocation(t,e,n){return this.delegate.willSubmitFormLinkToLocation(t,e,n)&&t.hasAttribute("data-turbo-method")}followedLinkToLocation(t,e){const n=document.createElement("form");for(const[c,u]of e.searchParams)n.append(Object.assign(document.createElement("input"),{type:"hidden",name:c,value:u}));const i=Object.assign(e,{search:""});n.setAttribute("data-turbo","true"),n.setAttribute("action",i.href),n.setAttribute("hidden","");const r=t.getAttribute("data-turbo-method");r&&n.setAttribute("method",r);const s=t.getAttribute("data-turbo-frame");s&&n.setAttribute("data-turbo-frame",s);const o=Xi(t);o&&n.setAttribute("data-turbo-action",o);const a=t.getAttribute("data-turbo-confirm");a&&n.setAttribute("data-turbo-confirm",a),t.hasAttribute("data-turbo-stream")&&n.setAttribute("data-turbo-stream",""),this.delegate.submittedFormLinkToLocation(t,e,n),document.body.appendChild(n),n.addEventListener("turbo:submit-end",(()=>n.remove()),{once:!0}),requestAnimationFrame((()=>n.requestSubmit()))}}class hr{static async preservingPermanentElements(t,e,n){const i=new this(t,e);i.enter(),await n(),i.leave()}constructor(t,e){this.delegate=t,this.permanentElementMap=e}enter(){for(const t in this.permanentElementMap){const[e,n]=this.permanentElementMap[t];this.delegate.enteringBardo(e,n),this.replaceNewPermanentElementWithPlaceholder(n)}}leave(){for(const t in this.permanentElementMap){const[e]=this.permanentElementMap[t];this.replaceCurrentPermanentElementWithClone(e),this.replacePlaceholderWithPermanentElement(e),this.delegate.leavingBardo(e)}}replaceNewPermanentElementWithPlaceholder(t){const e=function(t){const e=document.createElement("meta");return e.setAttribute("name","turbo-permanent-placeholder"),e.setAttribute("content",t.id),e}(t);t.replaceWith(e)}replaceCurrentPermanentElementWithClone(t){const e=t.cloneNode(!0);t.replaceWith(e)}replacePlaceholderWithPermanentElement(t){const e=this.getPlaceholderById(t.id);null==e||e.replaceWith(t)}getPlaceholderById(t){return this.placeholders.find((e=>e.content==t))}get placeholders(){return[...document.querySelectorAll("meta[name=turbo-permanent-placeholder][content]")]}}class dr{constructor(t,e,n,i,r=!0){this.activeElement=null,this.currentSnapshot=t,this.newSnapshot=e,this.isPreview=i,this.willRender=r,this.renderElement=n,this.promise=new Promise(((t,e)=>this.resolvingFunctions={resolve:t,reject:e}))}get shouldRender(){return!0}get reloadReason(){}prepareToRender(){}finishRendering(){this.resolvingFunctions&&(this.resolvingFunctions.resolve(),delete this.resolvingFunctions)}async preservingPermanentElements(t){await hr.preservingPermanentElements(this,this.permanentElementMap,t)}focusFirstAutofocusableElement(){const t=this.connectedSnapshot.firstAutofocusableElement;(function(t){return t&&"function"==typeof t.focus})(t)&&t.focus()}enteringBardo(t){this.activeElement||t.contains(this.currentSnapshot.activeElement)&&(this.activeElement=this.currentSnapshot.activeElement)}leavingBardo(t){t.contains(this.activeElement)&&this.activeElement instanceof HTMLElement&&(this.activeElement.focus(),this.activeElement=null)}get connectedSnapshot(){return this.newSnapshot.isConnected?this.newSnapshot:this.currentSnapshot}get currentElement(){return this.currentSnapshot.element}get newElement(){return this.newSnapshot.element}get permanentElementMap(){return this.currentSnapshot.getPermanentElementMapForSnapshot(this.newSnapshot)}}class pr extends dr{static renderElement(t,e){var n;const i=document.createRange();i.selectNodeContents(t),i.deleteContents();const r=e,s=null===(n=r.ownerDocument)||void 0===n?void 0:n.createRange();s&&(s.selectNodeContents(r),t.appendChild(s.extractContents()))}constructor(t,e,n,i,r,s=!0){super(e,n,i,r,s),this.delegate=t}get shouldRender(){return!0}async render(){await qi(),this.preservingPermanentElements((()=>{this.loadFrameElement()})),this.scrollFrameIntoView(),await qi(),this.focusFirstAutofocusableElement(),await qi(),this.activateScriptElements()}loadFrameElement(){this.delegate.willRenderFrame(this.currentElement,this.newElement),this.renderElement(this.currentElement,this.newElement)}scrollFrameIntoView(){if(this.currentElement.autoscroll||this.newElement.autoscroll){const n=this.currentElement.firstElementChild,i=(t=this.currentElement.getAttribute("data-autoscroll-block"),e="end","end"==t||"start"==t||"center"==t||"nearest"==t?t:e),r=function(t,e){return"auto"==t||"smooth"==t?t:e}(this.currentElement.getAttribute("data-autoscroll-behavior"),"auto");if(n)return n.scrollIntoView({block:i,behavior:r}),!0}var t,e;return!1}activateScriptElements(){for(const t of this.newScriptElements){const e=Hi(t);t.replaceWith(e)}}get newScriptElements(){return this.currentElement.querySelectorAll("script")}}class fr{static get defaultCSS(){return Bi`
      .turbo-progress-bar {
        position: fixed;
        display: block;
        top: 0;
        left: 0;
        height: 3px;
        background: #0076ff;
        z-index: 2147483647;
        transition:
          width ${fr.animationDuration}ms ease-out,
          opacity ${fr.animationDuration/2}ms ${fr.animationDuration/2}ms ease-in;
        transform: translate3d(0, 0, 0);
      }
    `}constructor(){this.hiding=!1,this.value=0,this.visible=!1,this.trickle=()=>{this.setValue(this.value+Math.random()/100)},this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement(),this.installStylesheetElement(),this.setValue(0)}show(){this.visible||(this.visible=!0,this.installProgressElement(),this.startTrickling())}hide(){this.visible&&!this.hiding&&(this.hiding=!0,this.fadeProgressElement((()=>{this.uninstallProgressElement(),this.stopTrickling(),this.visible=!1,this.hiding=!1})))}setValue(t){this.value=t,this.refresh()}installStylesheetElement(){document.head.insertBefore(this.stylesheetElement,document.head.firstChild)}installProgressElement(){this.progressElement.style.width="0",this.progressElement.style.opacity="1",document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()}fadeProgressElement(t){this.progressElement.style.opacity="0",setTimeout(t,1.5*fr.animationDuration)}uninstallProgressElement(){this.progressElement.parentNode&&document.documentElement.removeChild(this.progressElement)}startTrickling(){this.trickleInterval||(this.trickleInterval=window.setInterval(this.trickle,fr.animationDuration))}stopTrickling(){window.clearInterval(this.trickleInterval),delete this.trickleInterval}refresh(){requestAnimationFrame((()=>{this.progressElement.style.width=10+90*this.value+"%"}))}createStylesheetElement(){const t=document.createElement("style");return t.type="text/css",t.textContent=fr.defaultCSS,this.cspNonce&&(t.nonce=this.cspNonce),t}createProgressElement(){const t=document.createElement("div");return t.className="turbo-progress-bar",t}get cspNonce(){return Gi("csp-nonce")}}fr.animationDuration=300;class mr extends nr{constructor(){super(...arguments),this.detailsByOuterHTML=this.children.filter((t=>!function(t){const e=t.localName;return"noscript"==e}(t))).map((t=>function(t){return t.hasAttribute("nonce")&&t.setAttribute("nonce",""),t}(t))).reduce(((t,e)=>{const{outerHTML:n}=e,i=n in t?t[n]:{type:gr(e),tracked:vr(e),elements:[]};return Object.assign(Object.assign({},t),{[n]:Object.assign(Object.assign({},i),{elements:[...i.elements,e]})})}),{})}get trackedElementSignature(){return Object.keys(this.detailsByOuterHTML).filter((t=>this.detailsByOuterHTML[t].tracked)).join("")}getScriptElementsNotInSnapshot(t){return this.getElementsMatchingTypeNotInSnapshot("script",t)}getStylesheetElementsNotInSnapshot(t){return this.getElementsMatchingTypeNotInSnapshot("stylesheet",t)}getElementsMatchingTypeNotInSnapshot(t,e){return Object.keys(this.detailsByOuterHTML).filter((t=>!(t in e.detailsByOuterHTML))).map((t=>this.detailsByOuterHTML[t])).filter((({type:e})=>e==t)).map((({elements:[t]})=>t))}get provisionalElements(){return Object.keys(this.detailsByOuterHTML).reduce(((t,e)=>{const{type:n,tracked:i,elements:r}=this.detailsByOuterHTML[e];return null!=n||i?r.length>1?[...t,...r.slice(1)]:t:[...t,...r]}),[])}getMetaValue(t){const e=this.findMetaElementByName(t);return e?e.getAttribute("content"):null}findMetaElementByName(t){return Object.keys(this.detailsByOuterHTML).reduce(((e,n)=>{const{elements:[i]}=this.detailsByOuterHTML[n];return function(t,e){const n=t.localName;return"meta"==n&&t.getAttribute("name")==e}(i,t)?i:e}),void 0)}}function gr(t){return function(t){const e=t.localName;return"script"==e}(t)?"script":function(t){const e=t.localName;return"style"==e||"link"==e&&"stylesheet"==t.getAttribute("rel")}(t)?"stylesheet":void 0}function vr(t){return"reload"==t.getAttribute("data-turbo-track")}class br extends nr{static fromHTMLString(t=""){return this.fromDocument(ji(t))}static fromElement(t){return this.fromDocument(t.ownerDocument)}static fromDocument({head:t,body:e}){return new this(e,new mr(t))}constructor(t,e){super(t),this.headSnapshot=e}clone(){const t=this.element.cloneNode(!0),e=this.element.querySelectorAll("select"),n=t.querySelectorAll("select");for(const[i,r]of e.entries()){const t=n[i];for(const e of t.selectedOptions)e.selected=!1;for(const e of r.selectedOptions)t.options[e.index].selected=!0}for(const i of t.querySelectorAll('input[type="password"]'))i.value="";return new br(t,this.headSnapshot)}get headElement(){return this.headSnapshot.element}get rootLocation(){var t;return Ri(null!==(t=this.getSetting("root"))&&void 0!==t?t:"/")}get cacheControlValue(){return this.getSetting("cache-control")}get isPreviewable(){return"no-preview"!=this.cacheControlValue}get isCacheable(){return"no-cache"!=this.cacheControlValue}get isVisitable(){return"reload"!=this.getSetting("visit-control")}getSetting(t){return this.headSnapshot.getMetaValue(`turbo-${t}`)}}!function(t){t.visitStart="visitStart",t.requestStart="requestStart",t.requestEnd="requestEnd",t.visitEnd="visitEnd"}(Ci||(Ci={})),function(t){t.initialized="initialized",t.started="started",t.canceled="canceled",t.failed="failed",t.completed="completed"}(Li||(Li={}));const yr={action:"advance",historyChanged:!1,visitCachedSnapshot:()=>{},willRender:!0,updateHistory:!0,shouldCacheSnapshot:!0,acceptsStreamResponse:!1};var wr,Er;!function(t){t[t.networkFailure=0]="networkFailure",t[t.timeoutFailure=-1]="timeoutFailure",t[t.contentTypeMismatch=-2]="contentTypeMismatch"}(wr||(wr={}));class Sr{constructor(t,e,n,i={}){this.identifier=Ui(),this.timingMetrics={},this.followedRedirect=!1,this.historyChanged=!1,this.scrolled=!1,this.shouldCacheSnapshot=!0,this.acceptsStreamResponse=!1,this.snapshotCached=!1,this.state=Li.initialized,this.delegate=t,this.location=e,this.restorationIdentifier=n||Ui();const{action:r,historyChanged:s,referrer:o,snapshot:a,snapshotHTML:c,response:u,visitCachedSnapshot:l,willRender:h,updateHistory:d,shouldCacheSnapshot:p,acceptsStreamResponse:f}=Object.assign(Object.assign({},yr),i);this.action=r,this.historyChanged=s,this.referrer=o,this.snapshot=a,this.snapshotHTML=c,this.response=u,this.isSamePage=this.delegate.locationWithActionIsSamePage(this.location,this.action),this.visitCachedSnapshot=l,this.willRender=h,this.updateHistory=d,this.scrolled=!h,this.shouldCacheSnapshot=p,this.acceptsStreamResponse=f}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get history(){return this.delegate.history}get restorationData(){return this.history.getRestorationDataForIdentifier(this.restorationIdentifier)}get silent(){return this.isSamePage}start(){this.state==Li.initialized&&(this.recordTimingMetric(Ci.visitStart),this.state=Li.started,this.adapter.visitStarted(this),this.delegate.visitStarted(this))}cancel(){this.state==Li.started&&(this.request&&this.request.cancel(),this.cancelRender(),this.state=Li.canceled)}complete(){this.state==Li.started&&(this.recordTimingMetric(Ci.visitEnd),this.state=Li.completed,this.followRedirect(),this.followedRedirect||(this.adapter.visitCompleted(this),this.delegate.visitCompleted(this)))}fail(){this.state==Li.started&&(this.state=Li.failed,this.adapter.visitFailed(this))}changeHistory(){var t;if(!this.historyChanged&&this.updateHistory){const e=Ki(this.location.href===(null===(t=this.referrer)||void 0===t?void 0:t.href)?"replace":this.action);this.history.update(e,this.location,this.restorationIdentifier),this.historyChanged=!0}}issueRequest(){this.hasPreloadedResponse()?this.simulateRequest():this.shouldIssueRequest()&&!this.request&&(this.request=new Qi(this,Si.get,this.location),this.request.perform())}simulateRequest(){this.response&&(this.startRequest(),this.recordResponse(),this.finishRequest())}startRequest(){this.recordTimingMetric(Ci.requestStart),this.adapter.visitRequestStarted(this)}recordResponse(t=this.response){if(this.response=t,t){const{statusCode:e}=t;kr(e)?this.adapter.visitRequestCompleted(this):this.adapter.visitRequestFailedWithStatusCode(this,e)}}finishRequest(){this.recordTimingMetric(Ci.requestEnd),this.adapter.visitRequestFinished(this)}loadResponse(){if(this.response){const{statusCode:t,responseHTML:e}=this.response;this.render((async()=>{this.shouldCacheSnapshot&&this.cacheSnapshot(),this.view.renderPromise&&await this.view.renderPromise,kr(t)&&null!=e?(await this.view.renderPage(br.fromHTMLString(e),!1,this.willRender,this),this.performScroll(),this.adapter.visitRendered(this),this.complete()):(await this.view.renderError(br.fromHTMLString(e),this),this.adapter.visitRendered(this),this.fail())}))}}getCachedSnapshot(){const t=this.view.getCachedSnapshotForLocation(this.location)||this.getPreloadedSnapshot();if(t&&(!Pi(this.location)||t.hasAnchor(Pi(this.location)))&&("restore"==this.action||t.isPreviewable))return t}getPreloadedSnapshot(){if(this.snapshotHTML)return br.fromHTMLString(this.snapshotHTML)}hasCachedSnapshot(){return null!=this.getCachedSnapshot()}loadCachedSnapshot(){const t=this.getCachedSnapshot();if(t){const e=this.shouldIssueRequest();this.render((async()=>{this.cacheSnapshot(),this.isSamePage?this.adapter.visitRendered(this):(this.view.renderPromise&&await this.view.renderPromise,await this.view.renderPage(t,e,this.willRender,this),this.performScroll(),this.adapter.visitRendered(this),e||this.complete())}))}}followRedirect(){var t;this.redirectedToLocation&&!this.followedRedirect&&(null===(t=this.response)||void 0===t?void 0:t.redirected)&&(this.adapter.visitProposedToLocation(this.redirectedToLocation,{action:"replace",response:this.response,shouldCacheSnapshot:!1,willRender:!1}),this.followedRedirect=!0)}goToSamePageAnchor(){this.isSamePage&&this.render((async()=>{this.cacheSnapshot(),this.performScroll(),this.changeHistory(),this.adapter.visitRendered(this)}))}prepareRequest(t){this.acceptsStreamResponse&&t.acceptResponseType(tr.contentType)}requestStarted(){this.startRequest()}requestPreventedHandlingResponse(t,e){}async requestSucceededWithResponse(t,e){const n=await e.responseHTML,{redirected:i,statusCode:r}=e;null==n?this.recordResponse({statusCode:wr.contentTypeMismatch,redirected:i}):(this.redirectedToLocation=e.redirected?e.location:void 0,this.recordResponse({statusCode:r,responseHTML:n,redirected:i}))}async requestFailedWithResponse(t,e){const n=await e.responseHTML,{redirected:i,statusCode:r}=e;null==n?this.recordResponse({statusCode:wr.contentTypeMismatch,redirected:i}):this.recordResponse({statusCode:r,responseHTML:n,redirected:i})}requestErrored(t,e){this.recordResponse({statusCode:wr.networkFailure,redirected:!1})}requestFinished(){this.finishRequest()}performScroll(){this.scrolled||this.view.forceReloaded||("restore"==this.action?this.scrollToRestoredPosition()||this.scrollToAnchor()||this.view.scrollToTop():this.scrollToAnchor()||this.view.scrollToTop(),this.isSamePage&&this.delegate.visitScrolledToSamePageLocation(this.view.lastRenderedLocation,this.location),this.scrolled=!0)}scrollToRestoredPosition(){const{scrollPosition:t}=this.restorationData;if(t)return this.view.scrollToPosition(t),!0}scrollToAnchor(){const t=Pi(this.location);if(null!=t)return this.view.scrollToAnchor(t),!0}recordTimingMetric(t){this.timingMetrics[t]=(new Date).getTime()}getTimingMetrics(){return Object.assign({},this.timingMetrics)}getHistoryMethodForAction(t){switch(t){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}hasPreloadedResponse(){return"object"==typeof this.response}shouldIssueRequest(){return!this.isSamePage&&("restore"==this.action?!this.hasCachedSnapshot():this.willRender)}cacheSnapshot(){this.snapshotCached||(this.view.cacheSnapshot(this.snapshot).then((t=>t&&this.visitCachedSnapshot(t))),this.snapshotCached=!0)}async render(t){this.cancelRender(),await new Promise((t=>{this.frame=requestAnimationFrame((()=>t()))})),await t(),delete this.frame}cancelRender(){this.frame&&(cancelAnimationFrame(this.frame),delete this.frame)}}function kr(t){return t>=200&&t<300}class Tr{constructor(t){this.progressBar=new fr,this.showProgressBar=()=>{this.progressBar.show()},this.session=t}visitProposedToLocation(t,e){this.navigator.startVisit(t,(null==e?void 0:e.restorationIdentifier)||Ui(),e)}visitStarted(t){this.location=t.location,t.loadCachedSnapshot(),t.issueRequest(),t.goToSamePageAnchor()}visitRequestStarted(t){this.progressBar.setValue(0),t.hasCachedSnapshot()||"restore"!=t.action?this.showVisitProgressBarAfterDelay():this.showProgressBar()}visitRequestCompleted(t){t.loadResponse()}visitRequestFailedWithStatusCode(t,e){switch(e){case wr.networkFailure:case wr.timeoutFailure:case wr.contentTypeMismatch:return this.reload({reason:"request_failed",context:{statusCode:e}});default:return t.loadResponse()}}visitRequestFinished(t){this.progressBar.setValue(1),this.hideVisitProgressBar()}visitCompleted(t){}pageInvalidated(t){this.reload(t)}visitFailed(t){}visitRendered(t){}formSubmissionStarted(t){this.progressBar.setValue(0),this.showFormProgressBarAfterDelay()}formSubmissionFinished(t){this.progressBar.setValue(1),this.hideFormProgressBar()}showVisitProgressBarAfterDelay(){this.visitProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay)}hideVisitProgressBar(){this.progressBar.hide(),null!=this.visitProgressBarTimeout&&(window.clearTimeout(this.visitProgressBarTimeout),delete this.visitProgressBarTimeout)}showFormProgressBarAfterDelay(){null==this.formProgressBarTimeout&&(this.formProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay))}hideFormProgressBar(){this.progressBar.hide(),null!=this.formProgressBarTimeout&&(window.clearTimeout(this.formProgressBarTimeout),delete this.formProgressBarTimeout)}reload(t){var e;Ni("turbo:reload",{detail:t}),window.location.href=(null===(e=this.location)||void 0===e?void 0:e.toString())||window.location.href}get navigator(){return this.session.navigator}}class Cr{constructor(){this.selector="[data-turbo-temporary]",this.deprecatedSelector="[data-turbo-cache=false]",this.started=!1,this.removeTemporaryElements=t=>{for(const e of this.temporaryElements)e.remove()}}start(){this.started||(this.started=!0,addEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}stop(){this.started&&(this.started=!1,removeEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}get temporaryElements(){return[...document.querySelectorAll(this.selector),...this.temporaryElementsWithDeprecation]}get temporaryElementsWithDeprecation(){const t=document.querySelectorAll(this.deprecatedSelector);return t.length&&console.warn(`The ${this.deprecatedSelector} selector is deprecated and will be removed in a future version. Use ${this.selector} instead.`),[...t]}}class Lr{constructor(t,e){this.session=t,this.element=e,this.linkInterceptor=new cr(this,e),this.formSubmitObserver=new sr(this,e)}start(){this.linkInterceptor.start(),this.formSubmitObserver.start()}stop(){this.linkInterceptor.stop(),this.formSubmitObserver.stop()}shouldInterceptLinkClick(t,e,n){return this.shouldRedirect(t)}linkClickIntercepted(t,e,n){const i=this.findFrameElement(t);i&&i.delegate.linkClickIntercepted(t,e,n)}willSubmitForm(t,e){return null==t.closest("turbo-frame")&&this.shouldSubmit(t,e)&&this.shouldRedirect(t,e)}formSubmitted(t,e){const n=this.findFrameElement(t,e);n&&n.delegate.formSubmitted(t,e)}shouldSubmit(t,e){var n;const i=xi(t,e),r=this.element.ownerDocument.querySelector('meta[name="turbo-root"]'),s=Ri(null!==(n=null==r?void 0:r.content)&&void 0!==n?n:"/");return this.shouldRedirect(t,e)&&Mi(i,s)}shouldRedirect(t,e){if(t instanceof HTMLFormElement?this.session.submissionIsNavigatable(t,e):this.session.elementIsNavigatable(t)){const n=this.findFrameElement(t,e);return!!n&&n!=t.closest("turbo-frame")}return!1}findFrameElement(t,e){const n=(null==e?void 0:e.getAttribute("data-turbo-frame"))||t.getAttribute("data-turbo-frame");if(n&&"_top"!=n){const t=this.element.querySelector(`#${n}:not([disabled])`);if(t instanceof Ai)return t}}}class Ar{constructor(t){this.restorationIdentifier=Ui(),this.restorationData={},this.started=!1,this.pageLoaded=!1,this.onPopState=t=>{if(this.shouldHandlePopState()){const{turbo:e}=t.state||{};if(e){this.location=new URL(window.location.href);const{restorationIdentifier:t}=e;this.restorationIdentifier=t,this.delegate.historyPoppedToLocationWithRestorationIdentifier(this.location,t)}}},this.onPageLoad=async t=>{await Promise.resolve(),this.pageLoaded=!0},this.delegate=t}start(){this.started||(addEventListener("popstate",this.onPopState,!1),addEventListener("load",this.onPageLoad,!1),this.started=!0,this.replace(new URL(window.location.href)))}stop(){this.started&&(removeEventListener("popstate",this.onPopState,!1),removeEventListener("load",this.onPageLoad,!1),this.started=!1)}push(t,e){this.update(history.pushState,t,e)}replace(t,e){this.update(history.replaceState,t,e)}update(t,e,n=Ui()){const i={turbo:{restorationIdentifier:n}};t.call(history,i,"",e.href),this.location=e,this.restorationIdentifier=n}getRestorationDataForIdentifier(t){return this.restorationData[t]||{}}updateRestorationData(t){const{restorationIdentifier:e}=this,n=this.restorationData[e];this.restorationData[e]=Object.assign(Object.assign({},n),t)}assumeControlOfScrollRestoration(){var t;this.previousScrollRestoration||(this.previousScrollRestoration=null!==(t=history.scrollRestoration)&&void 0!==t?t:"auto",history.scrollRestoration="manual")}relinquishControlOfScrollRestoration(){this.previousScrollRestoration&&(history.scrollRestoration=this.previousScrollRestoration,delete this.previousScrollRestoration)}shouldHandlePopState(){return this.pageIsLoaded()}pageIsLoaded(){return this.pageLoaded||"complete"==document.readyState}}class Rr{constructor(t){this.delegate=t}proposeVisit(t,e={}){this.delegate.allowsVisitingLocationWithAction(t,e.action)&&(Mi(t,this.view.snapshot.rootLocation)?this.delegate.visitProposedToLocation(t,e):window.location.href=t.toString())}startVisit(t,e,n={}){this.stop(),this.currentVisit=new Sr(this,Ri(t),e,Object.assign({referrer:this.location},n)),this.currentVisit.start()}submitForm(t,e){this.stop(),this.formSubmission=new er(this,t,e,!0),this.formSubmission.start()}stop(){this.formSubmission&&(this.formSubmission.stop(),delete this.formSubmission),this.currentVisit&&(this.currentVisit.cancel(),delete this.currentVisit)}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get history(){return this.delegate.history}formSubmissionStarted(t){"function"==typeof this.adapter.formSubmissionStarted&&this.adapter.formSubmissionStarted(t)}async formSubmissionSucceededWithResponse(t,e){if(t==this.formSubmission){const n=await e.responseHTML;if(n){const i=t.isSafe;i||this.view.clearSnapshotCache();const{statusCode:r,redirected:s}=e,o={action:this.getActionForFormSubmission(t),shouldCacheSnapshot:i,response:{statusCode:r,responseHTML:n,redirected:s}};this.proposeVisit(e.location,o)}}}async formSubmissionFailedWithResponse(t,e){const n=await e.responseHTML;if(n){const t=br.fromHTMLString(n);e.serverError?await this.view.renderError(t,this.currentVisit):await this.view.renderPage(t,!1,!0,this.currentVisit),this.view.scrollToTop(),this.view.clearSnapshotCache()}}formSubmissionErrored(t,e){console.error(e)}formSubmissionFinished(t){"function"==typeof this.adapter.formSubmissionFinished&&this.adapter.formSubmissionFinished(t)}visitStarted(t){this.delegate.visitStarted(t)}visitCompleted(t){this.delegate.visitCompleted(t)}locationWithActionIsSamePage(t,e){const n=Pi(t),i=Pi(this.view.lastRenderedLocation),r="restore"===e&&void 0===n;return"replace"!==e&&Ii(t)===Ii(this.view.lastRenderedLocation)&&(r||null!=n&&n!==i)}visitScrolledToSamePageLocation(t,e){this.delegate.visitScrolledToSamePageLocation(t,e)}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}getActionForFormSubmission({submitter:t,formElement:e}){return Xi(t,e)||"advance"}}!function(t){t[t.initial=0]="initial",t[t.loading=1]="loading",t[t.interactive=2]="interactive",t[t.complete=3]="complete"}(Er||(Er={}));class Pr{constructor(t){this.stage=Er.initial,this.started=!1,this.interpretReadyState=()=>{const{readyState:t}=this;"interactive"==t?this.pageIsInteractive():"complete"==t&&this.pageIsComplete()},this.pageWillUnload=()=>{this.delegate.pageWillUnload()},this.delegate=t}start(){this.started||(this.stage==Er.initial&&(this.stage=Er.loading),document.addEventListener("readystatechange",this.interpretReadyState,!1),addEventListener("pagehide",this.pageWillUnload,!1),this.started=!0)}stop(){this.started&&(document.removeEventListener("readystatechange",this.interpretReadyState,!1),removeEventListener("pagehide",this.pageWillUnload,!1),this.started=!1)}pageIsInteractive(){this.stage==Er.loading&&(this.stage=Er.interactive,this.delegate.pageBecameInteractive())}pageIsComplete(){this.pageIsInteractive(),this.stage==Er.interactive&&(this.stage=Er.complete,this.delegate.pageLoaded())}get readyState(){return document.readyState}}class xr{constructor(t){this.started=!1,this.onScroll=()=>{this.updatePosition({x:window.pageXOffset,y:window.pageYOffset})},this.delegate=t}start(){this.started||(addEventListener("scroll",this.onScroll,!1),this.onScroll(),this.started=!0)}stop(){this.started&&(removeEventListener("scroll",this.onScroll,!1),this.started=!1)}updatePosition(t){this.delegate.scrollPositionChanged(t)}}class _r{render({fragment:t}){hr.preservingPermanentElements(this,function(t){const e=rr(document.documentElement),n={};for(const i of e){const{id:e}=i;for(const r of t.querySelectorAll("turbo-stream")){const t=ir(r.templateElement.content,e);t&&(n[e]=[i,t])}}return n}(t),(()=>document.documentElement.appendChild(t)))}enteringBardo(t,e){e.replaceWith(t.cloneNode(!0))}leavingBardo(){}}class Or{constructor(t){this.sources=new Set,this.started=!1,this.inspectFetchResponse=t=>{const e=function(t){var e;const n=null===(e=t.detail)||void 0===e?void 0:e.fetchResponse;if(n instanceof Fi)return n}(t);e&&function(t){var e;const n=null!==(e=t.contentType)&&void 0!==e?e:"";return n.startsWith(tr.contentType)}(e)&&(t.preventDefault(),this.receiveMessageResponse(e))},this.receiveMessageEvent=t=>{this.started&&"string"==typeof t.data&&this.receiveMessageHTML(t.data)},this.delegate=t}start(){this.started||(this.started=!0,addEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}stop(){this.started&&(this.started=!1,removeEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}connectStreamSource(t){this.streamSourceIsConnected(t)||(this.sources.add(t),t.addEventListener("message",this.receiveMessageEvent,!1))}disconnectStreamSource(t){this.streamSourceIsConnected(t)&&(this.sources.delete(t),t.removeEventListener("message",this.receiveMessageEvent,!1))}streamSourceIsConnected(t){return this.sources.has(t)}async receiveMessageResponse(t){const e=await t.responseHTML;e&&this.receiveMessageHTML(e)}receiveMessageHTML(t){this.delegate.receivedMessageFromStream(tr.wrap(t))}}class Mr extends dr{static renderElement(t,e){const{documentElement:n,body:i}=document;n.replaceChild(e,i)}async render(){this.replaceHeadAndBody(),this.activateScriptElements()}replaceHeadAndBody(){const{documentElement:t,head:e}=document;t.replaceChild(this.newHead,e),this.renderElement(this.currentElement,this.newElement)}activateScriptElements(){for(const t of this.scriptElements){const e=t.parentNode;if(e){const n=Hi(t);e.replaceChild(n,t)}}}get newHead(){return this.newSnapshot.headSnapshot.element}get scriptElements(){return document.documentElement.querySelectorAll("script")}}class Ir extends dr{static renderElement(t,e){document.body&&e instanceof HTMLBodyElement?document.body.replaceWith(e):document.documentElement.appendChild(e)}get shouldRender(){return this.newSnapshot.isVisitable&&this.trackedElementsAreIdentical}get reloadReason(){return this.newSnapshot.isVisitable?this.trackedElementsAreIdentical?void 0:{reason:"tracked_element_mismatch"}:{reason:"turbo_visit_control_is_reload"}}async prepareToRender(){await this.mergeHead()}async render(){this.willRender&&await this.replaceBody()}finishRendering(){super.finishRendering(),this.isPreview||this.focusFirstAutofocusableElement()}get currentHeadSnapshot(){return this.currentSnapshot.headSnapshot}get newHeadSnapshot(){return this.newSnapshot.headSnapshot}get newElement(){return this.newSnapshot.element}async mergeHead(){const t=this.mergeProvisionalElements(),e=this.copyNewHeadStylesheetElements();this.copyNewHeadScriptElements(),await t,await e}async replaceBody(){await this.preservingPermanentElements((async()=>{this.activateNewBody(),await this.assignNewBody()}))}get trackedElementsAreIdentical(){return this.currentHeadSnapshot.trackedElementSignature==this.newHeadSnapshot.trackedElementSignature}async copyNewHeadStylesheetElements(){const t=[];for(const e of this.newHeadStylesheetElements)t.push($i(e)),document.head.appendChild(e);await Promise.all(t)}copyNewHeadScriptElements(){for(const t of this.newHeadScriptElements)document.head.appendChild(Hi(t))}async mergeProvisionalElements(){const t=[...this.newHeadProvisionalElements];for(const e of this.currentHeadProvisionalElements)this.isCurrentElementInElementList(e,t)||document.head.removeChild(e);for(const e of t)document.head.appendChild(e)}isCurrentElementInElementList(t,e){for(const[n,i]of e.entries()){if("TITLE"==t.tagName){if("TITLE"!=i.tagName)continue;if(t.innerHTML==i.innerHTML)return e.splice(n,1),!0}if(i.isEqualNode(t))return e.splice(n,1),!0}return!1}removeCurrentHeadProvisionalElements(){for(const t of this.currentHeadProvisionalElements)document.head.removeChild(t)}copyNewHeadProvisionalElements(){for(const t of this.newHeadProvisionalElements)document.head.appendChild(t)}activateNewBody(){document.adoptNode(this.newElement),this.activateNewBodyScriptElements()}activateNewBodyScriptElements(){for(const t of this.newBodyScriptElements){const e=Hi(t);t.replaceWith(e)}}async assignNewBody(){await this.renderElement(this.currentElement,this.newElement)}get newHeadStylesheetElements(){return this.newHeadSnapshot.getStylesheetElementsNotInSnapshot(this.currentHeadSnapshot)}get newHeadScriptElements(){return this.newHeadSnapshot.getScriptElementsNotInSnapshot(this.currentHeadSnapshot)}get currentHeadProvisionalElements(){return this.currentHeadSnapshot.provisionalElements}get newHeadProvisionalElements(){return this.newHeadSnapshot.provisionalElements}get newBodyScriptElements(){return this.newElement.querySelectorAll("script")}}class Dr{constructor(t){this.keys=[],this.snapshots={},this.size=t}has(t){return Di(t)in this.snapshots}get(t){if(this.has(t)){const e=this.read(t);return this.touch(t),e}}put(t,e){return this.write(t,e),this.touch(t),e}clear(){this.snapshots={}}read(t){return this.snapshots[Di(t)]}write(t,e){this.snapshots[Di(t)]=e}touch(t){const e=Di(t),n=this.keys.indexOf(e);n>-1&&this.keys.splice(n,1),this.keys.unshift(e),this.trim()}trim(){for(const t of this.keys.splice(this.size))delete this.snapshots[t]}}class Fr extends or{constructor(){super(...arguments),this.snapshotCache=new Dr(10),this.lastRenderedLocation=new URL(location.href),this.forceReloaded=!1}renderPage(t,e=!1,n=!0,i){const r=new Ir(this.snapshot,t,Ir.renderElement,e,n);return r.shouldRender?null==i||i.changeHistory():this.forceReloaded=!0,this.render(r)}renderError(t,e){null==e||e.changeHistory();const n=new Mr(this.snapshot,t,Mr.renderElement,!1);return this.render(n)}clearSnapshotCache(){this.snapshotCache.clear()}async cacheSnapshot(t=this.snapshot){if(t.isCacheable){this.delegate.viewWillCacheSnapshot();const{lastRenderedLocation:e}=this;await new Promise((t=>setTimeout((()=>t()),0)));const n=t.clone();return this.snapshotCache.put(e,n),n}}getCachedSnapshotForLocation(t){return this.snapshotCache.get(t)}get snapshot(){return br.fromElement(this.element)}}class Hr{constructor(t){this.selector="a[data-turbo-preload]",this.delegate=t}get snapshotCache(){return this.delegate.navigator.view.snapshotCache}start(){if("loading"===document.readyState)return document.addEventListener("DOMContentLoaded",(()=>{this.preloadOnLoadLinksForView(document.body)}));this.preloadOnLoadLinksForView(document.body)}preloadOnLoadLinksForView(t){for(const e of t.querySelectorAll(this.selector))this.preloadURL(e)}async preloadURL(t){const e=new URL(t.href);if(!this.snapshotCache.has(e))try{const t=await fetch(e.toString(),{headers:{"VND.PREFETCH":"true",Accept:"text/html"}}),n=await t.text(),i=br.fromHTMLString(n);this.snapshotCache.put(e,i)}catch(n){}}}function Nr(t){Object.defineProperties(t,qr)}const qr={absoluteURL:{get(){return this.toString()}}},jr={after(){this.targetElements.forEach((t=>{var e;return null===(e=t.parentElement)||void 0===e?void 0:e.insertBefore(this.templateContent,t.nextSibling)}))},append(){this.removeDuplicateTargetChildren(),this.targetElements.forEach((t=>t.append(this.templateContent)))},before(){this.targetElements.forEach((t=>{var e;return null===(e=t.parentElement)||void 0===e?void 0:e.insertBefore(this.templateContent,t)}))},prepend(){this.removeDuplicateTargetChildren(),this.targetElements.forEach((t=>t.prepend(this.templateContent)))},remove(){this.targetElements.forEach((t=>t.remove()))},replace(){this.targetElements.forEach((t=>t.replaceWith(this.templateContent)))},update(){this.targetElements.forEach((t=>{t.innerHTML="",t.append(this.templateContent)}))}},Br=new class{constructor(){this.navigator=new Rr(this),this.history=new Ar(this),this.preloader=new Hr(this),this.view=new Fr(this,document.documentElement),this.adapter=new Tr(this),this.pageObserver=new Pr(this),this.cacheObserver=new Cr,this.linkClickObserver=new ur(this,window),this.formSubmitObserver=new sr(this,document),this.scrollObserver=new xr(this),this.streamObserver=new Or(this),this.formLinkClickObserver=new lr(this,document.documentElement),this.frameRedirector=new Lr(this,document.documentElement),this.streamMessageRenderer=new _r,this.drive=!0,this.enabled=!0,this.progressBarDelay=500,this.started=!1,this.formMode="on"}start(){this.started||(this.pageObserver.start(),this.cacheObserver.start(),this.formLinkClickObserver.start(),this.linkClickObserver.start(),this.formSubmitObserver.start(),this.scrollObserver.start(),this.streamObserver.start(),this.frameRedirector.start(),this.history.start(),this.preloader.start(),this.started=!0,this.enabled=!0)}disable(){this.enabled=!1}stop(){this.started&&(this.pageObserver.stop(),this.cacheObserver.stop(),this.formLinkClickObserver.stop(),this.linkClickObserver.stop(),this.formSubmitObserver.stop(),this.scrollObserver.stop(),this.streamObserver.stop(),this.frameRedirector.stop(),this.history.stop(),this.started=!1)}registerAdapter(t){this.adapter=t}visit(t,e={}){const n=e.frame?document.getElementById(e.frame):null;n instanceof Ai?(n.src=t.toString(),n.loaded):this.navigator.proposeVisit(Ri(t),e)}connectStreamSource(t){this.streamObserver.connectStreamSource(t)}disconnectStreamSource(t){this.streamObserver.disconnectStreamSource(t)}renderStreamMessage(t){this.streamMessageRenderer.render(tr.wrap(t))}clearCache(){this.view.clearSnapshotCache()}setProgressBarDelay(t){this.progressBarDelay=t}setFormMode(t){this.formMode=t}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}historyPoppedToLocationWithRestorationIdentifier(t,e){this.enabled?this.navigator.startVisit(t,e,{action:"restore",historyChanged:!0}):this.adapter.pageInvalidated({reason:"turbo_disabled"})}scrollPositionChanged(t){this.history.updateRestorationData({scrollPosition:t})}willSubmitFormLinkToLocation(t,e){return this.elementIsNavigatable(t)&&Mi(e,this.snapshot.rootLocation)}submittedFormLinkToLocation(){}willFollowLinkToLocation(t,e,n){return this.elementIsNavigatable(t)&&Mi(e,this.snapshot.rootLocation)&&this.applicationAllowsFollowingLinkToLocation(t,e,n)}followedLinkToLocation(t,e){const n=this.getActionForLink(t),i=t.hasAttribute("data-turbo-stream");this.visit(e.href,{action:n,acceptsStreamResponse:i})}allowsVisitingLocationWithAction(t,e){return this.locationWithActionIsSamePage(t,e)||this.applicationAllowsVisitingLocation(t)}visitProposedToLocation(t,e){Nr(t),this.adapter.visitProposedToLocation(t,e)}visitStarted(t){t.acceptsStreamResponse||Vi(document.documentElement),Nr(t.location),t.silent||this.notifyApplicationAfterVisitingLocation(t.location,t.action)}visitCompleted(t){zi(document.documentElement),this.notifyApplicationAfterPageLoad(t.getTimingMetrics())}locationWithActionIsSamePage(t,e){return this.navigator.locationWithActionIsSamePage(t,e)}visitScrolledToSamePageLocation(t,e){this.notifyApplicationAfterVisitingSamePageLocation(t,e)}willSubmitForm(t,e){const n=xi(t,e);return this.submissionIsNavigatable(t,e)&&Mi(Ri(n),this.snapshot.rootLocation)}formSubmitted(t,e){this.navigator.submitForm(t,e)}pageBecameInteractive(){this.view.lastRenderedLocation=this.location,this.notifyApplicationAfterPageLoad()}pageLoaded(){this.history.assumeControlOfScrollRestoration()}pageWillUnload(){this.history.relinquishControlOfScrollRestoration()}receivedMessageFromStream(t){this.renderStreamMessage(t)}viewWillCacheSnapshot(){var t;(null===(t=this.navigator.currentVisit)||void 0===t?void 0:t.silent)||this.notifyApplicationBeforeCachingSnapshot()}allowsImmediateRender({element:t},e){const n=this.notifyApplicationBeforeRender(t,e),{defaultPrevented:i,detail:{render:r}}=n;return this.view.renderer&&r&&(this.view.renderer.renderElement=r),!i}viewRenderedSnapshot(t,e){this.view.lastRenderedLocation=this.history.location,this.notifyApplicationAfterRender()}preloadOnLoadLinksForView(t){this.preloader.preloadOnLoadLinksForView(t)}viewInvalidated(t){this.adapter.pageInvalidated(t)}frameLoaded(t){this.notifyApplicationAfterFrameLoad(t)}frameRendered(t,e){this.notifyApplicationAfterFrameRender(t,e)}applicationAllowsFollowingLinkToLocation(t,e,n){return!this.notifyApplicationAfterClickingLinkToLocation(t,e,n).defaultPrevented}applicationAllowsVisitingLocation(t){return!this.notifyApplicationBeforeVisitingLocation(t).defaultPrevented}notifyApplicationAfterClickingLinkToLocation(t,e,n){return Ni("turbo:click",{target:t,detail:{url:e.href,originalEvent:n},cancelable:!0})}notifyApplicationBeforeVisitingLocation(t){return Ni("turbo:before-visit",{detail:{url:t.href},cancelable:!0})}notifyApplicationAfterVisitingLocation(t,e){return Ni("turbo:visit",{detail:{url:t.href,action:e}})}notifyApplicationBeforeCachingSnapshot(){return Ni("turbo:before-cache")}notifyApplicationBeforeRender(t,e){return Ni("turbo:before-render",{detail:Object.assign({newBody:t},e),cancelable:!0})}notifyApplicationAfterRender(){return Ni("turbo:render")}notifyApplicationAfterPageLoad(t={}){return Ni("turbo:load",{detail:{url:this.location.href,timing:t}})}notifyApplicationAfterVisitingSamePageLocation(t,e){dispatchEvent(new HashChangeEvent("hashchange",{oldURL:t.toString(),newURL:e.toString()}))}notifyApplicationAfterFrameLoad(t){return Ni("turbo:frame-load",{target:t})}notifyApplicationAfterFrameRender(t,e){return Ni("turbo:frame-render",{detail:{fetchResponse:t},target:e,cancelable:!0})}submissionIsNavigatable(t,e){if("off"==this.formMode)return!1;{const n=!e||this.elementIsNavigatable(e);return"optin"==this.formMode?n&&null!=t.closest('[data-turbo="true"]'):n&&this.elementIsNavigatable(t)}}elementIsNavigatable(t){const e=Yi(t,"[data-turbo]"),n=Yi(t,"turbo-frame");return this.drive||n?!e||"false"!=e.getAttribute("data-turbo"):!!e&&"true"==e.getAttribute("data-turbo")}getActionForLink(t){return Xi(t)||"advance"}get snapshot(){return this.view.snapshot}},Ur=new class{constructor(t){this.session=t}clear(){this.session.clearCache()}resetCacheControl(){this.setCacheControl("")}exemptPageFromCache(){this.setCacheControl("no-cache")}exemptPageFromPreview(){this.setCacheControl("no-preview")}setCacheControl(t){!function(t,e){let n=Ji(t);n||(n=document.createElement("meta"),n.setAttribute("name",t),document.head.appendChild(n)),n.setAttribute("content",e)}("turbo-cache-control",t)}}(Br),{navigator:Wr}=Br;function Vr(){Br.start()}function zr(t){Br.registerAdapter(t)}function $r(t,e){Br.visit(t,e)}function Kr(t){Br.connectStreamSource(t)}function Xr(t){Br.disconnectStreamSource(t)}function Jr(t){Br.renderStreamMessage(t)}function Gr(){console.warn("Please replace `Turbo.clearCache()` with `Turbo.cache.clear()`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),Br.clearCache()}function Yr(t){Br.setProgressBarDelay(t)}function Qr(t){er.confirmMethod=t}function Zr(t){Br.setFormMode(t)}var ts=Object.freeze({__proto__:null,navigator:Wr,session:Br,cache:Ur,PageRenderer:Ir,PageSnapshot:br,FrameRenderer:pr,start:Vr,registerAdapter:zr,visit:$r,connectStreamSource:Kr,disconnectStreamSource:Xr,renderStreamMessage:Jr,clearCache:Gr,setProgressBarDelay:Yr,setConfirmMethod:Qr,setFormMode:Zr,StreamActions:jr});class es extends Error{}function ns(t){if(null!=t){const e=document.getElementById(t);if(e instanceof Ai)return e}}function is(t,e){if(t){const i=t.getAttribute("src");if(null!=i&&null!=e&&(n=e,Ri(i).href==Ri(n).href))throw new Error(`Matching <turbo-frame id="${t.id}"> element has a source URL which references itself`);if(t.ownerDocument!==document&&(t=document.importNode(t,!0)),t instanceof Ai)return t.connectedCallback(),t.disconnectedCallback(),t}var n}class rs extends HTMLElement{static async renderElement(t){await t.performAction()}async connectedCallback(){try{await this.render()}catch(t){console.error(t)}finally{this.disconnect()}}async render(){var t;return null!==(t=this.renderPromise)&&void 0!==t?t:this.renderPromise=(async()=>{const t=this.beforeRenderEvent;this.dispatchEvent(t)&&(await qi(),await t.detail.render(this))})()}disconnect(){try{this.remove()}catch(t){}}removeDuplicateTargetChildren(){this.duplicateChildren.forEach((t=>t.remove()))}get duplicateChildren(){var t;const e=this.targetElements.flatMap((t=>[...t.children])).filter((t=>!!t.id)),n=[...(null===(t=this.templateContent)||void 0===t?void 0:t.children)||[]].filter((t=>!!t.id)).map((t=>t.id));return e.filter((t=>n.includes(t.id)))}get performAction(){if(this.action){const t=jr[this.action];if(t)return t;this.raise("unknown action")}this.raise("action attribute is missing")}get targetElements(){return this.target?this.targetElementsById:this.targets?this.targetElementsByQuery:void this.raise("target or targets attribute is missing")}get templateContent(){return this.templateElement.content.cloneNode(!0)}get templateElement(){if(null===this.firstElementChild){const t=this.ownerDocument.createElement("template");return this.appendChild(t),t}if(this.firstElementChild instanceof HTMLTemplateElement)return this.firstElementChild;this.raise("first child element must be a <template> element")}get action(){return this.getAttribute("action")}get target(){return this.getAttribute("target")}get targets(){return this.getAttribute("targets")}raise(t){throw new Error(`${this.description}: ${t}`)}get description(){var t,e;return null!==(e=(null!==(t=this.outerHTML.match(/<[^>]+>/))&&void 0!==t?t:[])[0])&&void 0!==e?e:"<turbo-stream>"}get beforeRenderEvent(){return new CustomEvent("turbo:before-stream-render",{bubbles:!0,cancelable:!0,detail:{newStream:this,render:rs.renderElement}})}get targetElementsById(){var t;const e=null===(t=this.ownerDocument)||void 0===t?void 0:t.getElementById(this.target);return null!==e?[e]:[]}get targetElementsByQuery(){var t;const e=null===(t=this.ownerDocument)||void 0===t?void 0:t.querySelectorAll(this.targets);return 0!==e.length?Array.prototype.slice.call(e):[]}}class ss extends HTMLElement{constructor(){super(...arguments),this.streamSource=null}connectedCallback(){this.streamSource=this.src.match(/^ws{1,2}:/)?new WebSocket(this.src):new EventSource(this.src),Kr(this.streamSource)}disconnectedCallback(){this.streamSource&&Xr(this.streamSource)}get src(){return this.getAttribute("src")||""}}Ai.delegateConstructor=class{constructor(t){this.fetchResponseLoaded=t=>{},this.currentFetchRequest=null,this.resolveVisitPromise=()=>{},this.connected=!1,this.hasBeenLoaded=!1,this.ignoredAttributes=new Set,this.action=null,this.visitCachedSnapshot=({element:t})=>{const e=t.querySelector("#"+this.element.id);e&&this.previousFrameElement&&e.replaceChildren(...this.previousFrameElement.children),delete this.previousFrameElement},this.element=t,this.view=new ar(this,this.element),this.appearanceObserver=new Zi(this,this.element),this.formLinkClickObserver=new lr(this,this.element),this.linkInterceptor=new cr(this,this.element),this.restorationIdentifier=Ui(),this.formSubmitObserver=new sr(this,this.element)}connect(){this.connected||(this.connected=!0,this.loadingStyle==Ei.lazy?this.appearanceObserver.start():this.loadSourceURL(),this.formLinkClickObserver.start(),this.linkInterceptor.start(),this.formSubmitObserver.start())}disconnect(){this.connected&&(this.connected=!1,this.appearanceObserver.stop(),this.formLinkClickObserver.stop(),this.linkInterceptor.stop(),this.formSubmitObserver.stop())}disabledChanged(){this.loadingStyle==Ei.eager&&this.loadSourceURL()}sourceURLChanged(){this.isIgnoringChangesTo("src")||(this.element.isConnected&&(this.complete=!1),(this.loadingStyle==Ei.eager||this.hasBeenLoaded)&&this.loadSourceURL())}sourceURLReloaded(){const{src:t}=this.element;return this.ignoringChangesToAttribute("complete",(()=>{this.element.removeAttribute("complete")})),this.element.src=null,this.element.src=t,this.element.loaded}completeChanged(){this.isIgnoringChangesTo("complete")||this.loadSourceURL()}loadingStyleChanged(){this.loadingStyle==Ei.lazy?this.appearanceObserver.start():(this.appearanceObserver.stop(),this.loadSourceURL())}async loadSourceURL(){this.enabled&&this.isActive&&!this.complete&&this.sourceURL&&(this.element.loaded=this.visit(Ri(this.sourceURL)),this.appearanceObserver.stop(),await this.element.loaded,this.hasBeenLoaded=!0)}async loadResponse(t){(t.redirected||t.succeeded&&t.isHTML)&&(this.sourceURL=t.response.url);try{const e=await t.responseHTML;if(e){const n=ji(e);br.fromDocument(n).isVisitable?await this.loadFrameResponse(t,n):await this.handleUnvisitableFrameResponse(t)}}finally{this.fetchResponseLoaded=()=>{}}}elementAppearedInViewport(t){this.proposeVisitIfNavigatedWithAction(t,t),this.loadSourceURL()}willSubmitFormLinkToLocation(t){return this.shouldInterceptNavigation(t)}submittedFormLinkToLocation(t,e,n){const i=this.findFrameElement(t);i&&n.setAttribute("data-turbo-frame",i.id)}shouldInterceptLinkClick(t,e,n){return this.shouldInterceptNavigation(t)}linkClickIntercepted(t,e){this.navigateFrame(t,e)}willSubmitForm(t,e){return t.closest("turbo-frame")==this.element&&this.shouldInterceptNavigation(t,e)}formSubmitted(t,e){this.formSubmission&&this.formSubmission.stop(),this.formSubmission=new er(this,t,e);const{fetchRequest:n}=this.formSubmission;this.prepareRequest(n),this.formSubmission.start()}prepareRequest(t){var e;t.headers["Turbo-Frame"]=this.id,(null===(e=this.currentNavigationElement)||void 0===e?void 0:e.hasAttribute("data-turbo-stream"))&&t.acceptResponseType(tr.contentType)}requestStarted(t){Vi(this.element)}requestPreventedHandlingResponse(t,e){this.resolveVisitPromise()}async requestSucceededWithResponse(t,e){await this.loadResponse(e),this.resolveVisitPromise()}async requestFailedWithResponse(t,e){await this.loadResponse(e),this.resolveVisitPromise()}requestErrored(t,e){console.error(e),this.resolveVisitPromise()}requestFinished(t){zi(this.element)}formSubmissionStarted({formElement:t}){Vi(t,this.findFrameElement(t))}formSubmissionSucceededWithResponse(t,e){const n=this.findFrameElement(t.formElement,t.submitter);n.delegate.proposeVisitIfNavigatedWithAction(n,t.formElement,t.submitter),n.delegate.loadResponse(e),t.isSafe||Br.clearCache()}formSubmissionFailedWithResponse(t,e){this.element.delegate.loadResponse(e),Br.clearCache()}formSubmissionErrored(t,e){console.error(e)}formSubmissionFinished({formElement:t}){zi(t,this.findFrameElement(t))}allowsImmediateRender({element:t},e){const n=Ni("turbo:before-frame-render",{target:this.element,detail:Object.assign({newFrame:t},e),cancelable:!0}),{defaultPrevented:i,detail:{render:r}}=n;return this.view.renderer&&r&&(this.view.renderer.renderElement=r),!i}viewRenderedSnapshot(t,e){}preloadOnLoadLinksForView(t){Br.preloadOnLoadLinksForView(t)}viewInvalidated(){}willRenderFrame(t,e){this.previousFrameElement=t.cloneNode(!0)}async loadFrameResponse(t,e){const n=await this.extractForeignFrameElement(e.body);if(n){const e=new nr(n),i=new pr(this,this.view.snapshot,e,pr.renderElement,!1,!1);this.view.renderPromise&&await this.view.renderPromise,this.changeHistory(),await this.view.render(i),this.complete=!0,Br.frameRendered(t,this.element),Br.frameLoaded(this.element),this.fetchResponseLoaded(t)}else this.willHandleFrameMissingFromResponse(t)&&this.handleFrameMissingFromResponse(t)}async visit(t){var e;const n=new Qi(this,Si.get,t,new URLSearchParams,this.element);return null===(e=this.currentFetchRequest)||void 0===e||e.cancel(),this.currentFetchRequest=n,new Promise((t=>{this.resolveVisitPromise=()=>{this.resolveVisitPromise=()=>{},this.currentFetchRequest=null,t()},n.perform()}))}navigateFrame(t,e,n){const i=this.findFrameElement(t,n);i.delegate.proposeVisitIfNavigatedWithAction(i,t,n),this.withCurrentNavigationElement(t,(()=>{i.src=e}))}proposeVisitIfNavigatedWithAction(t,e,n){if(this.action=Xi(n,e,t),this.action){const e=br.fromElement(t).clone(),{visitCachedSnapshot:n}=t.delegate;t.delegate.fetchResponseLoaded=i=>{if(t.src){const{statusCode:r,redirected:s}=i,o={response:{statusCode:r,redirected:s,responseHTML:t.ownerDocument.documentElement.outerHTML},visitCachedSnapshot:n,willRender:!1,updateHistory:!1,restorationIdentifier:this.restorationIdentifier,snapshot:e};this.action&&(o.action=this.action),Br.visit(t.src,o)}}}}changeHistory(){if(this.action){const t=Ki(this.action);Br.history.update(t,Ri(this.element.src||""),this.restorationIdentifier)}}async handleUnvisitableFrameResponse(t){console.warn(`The response (${t.statusCode}) from <turbo-frame id="${this.element.id}"> is performing a full page visit due to turbo-visit-control.`),await this.visitResponse(t.response)}willHandleFrameMissingFromResponse(t){this.element.setAttribute("complete","");const e=t.response;return!Ni("turbo:frame-missing",{target:this.element,detail:{response:e,visit:async(t,e={})=>{t instanceof Response?this.visitResponse(t):Br.visit(t,e)}},cancelable:!0}).defaultPrevented}handleFrameMissingFromResponse(t){this.view.missing(),this.throwFrameMissingError(t)}throwFrameMissingError(t){const e=`The response (${t.statusCode}) did not contain the expected <turbo-frame id="${this.element.id}"> and will be ignored. To perform a full page visit instead, set turbo-visit-control to reload.`;throw new es(e)}async visitResponse(t){const e=new Fi(t),n=await e.responseHTML,{location:i,redirected:r,statusCode:s}=e;return Br.visit(i,{response:{redirected:r,statusCode:s,responseHTML:n}})}findFrameElement(t,e){var n;return null!==(n=ns(Wi("data-turbo-frame",e,t)||this.element.getAttribute("target")))&&void 0!==n?n:this.element}async extractForeignFrameElement(t){let e;const n=CSS.escape(this.id);try{if(e=is(t.querySelector(`turbo-frame#${n}`),this.sourceURL),e)return e;if(e=is(t.querySelector(`turbo-frame[src][recurse~=${n}]`),this.sourceURL),e)return await e.loaded,await this.extractForeignFrameElement(e)}catch(i){return console.error(i),new Ai}return null}formActionIsVisitable(t,e){return Mi(Ri(xi(t,e)),this.rootLocation)}shouldInterceptNavigation(t,e){const n=Wi("data-turbo-frame",e,t)||this.element.getAttribute("target");if(t instanceof HTMLFormElement&&!this.formActionIsVisitable(t,e))return!1;if(!this.enabled||"_top"==n)return!1;if(n){const t=ns(n);if(t)return!t.disabled}return!(!Br.elementIsNavigatable(t)||e&&!Br.elementIsNavigatable(e))}get id(){return this.element.id}get enabled(){return!this.element.disabled}get sourceURL(){if(this.element.src)return this.element.src}set sourceURL(t){this.ignoringChangesToAttribute("src",(()=>{this.element.src=null!=t?t:null}))}get loadingStyle(){return this.element.loading}get isLoading(){return void 0!==this.formSubmission||void 0!==this.resolveVisitPromise()}get complete(){return this.element.hasAttribute("complete")}set complete(t){this.ignoringChangesToAttribute("complete",(()=>{t?this.element.setAttribute("complete",""):this.element.removeAttribute("complete")}))}get isActive(){return this.element.isActive&&this.connected}get rootLocation(){var t;const e=this.element.ownerDocument.querySelector('meta[name="turbo-root"]');return Ri(null!==(t=null==e?void 0:e.content)&&void 0!==t?t:"/")}isIgnoringChangesTo(t){return this.ignoredAttributes.has(t)}ignoringChangesToAttribute(t,e){this.ignoredAttributes.add(t),e(),this.ignoredAttributes.delete(t)}withCurrentNavigationElement(t,e){this.currentNavigationElement=t,e(),delete this.currentNavigationElement}},void 0===customElements.get("turbo-frame")&&customElements.define("turbo-frame",Ai),void 0===customElements.get("turbo-stream")&&customElements.define("turbo-stream",rs),void 0===customElements.get("turbo-stream-source")&&customElements.define("turbo-stream-source",ss),(()=>{let t=document.currentScript;if(t&&!t.hasAttribute("data-turbo-suppress-warning"))for(t=t.parentElement;t;){if(t==document.body)return console.warn(Bi`
        You are loading Turbo from a <script> element inside the <body> element. This is probably not what you meant to do!

        Load your application’s JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.

        For more information, see: https://turbo.hotwired.dev/handbook/building#working-with-script-elements

        ——
        Suppress this warning by adding a "data-turbo-suppress-warning" attribute to: %s
      `,t.outerHTML);t=t.parentElement}})(),window.Turbo=ts,Vr();const os=Object.freeze(Object.defineProperty({__proto__:null,FrameElement:Ai,get FrameLoadingStyle(){return Ei},FrameRenderer:pr,PageRenderer:Ir,PageSnapshot:br,StreamActions:jr,StreamElement:rs,StreamSourceElement:ss,cache:Ur,clearCache:Gr,connectStreamSource:Kr,disconnectStreamSource:Xr,navigator:Wr,registerAdapter:zr,renderStreamMessage:Jr,session:Br,setConfirmMethod:Qr,setFormMode:Zr,setProgressBarDelay:Yr,start:Vr,visit:$r},Symbol.toStringTag,{value:"Module"}));class as extends HTMLElement{async connectedCallback(){var t,e;Kr(this),this.subscription=(t=this.type,e=this.channel,"presence"===t?window.Echo.join(e):window.Echo[t](e)).listenToAll(((t,e)=>{this.dispatchMessageEvent(e.streams)}))}disconnectedCallback(){Xr(this),this.subscription&&(window.Echo.leave(this.channel),this.subscription=null)}dispatchMessageEvent(t){const e=new MessageEvent("message",{data:t});return this.dispatchEvent(e)}get channel(){return this.getAttribute("channel")||""}get type(){return this.getAttribute("type")||"private"}}window.Pusher=bi,window.Waterhole.echoConfig.broadcaster&&(window.Echo=new gi({namespace:"Waterhole.Events",...window.Waterhole.echoConfig}),window.Echo.registerTurboRequestInterceptor(),customElements.define("turbo-echo-stream-source",as));class cs{constructor(t){this.children=[],this.parent=t}delete(t){const e=this.children.indexOf(t);return-1!==e&&(this.children=this.children.slice(0,e).concat(this.children.slice(e+1)),0===this.children.length&&this.parent.delete(this),!0)}add(t){return this.children.push(t),this}}class us{constructor(t){this.parent=null,this.children={},this.parent=t||null}get(t){return this.children[t]}insert(t){let e=this;for(let n=0;n<t.length;n+=1){const i=t[n];let r=e.get(i);if(n===t.length-1)return r instanceof us&&(e.delete(r),r=null),r||(r=new cs(e),e.children[i]=r),r;r instanceof cs&&(r=null),r||(r=new us(e),e.children[i]=r),e=r}return e}delete(t){for(const e in this.children)if(this.children[e]===t){const t=delete this.children[e];return 0===Object.keys(this.children).length&&this.parent&&this.parent.delete(this),t}return!1}}const ls={"¡":"1","™":"2","£":"3","¢":"4","∞":"5","§":"6","¶":"7","•":"8","ª":"9","º":"0","–":"-","≠":"=","⁄":"!","€":"@","‹":"#","›":"$","ﬁ":"%","ﬂ":"^","‡":"&","°":"*","·":"(","‚":")","—":"_","±":"+","œ":"q","∑":"w","®":"r","†":"t","¥":"y","ø":"o","π":"p","“":"[","‘":"]","«":"\\","Œ":"Q","„":"W","´":"E","‰":"R","ˇ":"T","Á":"Y","¨":"U","ˆ":"I","Ø":"O","∏":"P","”":"{","’":"}","»":"|","å":"a","ß":"s","∂":"d","ƒ":"f","©":"g","˙":"h","∆":"j","˚":"k","¬":"l","…":";","æ":"'","Å":"A","Í":"S","Î":"D","Ï":"F","˝":"G","Ó":"H","Ô":"J","":"K","Ò":"L","Ú":":","Æ":'"',"Ω":"z","≈":"x","ç":"c","√":"v","∫":"b","µ":"m","≤":",","≥":".","÷":"/","¸":"Z","˛":"X","Ç":"C","◊":"V","ı":"B","˜":"N","Â":"M","¯":"<","˘":">","¿":"?"},hs={" ":"Space","+":"Plus"};function ds(t,e=navigator.platform){var n,i;const{ctrlKey:r,altKey:s,metaKey:o,key:a}=t,c=[],u=[r,s,o,fs(t)];for(const[l,h]of u.entries())h&&c.push(ps[l]);if(!ps.includes(a)){const t=c.includes("Alt")&&gs.test(e)&&null!==(n=ls[a])&&void 0!==n?n:a,r=null!==(i=hs[t])&&void 0!==i?i:t;c.push(r)}return c.join("+")}const ps=["Control","Alt","Meta","Shift"];function fs(t){const{shiftKey:e,code:n,key:i}=t;return e&&!(n.startsWith("Key")&&i.toUpperCase()===i)}function ms(t,e){let n;return n=function(t,e=navigator.platform){const n=gs.test(e)?"Meta":"Control";return t.replace("Mod",n)}(t,e),n=function(t){const e=t.split("+").pop(),n=[];for(const i of["Control","Alt","Meta","Shift"])t.includes(i)&&n.push(i);return n.push(e),n.join("+")}(n),n}const gs=/Mac|iPod|iPhone|iPad/i;class vs{constructor({onReset:t}={}){this._path=[],this.timer=null,this.onReset=t}get path(){return this._path}get sequence(){return this._path.join(" ")}registerKeypress(t){this._path=[...this._path,ds(t)],this.startTimer()}reset(){var t;this.killTimer(),this._path=[],null===(t=this.onReset)||void 0===t||t.call(this)}killTimer(){null!=this.timer&&window.clearTimeout(this.timer),this.timer=null}startTimer(){this.killTimer(),this.timer=window.setTimeout((()=>this.reset()),vs.CHORD_TIMEOUT)}}function bs(t){if(!(t instanceof HTMLElement))return!1;const e=t.nodeName.toLowerCase(),n=(t.getAttribute("type")||"").toLowerCase();return"select"===e||"textarea"===e||"input"===e&&"submit"!==n&&"reset"!==n&&"checkbox"!==n&&"radio"!==n&&"file"!==n||t.isContentEditable}vs.CHORD_TIMEOUT=1500;const ys=new us,ws=new WeakMap;let Es=ys;const Ss=new vs({onReset(){Es=ys}});function ks(t){if(t.defaultPrevented)return;if(!(t.target instanceof Node))return;if(bs(t.target)){const e=t.target;if(!e.id)return;if(!e.ownerDocument.querySelector(`[data-hotkey-scope="${e.id}"]`))return}const e=Es.get(ds(t));if(e){if(Ss.registerKeypress(t),Es=e,e instanceof cs){const n=t.target;let i,r=!1;const s=bs(n);for(let t=e.children.length-1;t>=0;t-=1){i=e.children[t];const o=i.getAttribute("data-hotkey-scope");if(!s&&!o||s&&n.id===o){r=!0;break}}i&&r&&(function(t,e){const n=new CustomEvent("hotkey-fire",{cancelable:!0,detail:{path:e}});!t.dispatchEvent(n)||(bs(t)?t.focus():t.click())}(i,Ss.path),t.preventDefault()),Ss.reset()}}else Ss.reset()}function Ts(t,e){0===Object.keys(ys.children).length&&document.addEventListener("keydown",ks);const n=function(t){const e=[];let n=[""],i=!1;for(let r=0;r<t.length;r++)i&&","===t[r]?(e.push(n),n=[""],i=!1):" "!==t[r]?(i="+"!==t[r],n[n.length-1]+=t[r]):(n.push(""),i=!1);return e.push(n),e.map((t=>t.map((t=>ms(t))).filter((t=>""!==t)))).filter((t=>t.length>0))}(t.getAttribute("data-hotkey")||""),i=n.map((e=>ys.insert(e).add(t)));ws.set(t,i)}function Cs(t){t.target.querySelectorAll("[data-hotkey]").forEach((t=>{Ts(t)}))}function Ls(t,e){if(!t)throw new Error(e||"AssertionError")}document.addEventListener("DOMContentLoaded",Cs),document.addEventListener("turbo:render",Cs),document.addEventListener("turbo:frame-render",Cs),Ls.notEqual=function(t,e,n){Ls(t!=e,n)},Ls.notOk=function(t,e){Ls(!t,e)},Ls.equal=function(t,e,n){Ls(t==e,n)},Ls.ok=Ls;var As=["onclick","ondblclick","onmousedown","onmouseup","onmouseover","onmousemove","onmouseout","onmouseenter","onmouseleave","ontouchcancel","ontouchend","ontouchmove","ontouchstart","ondragstart","ondrag","ondragenter","ondragleave","ondragover","ondrop","ondragend","onkeydown","onkeypress","onkeyup","onunload","onabort","onerror","onresize","onscroll","onselect","onchange","onsubmit","onreset","onfocus","onblur","oninput","onanimationend","onanimationiteration","onanimationstart","oncontextmenu","onfocusin","onfocusout"],Rs=As.length,Ps=function(t,e){var n=t.nodeType,i=t.nodeName;1===n&&function(t,e){for(var n=e.attributes,i=t.attributes,r=null,s=null,o=null,a=null,c=i.length-1;c>=0;--c)o=(a=i[c]).name,r=a.namespaceURI,s=a.value,r?(o=a.localName||o,e.getAttributeNS(r,o)!==s&&e.setAttributeNS(r,o,s)):e.hasAttribute(o)?e.getAttribute(o)!==s&&("null"===s||"undefined"===s?e.removeAttribute(o):e.setAttribute(o,s)):e.setAttribute(o,s);for(var u=n.length-1;u>=0;--u)!1!==(a=n[u]).specified&&(o=a.name,(r=a.namespaceURI)?(o=a.localName||o,t.hasAttributeNS(r,o)||e.removeAttributeNS(r,o)):t.hasAttributeNS(null,o)||e.removeAttribute(o))}(t,e),3!==n&&8!==n||e.nodeValue!==t.nodeValue&&(e.nodeValue=t.nodeValue),"INPUT"===i?function(t,e){var n=t.value,i=e.value;xs(t,e,"checked"),xs(t,e,"disabled"),t.indeterminate!==e.indeterminate&&(e.indeterminate=t.indeterminate),"file"!==e.type&&(n!==i&&(e.setAttribute("value",n),e.value=n),"null"===n&&(e.value="",e.removeAttribute("value")),t.hasAttributeNS(null,"value")?"range"===e.type&&(e.value=n):e.removeAttribute("value"))}(t,e):"OPTION"===i?function(t,e){xs(t,e,"selected")}(t,e):"TEXTAREA"===i&&function(t,e){var n=t.value;if(n!==e.value&&(e.value=n),e.firstChild&&e.firstChild.nodeValue!==n){if(""===n&&e.firstChild.nodeValue===e.placeholder)return;e.firstChild.nodeValue=n}}(t,e),function(t,e){for(var n=0;n<Rs;n++){var i=As[n];t[i]?e[i]=t[i]:e[i]&&(e[i]=void 0)}}(t,e)};function xs(t,e,n){t[n]!==e[n]&&(e[n]=t[n],t[n]?e.setAttribute(n,""):e.removeAttribute(n))}var _s=Ls,Os=Ps;function Ms(t,e){return e?t?t.isSameNode&&t.isSameNode(e)?e:t.tagName!==e.tagName||Is(t)!==Is(e)?t:(Os(t,e),Ds(t,e),e):null:t}function Is(t){return t.dataset?t.dataset.nanomorphComponentId:void 0}function Ds(t,e){for(var n,i,r,s,o=0,a=0;n=e.childNodes[a],i=t.childNodes[a-o],n||i;a++)if(i)if(n)if(Fs(i,n))(r=Ms(i,n))!==n&&(e.replaceChild(r,n),o++);else{s=null;for(var c=a;c<e.childNodes.length;c++)if(Fs(e.childNodes[c],i)){s=e.childNodes[c];break}s?((r=Ms(i,s))!==s&&o++,e.insertBefore(r,n)):i.id||n.id?(e.insertBefore(i,n),o++):(r=Ms(i,n))!==n&&(e.replaceChild(r,n),o++)}else e.appendChild(i),o++;else e.removeChild(n),a--}function Fs(t,e){return t.id?t.id===e.id:t.isSameNode?t.isSameNode(e):t.tagName===e.tagName&&3===t.type&&t.nodeValue===e.nodeValue}const Hs=r((function(t,e,n){return _s.equal(typeof t,"object","nanomorph: oldTree should be an object"),_s.equal(typeof e,"object","nanomorph: newTree should be an object"),n&&n.childrenOnly?(Ds(e,t),t):(_s.notEqual(e.nodeType,11,"nanomorph: newTree should have one root node (which is not a DocumentFragment)"),Ms(e,t))}));function Ns(t){const e=document.getElementById(t);return e?.content?.firstElementChild?.cloneNode(!0)}Vr(),window.Turbo=os,document.addEventListener("turbo:before-stream-render",(t=>{const{detail:e}=t,n=e.render;e.render=t=>{"replace"===t.action?t.targetElements.forEach((e=>{Hs(e,t.templateContent.firstElementChild)})):n(t)}})),document.addEventListener("turbo:before-fetch-response",(async t=>{const e=t.detail.fetchResponse.response;if(e.ok||422===e.status)return;t.preventDefault();const{target:n}=t;if(n instanceof Ai){const t=Ns("frame-error");t.querySelector("button")?.addEventListener("click",(()=>{n.reload()})),n.replaceChildren(t)}else Waterhole.fetchError(e)})),document.addEventListener("turbo:frame-missing",(async t=>{t.preventDefault();const{detail:e}=t;e.visit(e.response,{action:"replace"})})),Waterhole.fetchError=async function(t){let e;switch(t?.status){case 401:case 403:e="forbidden-alert";break;case 419:e="session-expired-alert";break;case 422:const n=Ns("template-alert-danger");n.querySelector(".alert__message").textContent=(await t.json()).message,Waterhole.alerts.show(n,{key:"fetchError"});break;case 429:e="too-many-requests-alert";break;default:e="fatal-error-alert"}if(e){const t=Ns(e);t&&Waterhole.alerts.show(t,{key:"fetchError"})}},Object.defineProperty(Waterhole,"alerts",{get:()=>document.getElementById("alerts")}),window.Stimulus=n.start(),window.Stimulus.load(i(require.context("./controllers",!0,/\.ts$/))),Waterhole.fetch=rt.create({headers:{"X-XSRF-TOKEN":function(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null}("XSRF-TOKEN")||void 0},hooks:{beforeError:[t=>(Waterhole.fetchError(t.response),t)]}})}}}));
