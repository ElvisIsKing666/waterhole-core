var Er=Object.freeze,Eu=Object.defineProperty;var Tr=n=>{throw TypeError(n)};var Gn=(n,t,e)=>t.has(n)||Tr("Cannot "+e);var N=(n,t,e)=>(Gn(n,t,"read from private field"),e?e.call(n):t.get(n)),nt=(n,t,e)=>t.has(n)?Tr("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,e),ft=(n,t,e,i)=>(Gn(n,t,"write to private field"),i?i.call(n,e):t.set(n,e),e),V=(n,t,e)=>(Gn(n,t,"access private method"),e);var Qn=(n,t)=>Er(Eu(n,"raw",{value:Er(t||n.slice())}));import{A as Tu}from"./stimulus.js";import{d as Cu}from"./stimulus-webpack-helpers.js";import{g as os}from"./_commonjsHelpers.js";function Hf(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}var _u=function(n,t,e,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?n!==t||!r:!t.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,e):r?r.value=e:t.set(n,e),e},Cr=function(n,t,e,i){if(e==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?n!==t||!i:!t.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?i:e==="a"?i.call(n):i?i.value:t.get(n)},Ee;class ku{formatToParts(t){const e=[];for(const i of t)e.push({type:"element",value:i}),e.push({type:"literal",value:", "});return e.slice(0,-1)}}const Au=typeof Intl<"u"&&Intl.ListFormat||ku,Lu=[["years","year"],["months","month"],["weeks","week"],["days","day"],["hours","hour"],["minutes","minute"],["seconds","second"],["milliseconds","millisecond"]],xu={minimumIntegerDigits:2};class Ru{constructor(t,e={}){Ee.set(this,void 0);let i=String(e.style||"short");i!=="long"&&i!=="short"&&i!=="narrow"&&i!=="digital"&&(i="short");let r=i==="digital"?"numeric":i;const u=e.hours||r;r=u==="2-digit"?"numeric":u;const h=e.minutes||r;r=h==="2-digit"?"numeric":h;const f=e.seconds||r;r=f==="2-digit"?"numeric":f;const p=e.milliseconds||r;_u(this,Ee,{locale:t,style:i,years:e.years||i==="digital"?"short":i,yearsDisplay:e.yearsDisplay==="always"?"always":"auto",months:e.months||i==="digital"?"short":i,monthsDisplay:e.monthsDisplay==="always"?"always":"auto",weeks:e.weeks||i==="digital"?"short":i,weeksDisplay:e.weeksDisplay==="always"?"always":"auto",days:e.days||i==="digital"?"short":i,daysDisplay:e.daysDisplay==="always"?"always":"auto",hours:u,hoursDisplay:e.hoursDisplay==="always"||i==="digital"?"always":"auto",minutes:h,minutesDisplay:e.minutesDisplay==="always"||i==="digital"?"always":"auto",seconds:f,secondsDisplay:e.secondsDisplay==="always"||i==="digital"?"always":"auto",milliseconds:p,millisecondsDisplay:e.millisecondsDisplay==="always"?"always":"auto"},"f")}resolvedOptions(){return Cr(this,Ee,"f")}formatToParts(t){const e=[],i=Cr(this,Ee,"f"),r=i.style,u=i.locale;for(const[h,f]of Lu){const p=t[h];if(i["".concat(h,"Display")]==="auto"&&!p)continue;const v=i[h],g=v==="2-digit"?xu:v==="numeric"?{}:{style:"unit",unit:f,unitDisplay:v};e.push(new Intl.NumberFormat(u,g).format(p))}return new Au(u,{type:"unit",style:r==="digital"?"short":r}).formatToParts(e)}format(t){return this.formatToParts(t).map(e=>e.value).join("")}}Ee=new WeakMap;const as=/^[-+]?P(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)W)?(?:(\d+)D)?(?:T(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?)?$/,on=["year","month","week","day","hour","minute","second","millisecond"],Pu=n=>as.test(n);class ut{constructor(t=0,e=0,i=0,r=0,u=0,h=0,f=0,p=0){this.years=t,this.months=e,this.weeks=i,this.days=r,this.hours=u,this.minutes=h,this.seconds=f,this.milliseconds=p,this.years||(this.years=0),this.sign||(this.sign=Math.sign(this.years)),this.months||(this.months=0),this.sign||(this.sign=Math.sign(this.months)),this.weeks||(this.weeks=0),this.sign||(this.sign=Math.sign(this.weeks)),this.days||(this.days=0),this.sign||(this.sign=Math.sign(this.days)),this.hours||(this.hours=0),this.sign||(this.sign=Math.sign(this.hours)),this.minutes||(this.minutes=0),this.sign||(this.sign=Math.sign(this.minutes)),this.seconds||(this.seconds=0),this.sign||(this.sign=Math.sign(this.seconds)),this.milliseconds||(this.milliseconds=0),this.sign||(this.sign=Math.sign(this.milliseconds)),this.blank=this.sign===0}abs(){return new ut(Math.abs(this.years),Math.abs(this.months),Math.abs(this.weeks),Math.abs(this.days),Math.abs(this.hours),Math.abs(this.minutes),Math.abs(this.seconds),Math.abs(this.milliseconds))}static from(t){var e;if(typeof t=="string"){const i=String(t).trim(),r=i.startsWith("-")?-1:1,u=(e=i.match(as))===null||e===void 0?void 0:e.slice(1).map(h=>(Number(h)||0)*r);return u?new ut(...u):new ut}else if(typeof t=="object"){const{years:i,months:r,weeks:u,days:h,hours:f,minutes:p,seconds:v,milliseconds:g}=t;return new ut(i,r,u,h,f,p,v,g)}throw new RangeError("invalid duration")}static compare(t,e){const i=Date.now(),r=Math.abs(_r(i,ut.from(t)).getTime()-i),u=Math.abs(_r(i,ut.from(e)).getTime()-i);return r>u?-1:r<u?1:0}toLocaleString(t,e){return new Ru(t,e).format(this)}}function _r(n,t){const e=new Date(n);return t.sign<0?(e.setUTCSeconds(e.getUTCSeconds()+t.seconds),e.setUTCMinutes(e.getUTCMinutes()+t.minutes),e.setUTCHours(e.getUTCHours()+t.hours),e.setUTCDate(e.getUTCDate()+t.weeks*7+t.days),e.setUTCMonth(e.getUTCMonth()+t.months),e.setUTCFullYear(e.getUTCFullYear()+t.years)):(e.setUTCFullYear(e.getUTCFullYear()+t.years),e.setUTCMonth(e.getUTCMonth()+t.months),e.setUTCDate(e.getUTCDate()+t.weeks*7+t.days),e.setUTCHours(e.getUTCHours()+t.hours),e.setUTCMinutes(e.getUTCMinutes()+t.minutes),e.setUTCSeconds(e.getUTCSeconds()+t.seconds)),e}function Ou(n,t="second",e=Date.now()){const i=n.getTime()-e;if(i===0)return new ut;const r=Math.sign(i),u=Math.abs(i),h=Math.floor(u/1e3),f=Math.floor(h/60),p=Math.floor(f/60),v=Math.floor(p/24),g=Math.floor(v/30),w=Math.floor(g/12),S=on.indexOf(t)||on.length;return new ut(S>=0?w*r:0,S>=1?(g-w*12)*r:0,0,S>=3?(v-g*30)*r:0,S>=4?(p-v*24)*r:0,S>=5?(f-p*60)*r:0,S>=6?(h-f*60)*r:0,S>=7?(u-h*1e3)*r:0)}function cs(n,{relativeTo:t=Date.now()}={}){if(t=new Date(t),n.blank)return n;const e=n.sign;let i=Math.abs(n.years),r=Math.abs(n.months),u=Math.abs(n.weeks),h=Math.abs(n.days),f=Math.abs(n.hours),p=Math.abs(n.minutes),v=Math.abs(n.seconds),g=Math.abs(n.milliseconds);g>=900&&(v+=Math.round(g/1e3)),(v||p||f||h||u||r||i)&&(g=0),v>=55&&(p+=Math.round(v/60)),(p||f||h||u||r||i)&&(v=0),p>=55&&(f+=Math.round(p/60)),(f||h||u||r||i)&&(p=0),h&&f>=12&&(h+=Math.round(f/24)),!h&&f>=21&&(h+=Math.round(f/24)),(h||u||r||i)&&(f=0);const w=t.getFullYear(),S=t.getMonth(),E=t.getDate();if(h>=27||i+r+h){const x=new Date(t);x.setDate(1),x.setMonth(S+r*e+1),x.setDate(0);const T=Math.max(0,E-x.getDate()),b=new Date(t);b.setFullYear(w+i*e),b.setDate(E-T),b.setMonth(S+r*e),b.setDate(E-T+h*e);const y=b.getFullYear()-t.getFullYear(),A=b.getMonth()-t.getMonth(),P=Math.abs(Math.round((Number(b)-Number(t))/864e5))+T,D=Math.abs(y*12+A);P<27?(h>=6?(u+=Math.round(h/7),h=0):h=P,r=i=0):D<=11?(r=D,i=0):(r=0,i=y*e),(r||i)&&(h=0)}return i&&(r=0),u>=4&&(r+=Math.round(u/4)),(r||i)&&(u=0),h&&u&&!r&&!i&&(u+=Math.round(h/7),h=0),new ut(i*e,r*e,u*e,h*e,f*e,p*e,v*e,g*e)}function Iu(n,t){const e=cs(n,t);if(e.blank)return[0,"second"];for(const i of on){if(i==="millisecond")continue;const r=e["".concat(i,"s")];if(r)return[r,i]}return[0,"second"]}var z=function(n,t,e,i){if(e==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?n!==t||!i:!t.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?i:e==="a"?i.call(n):i?i.value:t.get(n)},Be=function(n,t,e,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?n!==t||!r:!t.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,e):r?r.value=e:t.set(n,e),e},pt,Te,Ce,we,Vt,oi,us,ls,hs,ds,ee;const Mu=globalThis.HTMLElement||null,Zn=new ut,kr=new ut(0,0,0,0,0,1);class Fu extends Event{constructor(t,e,i,r){super("relative-time-updated",{bubbles:!0,composed:!0}),this.oldText=t,this.newText=e,this.oldTitle=i,this.newTitle=r}}function Ar(n){if(!n.date)return 1/0;if(n.format==="duration"||n.format==="elapsed"){const e=n.precision;if(e==="second")return 1e3;if(e==="minute")return 60*1e3}const t=Math.abs(Date.now()-n.date.getTime());return t<60*1e3?1e3:t<60*60*1e3?60*1e3:60*60*1e3}const ti=new class{constructor(){this.elements=new Set,this.time=1/0,this.timer=-1}observe(n){if(this.elements.has(n))return;this.elements.add(n);const t=n.date;if(t&&t.getTime()){const e=Ar(n),i=Date.now()+e;i<this.time&&(clearTimeout(this.timer),this.timer=setTimeout(()=>this.update(),e),this.time=i)}}unobserve(n){this.elements.has(n)&&this.elements.delete(n)}update(){if(clearTimeout(this.timer),!this.elements.size)return;let n=1/0;for(const t of this.elements)n=Math.min(n,Ar(t)),t.update();this.time=Math.min(60*60*1e3,n),this.timer=setTimeout(()=>this.update(),this.time),this.time+=Date.now()}};class Du extends Mu{constructor(){super(...arguments),pt.add(this),Te.set(this,!1),Ce.set(this,!1),Vt.set(this,this.shadowRoot?this.shadowRoot:this.attachShadow?this.attachShadow({mode:"open"}):this),ee.set(this,null)}static define(t="relative-time",e=customElements){return e.define(t,this),this}static get observedAttributes(){return["second","minute","hour","weekday","day","month","year","time-zone-name","prefix","threshold","tense","precision","format","format-style","no-title","datetime","lang","title"]}get onRelativeTimeUpdated(){return z(this,ee,"f")}set onRelativeTimeUpdated(t){z(this,ee,"f")&&this.removeEventListener("relative-time-updated",z(this,ee,"f")),Be(this,ee,typeof t=="object"||typeof t=="function"?t:null,"f"),typeof t=="function"&&this.addEventListener("relative-time-updated",t)}get second(){const t=this.getAttribute("second");if(t==="numeric"||t==="2-digit")return t}set second(t){this.setAttribute("second",t||"")}get minute(){const t=this.getAttribute("minute");if(t==="numeric"||t==="2-digit")return t}set minute(t){this.setAttribute("minute",t||"")}get hour(){const t=this.getAttribute("hour");if(t==="numeric"||t==="2-digit")return t}set hour(t){this.setAttribute("hour",t||"")}get weekday(){const t=this.getAttribute("weekday");if(t==="long"||t==="short"||t==="narrow")return t;if(this.format==="datetime"&&t!=="")return this.formatStyle}set weekday(t){this.setAttribute("weekday",t||"")}get day(){var t;const e=(t=this.getAttribute("day"))!==null&&t!==void 0?t:"numeric";if(e==="numeric"||e==="2-digit")return e}set day(t){this.setAttribute("day",t||"")}get month(){const t=this.format;let e=this.getAttribute("month");if(e!==""&&(e!=null||(e=t==="datetime"?this.formatStyle:"short"),e==="numeric"||e==="2-digit"||e==="short"||e==="long"||e==="narrow"))return e}set month(t){this.setAttribute("month",t||"")}get year(){var t;const e=this.getAttribute("year");if(e==="numeric"||e==="2-digit")return e;if(!this.hasAttribute("year")&&new Date().getUTCFullYear()!==((t=this.date)===null||t===void 0?void 0:t.getUTCFullYear()))return"numeric"}set year(t){this.setAttribute("year",t||"")}get timeZoneName(){const t=this.getAttribute("time-zone-name");if(t==="long"||t==="short"||t==="shortOffset"||t==="longOffset"||t==="shortGeneric"||t==="longGeneric")return t}set timeZoneName(t){this.setAttribute("time-zone-name",t||"")}get prefix(){var t;return(t=this.getAttribute("prefix"))!==null&&t!==void 0?t:this.format==="datetime"?"":"on"}set prefix(t){this.setAttribute("prefix",t)}get threshold(){const t=this.getAttribute("threshold");return t&&Pu(t)?t:"P30D"}set threshold(t){this.setAttribute("threshold",t)}get tense(){const t=this.getAttribute("tense");return t==="past"?"past":t==="future"?"future":"auto"}set tense(t){this.setAttribute("tense",t)}get precision(){const t=this.getAttribute("precision");return on.includes(t)?t:this.format==="micro"?"minute":"second"}set precision(t){this.setAttribute("precision",t)}get format(){const t=this.getAttribute("format");return t==="datetime"?"datetime":t==="relative"?"relative":t==="duration"?"duration":t==="micro"?"micro":t==="elapsed"?"elapsed":"auto"}set format(t){this.setAttribute("format",t)}get formatStyle(){const t=this.getAttribute("format-style");if(t==="long")return"long";if(t==="short")return"short";if(t==="narrow")return"narrow";const e=this.format;return e==="elapsed"||e==="micro"?"narrow":e==="datetime"?"short":"long"}set formatStyle(t){this.setAttribute("format-style",t)}get noTitle(){return this.hasAttribute("no-title")}set noTitle(t){this.toggleAttribute("no-title",t)}get datetime(){return this.getAttribute("datetime")||""}set datetime(t){this.setAttribute("datetime",t)}get date(){const t=Date.parse(this.datetime);return Number.isNaN(t)?null:new Date(t)}set date(t){this.datetime=(t==null?void 0:t.toISOString())||""}connectedCallback(){this.update()}disconnectedCallback(){ti.unobserve(this)}attributeChangedCallback(t,e,i){e!==i&&(t==="title"&&Be(this,Te,i!==null&&(this.date&&z(this,pt,"m",oi).call(this,this.date))!==i,"f"),!z(this,Ce,"f")&&!(t==="title"&&z(this,Te,"f"))&&Be(this,Ce,(async()=>{await Promise.resolve(),this.update(),Be(this,Ce,!1,"f")})(),"f"))}update(){const t=z(this,Vt,"f").textContent||this.textContent||"",e=this.getAttribute("title")||"";let i=e;const r=this.date;if(typeof Intl>"u"||!Intl.DateTimeFormat||!r){z(this,Vt,"f").textContent=t;return}const u=Date.now();z(this,Te,"f")||(i=z(this,pt,"m",oi).call(this,r)||"",i&&!this.noTitle&&this.setAttribute("title",i));const h=Ou(r,this.precision,u),f=z(this,pt,"m",us).call(this,h);let p=t;f==="duration"?p=z(this,pt,"m",ls).call(this,h):f==="relative"?p=z(this,pt,"m",hs).call(this,h):p=z(this,pt,"m",ds).call(this,r),p?z(this,Vt,"f").textContent=p:this.shadowRoot===z(this,Vt,"f")&&this.textContent&&(z(this,Vt,"f").textContent=this.textContent),(p!==t||i!==e)&&this.dispatchEvent(new Fu(t,p,e,i)),f==="relative"||f==="duration"?ti.observe(this):ti.unobserve(this)}}Te=new WeakMap,Ce=new WeakMap,Vt=new WeakMap,ee=new WeakMap,pt=new WeakSet,we=function(){var t;const e=((t=this.closest("[lang]"))===null||t===void 0?void 0:t.getAttribute("lang"))||this.ownerDocument.documentElement.getAttribute("lang");try{return new Intl.Locale(e!=null?e:"").toString()}catch(i){return"default"}},oi=function(t){return new Intl.DateTimeFormat(z(this,pt,"a",we),{day:"numeric",month:"short",year:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"}).format(t)},us=function(t){const e=this.format;if(e==="datetime")return"datetime";if(e==="duration"||e==="elapsed"||e==="micro")return"duration";if((e==="auto"||e==="relative")&&typeof Intl<"u"&&Intl.RelativeTimeFormat){const i=this.tense;if(i==="past"||i==="future"||ut.compare(t,this.threshold)===1)return"relative"}return"datetime"},ls=function(t){const e=z(this,pt,"a",we),i=this.format,r=this.formatStyle,u=this.tense;let h=Zn;i==="micro"?(t=cs(t),h=kr,(this.tense==="past"&&t.sign!==-1||this.tense==="future"&&t.sign!==1)&&(t=kr)):(u==="past"&&t.sign!==-1||u==="future"&&t.sign!==1)&&(t=h);const f="".concat(this.precision,"sDisplay");return t.blank?h.toLocaleString(e,{style:r,[f]:"always"}):t.abs().toLocaleString(e,{style:r})},hs=function(t){const e=new Intl.RelativeTimeFormat(z(this,pt,"a",we),{numeric:"auto",style:this.formatStyle}),i=this.tense;i==="future"&&t.sign!==1&&(t=Zn),i==="past"&&t.sign!==-1&&(t=Zn);const[r,u]=Iu(t);return u==="second"&&r<10?e.format(0,this.precision==="millisecond"?"second":this.precision):e.format(r,u)},ds=function(t){const e=new Intl.DateTimeFormat(z(this,pt,"a",we),{second:this.second,minute:this.minute,hour:this.hour,weekday:this.weekday,day:this.day,month:this.month,year:this.year,timeZoneName:this.timeZoneName});return"".concat(this.prefix," ").concat(e.format(t)).trim()};const Lr=typeof globalThis<"u"?globalThis:window;try{Lr.RelativeTimeElement=Du.define()}catch(n){if(!(Lr.DOMException&&n instanceof DOMException&&n.name==="NotSupportedError")&&!(n instanceof ReferenceError))throw n}class xr extends Error{constructor(t,e,i){const r=t.status||t.status===0?t.status:"",u=t.statusText||"",h="".concat(r," ").concat(u).trim(),f=h?"status code ".concat(h):"an unknown error";super("Request failed with ".concat(f)),Object.defineProperty(this,"response",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="HTTPError",this.response=t,this.request=e,this.options=i}}class fs extends Error{constructor(t){super("Request timed out"),Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="TimeoutError",this.request=t}}const Xe=n=>n!==null&&typeof n=="object",je=(...n)=>{for(const t of n)if((!Xe(t)||Array.isArray(t))&&typeof t<"u")throw new TypeError("The `options` argument must be an object");return Li({},...n)},ps=(n={},t={})=>{const e=new globalThis.Headers(n),i=t instanceof globalThis.Headers,r=new globalThis.Headers(t);for(const[u,h]of r.entries())i&&h==="undefined"||h===void 0?e.delete(u):e.set(u,h);return e},Li=(...n)=>{let t={},e={};for(const i of n)if(Array.isArray(i))Array.isArray(t)||(t=[]),t=[...t,...i];else if(Xe(i)){for(let[r,u]of Object.entries(i))Xe(u)&&r in t&&(u=Li(t[r],u)),t={...t,[r]:u};Xe(i.headers)&&(e=ps(e,i.headers),t.headers=e)}return t},Hu=(()=>{let n=!1,t=!1;const e=typeof globalThis.ReadableStream=="function",i=typeof globalThis.Request=="function";return e&&i&&(t=new globalThis.Request("https://a.com",{body:new globalThis.ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type")),n&&!t})(),qu=typeof globalThis.AbortController=="function",Nu=typeof globalThis.ReadableStream=="function",Bu=typeof globalThis.FormData=="function",ms=["get","post","put","patch","head","delete"],ju={json:"application/json",text:"text/*",formData:"multipart/form-data",arrayBuffer:"*/*",blob:"*/*"},ei=2147483647,vs=Symbol("stop"),Uu=n=>ms.includes(n)?n.toUpperCase():n,Wu=["get","put","head","delete","options","trace"],Vu=[408,413,429,500,502,503,504],gs=[413,429,503],Rr={limit:2,methods:Wu,statusCodes:Vu,afterStatusCodes:gs,maxRetryAfter:Number.POSITIVE_INFINITY,backoffLimit:Number.POSITIVE_INFINITY},zu=(n={})=>{if(typeof n=="number")return{...Rr,limit:n};if(n.methods&&!Array.isArray(n.methods))throw new Error("retry.methods must be an array");if(n.statusCodes&&!Array.isArray(n.statusCodes))throw new Error("retry.statusCodes must be an array");return{...Rr,...n,afterStatusCodes:gs}};async function $u(n,t,e){return new Promise((i,r)=>{const u=setTimeout(()=>{t&&t.abort(),r(new fs(n))},e.timeout);e.fetch(n).then(i).catch(r).then(()=>{clearTimeout(u)})})}const Ku=!!globalThis.DOMException;function Pr(n){var e,i;if(Ku)return new DOMException((e=n==null?void 0:n.reason)!=null?e:"The operation was aborted.","AbortError");const t=new Error((i=n==null?void 0:n.reason)!=null?i:"The operation was aborted.");return t.name="AbortError",t}async function Xu(n,{signal:t}){return new Promise((e,i)=>{if(t){if(t.aborted){i(Pr(t));return}t.addEventListener("abort",r,{once:!0})}function r(){i(Pr(t)),clearTimeout(u)}const u=setTimeout(()=>{t==null||t.removeEventListener("abort",r),e()},n)})}class an{static create(t,e){const i=new an(t,e),r=async()=>{if(i._options.timeout>ei)throw new RangeError("The `timeout` option cannot be greater than ".concat(ei));await Promise.resolve();let f=await i._fetch();for(const p of i._options.hooks.afterResponse){const v=await p(i.request,i._options,i._decorateResponse(f.clone()));v instanceof globalThis.Response&&(f=v)}if(i._decorateResponse(f),!f.ok&&i._options.throwHttpErrors){let p=new xr(f,i.request,i._options);for(const v of i._options.hooks.beforeError)p=await v(p);throw p}if(i._options.onDownloadProgress){if(typeof i._options.onDownloadProgress!="function")throw new TypeError("The `onDownloadProgress` option must be a function");if(!Nu)throw new Error("Streams are not supported in your environment. `ReadableStream` is missing.");return i._stream(f.clone(),i._options.onDownloadProgress)}return f},h=i._options.retry.methods.includes(i.request.method.toLowerCase())?i._retry(r):r();for(const[f,p]of Object.entries(ju))h[f]=async()=>{i.request.headers.set("accept",i.request.headers.get("accept")||p);const g=(await h).clone();if(f==="json"){if(g.status===204||(await g.clone().arrayBuffer()).byteLength===0)return"";if(e.parseJson)return e.parseJson(await g.text())}return g[f]()};return h}constructor(t,e={}){var i,r,u;if(Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"abortController",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_retryCount",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_input",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._input=t,this._options={credentials:this._input.credentials||"same-origin",...e,headers:ps(this._input.headers,e.headers),hooks:Li({beforeRequest:[],beforeRetry:[],beforeError:[],afterResponse:[]},e.hooks),method:Uu((i=e.method)!=null?i:this._input.method),prefixUrl:String(e.prefixUrl||""),retry:zu(e.retry),throwHttpErrors:e.throwHttpErrors!==!1,timeout:typeof e.timeout>"u"?1e4:e.timeout,fetch:(r=e.fetch)!=null?r:globalThis.fetch.bind(globalThis)},typeof this._input!="string"&&!(this._input instanceof URL||this._input instanceof globalThis.Request))throw new TypeError("`input` must be a string, URL, or Request");if(this._options.prefixUrl&&typeof this._input=="string"){if(this._input.startsWith("/"))throw new Error("`input` must not begin with a slash when using `prefixUrl`");this._options.prefixUrl.endsWith("/")||(this._options.prefixUrl+="/"),this._input=this._options.prefixUrl+this._input}if(qu){if(this.abortController=new globalThis.AbortController,this._options.signal){const h=this._options.signal;this._options.signal.addEventListener("abort",()=>{this.abortController.abort(h.reason)})}this._options.signal=this.abortController.signal}if(Hu&&(this._options.duplex="half"),this.request=new globalThis.Request(this._input,this._options),this._options.searchParams){const f="?"+(typeof this._options.searchParams=="string"?this._options.searchParams.replace(/^\?/,""):new URLSearchParams(this._options.searchParams).toString()),p=this.request.url.replace(/(?:\?.*?)?(?=#|$)/,f);(Bu&&this._options.body instanceof globalThis.FormData||this._options.body instanceof URLSearchParams)&&!(this._options.headers&&this._options.headers["content-type"])&&this.request.headers.delete("content-type"),this.request=new globalThis.Request(new globalThis.Request(p,{...this.request}),this._options)}this._options.json!==void 0&&(this._options.body=JSON.stringify(this._options.json),this.request.headers.set("content-type",(u=this._options.headers.get("content-type"))!=null?u:"application/json"),this.request=new globalThis.Request(this.request,{body:this._options.body}))}_calculateRetryDelay(t){if(this._retryCount++,this._retryCount<this._options.retry.limit&&!(t instanceof fs)){if(t instanceof xr){if(!this._options.retry.statusCodes.includes(t.response.status))return 0;const i=t.response.headers.get("Retry-After");if(i&&this._options.retry.afterStatusCodes.includes(t.response.status)){let r=Number(i);return Number.isNaN(r)?r=Date.parse(i)-Date.now():r*=1e3,typeof this._options.retry.maxRetryAfter<"u"&&r>this._options.retry.maxRetryAfter?0:r}if(t.response.status===413)return 0}return Math.min(this._options.retry.backoffLimit,.3*2**(this._retryCount-1)*1e3)}return 0}_decorateResponse(t){return this._options.parseJson&&(t.json=async()=>this._options.parseJson(await t.text())),t}async _retry(t){try{return await t()}catch(e){const i=Math.min(this._calculateRetryDelay(e),ei);if(i!==0&&this._retryCount>0){await Xu(i,{signal:this._options.signal});for(const r of this._options.hooks.beforeRetry)if(await r({request:this.request,options:this._options,error:e,retryCount:this._retryCount})===vs)return;return this._retry(t)}throw e}}async _fetch(){for(const t of this._options.hooks.beforeRequest){const e=await t(this.request,this._options);if(e instanceof Request){this.request=e;break}if(e instanceof Response)return e}return this._options.timeout===!1?this._options.fetch(this.request.clone()):$u(this.request.clone(),this.abortController,this._options)}_stream(t,e){const i=Number(t.headers.get("content-length"))||0;let r=0;return t.status===204?(e&&e({percent:1,totalBytes:i,transferredBytes:r},new Uint8Array),new globalThis.Response(null,{status:t.status,statusText:t.statusText,headers:t.headers})):new globalThis.Response(new globalThis.ReadableStream({async start(u){const h=t.body.getReader();e&&e({percent:0,transferredBytes:0,totalBytes:i},new Uint8Array);async function f(){const{done:p,value:v}=await h.read();if(p){u.close();return}if(e){r+=v.byteLength;const g=i===0?0:r/i;e({percent:g,transferredBytes:r,totalBytes:i},v)}u.enqueue(v),await f()}await f()}}),{status:t.status,statusText:t.statusText,headers:t.headers})}}/*! MIT License © Sindre Sorhus */const ai=n=>{const t=(e,i)=>an.create(e,je(n,i));for(const e of ms)t[e]=(i,r)=>an.create(i,je(n,r,{method:e}));return t.create=e=>ai(je(e)),t.extend=e=>ai(je(n,e)),t.stop=vs,t},Ju=ai();class Yu{constructor(t,e,{tabInsertsSuggestions:i,defaultFirstOption:r}={}){this.input=t,this.list=e,this.tabInsertsSuggestions=i!=null?i:!0,this.defaultFirstOption=r!=null?r:!1,this.isComposing=!1,e.id||(e.id="combobox-".concat(Math.random().toString().slice(2,6))),this.ctrlBindings=!!navigator.userAgent.match(/Macintosh/),this.keyboardEventHandler=u=>Gu(u,this),this.compositionEventHandler=u=>tl(u,this),this.inputHandler=this.clearSelection.bind(this),t.setAttribute("role","combobox"),t.setAttribute("aria-controls",e.id),t.setAttribute("aria-expanded","false"),t.setAttribute("aria-autocomplete","list"),t.setAttribute("aria-haspopup","listbox")}destroy(){this.clearSelection(),this.stop(),this.input.removeAttribute("role"),this.input.removeAttribute("aria-controls"),this.input.removeAttribute("aria-expanded"),this.input.removeAttribute("aria-autocomplete"),this.input.removeAttribute("aria-haspopup")}start(){this.input.setAttribute("aria-expanded","true"),this.input.addEventListener("compositionstart",this.compositionEventHandler),this.input.addEventListener("compositionend",this.compositionEventHandler),this.input.addEventListener("input",this.inputHandler),this.input.addEventListener("keydown",this.keyboardEventHandler),this.list.addEventListener("click",Or),this.indicateDefaultOption()}stop(){this.clearSelection(),this.input.setAttribute("aria-expanded","false"),this.input.removeEventListener("compositionstart",this.compositionEventHandler),this.input.removeEventListener("compositionend",this.compositionEventHandler),this.input.removeEventListener("input",this.inputHandler),this.input.removeEventListener("keydown",this.keyboardEventHandler),this.list.removeEventListener("click",Or)}indicateDefaultOption(){var t;this.defaultFirstOption&&((t=Array.from(this.list.querySelectorAll('[role="option"]:not([aria-disabled="true"])')).filter(ni)[0])===null||t===void 0||t.setAttribute("data-combobox-option-default","true"))}navigate(t=1){const e=Array.from(this.list.querySelectorAll('[aria-selected="true"]')).filter(ni)[0],i=Array.from(this.list.querySelectorAll('[role="option"]')).filter(ni),r=i.indexOf(e);if(r===i.length-1&&t===1||r===0&&t===-1){this.clearSelection(),this.input.focus();return}let u=t===1?0:i.length-1;if(e&&r>=0){const f=r+t;f>=0&&f<i.length&&(u=f)}const h=i[u];if(h)for(const f of i)f.removeAttribute("data-combobox-option-default"),h===f?(this.input.setAttribute("aria-activedescendant",h.id),h.setAttribute("aria-selected","true"),Zu(h),el(this.list,h)):f.removeAttribute("aria-selected")}clearSelection(){this.input.removeAttribute("aria-activedescendant");for(const t of this.list.querySelectorAll('[aria-selected="true"]'))t.removeAttribute("aria-selected");this.indicateDefaultOption()}}function Gu(n,t){if(!(n.shiftKey||n.metaKey||n.altKey)&&!(!t.ctrlBindings&&n.ctrlKey)&&!t.isComposing)switch(n.key){case"Enter":Ir(t.input,t.list)&&n.preventDefault();break;case"Tab":t.tabInsertsSuggestions&&Ir(t.input,t.list)&&n.preventDefault();break;case"Escape":t.clearSelection();break;case"ArrowDown":t.navigate(1),n.preventDefault();break;case"ArrowUp":t.navigate(-1),n.preventDefault();break;case"n":t.ctrlBindings&&n.ctrlKey&&(t.navigate(1),n.preventDefault());break;case"p":t.ctrlBindings&&n.ctrlKey&&(t.navigate(-1),n.preventDefault());break;default:if(n.ctrlKey)break;t.clearSelection()}}function Or(n){if(!(n.target instanceof Element))return;const t=n.target.closest('[role="option"]');t&&t.getAttribute("aria-disabled")!=="true"&&Qu(t,{event:n})}function Ir(n,t){const e=t.querySelector('[aria-selected="true"], [data-combobox-option-default="true"]');return e?(e.getAttribute("aria-disabled")==="true"||e.click(),!0):!1}function Qu(n,t){n.dispatchEvent(new CustomEvent("combobox-commit",{bubbles:!0,detail:t}))}function Zu(n){n.dispatchEvent(new Event("combobox-select",{bubbles:!0}))}function ni(n){return!n.hidden&&!(n instanceof HTMLInputElement&&n.type==="hidden")&&(n.offsetWidth>0||n.offsetHeight>0)}function tl(n,t){t.isComposing=n.type==="compositionstart",document.getElementById(t.input.getAttribute("aria-controls")||"")&&t.clearSelection()}function el(n,t){nl(n,t)||(n.scrollTop=t.offsetTop)}function nl(n,t){const e=n.scrollTop,i=e+n.clientHeight,r=t.offsetTop,u=r+t.clientHeight;return r>=e&&u<=i}const il=/\s|\(|\[/;function rl(n,t,e,{multiWord:i,lookBackIndex:r,lastMatchPosition:u}={multiWord:!1,lookBackIndex:0,lastMatchPosition:null}){let h=n.lastIndexOf(t,e-1);if(h===-1||h<r)return;if(i){if(u!=null){if(u===h)return;h=u-t.length}if(n[h+1]===" "&&e>=h+t.length+1||n.lastIndexOf("\n",e-1)>h||n.lastIndexOf(".",e-1)>h)return}else if(n.lastIndexOf(" ",e-1)>h)return;const f=n[h-1];return f&&!il.test(f)?void 0:{text:n.substring(h+t.length,e),position:h+t.length}}class sl extends HTMLElement{}class ol extends Event{constructor(){super("update")}}const ii=new WeakMap;var Re,Pe,Oe,It,B,ci,ne,oe,ae,ui,ce,Je,Ye,Ge,Ie,zt;const zi=class zi extends sl{constructor(){super(...arguments);nt(this,B);nt(this,Re,new MutationObserver(()=>V(this,B,Ye).call(this)));nt(this,Pe,new ResizeObserver(()=>V(this,B,Je).call(this)));nt(this,Oe);nt(this,It);nt(this,oe,0);nt(this,ae,0);nt(this,ce,!1);nt(this,Ie,()=>V(this,B,Ge).call(this));nt(this,zt,e=>{V(this,B,ne).call(this,i=>{(e.target===document||e.target===window||e.target instanceof Node&&e.target.contains(i))&&V(this,B,Je).call(this)})})}static for(e){let i=ii.get(e);return i||(i=new zi,i.connect(e),ii.set(e,i)),i}connect(e){ft(this,Oe,new WeakRef(e)),ft(this,It,document.createElement("div")),N(this,It).style.position="absolute",N(this,It).style.pointerEvents="none",e.after(N(this,It)),N(this,It).appendChild(this)}forceUpdate(){V(this,B,Ye).call(this),V(this,B,Ge).call(this)}connectedCallback(){V(this,B,ne).call(this,e=>{this.style.pointerEvents="none",this.style.userSelect="none",this.style.overflow="hidden",this.style.display="block",this.style.visibility="hidden",e instanceof HTMLTextAreaElement?(this.style.whiteSpace="pre-wrap",this.style.wordWrap="break-word"):(this.style.whiteSpace="nowrap",this.style.display="table-cell",this.style.verticalAlign="middle"),this.setAttribute("aria-hidden","true"),V(this,B,Ye).call(this),V(this,B,Ge).call(this),N(this,Re).observe(e,{attributeFilter:["style","dir"]}),N(this,Pe).observe(e),document.addEventListener("scroll",N(this,zt),{capture:!0}),window.addEventListener("resize",N(this,zt),{capture:!0}),e.addEventListener("input",N(this,Ie),{capture:!0})})}disconnectedCallback(){var i;(i=N(this,It))==null||i.remove(),N(this,Re).disconnect(),N(this,Pe).disconnect(),document.removeEventListener("scroll",N(this,zt),{capture:!0}),window.removeEventListener("resize",N(this,zt),{capture:!0});const e=N(this,B,ci);e&&(e.removeEventListener("input",N(this,Ie),{capture:!0}),ii.delete(e))}};Re=new WeakMap,Pe=new WeakMap,Oe=new WeakMap,It=new WeakMap,B=new WeakSet,ci=function(){var e;return(e=N(this,Oe))==null?void 0:e.deref()},ne=function(e){const i=N(this,B,ci);return i?e(i):this.remove()},oe=new WeakMap,ae=new WeakMap,ui=function(){V(this,B,ne).call(this,e=>{const i=window.getComputedStyle(e);this.style.height=i.height,this.style.width=i.width,e.clientHeight!==this.clientHeight&&(this.style.height="calc(".concat(i.height," + ").concat(e.clientHeight-this.clientHeight,"px)")),e.clientWidth!==this.clientWidth&&(this.style.width="calc(".concat(i.width," + ").concat(e.clientWidth-this.clientWidth,"px)"));const r=e.getBoundingClientRect(),u=this.getBoundingClientRect();ft(this,oe,N(this,oe)+r.left-u.left),ft(this,ae,N(this,ae)+r.top-u.top),this.style.transform="translate(".concat(N(this,oe),"px, ").concat(N(this,ae),"px)"),this.scrollTop=e.scrollTop,this.scrollLeft=e.scrollLeft,this.dispatchEvent(new ol)})},ce=new WeakMap,Je=function(){N(this,ce)||(ft(this,ce,!0),requestAnimationFrame(()=>{V(this,B,ui).call(this),ft(this,ce,!1)}))},Ye=function(){V(this,B,ne).call(this,e=>{const i=window.getComputedStyle(e);for(const r of al)this.style[r]=i[r];V(this,B,Je).call(this)})},Ge=function(){V(this,B,ne).call(this,e=>{this.textContent=e.value,V(this,B,ui).call(this)})},Ie=new WeakMap,zt=new WeakMap;let cn=zi;const al=["direction","writingMode","unicodeBidi","textOrientation","boxSizing","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"];try{customElements.define("input-style-clone",cn)}catch(n){if(!(n instanceof DOMException&&n.name==="NotSupportedError"))throw n}var Et,ue,le,it,hi,bs,di,_e;const Cn=class Cn{constructor(t,e=0,i=e){nt(this,it);nt(this,Et);nt(this,ue);nt(this,le);ft(this,Et,t),ft(this,ue,e),ft(this,le,i)}static fromSelection(t){const{selectionStart:e,selectionEnd:i}=t;return new Cn(t,e!=null?e:void 0,i!=null?i:void 0)}get collapsed(){return this.startOffset===this.endOffset}get commonAncestorContainer(){return N(this,Et)}get endContainer(){return N(this,Et)}get startContainer(){return N(this,Et)}get startOffset(){return N(this,ue)}get endOffset(){return N(this,le)}setStartOffset(t){ft(this,ue,V(this,it,di).call(this,t))}setEndOffset(t){ft(this,le,V(this,it,di).call(this,t))}collapse(t=!1){t?this.setEndOffset(this.startOffset):this.setStartOffset(this.endOffset)}cloneContents(){return V(this,it,_e).call(this).cloneContents()}cloneRange(){return new Cn(N(this,Et),this.startOffset,this.endOffset)}getBoundingClientRect(){return V(this,it,_e).call(this).getBoundingClientRect()}getClientRects(){return V(this,it,_e).call(this).getClientRects()}toString(){return V(this,it,_e).call(this).toString()}getStyleClone(){return N(this,it,hi)}};Et=new WeakMap,ue=new WeakMap,le=new WeakMap,it=new WeakSet,hi=function(){return cn.for(N(this,Et))},bs=function(){return N(this,it,hi)},di=function(t){return Math.max(0,Math.min(t,N(this,Et).value.length))},_e=function(){const t=document.createRange(),e=N(this,it,bs).childNodes[0];return e&&(t.setStart(e,this.startOffset),t.setEnd(e,this.endOffset)),t};let li=Cn;const Ue=new WeakMap;class cl{constructor(t,e){this.expander=t,this.input=e,this.combobox=null,this.menu=null,this.match=null,this.justPasted=!1,this.lookBackIndex=0,this.oninput=this.onInput.bind(this),this.onpaste=this.onPaste.bind(this),this.onkeydown=this.onKeydown.bind(this),this.oncommit=this.onCommit.bind(this),this.onmousedown=this.onMousedown.bind(this),this.onblur=this.onBlur.bind(this),this.interactingWithList=!1,e.addEventListener("paste",this.onpaste),e.addEventListener("input",this.oninput),e.addEventListener("keydown",this.onkeydown),e.addEventListener("blur",this.onblur)}destroy(){this.input.removeEventListener("paste",this.onpaste),this.input.removeEventListener("input",this.oninput),this.input.removeEventListener("keydown",this.onkeydown),this.input.removeEventListener("blur",this.onblur)}dismissMenu(){this.deactivate()&&(this.lookBackIndex=this.input.selectionEnd||this.lookBackIndex)}activate(t,e){var i,r;this.input!==document.activeElement&&this.input!==((r=(i=document.activeElement)===null||i===void 0?void 0:i.shadowRoot)===null||r===void 0?void 0:r.activeElement)||(this.deactivate(),this.menu=e,e.id||(e.id="text-expander-".concat(Math.floor(Math.random()*1e5).toString())),this.expander.append(e),this.combobox=new Yu(this.input,e),this.expander.dispatchEvent(new Event("text-expander-activate")),this.positionMenu(e,t.position),this.combobox.start(),e.addEventListener("combobox-commit",this.oncommit),e.addEventListener("mousedown",this.onmousedown),this.combobox.navigate(1))}positionMenu(t,e){const i=new li(this.input,e).getBoundingClientRect(),r={left:i.left,top:i.top+i.height},u=t.getBoundingClientRect(),h={left:r.left-u.left,top:r.top-u.top};if(h.left!==0||h.top!==0){const f=getComputedStyle(t);t.style.left=f.left?"calc(".concat(f.left," + ").concat(h.left,"px)"):"".concat(h.left,"px"),t.style.top=f.top?"calc(".concat(f.top," + ").concat(h.top,"px)"):"".concat(h.top,"px")}}deactivate(){const t=this.menu;return!t||!this.combobox?!1:(this.expander.dispatchEvent(new Event("text-expander-deactivate")),this.menu=null,t.removeEventListener("combobox-commit",this.oncommit),t.removeEventListener("mousedown",this.onmousedown),this.combobox.destroy(),this.combobox=null,t.remove(),!0)}onCommit({target:t}){var e;const i=t;if(!(i instanceof HTMLElement)||!this.combobox)return;const r=this.match;if(!r)return;const u=this.input.value.substring(0,r.position-r.key.length),h=this.input.value.substring(r.position+r.text.length),f={item:i,key:r.key,value:null,continue:!1};if(!this.expander.dispatchEvent(new CustomEvent("text-expander-value",{cancelable:!0,detail:f}))||!f.value)return;let v=(e=this.expander.getAttribute("suffix"))!==null&&e!==void 0?e:" ";f.continue&&(v="");const g="".concat(f.value).concat(v);this.input.value=u+g+h;const w=u.length+g.length;this.deactivate(),this.input.focus({preventScroll:!0}),this.input.selectionStart=w,this.input.selectionEnd=w,f.continue||(this.lookBackIndex=w,this.match=null),this.expander.dispatchEvent(new CustomEvent("text-expander-committed",{cancelable:!1,detail:{input:this.input}}))}onBlur(){if(this.interactingWithList){this.interactingWithList=!1;return}this.deactivate()}onPaste(){this.justPasted=!0}async onInput(){if(this.justPasted){this.justPasted=!1;return}const t=this.findMatch();if(t){this.match=t;const e=await this.notifyProviders(t);if(!this.match)return;e?this.activate(t,e):this.deactivate()}else this.match=null,this.deactivate()}findMatch(){const t=this.input.selectionEnd||0,e=this.input.value;t<=this.lookBackIndex&&(this.lookBackIndex=t-1);for(const{key:i,multiWord:r}of this.expander.keys){const u=rl(e,i,t,{multiWord:r,lookBackIndex:this.lookBackIndex,lastMatchPosition:this.match?this.match.position:null});if(u)return{text:u.text,key:i,position:u.position}}}async notifyProviders(t){const e=[],i=p=>e.push(p),r=new CustomEvent("text-expander-change",{cancelable:!0,detail:{provide:i,text:t.text,key:t.key}});return this.expander.dispatchEvent(r)?(await Promise.all(e)).filter(p=>p.matched).map(p=>p.fragment)[0]:void 0}onMousedown(){this.interactingWithList=!0}onKeydown(t){t.key==="Escape"&&(this.match=null,this.deactivate()&&(this.lookBackIndex=this.input.selectionEnd||this.lookBackIndex,t.stopImmediatePropagation(),t.preventDefault()))}}class Mr extends HTMLElement{get keys(){const t=this.getAttribute("keys"),e=t?t.split(" "):[],i=this.getAttribute("multiword"),r=i?i.split(" "):[],u=r.length===0&&this.hasAttribute("multiword");return e.map(h=>({key:h,multiWord:u||r.includes(h)}))}set keys(t){this.setAttribute("keys",t)}connectedCallback(){const t=this.querySelector('input[type="text"], textarea');if(!(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement))return;const e=new cl(this,t);Ue.set(this,e)}disconnectedCallback(){const t=Ue.get(this);t&&(t.destroy(),Ue.delete(this))}dismiss(){const t=Ue.get(this);t&&t.dismissMenu()}}window.customElements.get("text-expander")||(window.TextExpanderElement=Mr,window.customElements.define("text-expander",Mr));var ul=Object.defineProperty,ll=(n,t,e)=>t in n?ul(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,hl=(n,t,e)=>(ll(n,t+"",e),e);let dl=class extends HTMLElement{constructor(){super(...arguments),hl(this,"onToggle",t=>{const e=t.target;e.open&&this.querySelectorAll(":scope > :is(ui-disclosure, details)").forEach(i=>{i.toggleAttribute("open",i===e),this.required&&i.toggleAttribute("disabled",i===e)})})}connectedCallback(){this.addEventListener("toggle",this.onToggle,{capture:!0})}disconnectedCallback(){this.removeEventListener("toggle",this.onToggle,{capture:!0})}get required(){return this.hasAttribute("required")}};function Fr(n,t,e={}){const i=new WeakMap,r=Es(e);n instanceof HTMLCollection&&(n=Array.from(n)),n.forEach(u=>{getComputedStyle(u).display!=="none"&&i.set(u,u.getBoundingClientRect())}),t(),n.forEach(u=>{const h=i.get(u);if(!h)return;const f=h.left-u.getBoundingClientRect().left,p=h.top-u.getBoundingClientRect().top;if(!f&&!p)return;const v=u.style;v.transitionDuration="0s",v.transform="translate(".concat(f,"px, ").concat(p,"px)"),requestAnimationFrame(async()=>{u.classList.add(r+"move"),v.transitionDuration=v.transform="",await Ss(u),u.classList.remove(r+"move")})})}function un(n){n._currentTransition&&(n.classList.remove(...["active","from","to"].map(t=>n._currentTransition+t)),n._currentTransition=null)}async function ys(n,t,e={}){const i=Es(e)+t+"-",r=n.classList;un(n),n._currentTransition=i,r.add(i+"active",i+"from"),await ws(),r.add(i+"to"),r.remove(i+"from"),await Ss(n),r.remove(i+"to",i+"active"),n._currentTransition===i&&(n._currentTransition=null)}function Kt(n,t={}){return ys(n,"enter",t)}function he(n,t={}){return ys(n,"leave",t)}function ws(){return new Promise(n=>requestAnimationFrame(()=>requestAnimationFrame(()=>n())))}async function Ss(n){if(getComputedStyle(n).transitionDuration.startsWith("0s"))return;let t=!1;const e=i=>t||(t=i.target===n);if(n.addEventListener("transitionstart",e),await ws(),n.removeEventListener("transitionstart",e),!!t)return new Promise(i=>{const r=u=>{u.target===n&&(i(),n.removeEventListener("transitionend",r),n.removeEventListener("transitioncancel",r))};n.addEventListener("transitionend",r),n.addEventListener("transitioncancel",r)})}function Es(n){return n!=null&&n.prefix?n.prefix+"-":""}var fl=Object.defineProperty,pl=(n,t,e)=>t in n?fl(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,Qe=(n,t,e)=>(pl(n,typeof t!="symbol"?t+"":t,e),e);const Ts=class extends HTMLElement{constructor(){super(),Qe(this,"added",new Set),Qe(this,"timeouts",new Map),Qe(this,"index",0),new MutationObserver(n=>{n.forEach(t=>{t.addedNodes.forEach(e=>{e instanceof HTMLElement&&!this.added.has(e)&&this.show(e)})})}).observe(this,{childList:!0})}connectedCallback(){this.hasAttribute("role")||this.setAttribute("role","status"),this.hasAttribute("aria-live")||this.setAttribute("aria-live","polite"),this.hasAttribute("aria-relevant")||this.setAttribute("aria-relevant","additions");for(const n of this.children)this.show(n,{animate:!1})}show(n,t={}){const e=t.key||n.dataset.key||String(this.index++);this.dismiss(e),n.dataset.key=e,this.contains(n)?Kt(n):t.animate===!1?this.append(n):Fr(this.children,()=>{this.append(n),Kt(n)}),this.added.add(n);const i=Number(t.duration!==void 0?t.duration:n.dataset.duration||Ts.duration);return i>0&&(this.startTimeout(n,i),n.addEventListener("mouseenter",this.clearTimeout.bind(this,n)),n.addEventListener("focusin",this.clearTimeout.bind(this,n)),n.addEventListener("mouseleave",this.startTimeout.bind(this,n,i)),n.addEventListener("focusout",this.startTimeout.bind(this,n,i))),e}dismiss(n){if(typeof n=="string"){this.querySelectorAll('[data-key="'.concat(n,'"]')).forEach(t=>this.dismiss(t));return}this.added.delete(n),Fr(this.children,()=>he(n).then(()=>n.remove())),this.clearTimeout(n)}clear(){Array.from(this.children).forEach(n=>{this.dismiss(n)})}speak(n){const t=document.createElement("div");Object.assign(t.style,{clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",width:"1px"}),t.textContent=n,this.show(t)}startTimeout(n,t){this.clearTimeout(n),this.timeouts.set(n,window.setTimeout(()=>{this.dismiss(n)},t))}clearTimeout(n){this.timeouts.has(n)&&clearTimeout(this.timeouts.get(n))}};let Cs=Ts;Qe(Cs,"duration",1e4);function _s(n){return n.altKey||n.ctrlKey||n.metaKey||n.shiftKey||n.button!==void 0&&n.button!==0}var ml=Object.defineProperty,vl=(n,t,e)=>t in n?ml(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,gl=(n,t,e)=>(vl(n,t+"",e),e);class bl extends HTMLElement{constructor(){super(...arguments),gl(this,"onButtonClick",t=>{!_s(t)&&!this.disabled&&(this.open=!this.open,t.preventDefault())})}static get observedAttributes(){return["open"]}connectedCallback(){this.content.hidden=!this.open,this.button.setAttribute("aria-expanded",String(this.open)),this.button.addEventListener("click",this.onButtonClick)}disconnectedCallback(){un(this.content),this.button.removeAttribute("aria-expanded"),this.button.removeEventListener("click",this.onButtonClick)}get open(){return this.hasAttribute("open")}set open(t){t?this.setAttribute("open",""):this.removeAttribute("open")}get disabled(){return this.hasAttribute("disabled")}attributeChangedCallback(t,e,i){t==="open"&&(i!==null?this.wasOpened():this.wasClosed())}wasOpened(){this.content.hidden&&(this.content.hidden=!1,Kt(this.content)),this.button.setAttribute("aria-expanded","true"),this.dispatchEvent(new Event("toggle"))}wasClosed(){this.content.hidden||he(this.content).then(()=>this.content.hidden=!0),this.button.setAttribute("aria-expanded","false"),this.dispatchEvent(new Event("toggle"))}get button(){return this.querySelector("button, [role=button]")}get content(){return this.children[1]}}/*!
* tabbable 5.3.3
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var ks=["input","select","textarea","a[href]","button","[tabindex]:not(slot)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],ln=ks.join(","),As=typeof Element>"u",Xt=As?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,fi=!As&&Element.prototype.getRootNode?function(n){return n.getRootNode()}:function(n){return n.ownerDocument},Ls=function(t,e,i){var r=Array.prototype.slice.apply(t.querySelectorAll(ln));return e&&Xt.call(t,ln)&&r.unshift(t),r=r.filter(i),r},xs=function n(t,e,i){for(var r=[],u=Array.from(t);u.length;){var h=u.shift();if(h.tagName==="SLOT"){var f=h.assignedElements(),p=f.length?f:h.children,v=n(p,!0,i);i.flatten?r.push.apply(r,v):r.push({scope:h,candidates:v})}else{var g=Xt.call(h,ln);g&&i.filter(h)&&(e||!t.includes(h))&&r.push(h);var w=h.shadowRoot||typeof i.getShadowRoot=="function"&&i.getShadowRoot(h),S=!i.shadowRootFilter||i.shadowRootFilter(h);if(w&&S){var E=n(w===!0?h.children:w.children,!0,i);i.flatten?r.push.apply(r,E):r.push({scope:h,candidates:E})}else u.unshift.apply(u,h.children)}}return r},Rs=function(t,e){return t.tabIndex<0&&(e||/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||t.isContentEditable)&&isNaN(parseInt(t.getAttribute("tabindex"),10))?0:t.tabIndex},yl=function(t,e){return t.tabIndex===e.tabIndex?t.documentOrder-e.documentOrder:t.tabIndex-e.tabIndex},Ps=function(t){return t.tagName==="INPUT"},wl=function(t){return Ps(t)&&t.type==="hidden"},Sl=function(t){var e=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(i){return i.tagName==="SUMMARY"});return e},El=function(t,e){for(var i=0;i<t.length;i++)if(t[i].checked&&t[i].form===e)return t[i]},Tl=function(t){if(!t.name)return!0;var e=t.form||fi(t),i=function(f){return e.querySelectorAll('input[type="radio"][name="'+f+'"]')},r;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")r=i(window.CSS.escape(t.name));else try{r=i(t.name)}catch(h){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",h.message),!1}var u=El(r,t.form);return!u||u===t},Cl=function(t){return Ps(t)&&t.type==="radio"},_l=function(t){return Cl(t)&&!Tl(t)},Dr=function(t){var e=t.getBoundingClientRect(),i=e.width,r=e.height;return i===0&&r===0},kl=function(t,e){var i=e.displayCheck,r=e.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var u=Xt.call(t,"details>summary:first-of-type"),h=u?t.parentElement:t;if(Xt.call(h,"details:not([open]) *"))return!0;var f=fi(t).host,p=(f==null?void 0:f.ownerDocument.contains(f))||t.ownerDocument.contains(t);if(!i||i==="full"){if(typeof r=="function"){for(var v=t;t;){var g=t.parentElement,w=fi(t);if(g&&!g.shadowRoot&&r(g)===!0)return Dr(t);t.assignedSlot?t=t.assignedSlot:!g&&w!==t.ownerDocument?t=w.host:t=g}t=v}if(p)return!t.getClientRects().length}else if(i==="non-zero-area")return Dr(t);return!1},Al=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var e=t.parentElement;e;){if(e.tagName==="FIELDSET"&&e.disabled){for(var i=0;i<e.children.length;i++){var r=e.children.item(i);if(r.tagName==="LEGEND")return Xt.call(e,"fieldset[disabled] *")?!0:!r.contains(t)}return!0}e=e.parentElement}return!1},hn=function(t,e){return!(e.disabled||wl(e)||kl(e,t)||Sl(e)||Al(e))},pi=function(t,e){return!(_l(e)||Rs(e)<0||!hn(t,e))},Ll=function(t){var e=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(e)||e>=0)},xl=function n(t){var e=[],i=[];return t.forEach(function(r,u){var h=!!r.scope,f=h?r.scope:r,p=Rs(f,h),v=h?n(r.candidates):f;p===0?h?e.push.apply(e,v):e.push(f):i.push({documentOrder:u,tabIndex:p,item:r,isScope:h,content:v})}),i.sort(yl).reduce(function(r,u){return u.isScope?r.push.apply(r,u.content):r.push(u.content),r},[]).concat(e)},Rl=function(t,e){e=e||{};var i;return e.getShadowRoot?i=xs([t],e.includeContainer,{filter:pi.bind(null,e),flatten:!1,getShadowRoot:e.getShadowRoot,shadowRootFilter:Ll}):i=Ls(t,e.includeContainer,pi.bind(null,e)),xl(i)},xi=function(t,e){e=e||{};var i;return e.getShadowRoot?i=xs([t],e.includeContainer,{filter:hn.bind(null,e),flatten:!0,getShadowRoot:e.getShadowRoot}):i=Ls(t,e.includeContainer,hn.bind(null,e)),i},We=function(t,e){if(e=e||{},!t)throw new Error("No node provided");return Xt.call(t,ln)===!1?!1:pi(e,t)},Pl=ks.concat("iframe").join(","),Ze=function(t,e){if(e=e||{},!t)throw new Error("No node provided");return Xt.call(t,Pl)===!1?!1:hn(e,t)},Ol=Object.defineProperty,Il=(n,t,e)=>t in n?Ol(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,tn=(n,t,e)=>(Il(n,typeof t!="symbol"?t+"":t,e),e);const Os=class extends HTMLElement{constructor(){super(...arguments),tn(this,"search",""),tn(this,"searchTimeout"),tn(this,"onKeyDown",t=>{if(!this.hidden){if(t.key==="ArrowUp"){this.navigate(-1),t.preventDefault();return}if(t.key==="ArrowDown"){this.navigate(1),t.preventDefault();return}t.key.length>1||t.ctrlKey||t.metaKey||t.altKey||(this.search+=t.key.toLowerCase(),t.preventDefault(),clearTimeout(this.searchTimeout),this.searchTimeout=window.setTimeout(()=>{this.search=""},Os.searchDelay),this.items.some(e=>{var i;return((i=e.textContent)==null?void 0:i.trim().toLowerCase().indexOf(this.search))===0?(e.focus(),!0):!1}))}})}connectedCallback(){this.hasAttribute("role")||this.setAttribute("role","menu"),this.hasAttribute("tabindex")||this.setAttribute("tabindex","-1"),this.items.forEach(t=>{t.hasAttribute("tabindex")||t.setAttribute("tabindex","-1")}),this.addEventListener("keydown",this.onKeyDown)}disconnectedCallback(){this.removeEventListener("keydown",this.onKeyDown)}get items(){return Array.from(this.querySelectorAll("[role^=menuitem]")).filter(t=>Ze(t))}navigate(t){var e;const i=this.items;let r=(document.activeElement instanceof HTMLElement?i.indexOf(document.activeElement):-1)+t;r<0&&(r=i.length-1),r>=i.length&&(r=0),(e=i[r])==null||e.focus()}};let Is=Os;tn(Is,"searchDelay",800);/*!
* focus-trap 6.9.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function Hr(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function qr(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Hr(Object(e),!0).forEach(function(i){Ml(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Hr(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function Ml(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}var Nr=function(){var n=[];return{activateTrap:function(e){if(n.length>0){var i=n[n.length-1];i!==e&&i.pause()}var r=n.indexOf(e);r===-1||n.splice(r,1),n.push(e)},deactivateTrap:function(e){var i=n.indexOf(e);i!==-1&&n.splice(i,1),n.length>0&&n[n.length-1].unpause()}}}(),Fl=function(t){return t.tagName&&t.tagName.toLowerCase()==="input"&&typeof t.select=="function"},Dl=function(t){return t.key==="Escape"||t.key==="Esc"||t.keyCode===27},Hl=function(t){return t.key==="Tab"||t.keyCode===9},Br=function(t){return setTimeout(t,0)},jr=function(t,e){var i=-1;return t.every(function(r,u){return e(r)?(i=u,!1):!0}),i},Se=function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];return typeof t=="function"?t.apply(void 0,i):t},Ve=function(t){return t.target.shadowRoot&&typeof t.composedPath=="function"?t.composedPath()[0]:t.target},ql=function(t,e){var i=(e==null?void 0:e.document)||document,r=qr({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},e),u={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},h,f=function(C,k,O){return C&&C[k]!==void 0?C[k]:r[O||k]},p=function(C){return u.containerGroups.findIndex(function(k){var O=k.container,H=k.tabbableNodes;return O.contains(C)||H.find(function(F){return F===C})})},v=function(C){var k=r[C];if(typeof k=="function"){for(var O=arguments.length,H=new Array(O>1?O-1:0),F=1;F<O;F++)H[F-1]=arguments[F];k=k.apply(void 0,H)}if(k===!0&&(k=void 0),!k){if(k===void 0||k===!1)return k;throw new Error("`".concat(C,"` was specified but was not a node, or did not return a node"))}var W=k;if(typeof k=="string"&&(W=i.querySelector(k),!W))throw new Error("`".concat(C,"` as selector refers to no known node"));return W},g=function(){var C=v("initialFocus");if(C===!1)return!1;if(C===void 0)if(p(i.activeElement)>=0)C=i.activeElement;else{var k=u.tabbableGroups[0],O=k&&k.firstTabbableNode;C=O||v("fallbackFocus")}if(!C)throw new Error("Your focus-trap needs to have at least one focusable element");return C},w=function(){if(u.containerGroups=u.containers.map(function(C){var k=Rl(C,r.tabbableOptions),O=xi(C,r.tabbableOptions);return{container:C,tabbableNodes:k,focusableNodes:O,firstTabbableNode:k.length>0?k[0]:null,lastTabbableNode:k.length>0?k[k.length-1]:null,nextTabbableNode:function(F){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,Y=O.findIndex(function(Q){return Q===F});if(!(Y<0))return W?O.slice(Y+1).find(function(Q){return We(Q,r.tabbableOptions)}):O.slice(0,Y).reverse().find(function(Q){return We(Q,r.tabbableOptions)})}}}),u.tabbableGroups=u.containerGroups.filter(function(C){return C.tabbableNodes.length>0}),u.tabbableGroups.length<=0&&!v("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},S=function R(C){if(C!==!1&&C!==i.activeElement){if(!C||!C.focus){R(g());return}C.focus({preventScroll:!!r.preventScroll}),u.mostRecentlyFocusedNode=C,Fl(C)&&C.select()}},E=function(C){var k=v("setReturnFocus",C);return k||(k===!1?!1:C)},x=function(C){var k=Ve(C);if(!(p(k)>=0)){if(Se(r.clickOutsideDeactivates,C)){h.deactivate({returnFocus:r.returnFocusOnDeactivate&&!Ze(k,r.tabbableOptions)});return}Se(r.allowOutsideClick,C)||C.preventDefault()}},T=function(C){var k=Ve(C),O=p(k)>=0;O||k instanceof Document?O&&(u.mostRecentlyFocusedNode=k):(C.stopImmediatePropagation(),S(u.mostRecentlyFocusedNode||g()))},b=function(C){var k=Ve(C);w();var O=null;if(u.tabbableGroups.length>0){var H=p(k),F=H>=0?u.containerGroups[H]:void 0;if(H<0)C.shiftKey?O=u.tabbableGroups[u.tabbableGroups.length-1].lastTabbableNode:O=u.tabbableGroups[0].firstTabbableNode;else if(C.shiftKey){var W=jr(u.tabbableGroups,function(dt){var rt=dt.firstTabbableNode;return k===rt});if(W<0&&(F.container===k||Ze(k,r.tabbableOptions)&&!We(k,r.tabbableOptions)&&!F.nextTabbableNode(k,!1))&&(W=H),W>=0){var Y=W===0?u.tabbableGroups.length-1:W-1,Q=u.tabbableGroups[Y];O=Q.lastTabbableNode}}else{var K=jr(u.tabbableGroups,function(dt){var rt=dt.lastTabbableNode;return k===rt});if(K<0&&(F.container===k||Ze(k,r.tabbableOptions)&&!We(k,r.tabbableOptions)&&!F.nextTabbableNode(k))&&(K=H),K>=0){var kt=K===u.tabbableGroups.length-1?0:K+1,At=u.tabbableGroups[kt];O=At.firstTabbableNode}}}else O=v("fallbackFocus");O&&(C.preventDefault(),S(O))},y=function(C){if(Dl(C)&&Se(r.escapeDeactivates,C)!==!1){C.preventDefault(),h.deactivate();return}if(Hl(C)){b(C);return}},A=function(C){var k=Ve(C);p(k)>=0||Se(r.clickOutsideDeactivates,C)||Se(r.allowOutsideClick,C)||(C.preventDefault(),C.stopImmediatePropagation())},P=function(){if(u.active)return Nr.activateTrap(h),u.delayInitialFocusTimer=r.delayInitialFocus?Br(function(){S(g())}):S(g()),i.addEventListener("focusin",T,!0),i.addEventListener("mousedown",x,{capture:!0,passive:!1}),i.addEventListener("touchstart",x,{capture:!0,passive:!1}),i.addEventListener("click",A,{capture:!0,passive:!1}),i.addEventListener("keydown",y,{capture:!0,passive:!1}),h},D=function(){if(u.active)return i.removeEventListener("focusin",T,!0),i.removeEventListener("mousedown",x,!0),i.removeEventListener("touchstart",x,!0),i.removeEventListener("click",A,!0),i.removeEventListener("keydown",y,!0),h};return h={get active(){return u.active},get paused(){return u.paused},activate:function(C){if(u.active)return this;var k=f(C,"onActivate"),O=f(C,"onPostActivate"),H=f(C,"checkCanFocusTrap");H||w(),u.active=!0,u.paused=!1,u.nodeFocusedBeforeActivation=i.activeElement,k&&k();var F=function(){H&&w(),P(),O&&O()};return H?(H(u.containers.concat()).then(F,F),this):(F(),this)},deactivate:function(C){if(!u.active)return this;var k=qr({onDeactivate:r.onDeactivate,onPostDeactivate:r.onPostDeactivate,checkCanReturnFocus:r.checkCanReturnFocus},C);clearTimeout(u.delayInitialFocusTimer),u.delayInitialFocusTimer=void 0,D(),u.active=!1,u.paused=!1,Nr.deactivateTrap(h);var O=f(k,"onDeactivate"),H=f(k,"onPostDeactivate"),F=f(k,"checkCanReturnFocus"),W=f(k,"returnFocus","returnFocusOnDeactivate");O&&O();var Y=function(){Br(function(){W&&S(E(u.nodeFocusedBeforeActivation)),H&&H()})};return W&&F?(F(E(u.nodeFocusedBeforeActivation)).then(Y,Y),this):(Y(),this)},pause:function(){return u.paused||!u.active?this:(u.paused=!0,D(),this)},unpause:function(){return!u.paused||!u.active?this:(u.paused=!1,w(),P(),this)},updateContainerElements:function(C){var k=[].concat(C).filter(Boolean);return u.containers=k.map(function(O){return typeof O=="string"?i.querySelector(O):O}),u.active&&w(),this}},h.updateContainerElements(t),h},Nl=Object.defineProperty,Bl=(n,t,e)=>t in n?Nl(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,mi=(n,t,e)=>(Bl(n,typeof t!="symbol"?t+"":t,e),e);const vi=class extends HTMLElement{constructor(){super(),mi(this,"focusTrap"),mi(this,"connected",!1);const t=document.createElement("template");t.innerHTML='\n            <div part="backdrop" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0"></div>\n            <div part="content" style="z-index: 1"><slot></slot></div>\n        ';const e=this.attachShadow({mode:"open"});e.appendChild(t.content.cloneNode(!0)),this.backdrop.addEventListener("click",()=>{var i;this.hasAttribute("static")?(i=vi.attention)==null||i.call(vi,e.children[1]):this.close()}),this.focusTrap=ql(this,{escapeDeactivates:!1,allowOutsideClick:!0,preventScroll:!0})}static get observedAttributes(){return["open"]}connectedCallback(){var t,e,i,r,u,h;this.connected=!0,(t=this.content)!=null&&t.hasAttribute("role")||(e=this.content)==null||e.setAttribute("role","dialog"),(i=this.content)!=null&&i.hasAttribute("aria-modal")||(r=this.content)==null||r.setAttribute("aria-modal","true"),(u=this.content)!=null&&u.hasAttribute("tabindex")||(h=this.content)==null||h.setAttribute("tabindex","-1"),this.addEventListener("keydown",f=>{f.key==="Escape"&&this.open&&(f.preventDefault(),f.stopPropagation(),this.close())}),this.open&&this.wasOpened()}disconnectedCallback(){this.connected=!1}get open(){return this.hasAttribute("open")}set open(t){t?this.setAttribute("open",""):this.removeAttribute("open")}close(){if(!this.open)return;const t=new Event("beforeclose",{cancelable:!0});this.dispatchEvent(t)&&(this.open=!1)}attributeChangedCallback(t,e,i){t!=="open"||!this.connected||(i!==null?this.wasOpened():this.wasClosed())}wasOpened(){var t,e;this.hidden=!1,Kt(this),(t=this.focusTrap)==null||t.activate(),(e=this.querySelector("[autofocus]"))==null||e.focus(),this.dispatchEvent(new Event("open"))}wasClosed(){var t;(t=this.focusTrap)==null||t.deactivate(),he(this).then(()=>this.hidden=!0),this.dispatchEvent(new Event("close"))}get backdrop(){var t;return(t=this.shadowRoot)==null?void 0:t.firstElementChild}get content(){return this.firstElementChild}};let Ms=vi;mi(Ms,"attention",n=>n.animate([{transform:"scale(1)"},{transform:"scale(1.1)"},{transform:"scale(1)"}],300));const de=Math.min,lt=Math.max,dn=Math.round,ze=Math.floor,Tt=n=>({x:n,y:n}),jl={left:"right",right:"left",bottom:"top",top:"bottom"},Ul={start:"end",end:"start"};function Ur(n,t,e){return lt(n,de(t,e))}function _n(n,t){return typeof n=="function"?n(t):n}function Jt(n){return n.split("-")[0]}function kn(n){return n.split("-")[1]}function Fs(n){return n==="x"?"y":"x"}function Ds(n){return n==="y"?"height":"width"}function fe(n){return["top","bottom"].includes(Jt(n))?"y":"x"}function Hs(n){return Fs(fe(n))}function Wl(n,t,e){e===void 0&&(e=!1);const i=kn(n),r=Hs(n),u=Ds(r);let h=r==="x"?i===(e?"end":"start")?"right":"left":i==="start"?"bottom":"top";return t.reference[u]>t.floating[u]&&(h=fn(h)),[h,fn(h)]}function Vl(n){const t=fn(n);return[gi(n),t,gi(t)]}function gi(n){return n.replace(/start|end/g,t=>Ul[t])}function zl(n,t,e){const i=["left","right"],r=["right","left"],u=["top","bottom"],h=["bottom","top"];switch(n){case"top":case"bottom":return e?t?r:i:t?i:r;case"left":case"right":return t?u:h;default:return[]}}function $l(n,t,e,i){const r=kn(n);let u=zl(Jt(n),e==="start",i);return r&&(u=u.map(h=>h+"-"+r),t&&(u=u.concat(u.map(gi)))),u}function fn(n){return n.replace(/left|right|bottom|top/g,t=>jl[t])}function Kl(n){return{top:0,right:0,bottom:0,left:0,...n}}function Xl(n){return typeof n!="number"?Kl(n):{top:n,right:n,bottom:n,left:n}}function pn(n){const{x:t,y:e,width:i,height:r}=n;return{width:i,height:r,top:e,left:t,right:t+i,bottom:e+r,x:t,y:e}}function Wr(n,t,e){let{reference:i,floating:r}=n;const u=fe(t),h=Hs(t),f=Ds(h),p=Jt(t),v=u==="y",g=i.x+i.width/2-r.width/2,w=i.y+i.height/2-r.height/2,S=i[f]/2-r[f]/2;let E;switch(p){case"top":E={x:g,y:i.y-r.height};break;case"bottom":E={x:g,y:i.y+i.height};break;case"right":E={x:i.x+i.width,y:w};break;case"left":E={x:i.x-r.width,y:w};break;default:E={x:i.x,y:i.y}}switch(kn(t)){case"start":E[h]-=S*(e&&v?-1:1);break;case"end":E[h]+=S*(e&&v?-1:1);break}return E}const Jl=async(n,t,e)=>{const{placement:i="bottom",strategy:r="absolute",middleware:u=[],platform:h}=e,f=u.filter(Boolean),p=await(h.isRTL==null?void 0:h.isRTL(t));let v=await h.getElementRects({reference:n,floating:t,strategy:r}),{x:g,y:w}=Wr(v,i,p),S=i,E={},x=0;for(let T=0;T<f.length;T++){const{name:b,fn:y}=f[T],{x:A,y:P,data:D,reset:R}=await y({x:g,y:w,initialPlacement:i,placement:S,strategy:r,middlewareData:E,rects:v,platform:h,elements:{reference:n,floating:t}});g=A!=null?A:g,w=P!=null?P:w,E={...E,[b]:{...E[b],...D}},R&&x<=50&&(x++,typeof R=="object"&&(R.placement&&(S=R.placement),R.rects&&(v=R.rects===!0?await h.getElementRects({reference:n,floating:t,strategy:r}):R.rects),{x:g,y:w}=Wr(v,S,p)),T=-1)}return{x:g,y:w,placement:S,strategy:r,middlewareData:E}};async function Ri(n,t){var e;t===void 0&&(t={});const{x:i,y:r,platform:u,rects:h,elements:f,strategy:p}=n,{boundary:v="clippingAncestors",rootBoundary:g="viewport",elementContext:w="floating",altBoundary:S=!1,padding:E=0}=_n(t,n),x=Xl(E),b=f[S?w==="floating"?"reference":"floating":w],y=pn(await u.getClippingRect({element:(e=await(u.isElement==null?void 0:u.isElement(b)))==null||e?b:b.contextElement||await(u.getDocumentElement==null?void 0:u.getDocumentElement(f.floating)),boundary:v,rootBoundary:g,strategy:p})),A=w==="floating"?{x:i,y:r,width:h.floating.width,height:h.floating.height}:h.reference,P=await(u.getOffsetParent==null?void 0:u.getOffsetParent(f.floating)),D=await(u.isElement==null?void 0:u.isElement(P))?await(u.getScale==null?void 0:u.getScale(P))||{x:1,y:1}:{x:1,y:1},R=pn(u.convertOffsetParentRelativeRectToViewportRelativeRect?await u.convertOffsetParentRelativeRectToViewportRelativeRect({elements:f,rect:A,offsetParent:P,strategy:p}):A);return{top:(y.top-R.top+x.top)/D.y,bottom:(R.bottom-y.bottom+x.bottom)/D.y,left:(y.left-R.left+x.left)/D.x,right:(R.right-y.right+x.right)/D.x}}const Yl=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(t){var e,i;const{placement:r,middlewareData:u,rects:h,initialPlacement:f,platform:p,elements:v}=t,{mainAxis:g=!0,crossAxis:w=!0,fallbackPlacements:S,fallbackStrategy:E="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:T=!0,...b}=_n(n,t);if((e=u.arrow)!=null&&e.alignmentOffset)return{};const y=Jt(r),A=fe(f),P=Jt(f)===f,D=await(p.isRTL==null?void 0:p.isRTL(v.floating)),R=S||(P||!T?[fn(f)]:Vl(f)),C=x!=="none";!S&&C&&R.push(...$l(f,T,x,D));const k=[f,...R],O=await Ri(t,b),H=[];let F=((i=u.flip)==null?void 0:i.overflows)||[];if(g&&H.push(O[y]),w){const K=Wl(r,h,D);H.push(O[K[0]],O[K[1]])}if(F=[...F,{placement:r,overflows:H}],!H.every(K=>K<=0)){var W,Y;const K=(((W=u.flip)==null?void 0:W.index)||0)+1,kt=k[K];if(kt)return{data:{index:K,overflows:F},reset:{placement:kt}};let At=(Y=F.filter(dt=>dt.overflows[0]<=0).sort((dt,rt)=>dt.overflows[1]-rt.overflows[1])[0])==null?void 0:Y.placement;if(!At)switch(E){case"bestFit":{var Q;const dt=(Q=F.filter(rt=>{if(C){const wt=fe(rt.placement);return wt===A||wt==="y"}return!0}).map(rt=>[rt.placement,rt.overflows.filter(wt=>wt>0).reduce((wt,Hn)=>wt+Hn,0)]).sort((rt,wt)=>rt[1]-wt[1])[0])==null?void 0:Q[0];dt&&(At=dt);break}case"initialPlacement":At=f;break}if(r!==At)return{reset:{placement:At}}}return{}}}},Gl=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(t){const{x:e,y:i,placement:r}=t,{mainAxis:u=!0,crossAxis:h=!1,limiter:f={fn:b=>{let{x:y,y:A}=b;return{x:y,y:A}}},...p}=_n(n,t),v={x:e,y:i},g=await Ri(t,p),w=fe(Jt(r)),S=Fs(w);let E=v[S],x=v[w];if(u){const b=S==="y"?"top":"left",y=S==="y"?"bottom":"right",A=E+g[b],P=E-g[y];E=Ur(A,E,P)}if(h){const b=w==="y"?"top":"left",y=w==="y"?"bottom":"right",A=x+g[b],P=x-g[y];x=Ur(A,x,P)}const T=f.fn({...t,[S]:E,[w]:x});return{...T,data:{x:T.x-e,y:T.y-i,enabled:{[S]:u,[w]:h}}}}}},Ql=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(t){var e,i;const{placement:r,rects:u,platform:h,elements:f}=t,{apply:p=()=>{},...v}=_n(n,t),g=await Ri(t,v),w=Jt(r),S=kn(r),E=fe(r)==="y",{width:x,height:T}=u.floating;let b,y;w==="top"||w==="bottom"?(b=w,y=S===(await(h.isRTL==null?void 0:h.isRTL(f.floating))?"start":"end")?"left":"right"):(y=w,b=S==="end"?"top":"bottom");const A=T-g.top-g.bottom,P=x-g.left-g.right,D=de(T-g[b],A),R=de(x-g[y],P),C=!t.middlewareData.shift;let k=D,O=R;if((e=t.middlewareData.shift)!=null&&e.enabled.x&&(O=P),(i=t.middlewareData.shift)!=null&&i.enabled.y&&(k=A),C&&!S){const F=lt(g.left,0),W=lt(g.right,0),Y=lt(g.top,0),Q=lt(g.bottom,0);E?O=x-2*(F!==0||W!==0?F+W:lt(g.left,g.right)):k=T-2*(Y!==0||Q!==0?Y+Q:lt(g.top,g.bottom))}await p({...t,availableWidth:O,availableHeight:k});const H=await h.getDimensions(f.floating);return x!==H.width||T!==H.height?{reset:{rects:!0}}:{}}}};function An(){return typeof window<"u"}function ve(n){return qs(n)?(n.nodeName||"").toLowerCase():"#document"}function ht(n){var t;return(n==null||(t=n.ownerDocument)==null?void 0:t.defaultView)||window}function _t(n){var t;return(t=(qs(n)?n.ownerDocument:n.document)||window.document)==null?void 0:t.documentElement}function qs(n){return An()?n instanceof Node||n instanceof ht(n).Node:!1}function gt(n){return An()?n instanceof Element||n instanceof ht(n).Element:!1}function Ct(n){return An()?n instanceof HTMLElement||n instanceof ht(n).HTMLElement:!1}function Vr(n){return!An()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof ht(n).ShadowRoot}function Me(n){const{overflow:t,overflowX:e,overflowY:i,display:r}=bt(n);return/auto|scroll|overlay|hidden|clip/.test(t+i+e)&&!["inline","contents"].includes(r)}function Zl(n){return["table","td","th"].includes(ve(n))}function Ln(n){return[":popover-open",":modal"].some(t=>{try{return n.matches(t)}catch(e){return!1}})}function Pi(n){const t=Oi(),e=gt(n)?bt(n):n;return["transform","translate","scale","rotate","perspective"].some(i=>e[i]?e[i]!=="none":!1)||(e.containerType?e.containerType!=="normal":!1)||!t&&(e.backdropFilter?e.backdropFilter!=="none":!1)||!t&&(e.filter?e.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(i=>(e.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(e.contain||"").includes(i))}function th(n){let t=Nt(n);for(;Ct(t)&&!pe(t);){if(Pi(t))return t;if(Ln(t))return null;t=Nt(t)}return null}function Oi(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function pe(n){return["html","body","#document"].includes(ve(n))}function bt(n){return ht(n).getComputedStyle(n)}function xn(n){return gt(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Nt(n){if(ve(n)==="html")return n;const t=n.assignedSlot||n.parentNode||Vr(n)&&n.host||_t(n);return Vr(t)?t.host:t}function Ns(n){const t=Nt(n);return pe(t)?n.ownerDocument?n.ownerDocument.body:n.body:Ct(t)&&Me(t)?t:Ns(t)}function Ae(n,t,e){var i;t===void 0&&(t=[]),e===void 0&&(e=!0);const r=Ns(n),u=r===((i=n.ownerDocument)==null?void 0:i.body),h=ht(r);if(u){const f=bi(h);return t.concat(h,h.visualViewport||[],Me(r)?r:[],f&&e?Ae(f):[])}return t.concat(r,Ae(r,[],e))}function bi(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function Bs(n){const t=bt(n);let e=parseFloat(t.width)||0,i=parseFloat(t.height)||0;const r=Ct(n),u=r?n.offsetWidth:e,h=r?n.offsetHeight:i,f=dn(e)!==u||dn(i)!==h;return f&&(e=u,i=h),{width:e,height:i,$:f}}function Ii(n){return gt(n)?n:n.contextElement}function re(n){const t=Ii(n);if(!Ct(t))return Tt(1);const e=t.getBoundingClientRect(),{width:i,height:r,$:u}=Bs(t);let h=(u?dn(e.width):e.width)/i,f=(u?dn(e.height):e.height)/r;return(!h||!Number.isFinite(h))&&(h=1),(!f||!Number.isFinite(f))&&(f=1),{x:h,y:f}}const eh=Tt(0);function js(n){const t=ht(n);return!Oi()||!t.visualViewport?eh:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function nh(n,t,e){return t===void 0&&(t=!1),!e||t&&e!==ht(n)?!1:t}function Yt(n,t,e,i){t===void 0&&(t=!1),e===void 0&&(e=!1);const r=n.getBoundingClientRect(),u=Ii(n);let h=Tt(1);t&&(i?gt(i)&&(h=re(i)):h=re(n));const f=nh(u,e,i)?js(u):Tt(0);let p=(r.left+f.x)/h.x,v=(r.top+f.y)/h.y,g=r.width/h.x,w=r.height/h.y;if(u){const S=ht(u),E=i&&gt(i)?ht(i):i;let x=S,T=bi(x);for(;T&&i&&E!==x;){const b=re(T),y=T.getBoundingClientRect(),A=bt(T),P=y.left+(T.clientLeft+parseFloat(A.paddingLeft))*b.x,D=y.top+(T.clientTop+parseFloat(A.paddingTop))*b.y;p*=b.x,v*=b.y,g*=b.x,w*=b.y,p+=P,v+=D,x=ht(T),T=bi(x)}}return pn({width:g,height:w,x:p,y:v})}function Mi(n,t){const e=xn(n).scrollLeft;return t?t.left+e:Yt(_t(n)).left+e}function Us(n,t,e){e===void 0&&(e=!1);const i=n.getBoundingClientRect(),r=i.left+t.scrollLeft-(e?0:Mi(n,i)),u=i.top+t.scrollTop;return{x:r,y:u}}function ih(n){let{elements:t,rect:e,offsetParent:i,strategy:r}=n;const u=r==="fixed",h=_t(i),f=t?Ln(t.floating):!1;if(i===h||f&&u)return e;let p={scrollLeft:0,scrollTop:0},v=Tt(1);const g=Tt(0),w=Ct(i);if((w||!w&&!u)&&((ve(i)!=="body"||Me(h))&&(p=xn(i)),Ct(i))){const E=Yt(i);v=re(i),g.x=E.x+i.clientLeft,g.y=E.y+i.clientTop}const S=h&&!w&&!u?Us(h,p,!0):Tt(0);return{width:e.width*v.x,height:e.height*v.y,x:e.x*v.x-p.scrollLeft*v.x+g.x+S.x,y:e.y*v.y-p.scrollTop*v.y+g.y+S.y}}function rh(n){return Array.from(n.getClientRects())}function sh(n){const t=_t(n),e=xn(n),i=n.ownerDocument.body,r=lt(t.scrollWidth,t.clientWidth,i.scrollWidth,i.clientWidth),u=lt(t.scrollHeight,t.clientHeight,i.scrollHeight,i.clientHeight);let h=-e.scrollLeft+Mi(n);const f=-e.scrollTop;return bt(i).direction==="rtl"&&(h+=lt(t.clientWidth,i.clientWidth)-r),{width:r,height:u,x:h,y:f}}function oh(n,t){const e=ht(n),i=_t(n),r=e.visualViewport;let u=i.clientWidth,h=i.clientHeight,f=0,p=0;if(r){u=r.width,h=r.height;const v=Oi();(!v||v&&t==="fixed")&&(f=r.offsetLeft,p=r.offsetTop)}return{width:u,height:h,x:f,y:p}}function ah(n,t){const e=Yt(n,!0,t==="fixed"),i=e.top+n.clientTop,r=e.left+n.clientLeft,u=Ct(n)?re(n):Tt(1),h=n.clientWidth*u.x,f=n.clientHeight*u.y,p=r*u.x,v=i*u.y;return{width:h,height:f,x:p,y:v}}function zr(n,t,e){let i;if(t==="viewport")i=oh(n,e);else if(t==="document")i=sh(_t(n));else if(gt(t))i=ah(t,e);else{const r=js(n);i={x:t.x-r.x,y:t.y-r.y,width:t.width,height:t.height}}return pn(i)}function Ws(n,t){const e=Nt(n);return e===t||!gt(e)||pe(e)?!1:bt(e).position==="fixed"||Ws(e,t)}function ch(n,t){const e=t.get(n);if(e)return e;let i=Ae(n,[],!1).filter(f=>gt(f)&&ve(f)!=="body"),r=null;const u=bt(n).position==="fixed";let h=u?Nt(n):n;for(;gt(h)&&!pe(h);){const f=bt(h),p=Pi(h);!p&&f.position==="fixed"&&(r=null),(u?!p&&!r:!p&&f.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||Me(h)&&!p&&Ws(n,h))?i=i.filter(g=>g!==h):r=f,h=Nt(h)}return t.set(n,i),i}function uh(n){let{element:t,boundary:e,rootBoundary:i,strategy:r}=n;const h=[...e==="clippingAncestors"?Ln(t)?[]:ch(t,this._c):[].concat(e),i],f=h[0],p=h.reduce((v,g)=>{const w=zr(t,g,r);return v.top=lt(w.top,v.top),v.right=de(w.right,v.right),v.bottom=de(w.bottom,v.bottom),v.left=lt(w.left,v.left),v},zr(t,f,r));return{width:p.right-p.left,height:p.bottom-p.top,x:p.left,y:p.top}}function lh(n){const{width:t,height:e}=Bs(n);return{width:t,height:e}}function hh(n,t,e){const i=Ct(t),r=_t(t),u=e==="fixed",h=Yt(n,!0,u,t);let f={scrollLeft:0,scrollTop:0};const p=Tt(0);if(i||!i&&!u)if((ve(t)!=="body"||Me(r))&&(f=xn(t)),i){const S=Yt(t,!0,u,t);p.x=S.x+t.clientLeft,p.y=S.y+t.clientTop}else r&&(p.x=Mi(r));const v=r&&!i&&!u?Us(r,f):Tt(0),g=h.left+f.scrollLeft-p.x-v.x,w=h.top+f.scrollTop-p.y-v.y;return{x:g,y:w,width:h.width,height:h.height}}function ri(n){return bt(n).position==="static"}function $r(n,t){if(!Ct(n)||bt(n).position==="fixed")return null;if(t)return t(n);let e=n.offsetParent;return _t(n)===e&&(e=e.ownerDocument.body),e}function Vs(n,t){const e=ht(n);if(Ln(n))return e;if(!Ct(n)){let r=Nt(n);for(;r&&!pe(r);){if(gt(r)&&!ri(r))return r;r=Nt(r)}return e}let i=$r(n,t);for(;i&&Zl(i)&&ri(i);)i=$r(i,t);return i&&pe(i)&&ri(i)&&!Pi(i)?e:i||th(n)||e}const dh=async function(n){const t=this.getOffsetParent||Vs,e=this.getDimensions,i=await e(n.floating);return{reference:hh(n.reference,await t(n.floating),n.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function fh(n){return bt(n).direction==="rtl"}const ph={convertOffsetParentRelativeRectToViewportRelativeRect:ih,getDocumentElement:_t,getClippingRect:uh,getOffsetParent:Vs,getElementRects:dh,getClientRects:rh,getDimensions:lh,getScale:re,isElement:gt,isRTL:fh};function zs(n,t){return n.x===t.x&&n.y===t.y&&n.width===t.width&&n.height===t.height}function mh(n,t){let e=null,i;const r=_t(n);function u(){var f;clearTimeout(i),(f=e)==null||f.disconnect(),e=null}function h(f,p){f===void 0&&(f=!1),p===void 0&&(p=1),u();const v=n.getBoundingClientRect(),{left:g,top:w,width:S,height:E}=v;if(f||t(),!S||!E)return;const x=ze(w),T=ze(r.clientWidth-(g+S)),b=ze(r.clientHeight-(w+E)),y=ze(g),P={rootMargin:-x+"px "+-T+"px "+-b+"px "+-y+"px",threshold:lt(0,de(1,p))||1};let D=!0;function R(C){const k=C[0].intersectionRatio;if(k!==p){if(!D)return h();k?h(!1,k):i=setTimeout(()=>{h(!1,1e-7)},1e3)}k===1&&!zs(v,n.getBoundingClientRect())&&h(),D=!1}try{e=new IntersectionObserver(R,{...P,root:r.ownerDocument})}catch(C){e=new IntersectionObserver(R,P)}e.observe(n)}return h(!0),u}function $s(n,t,e,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:u=!0,elementResize:h=typeof ResizeObserver=="function",layoutShift:f=typeof IntersectionObserver=="function",animationFrame:p=!1}=i,v=Ii(n),g=r||u?[...v?Ae(v):[],...Ae(t)]:[];g.forEach(y=>{r&&y.addEventListener("scroll",e,{passive:!0}),u&&y.addEventListener("resize",e)});const w=v&&f?mh(v,e):null;let S=-1,E=null;h&&(E=new ResizeObserver(y=>{let[A]=y;A&&A.target===v&&E&&(E.unobserve(t),cancelAnimationFrame(S),S=requestAnimationFrame(()=>{var P;(P=E)==null||P.observe(t)})),e()}),v&&!p&&E.observe(v),E.observe(t));let x,T=p?Yt(n):null;p&&b();function b(){const y=Yt(n);T&&!zs(T,y)&&e(),T=y,x=requestAnimationFrame(b)}return e(),()=>{var y;g.forEach(A=>{r&&A.removeEventListener("scroll",e),u&&A.removeEventListener("resize",e)}),w==null||w(),(y=E)==null||y.disconnect(),E=null,p&&cancelAnimationFrame(x)}}const Ks=Gl,Xs=Yl,vh=Ql,Js=(n,t,e)=>{const i=new Map,r={platform:ph,...e},u={...r.platform,_c:i};return Jl(n,t,{...r,platform:u})};var gh=Object.defineProperty,bh=(n,t,e)=>t in n?gh(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,te=(n,t,e)=>(bh(n,typeof t!="symbol"?t+"":t,e),e);class yh extends HTMLElement{constructor(){super(),te(this,"cleanup"),te(this,"onButtonClick",e=>{!_s(e)&&!this.disabled&&(this.open=!this.open,e.preventDefault())}),te(this,"onButtonKeyDown",e=>{var i;e.key==="ArrowDown"&&!this.disabled&&(e.preventDefault(),this.open=!0,(i=xi(this.content)[0])==null||i.focus())}),te(this,"onKeyDown",e=>{e.key==="Escape"&&this.open&&(e.preventDefault(),e.stopPropagation(),this.open=!1,this.button.focus())}),te(this,"onFocusOut",e=>{(!(e.relatedTarget instanceof Node)||!this.contains(e.relatedTarget))&&(this.open=!1)}),te(this,"onContentClick",e=>{e.target instanceof Element&&e.target.closest("[role=menuitem], [role=menuitemradio]")&&(this.open=!1,this.button.focus())});const t=document.createElement("template");t.innerHTML='\n            <div part="backdrop" hidden style="position: fixed; top: 0; left: 0; right: 0; bottom: 0"></div>\n            <slot></slot>\n        ',this.attachShadow({mode:"open"}).appendChild(t.content.cloneNode(!0)),this.backdrop.onclick=()=>this.open=!1}static get observedAttributes(){return["open"]}connectedCallback(){this.backdrop.hidden=!0,this.content.hidden=!0,this.open=!1,this.button.setAttribute("aria-expanded","false"),setTimeout(()=>{this.content.getAttribute("role")==="menu"&&this.button.setAttribute("aria-haspopup","true")}),this.button.addEventListener("click",this.onButtonClick),this.button.addEventListener("keydown",this.onButtonKeyDown),this.addEventListener("keydown",this.onKeyDown),this.addEventListener("focusout",this.onFocusOut),this.content.addEventListener("click",this.onContentClick)}disconnectedCallback(){un(this.backdrop),un(this.content),this.button.removeAttribute("aria-expanded"),this.button.removeAttribute("aria-haspopup"),this.button.removeEventListener("click",this.onButtonClick),this.button.removeEventListener("keydown",this.onButtonKeyDown),this.removeEventListener("keydown",this.onKeyDown),this.removeEventListener("focusout",this.onFocusOut),this.content.removeEventListener("click",this.onContentClick)}get open(){return this.hasAttribute("open")}set open(t){t?this.setAttribute("open",""):this.removeAttribute("open")}get disabled(){return this.hasAttribute("disabled")}attributeChangedCallback(t,e,i){t==="open"&&(i!==null?this.wasOpened():this.wasClosed())}wasOpened(){if(!this.content.hidden)return;this.content.hidden=!1,this.content.style.position="absolute",this.backdrop.hidden=!1,Kt(this.content),Kt(this.backdrop),this.button.setAttribute("aria-expanded","true"),this.cleanup=$s(this.button,this.content,()=>{Js(this.button,this.content,{placement:this.getAttribute("placement")||"bottom",middleware:[Ks(),Xs(),vh({apply:({availableWidth:e,availableHeight:i})=>{Object.assign(this.content.style,{maxWidth:"",maxHeight:""});const r=getComputedStyle(this.content);(r.maxWidth==="none"||e<parseInt(r.maxWidth))&&(this.content.style.maxWidth="".concat(e,"px")),(r.maxHeight==="none"||i<parseInt(r.maxHeight))&&(this.content.style.maxHeight="".concat(i,"px"))}})]}).then(({x:e,y:i,placement:r})=>{Object.assign(this.content.style,{left:"".concat(e,"px"),top:"".concat(i,"px")}),this.content.dataset.placement=r})},{ancestorScroll:!1});const t=this.content.querySelector("[autofocus]");t?t.focus():this.content.focus(),this.dispatchEvent(new Event("open"))}wasClosed(){var t;this.content.hidden||(this.button.setAttribute("aria-expanded","false"),(t=this.cleanup)==null||t.call(this),he(this.backdrop).then(()=>this.backdrop.hidden=!0),he(this.content).then(()=>this.content.hidden=!0),this.dispatchEvent(new Event("close")))}get backdrop(){var t;return(t=this.shadowRoot)==null?void 0:t.firstElementChild}get button(){return this.querySelector("button, [role=button]")}get content(){return this.children[1]}}var wh=Object.defineProperty,Sh=(n,t,e)=>t in n?wh(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,Kr=(n,t,e)=>(Sh(n,typeof t!="symbol"?t+"":t,e),e);class Eh extends HTMLElement{constructor(){super(...arguments),Kr(this,"onInitialFocus",()=>{this.removeAttribute("tabindex"),this.focusControlAtIndex(0)}),Kr(this,"onKeyDown",t=>{if(t.key!=="ArrowRight"&&t.key!=="ArrowLeft"&&t.key!=="Home"&&t.key!=="End")return;const e=this.controls,i=this.controls.length,r=e.indexOf(t.target);if(r===-1)return;let u=0;t.key==="ArrowLeft"&&(u=r-1),t.key==="ArrowRight"&&(u=r+1),t.key==="End"&&(u=i-1),u<0&&(u=i-1),u>i-1&&(u=0),this.focusControlAtIndex(u),t.preventDefault()})}connectedCallback(){this.hasAttribute("role")||this.setAttribute("role","toolbar"),this.setAttribute("tabindex","0"),this.addEventListener("focus",this.onInitialFocus,{once:!0}),this.addEventListener("keydown",this.onKeyDown)}disconnectedCallback(){this.removeEventListener("keydown",this.onKeyDown)}focusControlAtIndex(t){this.controls.forEach((e,i)=>{i===t?(e.setAttribute("tabindex","0"),e.focus()):e.setAttribute("tabindex","-1")})}get controls(){return xi(this)}}var Th=Object.defineProperty,Ch=(n,t,e)=>t in n?Th(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,tt=(n,t,e)=>(Ch(n,typeof t!="symbol"?t+"":t,e),e);const en=class extends HTMLElement{constructor(){super(...arguments),tt(this,"parent"),tt(this,"tooltip"),tt(this,"timeout"),tt(this,"disabledObserver"),tt(this,"showing",!1),tt(this,"cleanup"),tt(this,"prevInnerHTML"),tt(this,"onMouseEnter",this.afterDelay.bind(this,this.show)),tt(this,"onFocus",this.show.bind(this)),tt(this,"onMouseLeave",this.afterDelay.bind(this,this.hide)),tt(this,"onBlur",this.hide.bind(this)),tt(this,"onPointerUp",n=>{n.pointerType==="mouse"?this.hide():this.show()}),tt(this,"onKeyDown",n=>{n.key==="Escape"&&this.hide()})}connectedCallback(){this.parent=this.parentNode,this.parent&&(this.parent.addEventListener("mouseenter",this.onMouseEnter),this.parent.addEventListener("focus",this.onFocus),this.parent.addEventListener("mouseleave",this.onMouseLeave),this.parent.addEventListener("blur",this.onBlur),this.parent.addEventListener("pointerup",this.onPointerUp),this.disabledObserver=new MutationObserver(n=>{n.forEach(t=>{t.attributeName==="disabled"&&this.hide()})}),this.disabledObserver.observe(this.parent,{attributes:!0})),document.addEventListener("keydown",this.onKeyDown),document.addEventListener("scroll",this.onBlur)}disconnectedCallback(){var n,t;(n=this.cleanup)==null||n.call(this),this.tooltip&&(this.tooltip.remove(),this.tooltip=void 0),this.parent&&(this.parent.removeEventListener("mouseenter",this.onMouseEnter),this.parent.removeEventListener("focus",this.onFocus),this.parent.removeEventListener("mouseleave",this.onMouseLeave),this.parent.removeEventListener("blur",this.onBlur),this.parent.removeEventListener("pointerup",this.onPointerUp),this.parent=void 0),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("scroll",this.onBlur),(t=this.disabledObserver)==null||t.disconnect(),clearTimeout(this.timeout)}get disabled(){return this.hasAttribute("disabled")}set disabled(n){n?this.setAttribute("disabled",""):this.removeAttribute("disabled")}show(){var n;if(this.disabled)return;const t=this.createTooltip();clearTimeout(this.timeout),this.showing||(t.hidden=!1,Kt(t),this.showing=!0),this.innerHTML!==this.prevInnerHTML&&(this.prevInnerHTML=t.innerHTML=this.innerHTML),t.style.position="absolute",(n=this.cleanup)==null||n.call(this),this.cleanup=$s(this.parent,t,()=>Js(this.parent,t,{placement:this.getAttribute("placement")||en.placement,middleware:[Ks(),Xs()]}).then(({x:e,y:i,placement:r})=>{Object.assign(t.style,{left:"".concat(e,"px"),top:"".concat(i,"px")}),t.dataset.placement=r}))}hide(){var n;clearTimeout(this.timeout),(n=this.cleanup)==null||n.call(this),this.showing&&(this.showing=!1,he(this.tooltip).then(()=>{this.tooltip&&(this.tooltip.hidden=!0)}))}afterDelay(n){clearTimeout(this.timeout);const t=parseInt(this.getAttribute("delay")||"");this.timeout=window.setTimeout(n.bind(this),isNaN(t)?en.delay:t)}createTooltip(){return this.tooltip||(this.tooltip=document.createElement("div"),this.tooltip.className=this.getAttribute("tooltip-class")||en.tooltipClass,this.tooltip.hidden=!0,this.tooltip.addEventListener("mouseenter",this.show.bind(this)),this.tooltip.addEventListener("mouseleave",this.afterDelay.bind(this,this.hide)),document.body.appendChild(this.tooltip)),this.tooltip}};let nn=en;tt(nn,"delay",100),tt(nn,"placement","top"),tt(nn,"tooltipClass","tooltip");window.customElements.define("ui-accordion",dl);window.customElements.define("ui-alerts",Cs);window.customElements.define("ui-disclosure",bl);window.customElements.define("ui-menu",Is);window.customElements.define("ui-modal",Ms);window.customElements.define("ui-popup",yh);window.customElements.define("ui-toolbar",Eh);window.customElements.define("ui-tooltip",nn);class _h{constructor(){this.title="",this.count=0}initialize(){this.title=document.title,this.count=0}increment(){this.count++,this.update()}reset(){this.count=0,this.update()}update(){document.title=(this.count?"(".concat(this.count,") "):"")+this.title}}Waterhole.documentTitle=new _h;document.addEventListener("turbo:load",()=>Waterhole.documentTitle.initialize());window.addEventListener("focus",()=>Waterhole.documentTitle.reset());function ke(n){"@babel/helpers - typeof";return ke=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ke(n)}function X(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function kh(n,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function J(n,t,e){return t&&kh(n.prototype,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function Le(){return Le=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Le.apply(this,arguments)}function at(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&yi(n,t)}function mn(n){return mn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},mn(n)}function yi(n,t){return yi=Object.setPrototypeOf||function(i,r){return i.__proto__=r,i},yi(n,t)}function Ah(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function Lh(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function xh(n,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Lh(n)}function ct(n){var t=Ah();return function(){var i=mn(n),r;if(t){var u=mn(this).constructor;r=Reflect.construct(i,arguments,u)}else r=i.apply(this,arguments);return xh(this,r)}}var Fi=function(){function n(){X(this,n)}return J(n,[{key:"listenForWhisper",value:function(e,i){return this.listen(".client-"+e,i)}},{key:"notification",value:function(e){return this.listen(".Illuminate\\Notifications\\Events\\BroadcastNotificationCreated",e)}},{key:"stopListeningForWhisper",value:function(e,i){return this.stopListening(".client-"+e,i)}}]),n}(),Ys=function(){function n(t){X(this,n),this.namespace=t}return J(n,[{key:"format",value:function(e){return[".","\\"].includes(e.charAt(0))?e.substring(1):(this.namespace&&(e=this.namespace+"."+e),e.replace(/\./g,"\\"))}},{key:"setNamespace",value:function(e){this.namespace=e}}]),n}();function Rh(n){try{new n}catch(t){if(t.message.includes("is not a constructor"))return!1}return!0}var Di=function(n){at(e,n);var t=ct(e);function e(i,r,u){var h;return X(this,e),h=t.call(this),h.name=r,h.pusher=i,h.options=u,h.eventFormatter=new Ys(h.options.namespace),h.subscribe(),h}return J(e,[{key:"subscribe",value:function(){this.subscription=this.pusher.subscribe(this.name)}},{key:"unsubscribe",value:function(){this.pusher.unsubscribe(this.name)}},{key:"listen",value:function(r,u){return this.on(this.eventFormatter.format(r),u),this}},{key:"listenToAll",value:function(r){var u=this;return this.subscription.bind_global(function(h,f){if(!h.startsWith("pusher:")){var p=u.options.namespace.replace(/\./g,"\\"),v=h.startsWith(p)?h.substring(p.length+1):"."+h;r(v,f)}}),this}},{key:"stopListening",value:function(r,u){return u?this.subscription.unbind(this.eventFormatter.format(r),u):this.subscription.unbind(this.eventFormatter.format(r)),this}},{key:"stopListeningToAll",value:function(r){return r?this.subscription.unbind_global(r):this.subscription.unbind_global(),this}},{key:"subscribed",value:function(r){return this.on("pusher:subscription_succeeded",function(){r()}),this}},{key:"error",value:function(r){return this.on("pusher:subscription_error",function(u){r(u)}),this}},{key:"on",value:function(r,u){return this.subscription.bind(r,u),this}}]),e}(Fi),Gs=function(n){at(e,n);var t=ct(e);function e(){return X(this,e),t.apply(this,arguments)}return J(e,[{key:"whisper",value:function(r,u){return this.pusher.channels.channels[this.name].trigger("client-".concat(r),u),this}}]),e}(Di),Ph=function(n){at(e,n);var t=ct(e);function e(){return X(this,e),t.apply(this,arguments)}return J(e,[{key:"whisper",value:function(r,u){return this.pusher.channels.channels[this.name].trigger("client-".concat(r),u),this}}]),e}(Di),Oh=function(n){at(e,n);var t=ct(e);function e(){return X(this,e),t.apply(this,arguments)}return J(e,[{key:"here",value:function(r){return this.on("pusher:subscription_succeeded",function(u){r(Object.keys(u.members).map(function(h){return u.members[h]}))}),this}},{key:"joining",value:function(r){return this.on("pusher:member_added",function(u){r(u.info)}),this}},{key:"whisper",value:function(r,u){return this.pusher.channels.channels[this.name].trigger("client-".concat(r),u),this}},{key:"leaving",value:function(r){return this.on("pusher:member_removed",function(u){r(u.info)}),this}}]),e}(Gs),Qs=function(n){at(e,n);var t=ct(e);function e(i,r,u){var h;return X(this,e),h=t.call(this),h.events={},h.listeners={},h.name=r,h.socket=i,h.options=u,h.eventFormatter=new Ys(h.options.namespace),h.subscribe(),h}return J(e,[{key:"subscribe",value:function(){this.socket.emit("subscribe",{channel:this.name,auth:this.options.auth||{}})}},{key:"unsubscribe",value:function(){this.unbind(),this.socket.emit("unsubscribe",{channel:this.name,auth:this.options.auth||{}})}},{key:"listen",value:function(r,u){return this.on(this.eventFormatter.format(r),u),this}},{key:"stopListening",value:function(r,u){return this.unbindEvent(this.eventFormatter.format(r),u),this}},{key:"subscribed",value:function(r){return this.on("connect",function(u){r(u)}),this}},{key:"error",value:function(r){return this}},{key:"on",value:function(r,u){var h=this;return this.listeners[r]=this.listeners[r]||[],this.events[r]||(this.events[r]=function(f,p){h.name===f&&h.listeners[r]&&h.listeners[r].forEach(function(v){return v(p)})},this.socket.on(r,this.events[r])),this.listeners[r].push(u),this}},{key:"unbind",value:function(){var r=this;Object.keys(this.events).forEach(function(u){r.unbindEvent(u)})}},{key:"unbindEvent",value:function(r,u){this.listeners[r]=this.listeners[r]||[],u&&(this.listeners[r]=this.listeners[r].filter(function(h){return h!==u})),(!u||this.listeners[r].length===0)&&(this.events[r]&&(this.socket.removeListener(r,this.events[r]),delete this.events[r]),delete this.listeners[r])}}]),e}(Fi),Zs=function(n){at(e,n);var t=ct(e);function e(){return X(this,e),t.apply(this,arguments)}return J(e,[{key:"whisper",value:function(r,u){return this.socket.emit("client event",{channel:this.name,event:"client-".concat(r),data:u}),this}}]),e}(Qs),Ih=function(n){at(e,n);var t=ct(e);function e(){return X(this,e),t.apply(this,arguments)}return J(e,[{key:"here",value:function(r){return this.on("presence:subscribed",function(u){r(u.map(function(h){return h.user_info}))}),this}},{key:"joining",value:function(r){return this.on("presence:joining",function(u){return r(u.user_info)}),this}},{key:"whisper",value:function(r,u){return this.socket.emit("client event",{channel:this.name,event:"client-".concat(r),data:u}),this}},{key:"leaving",value:function(r){return this.on("presence:leaving",function(u){return r(u.user_info)}),this}}]),e}(Zs),vn=function(n){at(e,n);var t=ct(e);function e(){return X(this,e),t.apply(this,arguments)}return J(e,[{key:"subscribe",value:function(){}},{key:"unsubscribe",value:function(){}},{key:"listen",value:function(r,u){return this}},{key:"listenToAll",value:function(r){return this}},{key:"stopListening",value:function(r,u){return this}},{key:"subscribed",value:function(r){return this}},{key:"error",value:function(r){return this}},{key:"on",value:function(r,u){return this}}]),e}(Fi),to=function(n){at(e,n);var t=ct(e);function e(){return X(this,e),t.apply(this,arguments)}return J(e,[{key:"whisper",value:function(r,u){return this}}]),e}(vn),Mh=function(n){at(e,n);var t=ct(e);function e(){return X(this,e),t.apply(this,arguments)}return J(e,[{key:"whisper",value:function(r,u){return this}}]),e}(vn),Fh=function(n){at(e,n);var t=ct(e);function e(){return X(this,e),t.apply(this,arguments)}return J(e,[{key:"here",value:function(r){return this}},{key:"joining",value:function(r){return this}},{key:"whisper",value:function(r,u){return this}},{key:"leaving",value:function(r){return this}}]),e}(to),Hi=function(){function n(t){X(this,n),this._defaultOptions={auth:{headers:{}},authEndpoint:"/broadcasting/auth",userAuthentication:{endpoint:"/broadcasting/user-auth",headers:{}},broadcaster:"pusher",csrfToken:null,bearerToken:null,host:null,key:null,namespace:"App.Events"},this.setOptions(t),this.connect()}return J(n,[{key:"setOptions",value:function(e){this.options=Le(this._defaultOptions,e);var i=this.csrfToken();return i&&(this.options.auth.headers["X-CSRF-TOKEN"]=i,this.options.userAuthentication.headers["X-CSRF-TOKEN"]=i),i=this.options.bearerToken,i&&(this.options.auth.headers.Authorization="Bearer "+i,this.options.userAuthentication.headers.Authorization="Bearer "+i),e}},{key:"csrfToken",value:function(){var e;return typeof window<"u"&&window.Laravel&&window.Laravel.csrfToken?window.Laravel.csrfToken:this.options.csrfToken?this.options.csrfToken:typeof document<"u"&&typeof document.querySelector=="function"&&(e=document.querySelector('meta[name="csrf-token"]'))?e.getAttribute("content"):null}}]),n}(),Xr=function(n){at(e,n);var t=ct(e);function e(){var i;return X(this,e),i=t.apply(this,arguments),i.channels={},i}return J(e,[{key:"connect",value:function(){typeof this.options.client<"u"?this.pusher=this.options.client:this.options.Pusher?this.pusher=new this.options.Pusher(this.options.key,this.options):this.pusher=new Pusher(this.options.key,this.options)}},{key:"signin",value:function(){this.pusher.signin()}},{key:"listen",value:function(r,u,h){return this.channel(r).listen(u,h)}},{key:"channel",value:function(r){return this.channels[r]||(this.channels[r]=new Di(this.pusher,r,this.options)),this.channels[r]}},{key:"privateChannel",value:function(r){return this.channels["private-"+r]||(this.channels["private-"+r]=new Gs(this.pusher,"private-"+r,this.options)),this.channels["private-"+r]}},{key:"encryptedPrivateChannel",value:function(r){return this.channels["private-encrypted-"+r]||(this.channels["private-encrypted-"+r]=new Ph(this.pusher,"private-encrypted-"+r,this.options)),this.channels["private-encrypted-"+r]}},{key:"presenceChannel",value:function(r){return this.channels["presence-"+r]||(this.channels["presence-"+r]=new Oh(this.pusher,"presence-"+r,this.options)),this.channels["presence-"+r]}},{key:"leave",value:function(r){var u=this,h=[r,"private-"+r,"private-encrypted-"+r,"presence-"+r];h.forEach(function(f,p){u.leaveChannel(f)})}},{key:"leaveChannel",value:function(r){this.channels[r]&&(this.channels[r].unsubscribe(),delete this.channels[r])}},{key:"socketId",value:function(){return this.pusher.connection.socket_id}},{key:"disconnect",value:function(){this.pusher.disconnect()}}]),e}(Hi),Jr=function(n){at(e,n);var t=ct(e);function e(){var i;return X(this,e),i=t.apply(this,arguments),i.channels={},i}return J(e,[{key:"connect",value:function(){var r=this,u=this.getSocketIO();return this.socket=u(this.options.host,this.options),this.socket.on("reconnect",function(){Object.values(r.channels).forEach(function(h){h.subscribe()})}),this.socket}},{key:"getSocketIO",value:function(){if(typeof this.options.client<"u")return this.options.client;if(typeof io<"u")return io;throw new Error("Socket.io client not found. Should be globally available or passed via options.client")}},{key:"listen",value:function(r,u,h){return this.channel(r).listen(u,h)}},{key:"channel",value:function(r){return this.channels[r]||(this.channels[r]=new Qs(this.socket,r,this.options)),this.channels[r]}},{key:"privateChannel",value:function(r){return this.channels["private-"+r]||(this.channels["private-"+r]=new Zs(this.socket,"private-"+r,this.options)),this.channels["private-"+r]}},{key:"presenceChannel",value:function(r){return this.channels["presence-"+r]||(this.channels["presence-"+r]=new Ih(this.socket,"presence-"+r,this.options)),this.channels["presence-"+r]}},{key:"leave",value:function(r){var u=this,h=[r,"private-"+r,"presence-"+r];h.forEach(function(f){u.leaveChannel(f)})}},{key:"leaveChannel",value:function(r){this.channels[r]&&(this.channels[r].unsubscribe(),delete this.channels[r])}},{key:"socketId",value:function(){return this.socket.id}},{key:"disconnect",value:function(){this.socket.disconnect()}}]),e}(Hi),Dh=function(n){at(e,n);var t=ct(e);function e(){var i;return X(this,e),i=t.apply(this,arguments),i.channels={},i}return J(e,[{key:"connect",value:function(){}},{key:"listen",value:function(r,u,h){return new vn}},{key:"channel",value:function(r){return new vn}},{key:"privateChannel",value:function(r){return new to}},{key:"encryptedPrivateChannel",value:function(r){return new Mh}},{key:"presenceChannel",value:function(r){return new Fh}},{key:"leave",value:function(r){}},{key:"leaveChannel",value:function(r){}},{key:"socketId",value:function(){return"fake-socket-id"}},{key:"disconnect",value:function(){}}]),e}(Hi),Hh=function(){function n(t){X(this,n),this.options=t,this.connect(),this.options.withoutInterceptors||this.registerInterceptors()}return J(n,[{key:"channel",value:function(e){return this.connector.channel(e)}},{key:"connect",value:function(){if(this.options.broadcaster=="reverb")this.connector=new Xr(Le(Le({},this.options),{cluster:""}));else if(this.options.broadcaster=="pusher")this.connector=new Xr(this.options);else if(this.options.broadcaster=="socket.io")this.connector=new Jr(this.options);else if(this.options.broadcaster=="null")this.connector=new Dh(this.options);else if(typeof this.options.broadcaster=="function"&&Rh(this.options.broadcaster))this.connector=new this.options.broadcaster(this.options);else throw new Error("Broadcaster ".concat(ke(this.options.broadcaster)," ").concat(this.options.broadcaster," is not supported."))}},{key:"disconnect",value:function(){this.connector.disconnect()}},{key:"join",value:function(e){return this.connector.presenceChannel(e)}},{key:"leave",value:function(e){this.connector.leave(e)}},{key:"leaveChannel",value:function(e){this.connector.leaveChannel(e)}},{key:"leaveAllChannels",value:function(){for(var e in this.connector.channels)this.leaveChannel(e)}},{key:"listen",value:function(e,i,r){return this.connector.listen(e,i,r)}},{key:"private",value:function(e){return this.connector.privateChannel(e)}},{key:"encryptedPrivate",value:function(e){if(this.connector instanceof Jr)throw new Error("Broadcaster ".concat(ke(this.options.broadcaster)," ").concat(this.options.broadcaster," does not support encrypted private channels."));return this.connector.encryptedPrivateChannel(e)}},{key:"socketId",value:function(){return this.connector.socketId()}},{key:"registerInterceptors",value:function(){typeof Vue=="function"&&Vue.http&&this.registerVueRequestInterceptor(),typeof axios=="function"&&this.registerAxiosRequestInterceptor(),typeof jQuery=="function"&&this.registerjQueryAjaxSetup(),(typeof Turbo>"u"?"undefined":ke(Turbo))==="object"&&this.registerTurboRequestInterceptor()}},{key:"registerVueRequestInterceptor",value:function(){var e=this;Vue.http.interceptors.push(function(i,r){e.socketId()&&i.headers.set("X-Socket-ID",e.socketId()),r()})}},{key:"registerAxiosRequestInterceptor",value:function(){var e=this;axios.interceptors.request.use(function(i){return e.socketId()&&(i.headers["X-Socket-Id"]=e.socketId()),i})}},{key:"registerjQueryAjaxSetup",value:function(){var e=this;typeof jQuery.ajax<"u"&&jQuery.ajaxPrefilter(function(i,r,u){e.socketId()&&u.setRequestHeader("X-Socket-Id",e.socketId())})}},{key:"registerTurboRequestInterceptor",value:function(){var e=this;document.addEventListener("turbo:before-fetch-request",function(i){i.detail.fetchOptions.headers["X-Socket-Id"]=e.socketId()})}}]),n}(),eo={exports:{}};/*!
 * Pusher JavaScript Library v7.6.0
 * https://pusher.com/
 *
 * Copyright 2020, Pusher
 * Released under the MIT licence.
 */(function(n,t){(function(i,r){n.exports=r()})(window,function(){return function(e){var i={};function r(u){if(i[u])return i[u].exports;var h=i[u]={i:u,l:!1,exports:{}};return e[u].call(h.exports,h,h.exports,r),h.l=!0,h.exports}return r.m=e,r.c=i,r.d=function(u,h,f){r.o(u,h)||Object.defineProperty(u,h,{enumerable:!0,get:f})},r.r=function(u){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(u,"__esModule",{value:!0})},r.t=function(u,h){if(h&1&&(u=r(u)),h&8||h&4&&typeof u=="object"&&u&&u.__esModule)return u;var f=Object.create(null);if(r.r(f),Object.defineProperty(f,"default",{enumerable:!0,value:u}),h&2&&typeof u!="string")for(var p in u)r.d(f,p,(function(v){return u[v]}).bind(null,p));return f},r.n=function(u){var h=u&&u.__esModule?function(){return u.default}:function(){return u};return r.d(h,"a",h),h},r.o=function(u,h){return Object.prototype.hasOwnProperty.call(u,h)},r.p="",r(r.s=2)}([function(e,i,r){var u=this&&this.__extends||function(){var T=function(b,y){return T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,P){A.__proto__=P}||function(A,P){for(var D in P)P.hasOwnProperty(D)&&(A[D]=P[D])},T(b,y)};return function(b,y){T(b,y);function A(){this.constructor=b}b.prototype=y===null?Object.create(y):(A.prototype=y.prototype,new A)}}();Object.defineProperty(i,"__esModule",{value:!0});var h=256,f=function(){function T(b){b===void 0&&(b="="),this._paddingCharacter=b}return T.prototype.encodedLength=function(b){return this._paddingCharacter?(b+2)/3*4|0:(b*8+5)/6|0},T.prototype.encode=function(b){for(var y="",A=0;A<b.length-2;A+=3){var P=b[A]<<16|b[A+1]<<8|b[A+2];y+=this._encodeByte(P>>>3*6&63),y+=this._encodeByte(P>>>2*6&63),y+=this._encodeByte(P>>>1*6&63),y+=this._encodeByte(P>>>0*6&63)}var D=b.length-A;if(D>0){var P=b[A]<<16|(D===2?b[A+1]<<8:0);y+=this._encodeByte(P>>>3*6&63),y+=this._encodeByte(P>>>2*6&63),D===2?y+=this._encodeByte(P>>>1*6&63):y+=this._paddingCharacter||"",y+=this._paddingCharacter||""}return y},T.prototype.maxDecodedLength=function(b){return this._paddingCharacter?b/4*3|0:(b*6+7)/8|0},T.prototype.decodedLength=function(b){return this.maxDecodedLength(b.length-this._getPaddingLength(b))},T.prototype.decode=function(b){if(b.length===0)return new Uint8Array(0);for(var y=this._getPaddingLength(b),A=b.length-y,P=new Uint8Array(this.maxDecodedLength(A)),D=0,R=0,C=0,k=0,O=0,H=0,F=0;R<A-4;R+=4)k=this._decodeChar(b.charCodeAt(R+0)),O=this._decodeChar(b.charCodeAt(R+1)),H=this._decodeChar(b.charCodeAt(R+2)),F=this._decodeChar(b.charCodeAt(R+3)),P[D++]=k<<2|O>>>4,P[D++]=O<<4|H>>>2,P[D++]=H<<6|F,C|=k&h,C|=O&h,C|=H&h,C|=F&h;if(R<A-1&&(k=this._decodeChar(b.charCodeAt(R)),O=this._decodeChar(b.charCodeAt(R+1)),P[D++]=k<<2|O>>>4,C|=k&h,C|=O&h),R<A-2&&(H=this._decodeChar(b.charCodeAt(R+2)),P[D++]=O<<4|H>>>2,C|=H&h),R<A-3&&(F=this._decodeChar(b.charCodeAt(R+3)),P[D++]=H<<6|F,C|=F&h),C!==0)throw new Error("Base64Coder: incorrect characters for decoding");return P},T.prototype._encodeByte=function(b){var y=b;return y+=65,y+=25-b>>>8&6,y+=51-b>>>8&-75,y+=61-b>>>8&-15,y+=62-b>>>8&3,String.fromCharCode(y)},T.prototype._decodeChar=function(b){var y=h;return y+=(42-b&b-44)>>>8&-h+b-43+62,y+=(46-b&b-48)>>>8&-h+b-47+63,y+=(47-b&b-58)>>>8&-h+b-48+52,y+=(64-b&b-91)>>>8&-h+b-65+0,y+=(96-b&b-123)>>>8&-h+b-97+26,y},T.prototype._getPaddingLength=function(b){var y=0;if(this._paddingCharacter){for(var A=b.length-1;A>=0&&b[A]===this._paddingCharacter;A--)y++;if(b.length<4||y>2)throw new Error("Base64Coder: incorrect padding")}return y},T}();i.Coder=f;var p=new f;function v(T){return p.encode(T)}i.encode=v;function g(T){return p.decode(T)}i.decode=g;var w=function(T){u(b,T);function b(){return T!==null&&T.apply(this,arguments)||this}return b.prototype._encodeByte=function(y){var A=y;return A+=65,A+=25-y>>>8&6,A+=51-y>>>8&-75,A+=61-y>>>8&-13,A+=62-y>>>8&49,String.fromCharCode(A)},b.prototype._decodeChar=function(y){var A=h;return A+=(44-y&y-46)>>>8&-h+y-45+62,A+=(94-y&y-96)>>>8&-h+y-95+63,A+=(47-y&y-58)>>>8&-h+y-48+52,A+=(64-y&y-91)>>>8&-h+y-65+0,A+=(96-y&y-123)>>>8&-h+y-97+26,A},b}(f);i.URLSafeCoder=w;var S=new w;function E(T){return S.encode(T)}i.encodeURLSafe=E;function x(T){return S.decode(T)}i.decodeURLSafe=x,i.encodedLength=function(T){return p.encodedLength(T)},i.maxDecodedLength=function(T){return p.maxDecodedLength(T)},i.decodedLength=function(T){return p.decodedLength(T)}},function(e,i,r){Object.defineProperty(i,"__esModule",{value:!0});var u="utf8: invalid string",h="utf8: invalid source encoding";function f(g){for(var w=new Uint8Array(p(g)),S=0,E=0;E<g.length;E++){var x=g.charCodeAt(E);x<128?w[S++]=x:x<2048?(w[S++]=192|x>>6,w[S++]=128|x&63):x<55296?(w[S++]=224|x>>12,w[S++]=128|x>>6&63,w[S++]=128|x&63):(E++,x=(x&1023)<<10,x|=g.charCodeAt(E)&1023,x+=65536,w[S++]=240|x>>18,w[S++]=128|x>>12&63,w[S++]=128|x>>6&63,w[S++]=128|x&63)}return w}i.encode=f;function p(g){for(var w=0,S=0;S<g.length;S++){var E=g.charCodeAt(S);if(E<128)w+=1;else if(E<2048)w+=2;else if(E<55296)w+=3;else if(E<=57343){if(S>=g.length-1)throw new Error(u);S++,w+=4}else throw new Error(u)}return w}i.encodedLength=p;function v(g){for(var w=[],S=0;S<g.length;S++){var E=g[S];if(E&128){var x=void 0;if(E<224){if(S>=g.length)throw new Error(h);var T=g[++S];if((T&192)!==128)throw new Error(h);E=(E&31)<<6|T&63,x=128}else if(E<240){if(S>=g.length-1)throw new Error(h);var T=g[++S],b=g[++S];if((T&192)!==128||(b&192)!==128)throw new Error(h);E=(E&15)<<12|(T&63)<<6|b&63,x=2048}else if(E<248){if(S>=g.length-2)throw new Error(h);var T=g[++S],b=g[++S],y=g[++S];if((T&192)!==128||(b&192)!==128||(y&192)!==128)throw new Error(h);E=(E&15)<<18|(T&63)<<12|(b&63)<<6|y&63,x=65536}else throw new Error(h);if(E<x||E>=55296&&E<=57343)throw new Error(h);if(E>=65536){if(E>1114111)throw new Error(h);E-=65536,w.push(String.fromCharCode(55296|E>>10)),E=56320|E&1023}}w.push(String.fromCharCode(E))}return w.join("")}i.decode=v},function(e,i,r){e.exports=r(3).default},function(e,i,r){r.r(i);var u=function(){function o(s,a){this.lastId=0,this.prefix=s,this.name=a}return o.prototype.create=function(s){this.lastId++;var a=this.lastId,c=this.prefix+a,l=this.name+"["+a+"]",d=!1,m=function(){d||(s.apply(null,arguments),d=!0)};return this[a]=m,{number:a,id:c,name:l,callback:m}},o.prototype.remove=function(s){delete this[s.number]},o}(),h=new u("_pusher_script_","Pusher.ScriptReceivers"),f={VERSION:"7.6.0",PROTOCOL:7,wsPort:80,wssPort:443,wsPath:"",httpHost:"sockjs.pusher.com",httpPort:80,httpsPort:443,httpPath:"/pusher",stats_host:"stats.pusher.com",authEndpoint:"/pusher/auth",authTransport:"ajax",activityTimeout:12e4,pongTimeout:3e4,unavailableTimeout:1e4,cluster:"mt1",userAuthentication:{endpoint:"/pusher/user-auth",transport:"ajax"},channelAuthorization:{endpoint:"/pusher/auth",transport:"ajax"},cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",dependency_suffix:""},p=f,v=function(){function o(s){this.options=s,this.receivers=s.receivers||h,this.loading={}}return o.prototype.load=function(s,a,c){var l=this;if(l.loading[s]&&l.loading[s].length>0)l.loading[s].push(c);else{l.loading[s]=[c];var d=M.createScriptRequest(l.getPath(s,a)),m=l.receivers.create(function(_){if(l.receivers.remove(m),l.loading[s]){var I=l.loading[s];delete l.loading[s];for(var L=function($){$||d.cleanup()},q=0;q<I.length;q++)I[q](_,L)}});d.send(m)}},o.prototype.getRoot=function(s){var a,c=M.getDocument().location.protocol;return s&&s.useTLS||c==="https:"?a=this.options.cdn_https:a=this.options.cdn_http,a.replace(/\/*$/,"")+"/"+this.options.version},o.prototype.getPath=function(s,a){return this.getRoot(a)+"/"+s+this.options.suffix+".js"},o}(),g=v,w=new u("_pusher_dependencies","Pusher.DependenciesReceivers"),S=new g({cdn_http:p.cdn_http,cdn_https:p.cdn_https,version:p.VERSION,suffix:p.dependency_suffix,receivers:w}),E={baseUrl:"https://pusher.com",urls:{authenticationEndpoint:{path:"/docs/channels/server_api/authenticating_users"},authorizationEndpoint:{path:"/docs/channels/server_api/authorizing-users/"},javascriptQuickStart:{path:"/docs/javascript_quick_start"},triggeringClientEvents:{path:"/docs/client_api_guide/client_events#trigger-events"},encryptedChannelSupport:{fullUrl:"https://github.com/pusher/pusher-js/tree/cc491015371a4bde5743d1c87a0fbac0feb53195#encrypted-channel-support"}}},x=function(o){var s="See:",a=E.urls[o];if(!a)return"";var c;return a.fullUrl?c=a.fullUrl:a.path&&(c=E.baseUrl+a.path),c?s+" "+c:""},T={buildLogSuffix:x},b;(function(o){o.UserAuthentication="user-authentication",o.ChannelAuthorization="channel-authorization"})(b||(b={}));var y=function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var d in l)l.hasOwnProperty(d)&&(c[d]=l[d])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),A=function(o){y(s,o);function s(a){var c=this.constructor,l=o.call(this,a)||this;return Object.setPrototypeOf(l,c.prototype),l}return s}(Error),P=function(o){y(s,o);function s(a){var c=this.constructor,l=o.call(this,a)||this;return Object.setPrototypeOf(l,c.prototype),l}return s}(Error),D=function(o){y(s,o);function s(a){var c=this.constructor,l=o.call(this,a)||this;return Object.setPrototypeOf(l,c.prototype),l}return s}(Error),R=function(o){y(s,o);function s(a){var c=this.constructor,l=o.call(this,a)||this;return Object.setPrototypeOf(l,c.prototype),l}return s}(Error),C=function(o){y(s,o);function s(a){var c=this.constructor,l=o.call(this,a)||this;return Object.setPrototypeOf(l,c.prototype),l}return s}(Error),k=function(o){y(s,o);function s(a){var c=this.constructor,l=o.call(this,a)||this;return Object.setPrototypeOf(l,c.prototype),l}return s}(Error),O=function(o){y(s,o);function s(a){var c=this.constructor,l=o.call(this,a)||this;return Object.setPrototypeOf(l,c.prototype),l}return s}(Error),H=function(o){y(s,o);function s(a){var c=this.constructor,l=o.call(this,a)||this;return Object.setPrototypeOf(l,c.prototype),l}return s}(Error),F=function(o){y(s,o);function s(a,c){var l=this.constructor,d=o.call(this,c)||this;return d.status=a,Object.setPrototypeOf(d,l.prototype),d}return s}(Error),W=function(o,s,a,c,l){var d=M.createXHR();d.open("POST",a.endpoint,!0),d.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(var m in a.headers)d.setRequestHeader(m,a.headers[m]);if(a.headersProvider!=null){var _=a.headersProvider();for(var m in _)d.setRequestHeader(m,_[m])}return d.onreadystatechange=function(){if(d.readyState===4)if(d.status===200){var I=void 0,L=!1;try{I=JSON.parse(d.responseText),L=!0}catch($){l(new F(200,"JSON returned from "+c.toString()+" endpoint was invalid, yet status code was 200. Data was: "+d.responseText),null)}L&&l(null,I)}else{var q="";switch(c){case b.UserAuthentication:q=T.buildLogSuffix("authenticationEndpoint");break;case b.ChannelAuthorization:q="Clients must be authorized to join private or presence channels. "+T.buildLogSuffix("authorizationEndpoint");break}l(new F(d.status,"Unable to retrieve auth string from "+c.toString()+" endpoint - "+("received status: "+d.status+" from "+a.endpoint+". "+q)),null)}},d.send(s),d},Y=W;function Q(o){return wt(dt(o))}var K=String.fromCharCode,kt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",At=function(o){var s=o.charCodeAt(0);return s<128?o:s<2048?K(192|s>>>6)+K(128|s&63):K(224|s>>>12&15)+K(128|s>>>6&63)+K(128|s&63)},dt=function(o){return o.replace(/[^\x00-\x7F]/g,At)},rt=function(o){var s=[0,2,1][o.length%3],a=o.charCodeAt(0)<<16|(o.length>1?o.charCodeAt(1):0)<<8|(o.length>2?o.charCodeAt(2):0),c=[kt.charAt(a>>>18),kt.charAt(a>>>12&63),s>=2?"=":kt.charAt(a>>>6&63),s>=1?"=":kt.charAt(a&63)];return c.join("")},wt=window.btoa||function(o){return o.replace(/[\s\S]{1,3}/g,rt)},Hn=function(){function o(s,a,c,l){var d=this;this.clear=a,this.timer=s(function(){d.timer&&(d.timer=l(d.timer))},c)}return o.prototype.isRunning=function(){return this.timer!==null},o.prototype.ensureAborted=function(){this.timer&&(this.clear(this.timer),this.timer=null)},o}(),$i=Hn,Ki=function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var d in l)l.hasOwnProperty(d)&&(c[d]=l[d])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}();function Po(o){window.clearTimeout(o)}function Oo(o){window.clearInterval(o)}var Bt=function(o){Ki(s,o);function s(a,c){return o.call(this,setTimeout,Po,a,function(l){return c(),null})||this}return s}($i),Io=function(o){Ki(s,o);function s(a,c){return o.call(this,setInterval,Oo,a,function(l){return c(),l})||this}return s}($i),Mo={now:function(){return Date.now?Date.now():new Date().valueOf()},defer:function(o){return new Bt(0,o)},method:function(o){var s=Array.prototype.slice.call(arguments,1);return function(a){return a[o].apply(a,s.concat(arguments))}}},Z=Mo;function st(o){for(var s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];for(var c=0;c<s.length;c++){var l=s[c];for(var d in l)l[d]&&l[d].constructor&&l[d].constructor===Object?o[d]=st(o[d]||{},l[d]):o[d]=l[d]}return o}function Fo(){for(var o=["Pusher"],s=0;s<arguments.length;s++)typeof arguments[s]=="string"?o.push(arguments[s]):o.push(De(arguments[s]));return o.join(" : ")}function Xi(o,s){var a=Array.prototype.indexOf;if(o===null)return-1;if(a&&o.indexOf===a)return o.indexOf(s);for(var c=0,l=o.length;c<l;c++)if(o[c]===s)return c;return-1}function Lt(o,s){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&s(o[a],a,o)}function Ji(o){var s=[];return Lt(o,function(a,c){s.push(c)}),s}function Do(o){var s=[];return Lt(o,function(a){s.push(a)}),s}function ge(o,s,a){for(var c=0;c<o.length;c++)s.call(a||window,o[c],c,o)}function Yi(o,s){for(var a=[],c=0;c<o.length;c++)a.push(s(o[c],c,o,a));return a}function Ho(o,s){var a={};return Lt(o,function(c,l){a[l]=s(c)}),a}function Gi(o,s){s=s||function(l){return!!l};for(var a=[],c=0;c<o.length;c++)s(o[c],c,o,a)&&a.push(o[c]);return a}function Qi(o,s){var a={};return Lt(o,function(c,l){(s&&s(c,l,o,a)||c)&&(a[l]=c)}),a}function qo(o){var s=[];return Lt(o,function(a,c){s.push([c,a])}),s}function Zi(o,s){for(var a=0;a<o.length;a++)if(s(o[a],a,o))return!0;return!1}function No(o,s){for(var a=0;a<o.length;a++)if(!s(o[a],a,o))return!1;return!0}function Bo(o){return Ho(o,function(s){return typeof s=="object"&&(s=De(s)),encodeURIComponent(Q(s.toString()))})}function jo(o){var s=Qi(o,function(c){return c!==void 0}),a=Yi(qo(Bo(s)),Z.method("join","=")).join("&");return a}function Uo(o){var s=[],a=[];return function c(l,d){var m,_,I;switch(typeof l){case"object":if(!l)return null;for(m=0;m<s.length;m+=1)if(s[m]===l)return{$ref:a[m]};if(s.push(l),a.push(d),Object.prototype.toString.apply(l)==="[object Array]")for(I=[],m=0;m<l.length;m+=1)I[m]=c(l[m],d+"["+m+"]");else{I={};for(_ in l)Object.prototype.hasOwnProperty.call(l,_)&&(I[_]=c(l[_],d+"["+JSON.stringify(_)+"]"))}return I;case"number":case"string":case"boolean":return l}}(o,"$")}function De(o){try{return JSON.stringify(o)}catch(s){return JSON.stringify(Uo(o))}}var Wo=function(){function o(){this.globalLog=function(s){window.console&&window.console.log&&window.console.log(s)}}return o.prototype.debug=function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];this.log(this.globalLog,s)},o.prototype.warn=function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];this.log(this.globalLogWarn,s)},o.prototype.error=function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];this.log(this.globalLogError,s)},o.prototype.globalLogWarn=function(s){window.console&&window.console.warn?window.console.warn(s):this.globalLog(s)},o.prototype.globalLogError=function(s){window.console&&window.console.error?window.console.error(s):this.globalLogWarn(s)},o.prototype.log=function(s){var a=Fo.apply(this,arguments);if(Xn.log)Xn.log(a);else if(Xn.logToConsole){var c=s.bind(this);c(a)}},o}(),j=new Wo,Vo=function(o,s,a,c,l){(a.headers!==void 0||a.headersProvider!=null)&&j.warn("To send headers with the "+c.toString()+" request, you must use AJAX, rather than JSONP.");var d=o.nextAuthCallbackID.toString();o.nextAuthCallbackID++;var m=o.getDocument(),_=m.createElement("script");o.auth_callbacks[d]=function(q){l(null,q)};var I="Pusher.auth_callbacks['"+d+"']";_.src=a.endpoint+"?callback="+encodeURIComponent(I)+"&"+s;var L=m.getElementsByTagName("head")[0]||m.documentElement;L.insertBefore(_,L.firstChild)},zo=Vo,$o=function(){function o(s){this.src=s}return o.prototype.send=function(s){var a=this,c="Error loading "+a.src;a.script=document.createElement("script"),a.script.id=s.id,a.script.src=a.src,a.script.type="text/javascript",a.script.charset="UTF-8",a.script.addEventListener?(a.script.onerror=function(){s.callback(c)},a.script.onload=function(){s.callback(null)}):a.script.onreadystatechange=function(){(a.script.readyState==="loaded"||a.script.readyState==="complete")&&s.callback(null)},a.script.async===void 0&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(a.errorScript=document.createElement("script"),a.errorScript.id=s.id+"_error",a.errorScript.text=s.name+"('"+c+"');",a.script.async=a.errorScript.async=!1):a.script.async=!0;var l=document.getElementsByTagName("head")[0];l.insertBefore(a.script,l.firstChild),a.errorScript&&l.insertBefore(a.errorScript,a.script.nextSibling)},o.prototype.cleanup=function(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null},o}(),Ko=$o,Xo=function(){function o(s,a){this.url=s,this.data=a}return o.prototype.send=function(s){if(!this.request){var a=jo(this.data),c=this.url+"/"+s.number+"?"+a;this.request=M.createScriptRequest(c),this.request.send(s)}},o.prototype.cleanup=function(){this.request&&this.request.cleanup()},o}(),Jo=Xo,Yo=function(o,s){return function(a,c){var l="http"+(s?"s":"")+"://",d=l+(o.host||o.options.host)+o.options.path,m=M.createJSONPRequest(d,a),_=M.ScriptReceivers.create(function(I,L){h.remove(_),m.cleanup(),L&&L.host&&(o.host=L.host),c&&c(I,L)});m.send(_)}},Go={name:"jsonp",getAgent:Yo},Qo=Go;function qn(o,s,a){var c=o+(s.useTLS?"s":""),l=s.useTLS?s.hostTLS:s.hostNonTLS;return c+"://"+l+a}function Nn(o,s){var a="/app/"+o,c="?protocol="+p.PROTOCOL+"&client=js&version="+p.VERSION+(s?"&"+s:"");return a+c}var Zo={getInitial:function(o,s){var a=(s.httpPath||"")+Nn(o,"flash=false");return qn("ws",s,a)}},ta={getInitial:function(o,s){var a=(s.httpPath||"/pusher")+Nn(o);return qn("http",s,a)}},ea={getInitial:function(o,s){return qn("http",s,s.httpPath||"/pusher")},getPath:function(o,s){return Nn(o)}},na=function(){function o(){this._callbacks={}}return o.prototype.get=function(s){return this._callbacks[Bn(s)]},o.prototype.add=function(s,a,c){var l=Bn(s);this._callbacks[l]=this._callbacks[l]||[],this._callbacks[l].push({fn:a,context:c})},o.prototype.remove=function(s,a,c){if(!s&&!a&&!c){this._callbacks={};return}var l=s?[Bn(s)]:Ji(this._callbacks);a||c?this.removeCallback(l,a,c):this.removeAllCallbacks(l)},o.prototype.removeCallback=function(s,a,c){ge(s,function(l){this._callbacks[l]=Gi(this._callbacks[l]||[],function(d){return a&&a!==d.fn||c&&c!==d.context}),this._callbacks[l].length===0&&delete this._callbacks[l]},this)},o.prototype.removeAllCallbacks=function(s){ge(s,function(a){delete this._callbacks[a]},this)},o}(),ia=na;function Bn(o){return"_"+o}var ra=function(){function o(s){this.callbacks=new ia,this.global_callbacks=[],this.failThrough=s}return o.prototype.bind=function(s,a,c){return this.callbacks.add(s,a,c),this},o.prototype.bind_global=function(s){return this.global_callbacks.push(s),this},o.prototype.unbind=function(s,a,c){return this.callbacks.remove(s,a,c),this},o.prototype.unbind_global=function(s){return s?(this.global_callbacks=Gi(this.global_callbacks||[],function(a){return a!==s}),this):(this.global_callbacks=[],this)},o.prototype.unbind_all=function(){return this.unbind(),this.unbind_global(),this},o.prototype.emit=function(s,a,c){for(var l=0;l<this.global_callbacks.length;l++)this.global_callbacks[l](s,a);var d=this.callbacks.get(s),m=[];if(c?m.push(a,c):a&&m.push(a),d&&d.length>0)for(var l=0;l<d.length;l++)d[l].fn.apply(d[l].context||window,m);else this.failThrough&&this.failThrough(s,a);return this},o}(),xt=ra,sa=function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var d in l)l.hasOwnProperty(d)&&(c[d]=l[d])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),oa=function(o){sa(s,o);function s(a,c,l,d,m){var _=o.call(this)||this;return _.initialize=M.transportConnectionInitializer,_.hooks=a,_.name=c,_.priority=l,_.key=d,_.options=m,_.state="new",_.timeline=m.timeline,_.activityTimeout=m.activityTimeout,_.id=_.timeline.generateUniqueID(),_}return s.prototype.handlesActivityChecks=function(){return!!this.hooks.handlesActivityChecks},s.prototype.supportsPing=function(){return!!this.hooks.supportsPing},s.prototype.connect=function(){var a=this;if(this.socket||this.state!=="initialized")return!1;var c=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(c,this.options)}catch(l){return Z.defer(function(){a.onError(l),a.changeState("closed")}),!1}return this.bindListeners(),j.debug("Connecting",{transport:this.name,url:c}),this.changeState("connecting"),!0},s.prototype.close=function(){return this.socket?(this.socket.close(),!0):!1},s.prototype.send=function(a){var c=this;return this.state==="open"?(Z.defer(function(){c.socket&&c.socket.send(a)}),!0):!1},s.prototype.ping=function(){this.state==="open"&&this.supportsPing()&&this.socket.ping()},s.prototype.onOpen=function(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0},s.prototype.onError=function(a){this.emit("error",{type:"WebSocketError",error:a}),this.timeline.error(this.buildTimelineMessage({error:a.toString()}))},s.prototype.onClose=function(a){a?this.changeState("closed",{code:a.code,reason:a.reason,wasClean:a.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0},s.prototype.onMessage=function(a){this.emit("message",a)},s.prototype.onActivity=function(){this.emit("activity")},s.prototype.bindListeners=function(){var a=this;this.socket.onopen=function(){a.onOpen()},this.socket.onerror=function(c){a.onError(c)},this.socket.onclose=function(c){a.onClose(c)},this.socket.onmessage=function(c){a.onMessage(c)},this.supportsPing()&&(this.socket.onactivity=function(){a.onActivity()})},s.prototype.unbindListeners=function(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))},s.prototype.changeState=function(a,c){this.state=a,this.timeline.info(this.buildTimelineMessage({state:a,params:c})),this.emit(a,c)},s.prototype.buildTimelineMessage=function(a){return st({cid:this.id},a)},s}(xt),aa=oa,ca=function(){function o(s){this.hooks=s}return o.prototype.isSupported=function(s){return this.hooks.isSupported(s)},o.prototype.createConnection=function(s,a,c,l){return new aa(this.hooks,s,a,c,l)},o}(),Qt=ca,ua=new Qt({urls:Zo,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return!!M.getWebSocketAPI()},isSupported:function(){return!!M.getWebSocketAPI()},getSocket:function(o){return M.createWebSocket(o)}}),tr={urls:ta,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}},er=st({getSocket:function(o){return M.HTTPFactory.createStreamingSocket(o)}},tr),nr=st({getSocket:function(o){return M.HTTPFactory.createPollingSocket(o)}},tr),ir={isSupported:function(){return M.isXHRSupported()}},la=new Qt(st({},er,ir)),ha=new Qt(st({},nr,ir)),da={ws:ua,xhr_streaming:la,xhr_polling:ha},He=da,fa=new Qt({file:"sockjs",urls:ea,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return window.SockJS!==void 0},getSocket:function(o,s){return new window.SockJS(o,null,{js_path:S.getPath("sockjs",{useTLS:s.useTLS}),ignore_null_origin:s.ignoreNullOrigin})},beforeOpen:function(o,s){o.send(JSON.stringify({path:s}))}}),rr={isSupported:function(o){var s=M.isXDRSupported(o.useTLS);return s}},pa=new Qt(st({},er,rr)),ma=new Qt(st({},nr,rr));He.xdr_streaming=pa,He.xdr_polling=ma,He.sockjs=fa;var va=He,ga=function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var d in l)l.hasOwnProperty(d)&&(c[d]=l[d])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),ba=function(o){ga(s,o);function s(){var a=o.call(this)||this,c=a;return window.addEventListener!==void 0&&(window.addEventListener("online",function(){c.emit("online")},!1),window.addEventListener("offline",function(){c.emit("offline")},!1)),a}return s.prototype.isOnline=function(){return window.navigator.onLine===void 0?!0:window.navigator.onLine},s}(xt),ya=new ba,wa=function(){function o(s,a,c){this.manager=s,this.transport=a,this.minPingDelay=c.minPingDelay,this.maxPingDelay=c.maxPingDelay,this.pingDelay=void 0}return o.prototype.createConnection=function(s,a,c,l){var d=this;l=st({},l,{activityTimeout:this.pingDelay});var m=this.transport.createConnection(s,a,c,l),_=null,I=function(){m.unbind("open",I),m.bind("closed",L),_=Z.now()},L=function(q){if(m.unbind("closed",L),q.code===1002||q.code===1003)d.manager.reportDeath();else if(!q.wasClean&&_){var $=Z.now()-_;$<2*d.maxPingDelay&&(d.manager.reportDeath(),d.pingDelay=Math.max($/2,d.minPingDelay))}};return m.bind("open",I),m},o.prototype.isSupported=function(s){return this.manager.isAlive()&&this.transport.isSupported(s)},o}(),Sa=wa,sr={decodeMessage:function(o){try{var s=JSON.parse(o.data),a=s.data;if(typeof a=="string")try{a=JSON.parse(s.data)}catch(l){}var c={event:s.event,channel:s.channel,data:a};return s.user_id&&(c.user_id=s.user_id),c}catch(l){throw{type:"MessageParseError",error:l,data:o.data}}},encodeMessage:function(o){return JSON.stringify(o)},processHandshake:function(o){var s=sr.decodeMessage(o);if(s.event==="pusher:connection_established"){if(!s.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:s.data.socket_id,activityTimeout:s.data.activity_timeout*1e3}}else{if(s.event==="pusher:error")return{action:this.getCloseAction(s.data),error:this.getCloseError(s.data)};throw"Invalid handshake"}},getCloseAction:function(o){return o.code<4e3?o.code>=1002&&o.code<=1004?"backoff":null:o.code===4e3?"tls_only":o.code<4100?"refused":o.code<4200?"backoff":o.code<4300?"retry":"refused"},getCloseError:function(o){return o.code!==1e3&&o.code!==1001?{type:"PusherError",data:{code:o.code,message:o.reason||o.message}}:null}},jt=sr,Ea=function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var d in l)l.hasOwnProperty(d)&&(c[d]=l[d])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),Ta=function(o){Ea(s,o);function s(a,c){var l=o.call(this)||this;return l.id=a,l.transport=c,l.activityTimeout=c.activityTimeout,l.bindListeners(),l}return s.prototype.handlesActivityChecks=function(){return this.transport.handlesActivityChecks()},s.prototype.send=function(a){return this.transport.send(a)},s.prototype.send_event=function(a,c,l){var d={event:a,data:c};return l&&(d.channel=l),j.debug("Event sent",d),this.send(jt.encodeMessage(d))},s.prototype.ping=function(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})},s.prototype.close=function(){this.transport.close()},s.prototype.bindListeners=function(){var a=this,c={message:function(d){var m;try{m=jt.decodeMessage(d)}catch(_){a.emit("error",{type:"MessageParseError",error:_,data:d.data})}if(m!==void 0){switch(j.debug("Event recd",m),m.event){case"pusher:error":a.emit("error",{type:"PusherError",data:m.data});break;case"pusher:ping":a.emit("ping");break;case"pusher:pong":a.emit("pong");break}a.emit("message",m)}},activity:function(){a.emit("activity")},error:function(d){a.emit("error",d)},closed:function(d){l(),d&&d.code&&a.handleCloseEvent(d),a.transport=null,a.emit("closed")}},l=function(){Lt(c,function(d,m){a.transport.unbind(m,d)})};Lt(c,function(d,m){a.transport.bind(m,d)})},s.prototype.handleCloseEvent=function(a){var c=jt.getCloseAction(a),l=jt.getCloseError(a);l&&this.emit("error",l),c&&this.emit(c,{action:c,error:l})},s}(xt),Ca=Ta,_a=function(){function o(s,a){this.transport=s,this.callback=a,this.bindListeners()}return o.prototype.close=function(){this.unbindListeners(),this.transport.close()},o.prototype.bindListeners=function(){var s=this;this.onMessage=function(a){s.unbindListeners();var c;try{c=jt.processHandshake(a)}catch(l){s.finish("error",{error:l}),s.transport.close();return}c.action==="connected"?s.finish("connected",{connection:new Ca(c.id,s.transport),activityTimeout:c.activityTimeout}):(s.finish(c.action,{error:c.error}),s.transport.close())},this.onClosed=function(a){s.unbindListeners();var c=jt.getCloseAction(a)||"backoff",l=jt.getCloseError(a);s.finish(c,{error:l})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)},o.prototype.unbindListeners=function(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)},o.prototype.finish=function(s,a){this.callback(st({transport:this.transport,action:s},a))},o}(),ka=_a,Aa=function(){function o(s,a){this.timeline=s,this.options=a||{}}return o.prototype.send=function(s,a){this.timeline.isEmpty()||this.timeline.send(M.TimelineTransport.getAgent(this,s),a)},o}(),La=Aa,xa=function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var d in l)l.hasOwnProperty(d)&&(c[d]=l[d])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),Ra=function(o){xa(s,o);function s(a,c){var l=o.call(this,function(d,m){j.debug("No callbacks on "+a+" for "+d)})||this;return l.name=a,l.pusher=c,l.subscribed=!1,l.subscriptionPending=!1,l.subscriptionCancelled=!1,l}return s.prototype.authorize=function(a,c){return c(null,{auth:""})},s.prototype.trigger=function(a,c){if(a.indexOf("client-")!==0)throw new A("Event '"+a+"' does not start with 'client-'");if(!this.subscribed){var l=T.buildLogSuffix("triggeringClientEvents");j.warn("Client event triggered before channel 'subscription_succeeded' event . "+l)}return this.pusher.send_event(a,c,this.name)},s.prototype.disconnect=function(){this.subscribed=!1,this.subscriptionPending=!1},s.prototype.handleEvent=function(a){var c=a.event,l=a.data;if(c==="pusher_internal:subscription_succeeded")this.handleSubscriptionSucceededEvent(a);else if(c==="pusher_internal:subscription_count")this.handleSubscriptionCountEvent(a);else if(c.indexOf("pusher_internal:")!==0){var d={};this.emit(c,l,d)}},s.prototype.handleSubscriptionSucceededEvent=function(a){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",a.data)},s.prototype.handleSubscriptionCountEvent=function(a){a.data.subscription_count&&(this.subscriptionCount=a.data.subscription_count),this.emit("pusher:subscription_count",a.data)},s.prototype.subscribe=function(){var a=this;this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,function(c,l){c?(a.subscriptionPending=!1,j.error(c.toString()),a.emit("pusher:subscription_error",Object.assign({},{type:"AuthError",error:c.message},c instanceof F?{status:c.status}:{}))):a.pusher.send_event("pusher:subscribe",{auth:l.auth,channel_data:l.channel_data,channel:a.name})}))},s.prototype.unsubscribe=function(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})},s.prototype.cancelSubscription=function(){this.subscriptionCancelled=!0},s.prototype.reinstateSubscription=function(){this.subscriptionCancelled=!1},s}(xt),jn=Ra,Pa=function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var d in l)l.hasOwnProperty(d)&&(c[d]=l[d])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),Oa=function(o){Pa(s,o);function s(){return o!==null&&o.apply(this,arguments)||this}return s.prototype.authorize=function(a,c){return this.pusher.config.channelAuthorizer({channelName:this.name,socketId:a},c)},s}(jn),Un=Oa,Ia=function(){function o(){this.reset()}return o.prototype.get=function(s){return Object.prototype.hasOwnProperty.call(this.members,s)?{id:s,info:this.members[s]}:null},o.prototype.each=function(s){var a=this;Lt(this.members,function(c,l){s(a.get(l))})},o.prototype.setMyID=function(s){this.myID=s},o.prototype.onSubscription=function(s){this.members=s.presence.hash,this.count=s.presence.count,this.me=this.get(this.myID)},o.prototype.addMember=function(s){return this.get(s.user_id)===null&&this.count++,this.members[s.user_id]=s.user_info,this.get(s.user_id)},o.prototype.removeMember=function(s){var a=this.get(s.user_id);return a&&(delete this.members[s.user_id],this.count--),a},o.prototype.reset=function(){this.members={},this.count=0,this.myID=null,this.me=null},o}(),Ma=Ia,Fa=function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var d in l)l.hasOwnProperty(d)&&(c[d]=l[d])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),Da=function(o,s,a,c){function l(d){return d instanceof a?d:new a(function(m){m(d)})}return new(a||(a=Promise))(function(d,m){function _(q){try{L(c.next(q))}catch($){m($)}}function I(q){try{L(c.throw(q))}catch($){m($)}}function L(q){q.done?d(q.value):l(q.value).then(_,I)}L((c=c.apply(o,s||[])).next())})},Ha=function(o,s){var a={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},c,l,d,m;return m={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(m[Symbol.iterator]=function(){return this}),m;function _(L){return function(q){return I([L,q])}}function I(L){if(c)throw new TypeError("Generator is already executing.");for(;a;)try{if(c=1,l&&(d=L[0]&2?l.return:L[0]?l.throw||((d=l.return)&&d.call(l),0):l.next)&&!(d=d.call(l,L[1])).done)return d;switch(l=0,d&&(L=[L[0]&2,d.value]),L[0]){case 0:case 1:d=L;break;case 4:return a.label++,{value:L[1],done:!1};case 5:a.label++,l=L[1],L=[0];continue;case 7:L=a.ops.pop(),a.trys.pop();continue;default:if(d=a.trys,!(d=d.length>0&&d[d.length-1])&&(L[0]===6||L[0]===2)){a=0;continue}if(L[0]===3&&(!d||L[1]>d[0]&&L[1]<d[3])){a.label=L[1];break}if(L[0]===6&&a.label<d[1]){a.label=d[1],d=L;break}if(d&&a.label<d[2]){a.label=d[2],a.ops.push(L);break}d[2]&&a.ops.pop(),a.trys.pop();continue}L=s.call(o,a)}catch(q){L=[6,q],l=0}finally{c=d=0}if(L[0]&5)throw L[1];return{value:L[0]?L[1]:void 0,done:!0}}},qa=function(o){Fa(s,o);function s(a,c){var l=o.call(this,a,c)||this;return l.members=new Ma,l}return s.prototype.authorize=function(a,c){var l=this;o.prototype.authorize.call(this,a,function(d,m){return Da(l,void 0,void 0,function(){var _,I;return Ha(this,function(L){switch(L.label){case 0:return d?[3,3]:(m=m,m.channel_data==null?[3,1]:(_=JSON.parse(m.channel_data),this.members.setMyID(_.user_id),[3,3]));case 1:return[4,this.pusher.user.signinDonePromise];case 2:if(L.sent(),this.pusher.user.user_data!=null)this.members.setMyID(this.pusher.user.user_data.id);else return I=T.buildLogSuffix("authorizationEndpoint"),j.error("Invalid auth response for channel '"+this.name+"', "+("expected 'channel_data' field. "+I+", ")+"or the user should be signed in."),c("Invalid auth response"),[2];L.label=3;case 3:return c(d,m),[2]}})})})},s.prototype.handleEvent=function(a){var c=a.event;if(c.indexOf("pusher_internal:")===0)this.handleInternalEvent(a);else{var l=a.data,d={};a.user_id&&(d.user_id=a.user_id),this.emit(c,l,d)}},s.prototype.handleInternalEvent=function(a){var c=a.event,l=a.data;switch(c){case"pusher_internal:subscription_succeeded":this.handleSubscriptionSucceededEvent(a);break;case"pusher_internal:subscription_count":this.handleSubscriptionCountEvent(a);break;case"pusher_internal:member_added":var d=this.members.addMember(l);this.emit("pusher:member_added",d);break;case"pusher_internal:member_removed":var m=this.members.removeMember(l);m&&this.emit("pusher:member_removed",m);break}},s.prototype.handleSubscriptionSucceededEvent=function(a){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(a.data),this.emit("pusher:subscription_succeeded",this.members))},s.prototype.disconnect=function(){this.members.reset(),o.prototype.disconnect.call(this)},s}(Un),Na=qa,Ba=r(1),Wn=r(0),ja=function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var d in l)l.hasOwnProperty(d)&&(c[d]=l[d])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),Ua=function(o){ja(s,o);function s(a,c,l){var d=o.call(this,a,c)||this;return d.key=null,d.nacl=l,d}return s.prototype.authorize=function(a,c){var l=this;o.prototype.authorize.call(this,a,function(d,m){if(d){c(d,m);return}var _=m.shared_secret;if(!_){c(new Error("No shared_secret key in auth payload for encrypted channel: "+l.name),null);return}l.key=Object(Wn.decode)(_),delete m.shared_secret,c(null,m)})},s.prototype.trigger=function(a,c){throw new k("Client events are not currently supported for encrypted channels")},s.prototype.handleEvent=function(a){var c=a.event,l=a.data;if(c.indexOf("pusher_internal:")===0||c.indexOf("pusher:")===0){o.prototype.handleEvent.call(this,a);return}this.handleEncryptedEvent(c,l)},s.prototype.handleEncryptedEvent=function(a,c){var l=this;if(!this.key){j.debug("Received encrypted event before key has been retrieved from the authEndpoint");return}if(!c.ciphertext||!c.nonce){j.error("Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: "+c);return}var d=Object(Wn.decode)(c.ciphertext);if(d.length<this.nacl.secretbox.overheadLength){j.error("Expected encrypted event ciphertext length to be "+this.nacl.secretbox.overheadLength+", got: "+d.length);return}var m=Object(Wn.decode)(c.nonce);if(m.length<this.nacl.secretbox.nonceLength){j.error("Expected encrypted event nonce length to be "+this.nacl.secretbox.nonceLength+", got: "+m.length);return}var _=this.nacl.secretbox.open(d,m,this.key);if(_===null){j.debug("Failed to decrypt an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint..."),this.authorize(this.pusher.connection.socket_id,function(I,L){if(I){j.error("Failed to make a request to the authEndpoint: "+L+". Unable to fetch new key, so dropping encrypted event");return}if(_=l.nacl.secretbox.open(d,m,l.key),_===null){j.error("Failed to decrypt event with new key. Dropping encrypted event");return}l.emit(a,l.getDataToEmit(_))});return}this.emit(a,this.getDataToEmit(_))},s.prototype.getDataToEmit=function(a){var c=Object(Ba.decode)(a);try{return JSON.parse(c)}catch(l){return c}},s}(Un),Wa=Ua,Va=function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var d in l)l.hasOwnProperty(d)&&(c[d]=l[d])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),za=function(o){Va(s,o);function s(a,c){var l=o.call(this)||this;l.state="initialized",l.connection=null,l.key=a,l.options=c,l.timeline=l.options.timeline,l.usingTLS=l.options.useTLS,l.errorCallbacks=l.buildErrorCallbacks(),l.connectionCallbacks=l.buildConnectionCallbacks(l.errorCallbacks),l.handshakeCallbacks=l.buildHandshakeCallbacks(l.errorCallbacks);var d=M.getNetwork();return d.bind("online",function(){l.timeline.info({netinfo:"online"}),(l.state==="connecting"||l.state==="unavailable")&&l.retryIn(0)}),d.bind("offline",function(){l.timeline.info({netinfo:"offline"}),l.connection&&l.sendActivityCheck()}),l.updateStrategy(),l}return s.prototype.connect=function(){if(!(this.connection||this.runner)){if(!this.strategy.isSupported()){this.updateState("failed");return}this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()}},s.prototype.send=function(a){return this.connection?this.connection.send(a):!1},s.prototype.send_event=function(a,c,l){return this.connection?this.connection.send_event(a,c,l):!1},s.prototype.disconnect=function(){this.disconnectInternally(),this.updateState("disconnected")},s.prototype.isUsingTLS=function(){return this.usingTLS},s.prototype.startConnecting=function(){var a=this,c=function(l,d){l?a.runner=a.strategy.connect(0,c):d.action==="error"?(a.emit("error",{type:"HandshakeError",error:d.error}),a.timeline.error({handshakeError:d.error})):(a.abortConnecting(),a.handshakeCallbacks[d.action](d))};this.runner=this.strategy.connect(0,c)},s.prototype.abortConnecting=function(){this.runner&&(this.runner.abort(),this.runner=null)},s.prototype.disconnectInternally=function(){if(this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection){var a=this.abandonConnection();a.close()}},s.prototype.updateStrategy=function(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,useTLS:this.usingTLS})},s.prototype.retryIn=function(a){var c=this;this.timeline.info({action:"retry",delay:a}),a>0&&this.emit("connecting_in",Math.round(a/1e3)),this.retryTimer=new Bt(a||0,function(){c.disconnectInternally(),c.connect()})},s.prototype.clearRetryTimer=function(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)},s.prototype.setUnavailableTimer=function(){var a=this;this.unavailableTimer=new Bt(this.options.unavailableTimeout,function(){a.updateState("unavailable")})},s.prototype.clearUnavailableTimer=function(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()},s.prototype.sendActivityCheck=function(){var a=this;this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new Bt(this.options.pongTimeout,function(){a.timeline.error({pong_timed_out:a.options.pongTimeout}),a.retryIn(0)})},s.prototype.resetActivityCheck=function(){var a=this;this.stopActivityCheck(),this.connection&&!this.connection.handlesActivityChecks()&&(this.activityTimer=new Bt(this.activityTimeout,function(){a.sendActivityCheck()}))},s.prototype.stopActivityCheck=function(){this.activityTimer&&this.activityTimer.ensureAborted()},s.prototype.buildConnectionCallbacks=function(a){var c=this;return st({},a,{message:function(l){c.resetActivityCheck(),c.emit("message",l)},ping:function(){c.send_event("pusher:pong",{})},activity:function(){c.resetActivityCheck()},error:function(l){c.emit("error",l)},closed:function(){c.abandonConnection(),c.shouldRetry()&&c.retryIn(1e3)}})},s.prototype.buildHandshakeCallbacks=function(a){var c=this;return st({},a,{connected:function(l){c.activityTimeout=Math.min(c.options.activityTimeout,l.activityTimeout,l.connection.activityTimeout||1/0),c.clearUnavailableTimer(),c.setConnection(l.connection),c.socket_id=c.connection.id,c.updateState("connected",{socket_id:c.socket_id})}})},s.prototype.buildErrorCallbacks=function(){var a=this,c=function(l){return function(d){d.error&&a.emit("error",{type:"WebSocketError",error:d.error}),l(d)}};return{tls_only:c(function(){a.usingTLS=!0,a.updateStrategy(),a.retryIn(0)}),refused:c(function(){a.disconnect()}),backoff:c(function(){a.retryIn(1e3)}),retry:c(function(){a.retryIn(0)})}},s.prototype.setConnection=function(a){this.connection=a;for(var c in this.connectionCallbacks)this.connection.bind(c,this.connectionCallbacks[c]);this.resetActivityCheck()},s.prototype.abandonConnection=function(){if(this.connection){this.stopActivityCheck();for(var a in this.connectionCallbacks)this.connection.unbind(a,this.connectionCallbacks[a]);var c=this.connection;return this.connection=null,c}},s.prototype.updateState=function(a,c){var l=this.state;if(this.state=a,l!==a){var d=a;d==="connected"&&(d+=" with new socket ID "+c.socket_id),j.debug("State changed",l+" -> "+d),this.timeline.info({state:a,params:c}),this.emit("state_change",{previous:l,current:a}),this.emit(a,c)}},s.prototype.shouldRetry=function(){return this.state==="connecting"||this.state==="connected"},s}(xt),$a=za,Ka=function(){function o(){this.channels={}}return o.prototype.add=function(s,a){return this.channels[s]||(this.channels[s]=Ja(s,a)),this.channels[s]},o.prototype.all=function(){return Do(this.channels)},o.prototype.find=function(s){return this.channels[s]},o.prototype.remove=function(s){var a=this.channels[s];return delete this.channels[s],a},o.prototype.disconnect=function(){Lt(this.channels,function(s){s.disconnect()})},o}(),Xa=Ka;function Ja(o,s){if(o.indexOf("private-encrypted-")===0){if(s.config.nacl)return Rt.createEncryptedChannel(o,s,s.config.nacl);var a="Tried to subscribe to a private-encrypted- channel but no nacl implementation available",c=T.buildLogSuffix("encryptedChannelSupport");throw new k(a+". "+c)}else{if(o.indexOf("private-")===0)return Rt.createPrivateChannel(o,s);if(o.indexOf("presence-")===0)return Rt.createPresenceChannel(o,s);if(o.indexOf("#")===0)throw new P('Cannot create a channel with name "'+o+'".');return Rt.createChannel(o,s)}}var Ya={createChannels:function(){return new Xa},createConnectionManager:function(o,s){return new $a(o,s)},createChannel:function(o,s){return new jn(o,s)},createPrivateChannel:function(o,s){return new Un(o,s)},createPresenceChannel:function(o,s){return new Na(o,s)},createEncryptedChannel:function(o,s,a){return new Wa(o,s,a)},createTimelineSender:function(o,s){return new La(o,s)},createHandshake:function(o,s){return new ka(o,s)},createAssistantToTheTransportManager:function(o,s,a){return new Sa(o,s,a)}},Rt=Ya,Ga=function(){function o(s){this.options=s||{},this.livesLeft=this.options.lives||1/0}return o.prototype.getAssistant=function(s){return Rt.createAssistantToTheTransportManager(this,s,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})},o.prototype.isAlive=function(){return this.livesLeft>0},o.prototype.reportDeath=function(){this.livesLeft-=1},o}(),or=Ga,Qa=function(){function o(s,a){this.strategies=s,this.loop=!!a.loop,this.failFast=!!a.failFast,this.timeout=a.timeout,this.timeoutLimit=a.timeoutLimit}return o.prototype.isSupported=function(){return Zi(this.strategies,Z.method("isSupported"))},o.prototype.connect=function(s,a){var c=this,l=this.strategies,d=0,m=this.timeout,_=null,I=function(L,q){q?a(null,q):(d=d+1,c.loop&&(d=d%l.length),d<l.length?(m&&(m=m*2,c.timeoutLimit&&(m=Math.min(m,c.timeoutLimit))),_=c.tryStrategy(l[d],s,{timeout:m,failFast:c.failFast},I)):a(!0))};return _=this.tryStrategy(l[d],s,{timeout:m,failFast:this.failFast},I),{abort:function(){_.abort()},forceMinPriority:function(L){s=L,_&&_.forceMinPriority(L)}}},o.prototype.tryStrategy=function(s,a,c,l){var d=null,m=null;return c.timeout>0&&(d=new Bt(c.timeout,function(){m.abort(),l(!0)})),m=s.connect(a,function(_,I){_&&d&&d.isRunning()&&!c.failFast||(d&&d.ensureAborted(),l(_,I))}),{abort:function(){d&&d.ensureAborted(),m.abort()},forceMinPriority:function(_){m.forceMinPriority(_)}}},o}(),Ut=Qa,Za=function(){function o(s){this.strategies=s}return o.prototype.isSupported=function(){return Zi(this.strategies,Z.method("isSupported"))},o.prototype.connect=function(s,a){return tc(this.strategies,s,function(c,l){return function(d,m){if(l[c].error=d,d){ec(l)&&a(!0);return}ge(l,function(_){_.forceMinPriority(m.transport.priority)}),a(null,m)}})},o}(),Vn=Za;function tc(o,s,a){var c=Yi(o,function(l,d,m,_){return l.connect(s,a(d,_))});return{abort:function(){ge(c,nc)},forceMinPriority:function(l){ge(c,function(d){d.forceMinPriority(l)})}}}function ec(o){return No(o,function(s){return!!s.error})}function nc(o){!o.error&&!o.aborted&&(o.abort(),o.aborted=!0)}var ic=function(){function o(s,a,c){this.strategy=s,this.transports=a,this.ttl=c.ttl||1800*1e3,this.usingTLS=c.useTLS,this.timeline=c.timeline}return o.prototype.isSupported=function(){return this.strategy.isSupported()},o.prototype.connect=function(s,a){var c=this.usingTLS,l=sc(c),d=[this.strategy];if(l&&l.timestamp+this.ttl>=Z.now()){var m=this.transports[l.transport];m&&(this.timeline.info({cached:!0,transport:l.transport,latency:l.latency}),d.push(new Ut([m],{timeout:l.latency*2+1e3,failFast:!0})))}var _=Z.now(),I=d.pop().connect(s,function L(q,$){q?(ar(c),d.length>0?(_=Z.now(),I=d.pop().connect(s,L)):a(q)):(oc(c,$.transport.name,Z.now()-_),a(null,$))});return{abort:function(){I.abort()},forceMinPriority:function(L){s=L,I&&I.forceMinPriority(L)}}},o}(),rc=ic;function zn(o){return"pusherTransport"+(o?"TLS":"NonTLS")}function sc(o){var s=M.getLocalStorage();if(s)try{var a=s[zn(o)];if(a)return JSON.parse(a)}catch(c){ar(o)}return null}function oc(o,s,a){var c=M.getLocalStorage();if(c)try{c[zn(o)]=De({timestamp:Z.now(),transport:s,latency:a})}catch(l){}}function ar(o){var s=M.getLocalStorage();if(s)try{delete s[zn(o)]}catch(a){}}var ac=function(){function o(s,a){var c=a.delay;this.strategy=s,this.options={delay:c}}return o.prototype.isSupported=function(){return this.strategy.isSupported()},o.prototype.connect=function(s,a){var c=this.strategy,l,d=new Bt(this.options.delay,function(){l=c.connect(s,a)});return{abort:function(){d.ensureAborted(),l&&l.abort()},forceMinPriority:function(m){s=m,l&&l.forceMinPriority(m)}}},o}(),qe=ac,cc=function(){function o(s,a,c){this.test=s,this.trueBranch=a,this.falseBranch=c}return o.prototype.isSupported=function(){var s=this.test()?this.trueBranch:this.falseBranch;return s.isSupported()},o.prototype.connect=function(s,a){var c=this.test()?this.trueBranch:this.falseBranch;return c.connect(s,a)},o}(),be=cc,uc=function(){function o(s){this.strategy=s}return o.prototype.isSupported=function(){return this.strategy.isSupported()},o.prototype.connect=function(s,a){var c=this.strategy.connect(s,function(l,d){d&&c.abort(),a(l,d)});return c},o}(),lc=uc;function ye(o){return function(){return o.isSupported()}}var hc=function(o,s,a){var c={};function l(wr,bu,yu,wu,Su){var Sr=a(o,wr,bu,yu,wu,Su);return c[wr]=Sr,Sr}var d=Object.assign({},s,{hostNonTLS:o.wsHost+":"+o.wsPort,hostTLS:o.wsHost+":"+o.wssPort,httpPath:o.wsPath}),m=Object.assign({},d,{useTLS:!0}),_=Object.assign({},s,{hostNonTLS:o.httpHost+":"+o.httpPort,hostTLS:o.httpHost+":"+o.httpsPort,httpPath:o.httpPath}),I={loop:!0,timeout:15e3,timeoutLimit:6e4},L=new or({lives:2,minPingDelay:1e4,maxPingDelay:o.activityTimeout}),q=new or({lives:2,minPingDelay:1e4,maxPingDelay:o.activityTimeout}),$=l("ws","ws",3,d,L),St=l("wss","ws",3,m,L),fu=l("sockjs","sockjs",1,_),pr=l("xhr_streaming","xhr_streaming",1,_,q),pu=l("xdr_streaming","xdr_streaming",1,_,q),mr=l("xhr_polling","xhr_polling",1,_),mu=l("xdr_polling","xdr_polling",1,_),vr=new Ut([$],I),vu=new Ut([St],I),gu=new Ut([fu],I),gr=new Ut([new be(ye(pr),pr,pu)],I),br=new Ut([new be(ye(mr),mr,mu)],I),yr=new Ut([new be(ye(gr),new Vn([gr,new qe(br,{delay:4e3})]),br)],I),Jn=new be(ye(yr),yr,gu),Yn;return s.useTLS?Yn=new Vn([vr,new qe(Jn,{delay:2e3})]):Yn=new Vn([vr,new qe(vu,{delay:2e3}),new qe(Jn,{delay:5e3})]),new rc(new lc(new be(ye($),Yn,Jn)),c,{ttl:18e5,timeline:s.timeline,useTLS:s.useTLS})},dc=hc,fc=function(){var o=this;o.timeline.info(o.buildTimelineMessage({transport:o.name+(o.options.useTLS?"s":"")})),o.hooks.isInitialized()?o.changeState("initialized"):o.hooks.file?(o.changeState("initializing"),S.load(o.hooks.file,{useTLS:o.options.useTLS},function(s,a){o.hooks.isInitialized()?(o.changeState("initialized"),a(!0)):(s&&o.onError(s),o.onClose(),a(!1))})):o.onClose()},pc={getRequest:function(o){var s=new window.XDomainRequest;return s.ontimeout=function(){o.emit("error",new D),o.close()},s.onerror=function(a){o.emit("error",a),o.close()},s.onprogress=function(){s.responseText&&s.responseText.length>0&&o.onChunk(200,s.responseText)},s.onload=function(){s.responseText&&s.responseText.length>0&&o.onChunk(200,s.responseText),o.emit("finished",200),o.close()},s},abortRequest:function(o){o.ontimeout=o.onerror=o.onprogress=o.onload=null,o.abort()}},mc=pc,vc=function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var d in l)l.hasOwnProperty(d)&&(c[d]=l[d])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),gc=256*1024,bc=function(o){vc(s,o);function s(a,c,l){var d=o.call(this)||this;return d.hooks=a,d.method=c,d.url=l,d}return s.prototype.start=function(a){var c=this;this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=function(){c.close()},M.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(a)},s.prototype.close=function(){this.unloader&&(M.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)},s.prototype.onChunk=function(a,c){for(;;){var l=this.advanceBuffer(c);if(l)this.emit("chunk",{status:a,data:l});else break}this.isBufferTooLong(c)&&this.emit("buffer_too_long")},s.prototype.advanceBuffer=function(a){var c=a.slice(this.position),l=c.indexOf("\n");return l!==-1?(this.position+=l+1,c.slice(0,l)):null},s.prototype.isBufferTooLong=function(a){return this.position===a.length&&a.length>gc},s}(xt),yc=bc,$n;(function(o){o[o.CONNECTING=0]="CONNECTING",o[o.OPEN=1]="OPEN",o[o.CLOSED=3]="CLOSED"})($n||($n={}));var Wt=$n,wc=1,Sc=function(){function o(s,a){this.hooks=s,this.session=ur(1e3)+"/"+_c(8),this.location=Ec(a),this.readyState=Wt.CONNECTING,this.openStream()}return o.prototype.send=function(s){return this.sendRaw(JSON.stringify([s]))},o.prototype.ping=function(){this.hooks.sendHeartbeat(this)},o.prototype.close=function(s,a){this.onClose(s,a,!0)},o.prototype.sendRaw=function(s){if(this.readyState===Wt.OPEN)try{return M.createSocketRequest("POST",cr(Tc(this.location,this.session))).start(s),!0}catch(a){return!1}else return!1},o.prototype.reconnect=function(){this.closeStream(),this.openStream()},o.prototype.onClose=function(s,a,c){this.closeStream(),this.readyState=Wt.CLOSED,this.onclose&&this.onclose({code:s,reason:a,wasClean:c})},o.prototype.onChunk=function(s){if(s.status===200){this.readyState===Wt.OPEN&&this.onActivity();var a,c=s.data.slice(0,1);switch(c){case"o":a=JSON.parse(s.data.slice(1)||"{}"),this.onOpen(a);break;case"a":a=JSON.parse(s.data.slice(1)||"[]");for(var l=0;l<a.length;l++)this.onEvent(a[l]);break;case"m":a=JSON.parse(s.data.slice(1)||"null"),this.onEvent(a);break;case"h":this.hooks.onHeartbeat(this);break;case"c":a=JSON.parse(s.data.slice(1)||"[]"),this.onClose(a[0],a[1],!0);break}}},o.prototype.onOpen=function(s){this.readyState===Wt.CONNECTING?(s&&s.hostname&&(this.location.base=Cc(this.location.base,s.hostname)),this.readyState=Wt.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)},o.prototype.onEvent=function(s){this.readyState===Wt.OPEN&&this.onmessage&&this.onmessage({data:s})},o.prototype.onActivity=function(){this.onactivity&&this.onactivity()},o.prototype.onError=function(s){this.onerror&&this.onerror(s)},o.prototype.openStream=function(){var s=this;this.stream=M.createSocketRequest("POST",cr(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",function(a){s.onChunk(a)}),this.stream.bind("finished",function(a){s.hooks.onFinished(s,a)}),this.stream.bind("buffer_too_long",function(){s.reconnect()});try{this.stream.start()}catch(a){Z.defer(function(){s.onError(a),s.onClose(1006,"Could not start streaming",!1)})}},o.prototype.closeStream=function(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)},o}();function Ec(o){var s=/([^\?]*)\/*(\??.*)/.exec(o);return{base:s[1],queryString:s[2]}}function Tc(o,s){return o.base+"/"+s+"/xhr_send"}function cr(o){var s=o.indexOf("?")===-1?"?":"&";return o+s+"t="+ +new Date+"&n="+wc++}function Cc(o,s){var a=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(o);return a[1]+s+a[3]}function ur(o){return M.randomInt(o)}function _c(o){for(var s=[],a=0;a<o;a++)s.push(ur(32).toString(32));return s.join("")}var kc=Sc,Ac={getReceiveURL:function(o,s){return o.base+"/"+s+"/xhr_streaming"+o.queryString},onHeartbeat:function(o){o.sendRaw("[]")},sendHeartbeat:function(o){o.sendRaw("[]")},onFinished:function(o,s){o.onClose(1006,"Connection interrupted ("+s+")",!1)}},Lc=Ac,xc={getReceiveURL:function(o,s){return o.base+"/"+s+"/xhr"+o.queryString},onHeartbeat:function(){},sendHeartbeat:function(o){o.sendRaw("[]")},onFinished:function(o,s){s===200?o.reconnect():o.onClose(1006,"Connection interrupted ("+s+")",!1)}},Rc=xc,Pc={getRequest:function(o){var s=M.getXHRAPI(),a=new s;return a.onreadystatechange=a.onprogress=function(){switch(a.readyState){case 3:a.responseText&&a.responseText.length>0&&o.onChunk(a.status,a.responseText);break;case 4:a.responseText&&a.responseText.length>0&&o.onChunk(a.status,a.responseText),o.emit("finished",a.status),o.close();break}},a},abortRequest:function(o){o.onreadystatechange=null,o.abort()}},Oc=Pc,Ic={createStreamingSocket:function(o){return this.createSocket(Lc,o)},createPollingSocket:function(o){return this.createSocket(Rc,o)},createSocket:function(o,s){return new kc(o,s)},createXHR:function(o,s){return this.createRequest(Oc,o,s)},createRequest:function(o,s,a){return new yc(o,s,a)}},lr=Ic;lr.createXDR=function(o,s){return this.createRequest(mc,o,s)};var Mc=lr,Fc={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:h,DependenciesReceivers:w,getDefaultStrategy:dc,Transports:va,transportConnectionInitializer:fc,HTTPFactory:Mc,TimelineTransport:Qo,getXHRAPI:function(){return window.XMLHttpRequest},getWebSocketAPI:function(){return window.WebSocket||window.MozWebSocket},setup:function(o){var s=this;window.Pusher=o;var a=function(){s.onDocumentBody(o.ready)};window.JSON?a():S.load("json2",{},a)},getDocument:function(){return document},getProtocol:function(){return this.getDocument().location.protocol},getAuthorizers:function(){return{ajax:Y,jsonp:zo}},onDocumentBody:function(o){var s=this;document.body?o():setTimeout(function(){s.onDocumentBody(o)},0)},createJSONPRequest:function(o,s){return new Jo(o,s)},createScriptRequest:function(o){return new Ko(o)},getLocalStorage:function(){try{return window.localStorage}catch(o){return}},createXHR:function(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest:function(){var o=this.getXHRAPI();return new o},createMicrosoftXHR:function(){return new ActiveXObject("Microsoft.XMLHTTP")},getNetwork:function(){return ya},createWebSocket:function(o){var s=this.getWebSocketAPI();return new s(o)},createSocketRequest:function(o,s){if(this.isXHRSupported())return this.HTTPFactory.createXHR(o,s);if(this.isXDRSupported(s.indexOf("https:")===0))return this.HTTPFactory.createXDR(o,s);throw"Cross-origin HTTP requests are not supported"},isXHRSupported:function(){var o=this.getXHRAPI();return!!o&&new o().withCredentials!==void 0},isXDRSupported:function(o){var s=o?"https:":"http:",a=this.getProtocol();return!!window.XDomainRequest&&a===s},addUnloadListener:function(o){window.addEventListener!==void 0?window.addEventListener("unload",o,!1):window.attachEvent!==void 0&&window.attachEvent("onunload",o)},removeUnloadListener:function(o){window.addEventListener!==void 0?window.removeEventListener("unload",o,!1):window.detachEvent!==void 0&&window.detachEvent("onunload",o)},randomInt:function(o){var s=function(){var a=window.crypto||window.msCrypto,c=a.getRandomValues(new Uint32Array(1))[0];return c/Math.pow(2,32)};return Math.floor(s()*o)}},M=Fc,Kn;(function(o){o[o.ERROR=3]="ERROR",o[o.INFO=6]="INFO",o[o.DEBUG=7]="DEBUG"})(Kn||(Kn={}));var Ne=Kn,Dc=function(){function o(s,a,c){this.key=s,this.session=a,this.events=[],this.options=c||{},this.sent=0,this.uniqueID=0}return o.prototype.log=function(s,a){s<=this.options.level&&(this.events.push(st({},a,{timestamp:Z.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())},o.prototype.error=function(s){this.log(Ne.ERROR,s)},o.prototype.info=function(s){this.log(Ne.INFO,s)},o.prototype.debug=function(s){this.log(Ne.DEBUG,s)},o.prototype.isEmpty=function(){return this.events.length===0},o.prototype.send=function(s,a){var c=this,l=st({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],s(l,function(d,m){d||c.sent++,a&&a(d,m)}),!0},o.prototype.generateUniqueID=function(){return this.uniqueID++,this.uniqueID},o}(),Hc=Dc,qc=function(){function o(s,a,c,l){this.name=s,this.priority=a,this.transport=c,this.options=l||{}}return o.prototype.isSupported=function(){return this.transport.isSupported({useTLS:this.options.useTLS})},o.prototype.connect=function(s,a){var c=this;if(this.isSupported()){if(this.priority<s)return hr(new R,a)}else return hr(new H,a);var l=!1,d=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),m=null,_=function(){d.unbind("initialized",_),d.connect()},I=function(){m=Rt.createHandshake(d,function(St){l=!0,$(),a(null,St)})},L=function(St){$(),a(St)},q=function(){$();var St;St=De(d),a(new C(St))},$=function(){d.unbind("initialized",_),d.unbind("open",I),d.unbind("error",L),d.unbind("closed",q)};return d.bind("initialized",_),d.bind("open",I),d.bind("error",L),d.bind("closed",q),d.initialize(),{abort:function(){l||($(),m?m.close():d.close())},forceMinPriority:function(St){l||c.priority<St&&(m?m.close():d.close())}}},o}(),Nc=qc;function hr(o,s){return Z.defer(function(){s(o)}),{abort:function(){},forceMinPriority:function(){}}}var Bc=M.Transports,jc=function(o,s,a,c,l,d){var m=Bc[a];if(!m)throw new O(a);var _=(!o.enabledTransports||Xi(o.enabledTransports,s)!==-1)&&(!o.disabledTransports||Xi(o.disabledTransports,s)===-1),I;return _?(l=Object.assign({ignoreNullOrigin:o.ignoreNullOrigin},l),I=new Nc(s,c,d?d.getAssistant(m):m,l)):I=Uc,I},Uc={isSupported:function(){return!1},connect:function(o,s){var a=Z.defer(function(){s(new H)});return{abort:function(){a.ensureAborted()},forceMinPriority:function(){}}}},Wc=function(o,s){var a="socket_id="+encodeURIComponent(o.socketId);for(var c in s.params)a+="&"+encodeURIComponent(c)+"="+encodeURIComponent(s.params[c]);if(s.paramsProvider!=null){var l=s.paramsProvider();for(var c in l)a+="&"+encodeURIComponent(c)+"="+encodeURIComponent(l[c])}return a},Vc=function(o){if(typeof M.getAuthorizers()[o.transport]>"u")throw"'"+o.transport+"' is not a recognized auth transport";return function(s,a){var c=Wc(s,o);M.getAuthorizers()[o.transport](M,c,o,b.UserAuthentication,a)}},zc=Vc,$c=function(o,s){var a="socket_id="+encodeURIComponent(o.socketId);a+="&channel_name="+encodeURIComponent(o.channelName);for(var c in s.params)a+="&"+encodeURIComponent(c)+"="+encodeURIComponent(s.params[c]);if(s.paramsProvider!=null){var l=s.paramsProvider();for(var c in l)a+="&"+encodeURIComponent(c)+"="+encodeURIComponent(l[c])}return a},Kc=function(o){if(typeof M.getAuthorizers()[o.transport]>"u")throw"'"+o.transport+"' is not a recognized auth transport";return function(s,a){var c=$c(s,o);M.getAuthorizers()[o.transport](M,c,o,b.ChannelAuthorization,a)}},Xc=Kc,Jc=function(o,s,a){var c={authTransport:s.transport,authEndpoint:s.endpoint,auth:{params:s.params,headers:s.headers}};return function(l,d){var m=o.channel(l.channelName),_=a(m,c);_.authorize(l.socketId,d)}},Zt=function(){return Zt=Object.assign||function(o){for(var s,a=1,c=arguments.length;a<c;a++){s=arguments[a];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(o[l]=s[l])}return o},Zt.apply(this,arguments)};function Yc(o,s){var a={activityTimeout:o.activityTimeout||p.activityTimeout,cluster:o.cluster||p.cluster,httpPath:o.httpPath||p.httpPath,httpPort:o.httpPort||p.httpPort,httpsPort:o.httpsPort||p.httpsPort,pongTimeout:o.pongTimeout||p.pongTimeout,statsHost:o.statsHost||p.stats_host,unavailableTimeout:o.unavailableTimeout||p.unavailableTimeout,wsPath:o.wsPath||p.wsPath,wsPort:o.wsPort||p.wsPort,wssPort:o.wssPort||p.wssPort,enableStats:tu(o),httpHost:Gc(o),useTLS:Zc(o),wsHost:Qc(o),userAuthenticator:eu(o),channelAuthorizer:iu(o,s)};return"disabledTransports"in o&&(a.disabledTransports=o.disabledTransports),"enabledTransports"in o&&(a.enabledTransports=o.enabledTransports),"ignoreNullOrigin"in o&&(a.ignoreNullOrigin=o.ignoreNullOrigin),"timelineParams"in o&&(a.timelineParams=o.timelineParams),"nacl"in o&&(a.nacl=o.nacl),a}function Gc(o){return o.httpHost?o.httpHost:o.cluster?"sockjs-"+o.cluster+".pusher.com":p.httpHost}function Qc(o){return o.wsHost?o.wsHost:o.cluster?dr(o.cluster):dr(p.cluster)}function dr(o){return"ws-"+o+".pusher.com"}function Zc(o){return M.getProtocol()==="https:"?!0:o.forceTLS!==!1}function tu(o){return"enableStats"in o?o.enableStats:"disableStats"in o?!o.disableStats:!1}function eu(o){var s=Zt(Zt({},p.userAuthentication),o.userAuthentication);return"customHandler"in s&&s.customHandler!=null?s.customHandler:zc(s)}function nu(o,s){var a;return"channelAuthorization"in o?a=Zt(Zt({},p.channelAuthorization),o.channelAuthorization):(a={transport:o.authTransport||p.authTransport,endpoint:o.authEndpoint||p.authEndpoint},"auth"in o&&("params"in o.auth&&(a.params=o.auth.params),"headers"in o.auth&&(a.headers=o.auth.headers)),"authorizer"in o&&(a.customHandler=Jc(s,a,o.authorizer))),a}function iu(o,s){var a=nu(o,s);return"customHandler"in a&&a.customHandler!=null?a.customHandler:Xc(a)}var ru=function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var d in l)l.hasOwnProperty(d)&&(c[d]=l[d])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),su=function(o){ru(s,o);function s(a){var c=o.call(this,function(l,d){j.debug("No callbacks on watchlist events for "+l)})||this;return c.pusher=a,c.bindWatchlistInternalEvent(),c}return s.prototype.handleEvent=function(a){var c=this;a.data.events.forEach(function(l){c.emit(l.name,l)})},s.prototype.bindWatchlistInternalEvent=function(){var a=this;this.pusher.connection.bind("message",function(c){var l=c.event;l==="pusher_internal:watchlist_events"&&a.handleEvent(c)})},s}(xt),ou=su;function au(){var o,s,a=new Promise(function(c,l){o=c,s=l});return{promise:a,resolve:o,reject:s}}var cu=au,uu=function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var d in l)l.hasOwnProperty(d)&&(c[d]=l[d])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),lu=function(o){uu(s,o);function s(a){var c=o.call(this,function(l,d){j.debug("No callbacks on user for "+l)})||this;return c.signin_requested=!1,c.user_data=null,c.serverToUserChannel=null,c.signinDonePromise=null,c._signinDoneResolve=null,c._onAuthorize=function(l,d){if(l){j.warn("Error during signin: "+l),c._cleanup();return}c.pusher.send_event("pusher:signin",{auth:d.auth,user_data:d.user_data})},c.pusher=a,c.pusher.connection.bind("state_change",function(l){var d=l.previous,m=l.current;d!=="connected"&&m==="connected"&&c._signin(),d==="connected"&&m!=="connected"&&(c._cleanup(),c._newSigninPromiseIfNeeded())}),c.watchlist=new ou(a),c.pusher.connection.bind("message",function(l){var d=l.event;d==="pusher:signin_success"&&c._onSigninSuccess(l.data),c.serverToUserChannel&&c.serverToUserChannel.name===l.channel&&c.serverToUserChannel.handleEvent(l)}),c}return s.prototype.signin=function(){this.signin_requested||(this.signin_requested=!0,this._signin())},s.prototype._signin=function(){this.signin_requested&&(this._newSigninPromiseIfNeeded(),this.pusher.connection.state==="connected"&&this.pusher.config.userAuthenticator({socketId:this.pusher.connection.socket_id},this._onAuthorize))},s.prototype._onSigninSuccess=function(a){try{this.user_data=JSON.parse(a.user_data)}catch(c){j.error("Failed parsing user data after signin: "+a.user_data),this._cleanup();return}if(typeof this.user_data.id!="string"||this.user_data.id===""){j.error("user_data doesn't contain an id. user_data: "+this.user_data),this._cleanup();return}this._signinDoneResolve(),this._subscribeChannels()},s.prototype._subscribeChannels=function(){var a=this,c=function(l){l.subscriptionPending&&l.subscriptionCancelled?l.reinstateSubscription():!l.subscriptionPending&&a.pusher.connection.state==="connected"&&l.subscribe()};this.serverToUserChannel=new jn("#server-to-user-"+this.user_data.id,this.pusher),this.serverToUserChannel.bind_global(function(l,d){l.indexOf("pusher_internal:")===0||l.indexOf("pusher:")===0||a.emit(l,d)}),c(this.serverToUserChannel)},s.prototype._cleanup=function(){this.user_data=null,this.serverToUserChannel&&(this.serverToUserChannel.unbind_all(),this.serverToUserChannel.disconnect(),this.serverToUserChannel=null),this.signin_requested&&this._signinDoneResolve()},s.prototype._newSigninPromiseIfNeeded=function(){if(this.signin_requested&&!(this.signinDonePromise&&!this.signinDonePromise.done)){var a=cu(),c=a.promise,l=a.resolve;c.done=!1;var d=function(){c.done=!0};c.then(d).catch(d),this.signinDonePromise=c,this._signinDoneResolve=l}},s}(xt),hu=lu,fr=function(){function o(s,a){var c=this;if(du(s),a=a||{},!a.cluster&&!(a.wsHost||a.httpHost)){var l=T.buildLogSuffix("javascriptQuickStart");j.warn("You should always specify a cluster when connecting. "+l)}"disableStats"in a&&j.warn("The disableStats option is deprecated in favor of enableStats"),this.key=s,this.config=Yc(a,this),this.channels=Rt.createChannels(),this.global_emitter=new xt,this.sessionID=M.randomInt(1e9),this.timeline=new Hc(this.key,this.sessionID,{cluster:this.config.cluster,features:o.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:Ne.INFO,version:p.VERSION}),this.config.enableStats&&(this.timelineSender=Rt.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+M.TimelineTransport.name}));var d=function(m){return M.getDefaultStrategy(c.config,m,jc)};this.connection=Rt.createConnectionManager(this.key,{getStrategy:d,timeline:this.timeline,activityTimeout:this.config.activityTimeout,pongTimeout:this.config.pongTimeout,unavailableTimeout:this.config.unavailableTimeout,useTLS:!!this.config.useTLS}),this.connection.bind("connected",function(){c.subscribeAll(),c.timelineSender&&c.timelineSender.send(c.connection.isUsingTLS())}),this.connection.bind("message",function(m){var _=m.event,I=_.indexOf("pusher_internal:")===0;if(m.channel){var L=c.channel(m.channel);L&&L.handleEvent(m)}I||c.global_emitter.emit(m.event,m.data)}),this.connection.bind("connecting",function(){c.channels.disconnect()}),this.connection.bind("disconnected",function(){c.channels.disconnect()}),this.connection.bind("error",function(m){j.warn(m)}),o.instances.push(this),this.timeline.info({instances:o.instances.length}),this.user=new hu(this),o.isReady&&this.connect()}return o.ready=function(){o.isReady=!0;for(var s=0,a=o.instances.length;s<a;s++)o.instances[s].connect()},o.getClientFeatures=function(){return Ji(Qi({ws:M.Transports.ws},function(s){return s.isSupported({})}))},o.prototype.channel=function(s){return this.channels.find(s)},o.prototype.allChannels=function(){return this.channels.all()},o.prototype.connect=function(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var s=this.connection.isUsingTLS(),a=this.timelineSender;this.timelineSenderTimer=new Io(6e4,function(){a.send(s)})}},o.prototype.disconnect=function(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)},o.prototype.bind=function(s,a,c){return this.global_emitter.bind(s,a,c),this},o.prototype.unbind=function(s,a,c){return this.global_emitter.unbind(s,a,c),this},o.prototype.bind_global=function(s){return this.global_emitter.bind_global(s),this},o.prototype.unbind_global=function(s){return this.global_emitter.unbind_global(s),this},o.prototype.unbind_all=function(s){return this.global_emitter.unbind_all(),this},o.prototype.subscribeAll=function(){var s;for(s in this.channels.channels)this.channels.channels.hasOwnProperty(s)&&this.subscribe(s)},o.prototype.subscribe=function(s){var a=this.channels.add(s,this);return a.subscriptionPending&&a.subscriptionCancelled?a.reinstateSubscription():!a.subscriptionPending&&this.connection.state==="connected"&&a.subscribe(),a},o.prototype.unsubscribe=function(s){var a=this.channels.find(s);a&&a.subscriptionPending?a.cancelSubscription():(a=this.channels.remove(s),a&&a.subscribed&&a.unsubscribe())},o.prototype.send_event=function(s,a,c){return this.connection.send_event(s,a,c)},o.prototype.shouldUseTLS=function(){return this.config.useTLS},o.prototype.signin=function(){this.user.signin()},o.instances=[],o.isReady=!1,o.logToConsole=!1,o.Runtime=M,o.ScriptReceivers=M.ScriptReceivers,o.DependenciesReceivers=M.DependenciesReceivers,o.auth_callbacks=M.auth_callbacks,o}(),Xn=i.default=fr;function du(o){if(o==null)throw"You must pass your app key when you instantiate Pusher."}M.setup(fr)}])})})(eo);var qh=eo.exports;const Nh=os(qh);(function(){if(window.Reflect===void 0||window.customElements===void 0||window.customElements.polyfillWrapFlushCallback)return;const n=HTMLElement,t={HTMLElement:function(){return Reflect.construct(n,[],this.constructor)}};window.HTMLElement=t.HTMLElement,HTMLElement.prototype=n.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,n)})();(function(n){if(typeof n.requestSubmit=="function")return;n.requestSubmit=function(i){i?(t(i,this),i.click()):(i=document.createElement("input"),i.type="submit",i.hidden=!0,this.appendChild(i),i.click(),this.removeChild(i))};function t(i,r){i instanceof HTMLElement||e(TypeError,"parameter 1 is not of type 'HTMLElement'"),i.type=="submit"||e(TypeError,"The specified element is not a submit button"),i.form==r||e(DOMException,"The specified element is not owned by this form element","NotFoundError")}function e(i,r,u){throw new i("Failed to execute 'requestSubmit' on 'HTMLFormElement': "+r+".",u)}})(HTMLFormElement.prototype);const no=new WeakMap;function Bh(n){const t=n instanceof Element?n:n instanceof Node?n.parentElement:null,e=t?t.closest("input, button"):null;return(e==null?void 0:e.type)=="submit"?e:null}function jh(n){const t=Bh(n.target);t&&t.form&&no.set(t.form,t)}(function(){if("submitter"in Event.prototype)return;let n=window.Event.prototype;if("SubmitEvent"in window&&/Apple Computer/.test(navigator.vendor))n=window.SubmitEvent.prototype;else if("SubmitEvent"in window)return;addEventListener("click",jh,!0),Object.defineProperty(n,"submitter",{get(){if(this.type=="submit"&&this.target instanceof HTMLFormElement)return no.get(this.target)}})})();var Mt;(function(n){n.eager="eager",n.lazy="lazy"})(Mt||(Mt={}));class yt extends HTMLElement{static get observedAttributes(){return["disabled","complete","loading","src"]}constructor(){super(),this.loaded=Promise.resolve(),this.delegate=new yt.delegateConstructor(this)}connectedCallback(){this.delegate.connect()}disconnectedCallback(){this.delegate.disconnect()}reload(){return this.delegate.sourceURLReloaded()}attributeChangedCallback(t){t=="loading"?this.delegate.loadingStyleChanged():t=="complete"?this.delegate.completeChanged():t=="src"?this.delegate.sourceURLChanged():this.delegate.disabledChanged()}get src(){return this.getAttribute("src")}set src(t){t?this.setAttribute("src",t):this.removeAttribute("src")}get loading(){return Uh(this.getAttribute("loading")||"")}set loading(t){t?this.setAttribute("loading",t):this.removeAttribute("loading")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get autoscroll(){return this.hasAttribute("autoscroll")}set autoscroll(t){t?this.setAttribute("autoscroll",""):this.removeAttribute("autoscroll")}get complete(){return!this.delegate.isLoading}get isActive(){return this.ownerDocument===document&&!this.isPreview}get isPreview(){var t,e;return(e=(t=this.ownerDocument)===null||t===void 0?void 0:t.documentElement)===null||e===void 0?void 0:e.hasAttribute("data-turbo-preview")}}function Uh(n){switch(n.toLowerCase()){case"lazy":return Mt.lazy;default:return Mt.eager}}function et(n){return new URL(n.toString(),document.baseURI)}function $t(n){let t;if(n.hash)return n.hash.slice(1);if(t=n.href.match(/#(.*)$/))return t[1]}function qi(n,t){const e=(t==null?void 0:t.getAttribute("formaction"))||n.getAttribute("action")||n.action;return et(e)}function Wh(n){return(Xh(n).match(/\.[^.]*$/)||[])[0]||""}function Vh(n){return!!Wh(n).match(/^(?:|\.(?:htm|html|xhtml|php))$/)}function zh(n,t){const e=Jh(t);return n.href===et(e).href||n.href.startsWith(e)}function se(n,t){return zh(n,t)&&Vh(n)}function wi(n){const t=$t(n);return t!=null?n.href.slice(0,-(t.length+1)):n.href}function $e(n){return wi(n)}function $h(n,t){return et(n).href==et(t).href}function Kh(n){return n.pathname.split("/").slice(1)}function Xh(n){return Kh(n).slice(-1)[0]}function Jh(n){return Yh(n.origin+n.pathname)}function Yh(n){return n.endsWith("/")?n:n+"/"}class Ni{constructor(t){this.response=t}get succeeded(){return this.response.ok}get failed(){return!this.succeeded}get clientError(){return this.statusCode>=400&&this.statusCode<=499}get serverError(){return this.statusCode>=500&&this.statusCode<=599}get redirected(){return this.response.redirected}get location(){return et(this.response.url)}get isHTML(){return this.contentType&&this.contentType.match(/^(?:text\/([^\s;,]+\b)?html|application\/xhtml\+xml)\b/)}get statusCode(){return this.response.status}get contentType(){return this.header("Content-Type")}get responseText(){return this.response.clone().text()}get responseHTML(){return this.isHTML?this.response.clone().text():Promise.resolve(void 0)}header(t){return this.response.headers.get(t)}}function xe(n){if(n.getAttribute("data-turbo-eval")=="false")return n;{const t=document.createElement("script"),e=bn("csp-nonce");return e&&(t.nonce=e),t.textContent=n.textContent,t.async=!1,Gh(t,n),t}}function Gh(n,t){for(const{name:e,value:i}of t.attributes)n.setAttribute(e,i)}function Qh(n){const t=document.createElement("template");return t.innerHTML=n,t.content}function G(n,{target:t,cancelable:e,detail:i}={}){const r=new CustomEvent(n,{cancelable:e,bubbles:!0,composed:!0,detail:i});return t&&t.isConnected?t.dispatchEvent(r):document.documentElement.dispatchEvent(r),r}function rn(){return new Promise(n=>requestAnimationFrame(()=>n()))}function Zh(){return new Promise(n=>setTimeout(()=>n(),0))}function td(){return Promise.resolve()}function ro(n=""){return new DOMParser().parseFromString(n,"text/html")}function so(n,...t){const e=ed(n,t).replace(/^\n/,"").split("\n"),i=e[0].match(/^\s+/),r=i?i[0].length:0;return e.map(u=>u.slice(r)).join("\n")}function ed(n,t){return n.reduce((e,i,r)=>{const u=t[r]==null?"":t[r];return e+i+u},"")}function me(){return Array.from({length:36}).map((n,t)=>t==8||t==13||t==18||t==23?"-":t==14?"4":t==19?(Math.floor(Math.random()*4)+8).toString(16):Math.floor(Math.random()*15).toString(16)).join("")}function gn(n,...t){for(const e of t.map(i=>i==null?void 0:i.getAttribute(n)))if(typeof e=="string")return e;return null}function nd(n,...t){return t.some(e=>e&&e.hasAttribute(n))}function Si(...n){for(const t of n)t.localName=="turbo-frame"&&t.setAttribute("busy",""),t.setAttribute("aria-busy","true")}function Ei(...n){for(const t of n)t.localName=="turbo-frame"&&t.removeAttribute("busy"),t.removeAttribute("aria-busy")}function id(n,t=2e3){return new Promise(e=>{const i=()=>{n.removeEventListener("error",i),n.removeEventListener("load",i),e()};n.addEventListener("load",i,{once:!0}),n.addEventListener("error",i,{once:!0}),setTimeout(e,t)})}function oo(n){switch(n){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}function rd(n){return n=="advance"||n=="replace"||n=="restore"}function Rn(...n){const t=gn("data-turbo-action",...n);return rd(t)?t:null}function ao(n){return document.querySelector('meta[name="'.concat(n,'"]'))}function bn(n){const t=ao(n);return t&&t.content}function sd(n,t){let e=ao(n);return e||(e=document.createElement("meta"),e.setAttribute("name",n),document.head.appendChild(e)),e.setAttribute("content",t),e}function yn(n,t){var e;if(n instanceof Element)return n.closest(t)||yn(n.assignedSlot||((e=n.getRootNode())===null||e===void 0?void 0:e.host),t)}var ot;(function(n){n[n.get=0]="get",n[n.post=1]="post",n[n.put=2]="put",n[n.patch=3]="patch",n[n.delete=4]="delete"})(ot||(ot={}));function od(n){switch(n.toLowerCase()){case"get":return ot.get;case"post":return ot.post;case"put":return ot.put;case"patch":return ot.patch;case"delete":return ot.delete}}class Bi{constructor(t,e,i,r=new URLSearchParams,u=null){this.abortController=new AbortController,this.resolveRequestPromise=h=>{},this.delegate=t,this.method=e,this.headers=this.defaultHeaders,this.body=r,this.url=i,this.target=u}get location(){return this.url}get params(){return this.url.searchParams}get entries(){return this.body?Array.from(this.body.entries()):[]}cancel(){this.abortController.abort()}async perform(){const{fetchOptions:t}=this;this.delegate.prepareRequest(this),await this.allowRequestToBeIntercepted(t);try{this.delegate.requestStarted(this);const e=await fetch(this.url.href,t);return await this.receive(e)}catch(e){if(e.name!=="AbortError")throw this.willDelegateErrorHandling(e)&&this.delegate.requestErrored(this,e),e}finally{this.delegate.requestFinished(this)}}async receive(t){const e=new Ni(t);return G("turbo:before-fetch-response",{cancelable:!0,detail:{fetchResponse:e},target:this.target}).defaultPrevented?this.delegate.requestPreventedHandlingResponse(this,e):e.succeeded?this.delegate.requestSucceededWithResponse(this,e):this.delegate.requestFailedWithResponse(this,e),e}get fetchOptions(){var t;return{method:ot[this.method].toUpperCase(),credentials:"same-origin",headers:this.headers,redirect:"follow",body:this.isSafe?null:this.body,signal:this.abortSignal,referrer:(t=this.delegate.referrer)===null||t===void 0?void 0:t.href}}get defaultHeaders(){return{Accept:"text/html, application/xhtml+xml"}}get isSafe(){return this.method===ot.get}get abortSignal(){return this.abortController.signal}acceptResponseType(t){this.headers.Accept=[t,this.headers.Accept].join(", ")}async allowRequestToBeIntercepted(t){const e=new Promise(r=>this.resolveRequestPromise=r);G("turbo:before-fetch-request",{cancelable:!0,detail:{fetchOptions:t,url:this.url,resume:this.resolveRequestPromise},target:this.target}).defaultPrevented&&await e}willDelegateErrorHandling(t){return!G("turbo:fetch-request-error",{target:this.target,cancelable:!0,detail:{request:this,error:t}}).defaultPrevented}}class ad{constructor(t,e){this.started=!1,this.intersect=i=>{const r=i.slice(-1)[0];r!=null&&r.isIntersecting&&this.delegate.elementAppearedInViewport(this.element)},this.delegate=t,this.element=e,this.intersectionObserver=new IntersectionObserver(this.intersect)}start(){this.started||(this.started=!0,this.intersectionObserver.observe(this.element))}stop(){this.started&&(this.started=!1,this.intersectionObserver.unobserve(this.element))}}class Gt{static wrap(t){return typeof t=="string"?new this(Qh(t)):t}constructor(t){this.fragment=cd(t)}}Gt.contentType="text/vnd.turbo-stream.html";function cd(n){for(const t of n.querySelectorAll("turbo-stream")){const e=document.importNode(t,!0);for(const i of e.templateElement.content.querySelectorAll("script"))i.replaceWith(xe(i));t.replaceWith(e)}return n}var Dt;(function(n){n[n.initialized=0]="initialized",n[n.requesting=1]="requesting",n[n.waiting=2]="waiting",n[n.receiving=3]="receiving",n[n.stopping=4]="stopping",n[n.stopped=5]="stopped"})(Dt||(Dt={}));var Ht;(function(n){n.urlEncoded="application/x-www-form-urlencoded",n.multipart="multipart/form-data",n.plain="text/plain"})(Ht||(Ht={}));function ud(n){switch(n.toLowerCase()){case Ht.multipart:return Ht.multipart;case Ht.plain:return Ht.plain;default:return Ht.urlEncoded}}class Fe{static confirmMethod(t,e,i){return Promise.resolve(confirm(t))}constructor(t,e,i,r=!1){this.state=Dt.initialized,this.delegate=t,this.formElement=e,this.submitter=i,this.formData=ld(e,i),this.location=et(this.action),this.method==ot.get&&fd(this.location,[...this.body.entries()]),this.fetchRequest=new Bi(this,this.method,this.location,this.body,this.formElement),this.mustRedirect=r}get method(){var t;const e=((t=this.submitter)===null||t===void 0?void 0:t.getAttribute("formmethod"))||this.formElement.getAttribute("method")||"";return od(e.toLowerCase())||ot.get}get action(){var t;const e=typeof this.formElement.action=="string"?this.formElement.action:null;return!((t=this.submitter)===null||t===void 0)&&t.hasAttribute("formaction")?this.submitter.getAttribute("formaction")||"":this.formElement.getAttribute("action")||e||""}get body(){return this.enctype==Ht.urlEncoded||this.method==ot.get?new URLSearchParams(this.stringFormData):this.formData}get enctype(){var t;return ud(((t=this.submitter)===null||t===void 0?void 0:t.getAttribute("formenctype"))||this.formElement.enctype)}get isSafe(){return this.fetchRequest.isSafe}get stringFormData(){return[...this.formData].reduce((t,[e,i])=>t.concat(typeof i=="string"?[[e,i]]:[]),[])}async start(){const{initialized:t,requesting:e}=Dt,i=gn("data-turbo-confirm",this.submitter,this.formElement);if(!(typeof i=="string"&&!await Fe.confirmMethod(i,this.formElement,this.submitter))&&this.state==t)return this.state=e,this.fetchRequest.perform()}stop(){const{stopping:t,stopped:e}=Dt;if(this.state!=t&&this.state!=e)return this.state=t,this.fetchRequest.cancel(),!0}prepareRequest(t){if(!t.isSafe){const e=hd(bn("csrf-param"))||bn("csrf-token");e&&(t.headers["X-CSRF-Token"]=e)}this.requestAcceptsTurboStreamResponse(t)&&t.acceptResponseType(Gt.contentType)}requestStarted(t){var e;this.state=Dt.waiting,(e=this.submitter)===null||e===void 0||e.setAttribute("disabled",""),this.setSubmitsWith(),G("turbo:submit-start",{target:this.formElement,detail:{formSubmission:this}}),this.delegate.formSubmissionStarted(this)}requestPreventedHandlingResponse(t,e){this.result={success:e.succeeded,fetchResponse:e}}requestSucceededWithResponse(t,e){if(e.clientError||e.serverError)this.delegate.formSubmissionFailedWithResponse(this,e);else if(this.requestMustRedirect(t)&&dd(e)){const i=new Error("Form responses must redirect to another location");this.delegate.formSubmissionErrored(this,i)}else this.state=Dt.receiving,this.result={success:!0,fetchResponse:e},this.delegate.formSubmissionSucceededWithResponse(this,e)}requestFailedWithResponse(t,e){this.result={success:!1,fetchResponse:e},this.delegate.formSubmissionFailedWithResponse(this,e)}requestErrored(t,e){this.result={success:!1,error:e},this.delegate.formSubmissionErrored(this,e)}requestFinished(t){var e;this.state=Dt.stopped,(e=this.submitter)===null||e===void 0||e.removeAttribute("disabled"),this.resetSubmitterText(),G("turbo:submit-end",{target:this.formElement,detail:Object.assign({formSubmission:this},this.result)}),this.delegate.formSubmissionFinished(this)}setSubmitsWith(){if(!(!this.submitter||!this.submitsWith)){if(this.submitter.matches("button"))this.originalSubmitText=this.submitter.innerHTML,this.submitter.innerHTML=this.submitsWith;else if(this.submitter.matches("input")){const t=this.submitter;this.originalSubmitText=t.value,t.value=this.submitsWith}}}resetSubmitterText(){if(!(!this.submitter||!this.originalSubmitText)){if(this.submitter.matches("button"))this.submitter.innerHTML=this.originalSubmitText;else if(this.submitter.matches("input")){const t=this.submitter;t.value=this.originalSubmitText}}}requestMustRedirect(t){return!t.isSafe&&this.mustRedirect}requestAcceptsTurboStreamResponse(t){return!t.isSafe||nd("data-turbo-stream",this.submitter,this.formElement)}get submitsWith(){var t;return(t=this.submitter)===null||t===void 0?void 0:t.getAttribute("data-turbo-submits-with")}}function ld(n,t){const e=new FormData(n),i=t==null?void 0:t.getAttribute("name"),r=t==null?void 0:t.getAttribute("value");return i&&e.append(i,r||""),e}function hd(n){if(n!=null){const e=(document.cookie?document.cookie.split("; "):[]).find(i=>i.startsWith(n));if(e){const i=e.split("=").slice(1).join("=");return i?decodeURIComponent(i):void 0}}}function dd(n){return n.statusCode==200&&!n.redirected}function fd(n,t){const e=new URLSearchParams;for(const[i,r]of t)r instanceof File||e.append(i,r);return n.search=e.toString(),n}class Pn{constructor(t){this.element=t}get activeElement(){return this.element.ownerDocument.activeElement}get children(){return[...this.element.children]}hasAnchor(t){return this.getElementForAnchor(t)!=null}getElementForAnchor(t){return t?this.element.querySelector("[id='".concat(t,"'], a[name='").concat(t,"']")):null}get isConnected(){return this.element.isConnected}get firstAutofocusableElement(){const t="[inert], :disabled, [hidden], details:not([open]), dialog:not([open])";for(const e of this.element.querySelectorAll("[autofocus]"))if(e.closest(t)==null)return e;return null}get permanentElements(){return uo(this.element)}getPermanentElementById(t){return co(this.element,t)}getPermanentElementMapForSnapshot(t){const e={};for(const i of this.permanentElements){const{id:r}=i,u=t.getPermanentElementById(r);u&&(e[r]=[i,u])}return e}}function co(n,t){return n.querySelector("#".concat(t,"[data-turbo-permanent]"))}function uo(n){return n.querySelectorAll("[id][data-turbo-permanent]")}class ji{constructor(t,e){this.started=!1,this.submitCaptured=()=>{this.eventTarget.removeEventListener("submit",this.submitBubbled,!1),this.eventTarget.addEventListener("submit",this.submitBubbled,!1)},this.submitBubbled=i=>{if(!i.defaultPrevented){const r=i.target instanceof HTMLFormElement?i.target:void 0,u=i.submitter||void 0;r&&pd(r,u)&&md(r,u)&&this.delegate.willSubmitForm(r,u)&&(i.preventDefault(),i.stopImmediatePropagation(),this.delegate.formSubmitted(r,u))}},this.delegate=t,this.eventTarget=e}start(){this.started||(this.eventTarget.addEventListener("submit",this.submitCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("submit",this.submitCaptured,!0),this.started=!1)}}function pd(n,t){return((t==null?void 0:t.getAttribute("formmethod"))||n.getAttribute("method"))!="dialog"}function md(n,t){if(t!=null&&t.hasAttribute("formtarget")||n.hasAttribute("target")){const e=(t==null?void 0:t.getAttribute("formtarget"))||n.target;for(const i of document.getElementsByName(e))if(i instanceof HTMLIFrameElement)return!1;return!0}else return!0}class lo{constructor(t,e){this.resolveRenderPromise=i=>{},this.resolveInterceptionPromise=i=>{},this.delegate=t,this.element=e}scrollToAnchor(t){const e=this.snapshot.getElementForAnchor(t);e?(this.scrollToElement(e),this.focusElement(e)):this.scrollToPosition({x:0,y:0})}scrollToAnchorFromLocation(t){this.scrollToAnchor($t(t))}scrollToElement(t){t.scrollIntoView()}focusElement(t){t instanceof HTMLElement&&(t.hasAttribute("tabindex")?t.focus():(t.setAttribute("tabindex","-1"),t.focus(),t.removeAttribute("tabindex")))}scrollToPosition({x:t,y:e}){this.scrollRoot.scrollTo(t,e)}scrollToTop(){this.scrollToPosition({x:0,y:0})}get scrollRoot(){return window}async render(t){const{isPreview:e,shouldRender:i,newSnapshot:r}=t;if(i)try{this.renderPromise=new Promise(p=>this.resolveRenderPromise=p),this.renderer=t,await this.prepareToRenderSnapshot(t);const u=new Promise(p=>this.resolveInterceptionPromise=p),h={resume:this.resolveInterceptionPromise,render:this.renderer.renderElement};this.delegate.allowsImmediateRender(r,h)||await u,await this.renderSnapshot(t),this.delegate.viewRenderedSnapshot(r,e),this.delegate.preloadOnLoadLinksForView(this.element),this.finishRenderingSnapshot(t)}finally{delete this.renderer,this.resolveRenderPromise(void 0),delete this.renderPromise}else this.invalidate(t.reloadReason)}invalidate(t){this.delegate.viewInvalidated(t)}async prepareToRenderSnapshot(t){this.markAsPreview(t.isPreview),await t.prepareToRender()}markAsPreview(t){t?this.element.setAttribute("data-turbo-preview",""):this.element.removeAttribute("data-turbo-preview")}async renderSnapshot(t){await t.render()}finishRenderingSnapshot(t){t.finishRendering()}}class vd extends lo{missing(){this.element.innerHTML='<strong class="turbo-frame-error">Content missing</strong>'}get snapshot(){return new Pn(this.element)}}class ho{constructor(t,e){this.clickBubbled=i=>{this.respondsToEventTarget(i.target)?this.clickEvent=i:delete this.clickEvent},this.linkClicked=i=>{this.clickEvent&&this.respondsToEventTarget(i.target)&&i.target instanceof Element&&this.delegate.shouldInterceptLinkClick(i.target,i.detail.url,i.detail.originalEvent)&&(this.clickEvent.preventDefault(),i.preventDefault(),this.delegate.linkClickIntercepted(i.target,i.detail.url,i.detail.originalEvent)),delete this.clickEvent},this.willVisit=i=>{delete this.clickEvent},this.delegate=t,this.element=e}start(){this.element.addEventListener("click",this.clickBubbled),document.addEventListener("turbo:click",this.linkClicked),document.addEventListener("turbo:before-visit",this.willVisit)}stop(){this.element.removeEventListener("click",this.clickBubbled),document.removeEventListener("turbo:click",this.linkClicked),document.removeEventListener("turbo:before-visit",this.willVisit)}respondsToEventTarget(t){const e=t instanceof Element?t:t instanceof Node?t.parentElement:null;return e&&e.closest("turbo-frame, html")==this.element}}class fo{constructor(t,e){this.started=!1,this.clickCaptured=()=>{this.eventTarget.removeEventListener("click",this.clickBubbled,!1),this.eventTarget.addEventListener("click",this.clickBubbled,!1)},this.clickBubbled=i=>{if(i instanceof MouseEvent&&this.clickEventIsSignificant(i)){const r=i.composedPath&&i.composedPath()[0]||i.target,u=this.findLinkFromClickTarget(r);if(u&&gd(u)){const h=this.getLocationForLink(u);this.delegate.willFollowLinkToLocation(u,h,i)&&(i.preventDefault(),this.delegate.followedLinkToLocation(u,h))}}},this.delegate=t,this.eventTarget=e}start(){this.started||(this.eventTarget.addEventListener("click",this.clickCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("click",this.clickCaptured,!0),this.started=!1)}clickEventIsSignificant(t){return!(t.target&&t.target.isContentEditable||t.defaultPrevented||t.which>1||t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)}findLinkFromClickTarget(t){return yn(t,"a[href]:not([target^=_]):not([download])")}getLocationForLink(t){return et(t.getAttribute("href")||"")}}function gd(n){if(n.hasAttribute("target")){for(const t of document.getElementsByName(n.target))if(t instanceof HTMLIFrameElement)return!1;return!0}else return!0}class po{constructor(t,e){this.delegate=t,this.linkInterceptor=new fo(this,e)}start(){this.linkInterceptor.start()}stop(){this.linkInterceptor.stop()}willFollowLinkToLocation(t,e,i){return this.delegate.willSubmitFormLinkToLocation(t,e,i)&&t.hasAttribute("data-turbo-method")}followedLinkToLocation(t,e){const i=document.createElement("form"),r="hidden";for(const[w,S]of e.searchParams)i.append(Object.assign(document.createElement("input"),{type:r,name:w,value:S}));const u=Object.assign(e,{search:""});i.setAttribute("data-turbo","true"),i.setAttribute("action",u.href),i.setAttribute("hidden","");const h=t.getAttribute("data-turbo-method");h&&i.setAttribute("method",h);const f=t.getAttribute("data-turbo-frame");f&&i.setAttribute("data-turbo-frame",f);const p=Rn(t);p&&i.setAttribute("data-turbo-action",p);const v=t.getAttribute("data-turbo-confirm");v&&i.setAttribute("data-turbo-confirm",v),t.hasAttribute("data-turbo-stream")&&i.setAttribute("data-turbo-stream",""),this.delegate.submittedFormLinkToLocation(t,e,i),document.body.appendChild(i),i.addEventListener("turbo:submit-end",()=>i.remove(),{once:!0}),requestAnimationFrame(()=>i.requestSubmit())}}class mo{static async preservingPermanentElements(t,e,i){const r=new this(t,e);r.enter(),await i(),r.leave()}constructor(t,e){this.delegate=t,this.permanentElementMap=e}enter(){for(const t in this.permanentElementMap){const[e,i]=this.permanentElementMap[t];this.delegate.enteringBardo(e,i),this.replaceNewPermanentElementWithPlaceholder(i)}}leave(){for(const t in this.permanentElementMap){const[e]=this.permanentElementMap[t];this.replaceCurrentPermanentElementWithClone(e),this.replacePlaceholderWithPermanentElement(e),this.delegate.leavingBardo(e)}}replaceNewPermanentElementWithPlaceholder(t){const e=bd(t);t.replaceWith(e)}replaceCurrentPermanentElementWithClone(t){const e=t.cloneNode(!0);t.replaceWith(e)}replacePlaceholderWithPermanentElement(t){const e=this.getPlaceholderById(t.id);e==null||e.replaceWith(t)}getPlaceholderById(t){return this.placeholders.find(e=>e.content==t)}get placeholders(){return[...document.querySelectorAll("meta[name=turbo-permanent-placeholder][content]")]}}function bd(n){const t=document.createElement("meta");return t.setAttribute("name","turbo-permanent-placeholder"),t.setAttribute("content",n.id),t}class Ui{constructor(t,e,i,r,u=!0){this.activeElement=null,this.currentSnapshot=t,this.newSnapshot=e,this.isPreview=r,this.willRender=u,this.renderElement=i,this.promise=new Promise((h,f)=>this.resolvingFunctions={resolve:h,reject:f})}get shouldRender(){return!0}get reloadReason(){}prepareToRender(){}finishRendering(){this.resolvingFunctions&&(this.resolvingFunctions.resolve(),delete this.resolvingFunctions)}async preservingPermanentElements(t){await mo.preservingPermanentElements(this,this.permanentElementMap,t)}focusFirstAutofocusableElement(){const t=this.connectedSnapshot.firstAutofocusableElement;yd(t)&&t.focus()}enteringBardo(t){this.activeElement||t.contains(this.currentSnapshot.activeElement)&&(this.activeElement=this.currentSnapshot.activeElement)}leavingBardo(t){t.contains(this.activeElement)&&this.activeElement instanceof HTMLElement&&(this.activeElement.focus(),this.activeElement=null)}get connectedSnapshot(){return this.newSnapshot.isConnected?this.newSnapshot:this.currentSnapshot}get currentElement(){return this.currentSnapshot.element}get newElement(){return this.newSnapshot.element}get permanentElementMap(){return this.currentSnapshot.getPermanentElementMapForSnapshot(this.newSnapshot)}}function yd(n){return n&&typeof n.focus=="function"}class wn extends Ui{static renderElement(t,e){var i;const r=document.createRange();r.selectNodeContents(t),r.deleteContents();const u=e,h=(i=u.ownerDocument)===null||i===void 0?void 0:i.createRange();h&&(h.selectNodeContents(u),t.appendChild(h.extractContents()))}constructor(t,e,i,r,u,h=!0){super(e,i,r,u,h),this.delegate=t}get shouldRender(){return!0}async render(){await rn(),this.preservingPermanentElements(()=>{this.loadFrameElement()}),this.scrollFrameIntoView(),await rn(),this.focusFirstAutofocusableElement(),await rn(),this.activateScriptElements()}loadFrameElement(){this.delegate.willRenderFrame(this.currentElement,this.newElement),this.renderElement(this.currentElement,this.newElement)}scrollFrameIntoView(){if(this.currentElement.autoscroll||this.newElement.autoscroll){const t=this.currentElement.firstElementChild,e=wd(this.currentElement.getAttribute("data-autoscroll-block"),"end"),i=Sd(this.currentElement.getAttribute("data-autoscroll-behavior"),"auto");if(t)return t.scrollIntoView({block:e,behavior:i}),!0}return!1}activateScriptElements(){for(const t of this.newScriptElements){const e=xe(t);t.replaceWith(e)}}get newScriptElements(){return this.currentElement.querySelectorAll("script")}}function wd(n,t){return n=="end"||n=="start"||n=="center"||n=="nearest"?n:t}function Sd(n,t){return n=="auto"||n=="smooth"?n:t}var rs;class Ot{static get defaultCSS(){return so(rs||(rs=Qn(["\n      .turbo-progress-bar {\n        position: fixed;\n        display: block;\n        top: 0;\n        left: 0;\n        height: 3px;\n        background: #0076ff;\n        z-index: 2147483647;\n        transition:\n          width ","ms ease-out,\n          opacity ","ms ","ms ease-in;\n        transform: translate3d(0, 0, 0);\n      }\n    "])),Ot.animationDuration,Ot.animationDuration/2,Ot.animationDuration/2)}constructor(){this.hiding=!1,this.value=0,this.visible=!1,this.trickle=()=>{this.setValue(this.value+Math.random()/100)},this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement(),this.installStylesheetElement(),this.setValue(0)}show(){this.visible||(this.visible=!0,this.installProgressElement(),this.startTrickling())}hide(){this.visible&&!this.hiding&&(this.hiding=!0,this.fadeProgressElement(()=>{this.uninstallProgressElement(),this.stopTrickling(),this.visible=!1,this.hiding=!1}))}setValue(t){this.value=t,this.refresh()}installStylesheetElement(){document.head.insertBefore(this.stylesheetElement,document.head.firstChild)}installProgressElement(){this.progressElement.style.width="0",this.progressElement.style.opacity="1",document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()}fadeProgressElement(t){this.progressElement.style.opacity="0",setTimeout(t,Ot.animationDuration*1.5)}uninstallProgressElement(){this.progressElement.parentNode&&document.documentElement.removeChild(this.progressElement)}startTrickling(){this.trickleInterval||(this.trickleInterval=window.setInterval(this.trickle,Ot.animationDuration))}stopTrickling(){window.clearInterval(this.trickleInterval),delete this.trickleInterval}refresh(){requestAnimationFrame(()=>{this.progressElement.style.width="".concat(10+this.value*90,"%")})}createStylesheetElement(){const t=document.createElement("style");return t.type="text/css",t.textContent=Ot.defaultCSS,this.cspNonce&&(t.nonce=this.cspNonce),t}createProgressElement(){const t=document.createElement("div");return t.className="turbo-progress-bar",t}get cspNonce(){return bn("csp-nonce")}}Ot.animationDuration=300;class Ed extends Pn{constructor(){super(...arguments),this.detailsByOuterHTML=this.children.filter(t=>!kd(t)).map(t=>xd(t)).reduce((t,e)=>{const{outerHTML:i}=e,r=i in t?t[i]:{type:Td(e),tracked:Cd(e),elements:[]};return Object.assign(Object.assign({},t),{[i]:Object.assign(Object.assign({},r),{elements:[...r.elements,e]})})},{})}get trackedElementSignature(){return Object.keys(this.detailsByOuterHTML).filter(t=>this.detailsByOuterHTML[t].tracked).join("")}getScriptElementsNotInSnapshot(t){return this.getElementsMatchingTypeNotInSnapshot("script",t)}getStylesheetElementsNotInSnapshot(t){return this.getElementsMatchingTypeNotInSnapshot("stylesheet",t)}getElementsMatchingTypeNotInSnapshot(t,e){return Object.keys(this.detailsByOuterHTML).filter(i=>!(i in e.detailsByOuterHTML)).map(i=>this.detailsByOuterHTML[i]).filter(({type:i})=>i==t).map(({elements:[i]})=>i)}get provisionalElements(){return Object.keys(this.detailsByOuterHTML).reduce((t,e)=>{const{type:i,tracked:r,elements:u}=this.detailsByOuterHTML[e];return i==null&&!r?[...t,...u]:u.length>1?[...t,...u.slice(1)]:t},[])}getMetaValue(t){const e=this.findMetaElementByName(t);return e?e.getAttribute("content"):null}findMetaElementByName(t){return Object.keys(this.detailsByOuterHTML).reduce((e,i)=>{const{elements:[r]}=this.detailsByOuterHTML[i];return Ld(r,t)?r:e},void 0)}}function Td(n){if(_d(n))return"script";if(Ad(n))return"stylesheet"}function Cd(n){return n.getAttribute("data-turbo-track")=="reload"}function _d(n){return n.localName=="script"}function kd(n){return n.localName=="noscript"}function Ad(n){const t=n.localName;return t=="style"||t=="link"&&n.getAttribute("rel")=="stylesheet"}function Ld(n,t){return n.localName=="meta"&&n.getAttribute("name")==t}function xd(n){return n.hasAttribute("nonce")&&n.setAttribute("nonce",""),n}class mt extends Pn{static fromHTMLString(t=""){return this.fromDocument(ro(t))}static fromElement(t){return this.fromDocument(t.ownerDocument)}static fromDocument({head:t,body:e}){return new this(e,new Ed(t))}constructor(t,e){super(t),this.headSnapshot=e}clone(){const t=this.element.cloneNode(!0),e=this.element.querySelectorAll("select"),i=t.querySelectorAll("select");for(const[r,u]of e.entries()){const h=i[r];for(const f of h.selectedOptions)f.selected=!1;for(const f of u.selectedOptions)h.options[f.index].selected=!0}for(const r of t.querySelectorAll('input[type="password"]'))r.value="";return new mt(t,this.headSnapshot)}get headElement(){return this.headSnapshot.element}get rootLocation(){var t;const e=(t=this.getSetting("root"))!==null&&t!==void 0?t:"/";return et(e)}get cacheControlValue(){return this.getSetting("cache-control")}get isPreviewable(){return this.cacheControlValue!="no-preview"}get isCacheable(){return this.cacheControlValue!="no-cache"}get isVisitable(){return this.getSetting("visit-control")!="reload"}getSetting(t){return this.headSnapshot.getMetaValue("turbo-".concat(t))}}var ie;(function(n){n.visitStart="visitStart",n.requestStart="requestStart",n.requestEnd="requestEnd",n.visitEnd="visitEnd"})(ie||(ie={}));var vt;(function(n){n.initialized="initialized",n.started="started",n.canceled="canceled",n.failed="failed",n.completed="completed"})(vt||(vt={}));const Rd={action:"advance",historyChanged:!1,visitCachedSnapshot:()=>{},willRender:!0,updateHistory:!0,shouldCacheSnapshot:!0,acceptsStreamResponse:!1};var qt;(function(n){n[n.networkFailure=0]="networkFailure",n[n.timeoutFailure=-1]="timeoutFailure",n[n.contentTypeMismatch=-2]="contentTypeMismatch"})(qt||(qt={}));class Pd{constructor(t,e,i,r={}){this.identifier=me(),this.timingMetrics={},this.followedRedirect=!1,this.historyChanged=!1,this.scrolled=!1,this.shouldCacheSnapshot=!0,this.acceptsStreamResponse=!1,this.snapshotCached=!1,this.state=vt.initialized,this.delegate=t,this.location=e,this.restorationIdentifier=i||me();const{action:u,historyChanged:h,referrer:f,snapshot:p,snapshotHTML:v,response:g,visitCachedSnapshot:w,willRender:S,updateHistory:E,shouldCacheSnapshot:x,acceptsStreamResponse:T}=Object.assign(Object.assign({},Rd),r);this.action=u,this.historyChanged=h,this.referrer=f,this.snapshot=p,this.snapshotHTML=v,this.response=g,this.isSamePage=this.delegate.locationWithActionIsSamePage(this.location,this.action),this.visitCachedSnapshot=w,this.willRender=S,this.updateHistory=E,this.scrolled=!S,this.shouldCacheSnapshot=x,this.acceptsStreamResponse=T}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get history(){return this.delegate.history}get restorationData(){return this.history.getRestorationDataForIdentifier(this.restorationIdentifier)}get silent(){return this.isSamePage}start(){this.state==vt.initialized&&(this.recordTimingMetric(ie.visitStart),this.state=vt.started,this.adapter.visitStarted(this),this.delegate.visitStarted(this))}cancel(){this.state==vt.started&&(this.request&&this.request.cancel(),this.cancelRender(),this.state=vt.canceled)}complete(){this.state==vt.started&&(this.recordTimingMetric(ie.visitEnd),this.state=vt.completed,this.followRedirect(),this.followedRedirect||(this.adapter.visitCompleted(this),this.delegate.visitCompleted(this)))}fail(){this.state==vt.started&&(this.state=vt.failed,this.adapter.visitFailed(this))}changeHistory(){var t;if(!this.historyChanged&&this.updateHistory){const e=this.location.href===((t=this.referrer)===null||t===void 0?void 0:t.href)?"replace":this.action,i=oo(e);this.history.update(i,this.location,this.restorationIdentifier),this.historyChanged=!0}}issueRequest(){this.hasPreloadedResponse()?this.simulateRequest():this.shouldIssueRequest()&&!this.request&&(this.request=new Bi(this,ot.get,this.location),this.request.perform())}simulateRequest(){this.response&&(this.startRequest(),this.recordResponse(),this.finishRequest())}startRequest(){this.recordTimingMetric(ie.requestStart),this.adapter.visitRequestStarted(this)}recordResponse(t=this.response){if(this.response=t,t){const{statusCode:e}=t;Yr(e)?this.adapter.visitRequestCompleted(this):this.adapter.visitRequestFailedWithStatusCode(this,e)}}finishRequest(){this.recordTimingMetric(ie.requestEnd),this.adapter.visitRequestFinished(this)}loadResponse(){if(this.response){const{statusCode:t,responseHTML:e}=this.response;this.render(async()=>{this.shouldCacheSnapshot&&this.cacheSnapshot(),this.view.renderPromise&&await this.view.renderPromise,Yr(t)&&e!=null?(await this.view.renderPage(mt.fromHTMLString(e),!1,this.willRender,this),this.performScroll(),this.adapter.visitRendered(this),this.complete()):(await this.view.renderError(mt.fromHTMLString(e),this),this.adapter.visitRendered(this),this.fail())})}}getCachedSnapshot(){const t=this.view.getCachedSnapshotForLocation(this.location)||this.getPreloadedSnapshot();if(t&&(!$t(this.location)||t.hasAnchor($t(this.location)))&&(this.action=="restore"||t.isPreviewable))return t}getPreloadedSnapshot(){if(this.snapshotHTML)return mt.fromHTMLString(this.snapshotHTML)}hasCachedSnapshot(){return this.getCachedSnapshot()!=null}loadCachedSnapshot(){const t=this.getCachedSnapshot();if(t){const e=this.shouldIssueRequest();this.render(async()=>{this.cacheSnapshot(),this.isSamePage?this.adapter.visitRendered(this):(this.view.renderPromise&&await this.view.renderPromise,await this.view.renderPage(t,e,this.willRender,this),this.performScroll(),this.adapter.visitRendered(this),e||this.complete())})}}followRedirect(){var t;this.redirectedToLocation&&!this.followedRedirect&&(!((t=this.response)===null||t===void 0)&&t.redirected)&&(this.adapter.visitProposedToLocation(this.redirectedToLocation,{action:"replace",response:this.response,shouldCacheSnapshot:!1,willRender:!1}),this.followedRedirect=!0)}goToSamePageAnchor(){this.isSamePage&&this.render(async()=>{this.cacheSnapshot(),this.performScroll(),this.changeHistory(),this.adapter.visitRendered(this)})}prepareRequest(t){this.acceptsStreamResponse&&t.acceptResponseType(Gt.contentType)}requestStarted(){this.startRequest()}requestPreventedHandlingResponse(t,e){}async requestSucceededWithResponse(t,e){const i=await e.responseHTML,{redirected:r,statusCode:u}=e;i==null?this.recordResponse({statusCode:qt.contentTypeMismatch,redirected:r}):(this.redirectedToLocation=e.redirected?e.location:void 0,this.recordResponse({statusCode:u,responseHTML:i,redirected:r}))}async requestFailedWithResponse(t,e){const i=await e.responseHTML,{redirected:r,statusCode:u}=e;i==null?this.recordResponse({statusCode:qt.contentTypeMismatch,redirected:r}):this.recordResponse({statusCode:u,responseHTML:i,redirected:r})}requestErrored(t,e){this.recordResponse({statusCode:qt.networkFailure,redirected:!1})}requestFinished(){this.finishRequest()}performScroll(){!this.scrolled&&!this.view.forceReloaded&&(this.action=="restore"?this.scrollToRestoredPosition()||this.scrollToAnchor()||this.view.scrollToTop():this.scrollToAnchor()||this.view.scrollToTop(),this.isSamePage&&this.delegate.visitScrolledToSamePageLocation(this.view.lastRenderedLocation,this.location),this.scrolled=!0)}scrollToRestoredPosition(){const{scrollPosition:t}=this.restorationData;if(t)return this.view.scrollToPosition(t),!0}scrollToAnchor(){const t=$t(this.location);if(t!=null)return this.view.scrollToAnchor(t),!0}recordTimingMetric(t){this.timingMetrics[t]=new Date().getTime()}getTimingMetrics(){return Object.assign({},this.timingMetrics)}getHistoryMethodForAction(t){switch(t){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}hasPreloadedResponse(){return typeof this.response=="object"}shouldIssueRequest(){return this.isSamePage?!1:this.action=="restore"?!this.hasCachedSnapshot():this.willRender}cacheSnapshot(){this.snapshotCached||(this.view.cacheSnapshot(this.snapshot).then(t=>t&&this.visitCachedSnapshot(t)),this.snapshotCached=!0)}async render(t){this.cancelRender(),await new Promise(e=>{this.frame=requestAnimationFrame(()=>e())}),await t(),delete this.frame}cancelRender(){this.frame&&(cancelAnimationFrame(this.frame),delete this.frame)}}function Yr(n){return n>=200&&n<300}class Od{constructor(t){this.progressBar=new Ot,this.showProgressBar=()=>{this.progressBar.show()},this.session=t}visitProposedToLocation(t,e){this.navigator.startVisit(t,(e==null?void 0:e.restorationIdentifier)||me(),e)}visitStarted(t){this.location=t.location,t.loadCachedSnapshot(),t.issueRequest(),t.goToSamePageAnchor()}visitRequestStarted(t){this.progressBar.setValue(0),t.hasCachedSnapshot()||t.action!="restore"?this.showVisitProgressBarAfterDelay():this.showProgressBar()}visitRequestCompleted(t){t.loadResponse()}visitRequestFailedWithStatusCode(t,e){switch(e){case qt.networkFailure:case qt.timeoutFailure:case qt.contentTypeMismatch:return this.reload({reason:"request_failed",context:{statusCode:e}});default:return t.loadResponse()}}visitRequestFinished(t){this.progressBar.setValue(1),this.hideVisitProgressBar()}visitCompleted(t){}pageInvalidated(t){this.reload(t)}visitFailed(t){}visitRendered(t){}formSubmissionStarted(t){this.progressBar.setValue(0),this.showFormProgressBarAfterDelay()}formSubmissionFinished(t){this.progressBar.setValue(1),this.hideFormProgressBar()}showVisitProgressBarAfterDelay(){this.visitProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay)}hideVisitProgressBar(){this.progressBar.hide(),this.visitProgressBarTimeout!=null&&(window.clearTimeout(this.visitProgressBarTimeout),delete this.visitProgressBarTimeout)}showFormProgressBarAfterDelay(){this.formProgressBarTimeout==null&&(this.formProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay))}hideFormProgressBar(){this.progressBar.hide(),this.formProgressBarTimeout!=null&&(window.clearTimeout(this.formProgressBarTimeout),delete this.formProgressBarTimeout)}reload(t){var e;G("turbo:reload",{detail:t}),window.location.href=((e=this.location)===null||e===void 0?void 0:e.toString())||window.location.href}get navigator(){return this.session.navigator}}class Id{constructor(){this.selector="[data-turbo-temporary]",this.deprecatedSelector="[data-turbo-cache=false]",this.started=!1,this.removeTemporaryElements=t=>{for(const e of this.temporaryElements)e.remove()}}start(){this.started||(this.started=!0,addEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}stop(){this.started&&(this.started=!1,removeEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}get temporaryElements(){return[...document.querySelectorAll(this.selector),...this.temporaryElementsWithDeprecation]}get temporaryElementsWithDeprecation(){const t=document.querySelectorAll(this.deprecatedSelector);return t.length&&console.warn("The ".concat(this.deprecatedSelector," selector is deprecated and will be removed in a future version. Use ").concat(this.selector," instead.")),[...t]}}class Md{constructor(t,e){this.session=t,this.element=e,this.linkInterceptor=new ho(this,e),this.formSubmitObserver=new ji(this,e)}start(){this.linkInterceptor.start(),this.formSubmitObserver.start()}stop(){this.linkInterceptor.stop(),this.formSubmitObserver.stop()}shouldInterceptLinkClick(t,e,i){return this.shouldRedirect(t)}linkClickIntercepted(t,e,i){const r=this.findFrameElement(t);r&&r.delegate.linkClickIntercepted(t,e,i)}willSubmitForm(t,e){return t.closest("turbo-frame")==null&&this.shouldSubmit(t,e)&&this.shouldRedirect(t,e)}formSubmitted(t,e){const i=this.findFrameElement(t,e);i&&i.delegate.formSubmitted(t,e)}shouldSubmit(t,e){var i;const r=qi(t,e),u=this.element.ownerDocument.querySelector('meta[name="turbo-root"]'),h=et((i=u==null?void 0:u.content)!==null&&i!==void 0?i:"/");return this.shouldRedirect(t,e)&&se(r,h)}shouldRedirect(t,e){if(t instanceof HTMLFormElement?this.session.submissionIsNavigatable(t,e):this.session.elementIsNavigatable(t)){const r=this.findFrameElement(t,e);return r?r!=t.closest("turbo-frame"):!1}else return!1}findFrameElement(t,e){const i=(e==null?void 0:e.getAttribute("data-turbo-frame"))||t.getAttribute("data-turbo-frame");if(i&&i!="_top"){const r=this.element.querySelector("#".concat(i,":not([disabled])"));if(r instanceof yt)return r}}}class Fd{constructor(t){this.restorationIdentifier=me(),this.restorationData={},this.started=!1,this.pageLoaded=!1,this.onPopState=e=>{if(this.shouldHandlePopState()){const{turbo:i}=e.state||{};if(i){this.location=new URL(window.location.href);const{restorationIdentifier:r}=i;this.restorationIdentifier=r,this.delegate.historyPoppedToLocationWithRestorationIdentifier(this.location,r)}}},this.onPageLoad=async e=>{await td(),this.pageLoaded=!0},this.delegate=t}start(){this.started||(addEventListener("popstate",this.onPopState,!1),addEventListener("load",this.onPageLoad,!1),this.started=!0,this.replace(new URL(window.location.href)))}stop(){this.started&&(removeEventListener("popstate",this.onPopState,!1),removeEventListener("load",this.onPageLoad,!1),this.started=!1)}push(t,e){this.update(history.pushState,t,e)}replace(t,e){this.update(history.replaceState,t,e)}update(t,e,i=me()){const r={turbo:{restorationIdentifier:i}};t.call(history,r,"",e.href),this.location=e,this.restorationIdentifier=i}getRestorationDataForIdentifier(t){return this.restorationData[t]||{}}updateRestorationData(t){const{restorationIdentifier:e}=this,i=this.restorationData[e];this.restorationData[e]=Object.assign(Object.assign({},i),t)}assumeControlOfScrollRestoration(){var t;this.previousScrollRestoration||(this.previousScrollRestoration=(t=history.scrollRestoration)!==null&&t!==void 0?t:"auto",history.scrollRestoration="manual")}relinquishControlOfScrollRestoration(){this.previousScrollRestoration&&(history.scrollRestoration=this.previousScrollRestoration,delete this.previousScrollRestoration)}shouldHandlePopState(){return this.pageIsLoaded()}pageIsLoaded(){return this.pageLoaded||document.readyState=="complete"}}class Dd{constructor(t){this.delegate=t}proposeVisit(t,e={}){this.delegate.allowsVisitingLocationWithAction(t,e.action)&&(se(t,this.view.snapshot.rootLocation)?this.delegate.visitProposedToLocation(t,e):window.location.href=t.toString())}startVisit(t,e,i={}){this.stop(),this.currentVisit=new Pd(this,et(t),e,Object.assign({referrer:this.location},i)),this.currentVisit.start()}submitForm(t,e){this.stop(),this.formSubmission=new Fe(this,t,e,!0),this.formSubmission.start()}stop(){this.formSubmission&&(this.formSubmission.stop(),delete this.formSubmission),this.currentVisit&&(this.currentVisit.cancel(),delete this.currentVisit)}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get history(){return this.delegate.history}formSubmissionStarted(t){typeof this.adapter.formSubmissionStarted=="function"&&this.adapter.formSubmissionStarted(t)}async formSubmissionSucceededWithResponse(t,e){if(t==this.formSubmission){const i=await e.responseHTML;if(i){const r=t.isSafe;r||this.view.clearSnapshotCache();const{statusCode:u,redirected:h}=e,p={action:this.getActionForFormSubmission(t),shouldCacheSnapshot:r,response:{statusCode:u,responseHTML:i,redirected:h}};this.proposeVisit(e.location,p)}}}async formSubmissionFailedWithResponse(t,e){const i=await e.responseHTML;if(i){const r=mt.fromHTMLString(i);e.serverError?await this.view.renderError(r,this.currentVisit):await this.view.renderPage(r,!1,!0,this.currentVisit),this.view.scrollToTop(),this.view.clearSnapshotCache()}}formSubmissionErrored(t,e){console.error(e)}formSubmissionFinished(t){typeof this.adapter.formSubmissionFinished=="function"&&this.adapter.formSubmissionFinished(t)}visitStarted(t){this.delegate.visitStarted(t)}visitCompleted(t){this.delegate.visitCompleted(t)}locationWithActionIsSamePage(t,e){const i=$t(t),r=$t(this.view.lastRenderedLocation),u=e==="restore"&&typeof i>"u";return e!=="replace"&&wi(t)===wi(this.view.lastRenderedLocation)&&(u||i!=null&&i!==r)}visitScrolledToSamePageLocation(t,e){this.delegate.visitScrolledToSamePageLocation(t,e)}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}getActionForFormSubmission({submitter:t,formElement:e}){return Rn(t,e)||"advance"}}var Pt;(function(n){n[n.initial=0]="initial",n[n.loading=1]="loading",n[n.interactive=2]="interactive",n[n.complete=3]="complete"})(Pt||(Pt={}));class Hd{constructor(t){this.stage=Pt.initial,this.started=!1,this.interpretReadyState=()=>{const{readyState:e}=this;e=="interactive"?this.pageIsInteractive():e=="complete"&&this.pageIsComplete()},this.pageWillUnload=()=>{this.delegate.pageWillUnload()},this.delegate=t}start(){this.started||(this.stage==Pt.initial&&(this.stage=Pt.loading),document.addEventListener("readystatechange",this.interpretReadyState,!1),addEventListener("pagehide",this.pageWillUnload,!1),this.started=!0)}stop(){this.started&&(document.removeEventListener("readystatechange",this.interpretReadyState,!1),removeEventListener("pagehide",this.pageWillUnload,!1),this.started=!1)}pageIsInteractive(){this.stage==Pt.loading&&(this.stage=Pt.interactive,this.delegate.pageBecameInteractive())}pageIsComplete(){this.pageIsInteractive(),this.stage==Pt.interactive&&(this.stage=Pt.complete,this.delegate.pageLoaded())}get readyState(){return document.readyState}}class qd{constructor(t){this.started=!1,this.onScroll=()=>{this.updatePosition({x:window.pageXOffset,y:window.pageYOffset})},this.delegate=t}start(){this.started||(addEventListener("scroll",this.onScroll,!1),this.onScroll(),this.started=!0)}stop(){this.started&&(removeEventListener("scroll",this.onScroll,!1),this.started=!1)}updatePosition(t){this.delegate.scrollPositionChanged(t)}}class Nd{render({fragment:t}){mo.preservingPermanentElements(this,Bd(t),()=>document.documentElement.appendChild(t))}enteringBardo(t,e){e.replaceWith(t.cloneNode(!0))}leavingBardo(){}}function Bd(n){const t=uo(document.documentElement),e={};for(const i of t){const{id:r}=i;for(const u of n.querySelectorAll("turbo-stream")){const h=co(u.templateElement.content,r);h&&(e[r]=[i,h])}}return e}class jd{constructor(t){this.sources=new Set,this.started=!1,this.inspectFetchResponse=e=>{const i=Ud(e);i&&Wd(i)&&(e.preventDefault(),this.receiveMessageResponse(i))},this.receiveMessageEvent=e=>{this.started&&typeof e.data=="string"&&this.receiveMessageHTML(e.data)},this.delegate=t}start(){this.started||(this.started=!0,addEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}stop(){this.started&&(this.started=!1,removeEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}connectStreamSource(t){this.streamSourceIsConnected(t)||(this.sources.add(t),t.addEventListener("message",this.receiveMessageEvent,!1))}disconnectStreamSource(t){this.streamSourceIsConnected(t)&&(this.sources.delete(t),t.removeEventListener("message",this.receiveMessageEvent,!1))}streamSourceIsConnected(t){return this.sources.has(t)}async receiveMessageResponse(t){const e=await t.responseHTML;e&&this.receiveMessageHTML(e)}receiveMessageHTML(t){this.delegate.receivedMessageFromStream(Gt.wrap(t))}}function Ud(n){var t;const e=(t=n.detail)===null||t===void 0?void 0:t.fetchResponse;if(e instanceof Ni)return e}function Wd(n){var t;return((t=n.contentType)!==null&&t!==void 0?t:"").startsWith(Gt.contentType)}class Gr extends Ui{static renderElement(t,e){const{documentElement:i,body:r}=document;i.replaceChild(e,r)}async render(){this.replaceHeadAndBody(),this.activateScriptElements()}replaceHeadAndBody(){const{documentElement:t,head:e}=document;t.replaceChild(this.newHead,e),this.renderElement(this.currentElement,this.newElement)}activateScriptElements(){for(const t of this.scriptElements){const e=t.parentNode;if(e){const i=xe(t);e.replaceChild(i,t)}}}get newHead(){return this.newSnapshot.headSnapshot.element}get scriptElements(){return document.documentElement.querySelectorAll("script")}}class Sn extends Ui{static renderElement(t,e){document.body&&e instanceof HTMLBodyElement?document.body.replaceWith(e):document.documentElement.appendChild(e)}get shouldRender(){return this.newSnapshot.isVisitable&&this.trackedElementsAreIdentical}get reloadReason(){if(!this.newSnapshot.isVisitable)return{reason:"turbo_visit_control_is_reload"};if(!this.trackedElementsAreIdentical)return{reason:"tracked_element_mismatch"}}async prepareToRender(){await this.mergeHead()}async render(){this.willRender&&await this.replaceBody()}finishRendering(){super.finishRendering(),this.isPreview||this.focusFirstAutofocusableElement()}get currentHeadSnapshot(){return this.currentSnapshot.headSnapshot}get newHeadSnapshot(){return this.newSnapshot.headSnapshot}get newElement(){return this.newSnapshot.element}async mergeHead(){const t=this.mergeProvisionalElements(),e=this.copyNewHeadStylesheetElements();this.copyNewHeadScriptElements(),await t,await e}async replaceBody(){await this.preservingPermanentElements(async()=>{this.activateNewBody(),await this.assignNewBody()})}get trackedElementsAreIdentical(){return this.currentHeadSnapshot.trackedElementSignature==this.newHeadSnapshot.trackedElementSignature}async copyNewHeadStylesheetElements(){const t=[];for(const e of this.newHeadStylesheetElements)t.push(id(e)),document.head.appendChild(e);await Promise.all(t)}copyNewHeadScriptElements(){for(const t of this.newHeadScriptElements)document.head.appendChild(xe(t))}async mergeProvisionalElements(){const t=[...this.newHeadProvisionalElements];for(const e of this.currentHeadProvisionalElements)this.isCurrentElementInElementList(e,t)||document.head.removeChild(e);for(const e of t)document.head.appendChild(e)}isCurrentElementInElementList(t,e){for(const[i,r]of e.entries()){if(t.tagName=="TITLE"){if(r.tagName!="TITLE")continue;if(t.innerHTML==r.innerHTML)return e.splice(i,1),!0}if(r.isEqualNode(t))return e.splice(i,1),!0}return!1}removeCurrentHeadProvisionalElements(){for(const t of this.currentHeadProvisionalElements)document.head.removeChild(t)}copyNewHeadProvisionalElements(){for(const t of this.newHeadProvisionalElements)document.head.appendChild(t)}activateNewBody(){document.adoptNode(this.newElement),this.activateNewBodyScriptElements()}activateNewBodyScriptElements(){for(const t of this.newBodyScriptElements){const e=xe(t);t.replaceWith(e)}}async assignNewBody(){await this.renderElement(this.currentElement,this.newElement)}get newHeadStylesheetElements(){return this.newHeadSnapshot.getStylesheetElementsNotInSnapshot(this.currentHeadSnapshot)}get newHeadScriptElements(){return this.newHeadSnapshot.getScriptElementsNotInSnapshot(this.currentHeadSnapshot)}get currentHeadProvisionalElements(){return this.currentHeadSnapshot.provisionalElements}get newHeadProvisionalElements(){return this.newHeadSnapshot.provisionalElements}get newBodyScriptElements(){return this.newElement.querySelectorAll("script")}}class Vd{constructor(t){this.keys=[],this.snapshots={},this.size=t}has(t){return $e(t)in this.snapshots}get(t){if(this.has(t)){const e=this.read(t);return this.touch(t),e}}put(t,e){return this.write(t,e),this.touch(t),e}clear(){this.snapshots={}}read(t){return this.snapshots[$e(t)]}write(t,e){this.snapshots[$e(t)]=e}touch(t){const e=$e(t),i=this.keys.indexOf(e);i>-1&&this.keys.splice(i,1),this.keys.unshift(e),this.trim()}trim(){for(const t of this.keys.splice(this.size))delete this.snapshots[t]}}class zd extends lo{constructor(){super(...arguments),this.snapshotCache=new Vd(10),this.lastRenderedLocation=new URL(location.href),this.forceReloaded=!1}renderPage(t,e=!1,i=!0,r){const u=new Sn(this.snapshot,t,Sn.renderElement,e,i);return u.shouldRender?r==null||r.changeHistory():this.forceReloaded=!0,this.render(u)}renderError(t,e){e==null||e.changeHistory();const i=new Gr(this.snapshot,t,Gr.renderElement,!1);return this.render(i)}clearSnapshotCache(){this.snapshotCache.clear()}async cacheSnapshot(t=this.snapshot){if(t.isCacheable){this.delegate.viewWillCacheSnapshot();const{lastRenderedLocation:e}=this;await Zh();const i=t.clone();return this.snapshotCache.put(e,i),i}}getCachedSnapshotForLocation(t){return this.snapshotCache.get(t)}get snapshot(){return mt.fromElement(this.element)}}class $d{constructor(t){this.selector="a[data-turbo-preload]",this.delegate=t}get snapshotCache(){return this.delegate.navigator.view.snapshotCache}start(){if(document.readyState==="loading")return document.addEventListener("DOMContentLoaded",()=>{this.preloadOnLoadLinksForView(document.body)});this.preloadOnLoadLinksForView(document.body)}preloadOnLoadLinksForView(t){for(const e of t.querySelectorAll(this.selector))this.preloadURL(e)}async preloadURL(t){const e=new URL(t.href);if(!this.snapshotCache.has(e))try{const r=await(await fetch(e.toString(),{headers:{"VND.PREFETCH":"true",Accept:"text/html"}})).text(),u=mt.fromHTMLString(r);this.snapshotCache.put(e,u)}catch(i){}}}class Kd{constructor(){this.navigator=new Dd(this),this.history=new Fd(this),this.preloader=new $d(this),this.view=new zd(this,document.documentElement),this.adapter=new Od(this),this.pageObserver=new Hd(this),this.cacheObserver=new Id,this.linkClickObserver=new fo(this,window),this.formSubmitObserver=new ji(this,document),this.scrollObserver=new qd(this),this.streamObserver=new jd(this),this.formLinkClickObserver=new po(this,document.documentElement),this.frameRedirector=new Md(this,document.documentElement),this.streamMessageRenderer=new Nd,this.drive=!0,this.enabled=!0,this.progressBarDelay=500,this.started=!1,this.formMode="on"}start(){this.started||(this.pageObserver.start(),this.cacheObserver.start(),this.formLinkClickObserver.start(),this.linkClickObserver.start(),this.formSubmitObserver.start(),this.scrollObserver.start(),this.streamObserver.start(),this.frameRedirector.start(),this.history.start(),this.preloader.start(),this.started=!0,this.enabled=!0)}disable(){this.enabled=!1}stop(){this.started&&(this.pageObserver.stop(),this.cacheObserver.stop(),this.formLinkClickObserver.stop(),this.linkClickObserver.stop(),this.formSubmitObserver.stop(),this.scrollObserver.stop(),this.streamObserver.stop(),this.frameRedirector.stop(),this.history.stop(),this.started=!1)}registerAdapter(t){this.adapter=t}visit(t,e={}){const i=e.frame?document.getElementById(e.frame):null;i instanceof yt?(i.src=t.toString(),i.loaded):this.navigator.proposeVisit(et(t),e)}connectStreamSource(t){this.streamObserver.connectStreamSource(t)}disconnectStreamSource(t){this.streamObserver.disconnectStreamSource(t)}renderStreamMessage(t){this.streamMessageRenderer.render(Gt.wrap(t))}clearCache(){this.view.clearSnapshotCache()}setProgressBarDelay(t){this.progressBarDelay=t}setFormMode(t){this.formMode=t}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}historyPoppedToLocationWithRestorationIdentifier(t,e){this.enabled?this.navigator.startVisit(t,e,{action:"restore",historyChanged:!0}):this.adapter.pageInvalidated({reason:"turbo_disabled"})}scrollPositionChanged(t){this.history.updateRestorationData({scrollPosition:t})}willSubmitFormLinkToLocation(t,e){return this.elementIsNavigatable(t)&&se(e,this.snapshot.rootLocation)}submittedFormLinkToLocation(){}willFollowLinkToLocation(t,e,i){return this.elementIsNavigatable(t)&&se(e,this.snapshot.rootLocation)&&this.applicationAllowsFollowingLinkToLocation(t,e,i)}followedLinkToLocation(t,e){const i=this.getActionForLink(t),r=t.hasAttribute("data-turbo-stream");this.visit(e.href,{action:i,acceptsStreamResponse:r})}allowsVisitingLocationWithAction(t,e){return this.locationWithActionIsSamePage(t,e)||this.applicationAllowsVisitingLocation(t)}visitProposedToLocation(t,e){Qr(t),this.adapter.visitProposedToLocation(t,e)}visitStarted(t){t.acceptsStreamResponse||Si(document.documentElement),Qr(t.location),t.silent||this.notifyApplicationAfterVisitingLocation(t.location,t.action)}visitCompleted(t){Ei(document.documentElement),this.notifyApplicationAfterPageLoad(t.getTimingMetrics())}locationWithActionIsSamePage(t,e){return this.navigator.locationWithActionIsSamePage(t,e)}visitScrolledToSamePageLocation(t,e){this.notifyApplicationAfterVisitingSamePageLocation(t,e)}willSubmitForm(t,e){const i=qi(t,e);return this.submissionIsNavigatable(t,e)&&se(et(i),this.snapshot.rootLocation)}formSubmitted(t,e){this.navigator.submitForm(t,e)}pageBecameInteractive(){this.view.lastRenderedLocation=this.location,this.notifyApplicationAfterPageLoad()}pageLoaded(){this.history.assumeControlOfScrollRestoration()}pageWillUnload(){this.history.relinquishControlOfScrollRestoration()}receivedMessageFromStream(t){this.renderStreamMessage(t)}viewWillCacheSnapshot(){var t;!((t=this.navigator.currentVisit)===null||t===void 0)&&t.silent||this.notifyApplicationBeforeCachingSnapshot()}allowsImmediateRender({element:t},e){const i=this.notifyApplicationBeforeRender(t,e),{defaultPrevented:r,detail:{render:u}}=i;return this.view.renderer&&u&&(this.view.renderer.renderElement=u),!r}viewRenderedSnapshot(t,e){this.view.lastRenderedLocation=this.history.location,this.notifyApplicationAfterRender()}preloadOnLoadLinksForView(t){this.preloader.preloadOnLoadLinksForView(t)}viewInvalidated(t){this.adapter.pageInvalidated(t)}frameLoaded(t){this.notifyApplicationAfterFrameLoad(t)}frameRendered(t,e){this.notifyApplicationAfterFrameRender(t,e)}applicationAllowsFollowingLinkToLocation(t,e,i){return!this.notifyApplicationAfterClickingLinkToLocation(t,e,i).defaultPrevented}applicationAllowsVisitingLocation(t){return!this.notifyApplicationBeforeVisitingLocation(t).defaultPrevented}notifyApplicationAfterClickingLinkToLocation(t,e,i){return G("turbo:click",{target:t,detail:{url:e.href,originalEvent:i},cancelable:!0})}notifyApplicationBeforeVisitingLocation(t){return G("turbo:before-visit",{detail:{url:t.href},cancelable:!0})}notifyApplicationAfterVisitingLocation(t,e){return G("turbo:visit",{detail:{url:t.href,action:e}})}notifyApplicationBeforeCachingSnapshot(){return G("turbo:before-cache")}notifyApplicationBeforeRender(t,e){return G("turbo:before-render",{detail:Object.assign({newBody:t},e),cancelable:!0})}notifyApplicationAfterRender(){return G("turbo:render")}notifyApplicationAfterPageLoad(t={}){return G("turbo:load",{detail:{url:this.location.href,timing:t}})}notifyApplicationAfterVisitingSamePageLocation(t,e){dispatchEvent(new HashChangeEvent("hashchange",{oldURL:t.toString(),newURL:e.toString()}))}notifyApplicationAfterFrameLoad(t){return G("turbo:frame-load",{target:t})}notifyApplicationAfterFrameRender(t,e){return G("turbo:frame-render",{detail:{fetchResponse:t},target:e,cancelable:!0})}submissionIsNavigatable(t,e){if(this.formMode=="off")return!1;{const i=e?this.elementIsNavigatable(e):!0;return this.formMode=="optin"?i&&t.closest('[data-turbo="true"]')!=null:i&&this.elementIsNavigatable(t)}}elementIsNavigatable(t){const e=yn(t,"[data-turbo]"),i=yn(t,"turbo-frame");return this.drive||i?e?e.getAttribute("data-turbo")!="false":!0:e?e.getAttribute("data-turbo")=="true":!1}getActionForLink(t){return Rn(t)||"advance"}get snapshot(){return this.view.snapshot}}function Qr(n){Object.defineProperties(n,Xd)}const Xd={absoluteURL:{get(){return this.toString()}}};class Jd{constructor(t){this.session=t}clear(){this.session.clearCache()}resetCacheControl(){this.setCacheControl("")}exemptPageFromCache(){this.setCacheControl("no-cache")}exemptPageFromPreview(){this.setCacheControl("no-preview")}setCacheControl(t){sd("turbo-cache-control",t)}}const Wi={after(){this.targetElements.forEach(n=>{var t;return(t=n.parentElement)===null||t===void 0?void 0:t.insertBefore(this.templateContent,n.nextSibling)})},append(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(n=>n.append(this.templateContent))},before(){this.targetElements.forEach(n=>{var t;return(t=n.parentElement)===null||t===void 0?void 0:t.insertBefore(this.templateContent,n)})},prepend(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(n=>n.prepend(this.templateContent))},remove(){this.targetElements.forEach(n=>n.remove())},replace(){this.targetElements.forEach(n=>n.replaceWith(this.templateContent))},update(){this.targetElements.forEach(n=>{n.innerHTML="",n.append(this.templateContent)})}},U=new Kd,vo=new Jd(U),{navigator:go}=U;function On(){U.start()}function bo(n){U.registerAdapter(n)}function yo(n,t){U.visit(n,t)}function In(n){U.connectStreamSource(n)}function Mn(n){U.disconnectStreamSource(n)}function wo(n){U.renderStreamMessage(n)}function So(){console.warn("Please replace `Turbo.clearCache()` with `Turbo.cache.clear()`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),U.clearCache()}function Eo(n){U.setProgressBarDelay(n)}function To(n){Fe.confirmMethod=n}function Co(n){U.setFormMode(n)}var Yd=Object.freeze({__proto__:null,navigator:go,session:U,cache:vo,PageRenderer:Sn,PageSnapshot:mt,FrameRenderer:wn,start:On,registerAdapter:bo,visit:yo,connectStreamSource:In,disconnectStreamSource:Mn,renderStreamMessage:wo,clearCache:So,setProgressBarDelay:Eo,setConfirmMethod:To,setFormMode:Co,StreamActions:Wi});class Gd extends Error{}class Qd{constructor(t){this.fetchResponseLoaded=e=>{},this.currentFetchRequest=null,this.resolveVisitPromise=()=>{},this.connected=!1,this.hasBeenLoaded=!1,this.ignoredAttributes=new Set,this.action=null,this.visitCachedSnapshot=({element:e})=>{const i=e.querySelector("#"+this.element.id);i&&this.previousFrameElement&&i.replaceChildren(...this.previousFrameElement.children),delete this.previousFrameElement},this.element=t,this.view=new vd(this,this.element),this.appearanceObserver=new ad(this,this.element),this.formLinkClickObserver=new po(this,this.element),this.linkInterceptor=new ho(this,this.element),this.restorationIdentifier=me(),this.formSubmitObserver=new ji(this,this.element)}connect(){this.connected||(this.connected=!0,this.loadingStyle==Mt.lazy?this.appearanceObserver.start():this.loadSourceURL(),this.formLinkClickObserver.start(),this.linkInterceptor.start(),this.formSubmitObserver.start())}disconnect(){this.connected&&(this.connected=!1,this.appearanceObserver.stop(),this.formLinkClickObserver.stop(),this.linkInterceptor.stop(),this.formSubmitObserver.stop())}disabledChanged(){this.loadingStyle==Mt.eager&&this.loadSourceURL()}sourceURLChanged(){this.isIgnoringChangesTo("src")||(this.element.isConnected&&(this.complete=!1),(this.loadingStyle==Mt.eager||this.hasBeenLoaded)&&this.loadSourceURL())}sourceURLReloaded(){const{src:t}=this.element;return this.ignoringChangesToAttribute("complete",()=>{this.element.removeAttribute("complete")}),this.element.src=null,this.element.src=t,this.element.loaded}completeChanged(){this.isIgnoringChangesTo("complete")||this.loadSourceURL()}loadingStyleChanged(){this.loadingStyle==Mt.lazy?this.appearanceObserver.start():(this.appearanceObserver.stop(),this.loadSourceURL())}async loadSourceURL(){this.enabled&&this.isActive&&!this.complete&&this.sourceURL&&(this.element.loaded=this.visit(et(this.sourceURL)),this.appearanceObserver.stop(),await this.element.loaded,this.hasBeenLoaded=!0)}async loadResponse(t){(t.redirected||t.succeeded&&t.isHTML)&&(this.sourceURL=t.response.url);try{const e=await t.responseHTML;if(e){const i=ro(e);mt.fromDocument(i).isVisitable?await this.loadFrameResponse(t,i):await this.handleUnvisitableFrameResponse(t)}}finally{this.fetchResponseLoaded=()=>{}}}elementAppearedInViewport(t){this.proposeVisitIfNavigatedWithAction(t,t),this.loadSourceURL()}willSubmitFormLinkToLocation(t){return this.shouldInterceptNavigation(t)}submittedFormLinkToLocation(t,e,i){const r=this.findFrameElement(t);r&&i.setAttribute("data-turbo-frame",r.id)}shouldInterceptLinkClick(t,e,i){return this.shouldInterceptNavigation(t)}linkClickIntercepted(t,e){this.navigateFrame(t,e)}willSubmitForm(t,e){return t.closest("turbo-frame")==this.element&&this.shouldInterceptNavigation(t,e)}formSubmitted(t,e){this.formSubmission&&this.formSubmission.stop(),this.formSubmission=new Fe(this,t,e);const{fetchRequest:i}=this.formSubmission;this.prepareRequest(i),this.formSubmission.start()}prepareRequest(t){var e;t.headers["Turbo-Frame"]=this.id,!((e=this.currentNavigationElement)===null||e===void 0)&&e.hasAttribute("data-turbo-stream")&&t.acceptResponseType(Gt.contentType)}requestStarted(t){Si(this.element)}requestPreventedHandlingResponse(t,e){this.resolveVisitPromise()}async requestSucceededWithResponse(t,e){await this.loadResponse(e),this.resolveVisitPromise()}async requestFailedWithResponse(t,e){await this.loadResponse(e),this.resolveVisitPromise()}requestErrored(t,e){console.error(e),this.resolveVisitPromise()}requestFinished(t){Ei(this.element)}formSubmissionStarted({formElement:t}){Si(t,this.findFrameElement(t))}formSubmissionSucceededWithResponse(t,e){const i=this.findFrameElement(t.formElement,t.submitter);i.delegate.proposeVisitIfNavigatedWithAction(i,t.formElement,t.submitter),i.delegate.loadResponse(e),t.isSafe||U.clearCache()}formSubmissionFailedWithResponse(t,e){this.element.delegate.loadResponse(e),U.clearCache()}formSubmissionErrored(t,e){console.error(e)}formSubmissionFinished({formElement:t}){Ei(t,this.findFrameElement(t))}allowsImmediateRender({element:t},e){const i=G("turbo:before-frame-render",{target:this.element,detail:Object.assign({newFrame:t},e),cancelable:!0}),{defaultPrevented:r,detail:{render:u}}=i;return this.view.renderer&&u&&(this.view.renderer.renderElement=u),!r}viewRenderedSnapshot(t,e){}preloadOnLoadLinksForView(t){U.preloadOnLoadLinksForView(t)}viewInvalidated(){}willRenderFrame(t,e){this.previousFrameElement=t.cloneNode(!0)}async loadFrameResponse(t,e){const i=await this.extractForeignFrameElement(e.body);if(i){const r=new Pn(i),u=new wn(this,this.view.snapshot,r,wn.renderElement,!1,!1);this.view.renderPromise&&await this.view.renderPromise,this.changeHistory(),await this.view.render(u),this.complete=!0,U.frameRendered(t,this.element),U.frameLoaded(this.element),this.fetchResponseLoaded(t)}else this.willHandleFrameMissingFromResponse(t)&&this.handleFrameMissingFromResponse(t)}async visit(t){var e;const i=new Bi(this,ot.get,t,new URLSearchParams,this.element);return(e=this.currentFetchRequest)===null||e===void 0||e.cancel(),this.currentFetchRequest=i,new Promise(r=>{this.resolveVisitPromise=()=>{this.resolveVisitPromise=()=>{},this.currentFetchRequest=null,r()},i.perform()})}navigateFrame(t,e,i){const r=this.findFrameElement(t,i);r.delegate.proposeVisitIfNavigatedWithAction(r,t,i),this.withCurrentNavigationElement(t,()=>{r.src=e})}proposeVisitIfNavigatedWithAction(t,e,i){if(this.action=Rn(i,e,t),this.action){const r=mt.fromElement(t).clone(),{visitCachedSnapshot:u}=t.delegate;t.delegate.fetchResponseLoaded=h=>{if(t.src){const{statusCode:f,redirected:p}=h,v=t.ownerDocument.documentElement.outerHTML,w={response:{statusCode:f,redirected:p,responseHTML:v},visitCachedSnapshot:u,willRender:!1,updateHistory:!1,restorationIdentifier:this.restorationIdentifier,snapshot:r};this.action&&(w.action=this.action),U.visit(t.src,w)}}}}changeHistory(){if(this.action){const t=oo(this.action);U.history.update(t,et(this.element.src||""),this.restorationIdentifier)}}async handleUnvisitableFrameResponse(t){console.warn("The response (".concat(t.statusCode,') from <turbo-frame id="').concat(this.element.id,'"> is performing a full page visit due to turbo-visit-control.')),await this.visitResponse(t.response)}willHandleFrameMissingFromResponse(t){this.element.setAttribute("complete","");const e=t.response,i=async(u,h={})=>{u instanceof Response?this.visitResponse(u):U.visit(u,h)};return!G("turbo:frame-missing",{target:this.element,detail:{response:e,visit:i},cancelable:!0}).defaultPrevented}handleFrameMissingFromResponse(t){this.view.missing(),this.throwFrameMissingError(t)}throwFrameMissingError(t){const e="The response (".concat(t.statusCode,') did not contain the expected <turbo-frame id="').concat(this.element.id,'"> and will be ignored. To perform a full page visit instead, set turbo-visit-control to reload.');throw new Gd(e)}async visitResponse(t){const e=new Ni(t),i=await e.responseHTML,{location:r,redirected:u,statusCode:h}=e;return U.visit(r,{response:{redirected:u,statusCode:h,responseHTML:i}})}findFrameElement(t,e){var i;const r=gn("data-turbo-frame",e,t)||this.element.getAttribute("target");return(i=Zr(r))!==null&&i!==void 0?i:this.element}async extractForeignFrameElement(t){let e;const i=CSS.escape(this.id);try{if(e=ts(t.querySelector("turbo-frame#".concat(i)),this.sourceURL),e)return e;if(e=ts(t.querySelector("turbo-frame[src][recurse~=".concat(i,"]")),this.sourceURL),e)return await e.loaded,await this.extractForeignFrameElement(e)}catch(r){return console.error(r),new yt}return null}formActionIsVisitable(t,e){const i=qi(t,e);return se(et(i),this.rootLocation)}shouldInterceptNavigation(t,e){const i=gn("data-turbo-frame",e,t)||this.element.getAttribute("target");if(t instanceof HTMLFormElement&&!this.formActionIsVisitable(t,e)||!this.enabled||i=="_top")return!1;if(i){const r=Zr(i);if(r)return!r.disabled}return!(!U.elementIsNavigatable(t)||e&&!U.elementIsNavigatable(e))}get id(){return this.element.id}get enabled(){return!this.element.disabled}get sourceURL(){if(this.element.src)return this.element.src}set sourceURL(t){this.ignoringChangesToAttribute("src",()=>{this.element.src=t!=null?t:null})}get loadingStyle(){return this.element.loading}get isLoading(){return this.formSubmission!==void 0||this.resolveVisitPromise()!==void 0}get complete(){return this.element.hasAttribute("complete")}set complete(t){this.ignoringChangesToAttribute("complete",()=>{t?this.element.setAttribute("complete",""):this.element.removeAttribute("complete")})}get isActive(){return this.element.isActive&&this.connected}get rootLocation(){var t;const e=this.element.ownerDocument.querySelector('meta[name="turbo-root"]'),i=(t=e==null?void 0:e.content)!==null&&t!==void 0?t:"/";return et(i)}isIgnoringChangesTo(t){return this.ignoredAttributes.has(t)}ignoringChangesToAttribute(t,e){this.ignoredAttributes.add(t),e(),this.ignoredAttributes.delete(t)}withCurrentNavigationElement(t,e){this.currentNavigationElement=t,e(),delete this.currentNavigationElement}}function Zr(n){if(n!=null){const t=document.getElementById(n);if(t instanceof yt)return t}}function ts(n,t){if(n){const e=n.getAttribute("src");if(e!=null&&t!=null&&$h(e,t))throw new Error('Matching <turbo-frame id="'.concat(n.id,'"> element has a source URL which references itself'));if(n.ownerDocument!==document&&(n=document.importNode(n,!0)),n instanceof yt)return n.connectedCallback(),n.disconnectedCallback(),n}}class Fn extends HTMLElement{static async renderElement(t){await t.performAction()}async connectedCallback(){try{await this.render()}catch(t){console.error(t)}finally{this.disconnect()}}async render(){var t;return(t=this.renderPromise)!==null&&t!==void 0?t:this.renderPromise=(async()=>{const e=this.beforeRenderEvent;this.dispatchEvent(e)&&(await rn(),await e.detail.render(this))})()}disconnect(){try{this.remove()}catch(t){}}removeDuplicateTargetChildren(){this.duplicateChildren.forEach(t=>t.remove())}get duplicateChildren(){var t;const e=this.targetElements.flatMap(r=>[...r.children]).filter(r=>!!r.id),i=[...((t=this.templateContent)===null||t===void 0?void 0:t.children)||[]].filter(r=>!!r.id).map(r=>r.id);return e.filter(r=>i.includes(r.id))}get performAction(){if(this.action){const t=Wi[this.action];if(t)return t;this.raise("unknown action")}this.raise("action attribute is missing")}get targetElements(){if(this.target)return this.targetElementsById;if(this.targets)return this.targetElementsByQuery;this.raise("target or targets attribute is missing")}get templateContent(){return this.templateElement.content.cloneNode(!0)}get templateElement(){if(this.firstElementChild===null){const t=this.ownerDocument.createElement("template");return this.appendChild(t),t}else if(this.firstElementChild instanceof HTMLTemplateElement)return this.firstElementChild;this.raise("first child element must be a <template> element")}get action(){return this.getAttribute("action")}get target(){return this.getAttribute("target")}get targets(){return this.getAttribute("targets")}raise(t){throw new Error("".concat(this.description,": ").concat(t))}get description(){var t,e;return(e=((t=this.outerHTML.match(/<[^>]+>/))!==null&&t!==void 0?t:[])[0])!==null&&e!==void 0?e:"<turbo-stream>"}get beforeRenderEvent(){return new CustomEvent("turbo:before-stream-render",{bubbles:!0,cancelable:!0,detail:{newStream:this,render:Fn.renderElement}})}get targetElementsById(){var t;const e=(t=this.ownerDocument)===null||t===void 0?void 0:t.getElementById(this.target);return e!==null?[e]:[]}get targetElementsByQuery(){var t;const e=(t=this.ownerDocument)===null||t===void 0?void 0:t.querySelectorAll(this.targets);return e.length!==0?Array.prototype.slice.call(e):[]}}class _o extends HTMLElement{constructor(){super(...arguments),this.streamSource=null}connectedCallback(){this.streamSource=this.src.match(/^ws{1,2}:/)?new WebSocket(this.src):new EventSource(this.src),In(this.streamSource)}disconnectedCallback(){this.streamSource&&Mn(this.streamSource)}get src(){return this.getAttribute("src")||""}}yt.delegateConstructor=Qd;customElements.get("turbo-frame")===void 0&&customElements.define("turbo-frame",yt);customElements.get("turbo-stream")===void 0&&customElements.define("turbo-stream",Fn);customElements.get("turbo-stream-source")===void 0&&customElements.define("turbo-stream-source",_o);var ss;(()=>{let n=document.currentScript;if(n&&!n.hasAttribute("data-turbo-suppress-warning"))for(n=n.parentElement;n;){if(n==document.body)return console.warn(so(ss||(ss=Qn(['\n        You are loading Turbo from a <script> element inside the <body> element. This is probably not what you meant to do!\n\n        Load your application’s JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.\n\n        For more information, see: https://turbo.hotwired.dev/handbook/building#working-with-script-elements\n\n        ——\n        Suppress this warning by adding a "data-turbo-suppress-warning" attribute to: %s\n      ']))),n.outerHTML);n=n.parentElement}})();window.Turbo=Yd;On();const Zd=Object.freeze(Object.defineProperty({__proto__:null,FrameElement:yt,get FrameLoadingStyle(){return Mt},FrameRenderer:wn,PageRenderer:Sn,PageSnapshot:mt,StreamActions:Wi,StreamElement:Fn,StreamSourceElement:_o,cache:vo,clearCache:So,connectStreamSource:In,disconnectStreamSource:Mn,navigator:go,registerAdapter:bo,renderStreamMessage:wo,session:U,setConfirmMethod:To,setFormMode:Co,setProgressBarDelay:Eo,start:On,visit:yo},Symbol.toStringTag,{value:"Module"})),tf=(n,t)=>n==="presence"?window.Echo.join(t):window.Echo[n](t);class ef extends HTMLElement{async connectedCallback(){In(this),this.subscription=tf(this.type,this.channel).listenToAll((t,e)=>{this.dispatchMessageEvent(e.streams)})}disconnectedCallback(){Mn(this),this.subscription&&(window.Echo.leave(this.channel),this.subscription=null)}dispatchMessageEvent(t){const e=new MessageEvent("message",{data:t});return this.dispatchEvent(e)}get channel(){return this.getAttribute("channel")||""}get type(){return this.getAttribute("type")||"private"}}window.Pusher=Nh;window.Waterhole.echoConfig.broadcaster&&(window.Echo=new Hh({namespace:"Waterhole.Events",...window.Waterhole.echoConfig}),window.Echo.registerTurboRequestInterceptor(),customElements.define("turbo-echo-stream-source",ef));class Ti{constructor(t){this.children=[],this.parent=t}delete(t){const e=this.children.indexOf(t);return e===-1?!1:(this.children=this.children.slice(0,e).concat(this.children.slice(e+1)),this.children.length===0&&this.parent.delete(this),!0)}add(t){return this.children.push(t),this}}class En{constructor(t){this.parent=null,this.children={},this.parent=t||null}get(t){return this.children[t]}insert(t){let e=this;for(let i=0;i<t.length;i+=1){const r=t[i];let u=e.get(r);if(i===t.length-1)return u instanceof En&&(e.delete(u),u=null),u||(u=new Ti(e),e.children[r]=u),u;u instanceof Ti&&(u=null),u||(u=new En(e),e.children[r]=u),e=u}return e}delete(t){for(const e in this.children)if(this.children[e]===t){const r=delete this.children[e];return Object.keys(this.children).length===0&&this.parent&&this.parent.delete(this),r}return!1}}const nf={"¡":"1","™":"2","£":"3","¢":"4","∞":"5","§":"6","¶":"7","•":"8",ª:"9",º:"0","–":"-","≠":"=","⁄":"!","€":"@","‹":"#","›":"$",ﬁ:"%",ﬂ:"^","‡":"&","°":"*","·":"(","‚":")","—":"_","±":"+",œ:"q","∑":"w","®":"r","†":"t","¥":"y",ø:"o",π:"p","“":"[","‘":"]","«":"\\",Œ:"Q","„":"W","´":"E","‰":"R","ˇ":"T",Á:"Y","¨":"U","ˆ":"I",Ø:"O","∏":"P","”":"{","’":"}","»":"|",å:"a",ß:"s","∂":"d",ƒ:"f","©":"g","˙":"h","∆":"j","˚":"k","¬":"l","…":";",æ:"'",Å:"A",Í:"S",Î:"D",Ï:"F","˝":"G",Ó:"H",Ô:"J","":"K",Ò:"L",Ú:":",Æ:'"',Ω:"z","≈":"x",ç:"c","√":"v","∫":"b",µ:"m","≤":",","≥":".","÷":"/","¸":"Z","˛":"X",Ç:"C","◊":"V",ı:"B","˜":"N",Â:"M","¯":"<","˘":">","¿":"?"},rf={" ":"Space","+":"Plus"};function ko(n,t=navigator.platform){var e,i;const{ctrlKey:r,altKey:u,metaKey:h,key:f}=n,p=[],v=[r,u,h,sf(n)];for(const[g,w]of v.entries())w&&p.push(es[g]);if(!es.includes(f)){const g=p.includes("Alt")&&Ao.test(t)&&(e=nf[f])!==null&&e!==void 0?e:f,w=(i=rf[g])!==null&&i!==void 0?i:g;p.push(w)}return p.join("+")}const es=["Control","Alt","Meta","Shift"];function sf(n){const{shiftKey:t,code:e,key:i}=n;return t&&!(e.startsWith("Key")&&i.toUpperCase()===i)}function of(n,t){let e;return e=af(n,t),e=cf(e),e}const Ao=/Mac|iPod|iPhone|iPad/i;function af(n,t=navigator.platform){const e=Ao.test(t)?"Meta":"Control";return n.replace("Mod",e)}function cf(n){const t=n.split("+").pop(),e=[];for(const i of["Control","Alt","Meta","Shift"])n.includes(i)&&e.push(i);return e.push(t),e.join("+")}const Lo=" ";class Dn{constructor({onReset:t}={}){this._path=[],this.timer=null,this.onReset=t}get path(){return this._path}get sequence(){return this._path.join(Lo)}registerKeypress(t){this._path=[...this._path,ko(t)],this.startTimer()}reset(){var t;this.killTimer(),this._path=[],(t=this.onReset)===null||t===void 0||t.call(this)}killTimer(){this.timer!=null&&window.clearTimeout(this.timer),this.timer=null}startTimer(){this.killTimer(),this.timer=window.setTimeout(()=>this.reset(),Dn.CHORD_TIMEOUT)}}Dn.CHORD_TIMEOUT=1500;function Ci(n){if(!(n instanceof HTMLElement))return!1;const t=n.nodeName.toLowerCase(),e=(n.getAttribute("type")||"").toLowerCase();return t==="select"||t==="textarea"||t==="input"&&e!=="submit"&&e!=="reset"&&e!=="checkbox"&&e!=="radio"&&e!=="file"||n.isContentEditable}function uf(n,t){const e=new CustomEvent("hotkey-fire",{cancelable:!0,detail:{path:t}});n.dispatchEvent(e)&&(Ci(n)?n.focus():n.click())}function lf(n){const t=[];let e=[""],i=!1;for(let r=0;r<n.length;r++){if(i&&n[r]===","){t.push(e),e=[""],i=!1;continue}if(n[r]===Lo){e.push(""),i=!1;continue}else n[r]==="+"?i=!1:i=!0;e[e.length-1]+=n[r]}return t.push(e),t.map(r=>r.map(u=>of(u)).filter(u=>u!=="")).filter(r=>r.length>0)}const Tn=new En,hf=new WeakMap;let _i=Tn;const Ke=new Dn({onReset(){_i=Tn}});function df(n){if(n.defaultPrevented||!(n.target instanceof Node))return;if(Ci(n.target)){const e=n.target;if(!e.id||!e.ownerDocument.querySelector('[data-hotkey-scope="'.concat(e.id,'"]')))return}const t=_i.get(ko(n));if(!t){Ke.reset();return}if(Ke.registerKeypress(n),_i=t,t instanceof Ti){const e=n.target;let i=!1,r;const u=Ci(e);for(let h=t.children.length-1;h>=0;h-=1){r=t.children[h];const f=r.getAttribute("data-hotkey-scope");if(!u&&!f||u&&e.id===f){i=!0;break}}r&&i&&(uf(r,Ke.path),n.preventDefault()),Ke.reset()}}function ff(n,t){Object.keys(Tn.children).length===0&&document.addEventListener("keydown",df);const i=lf(n.getAttribute("data-hotkey")||"").map(r=>Tn.insert(r).add(n));hf.set(n,i)}function Vi(n){n.target.querySelectorAll("[data-hotkey]").forEach(t=>{ff(t)})}document.addEventListener("DOMContentLoaded",Vi);document.addEventListener("turbo:render",Vi);document.addEventListener("turbo:frame-render",Vi);Ft.notEqual=vf;Ft.notOk=gf;Ft.equal=mf;Ft.ok=Ft;var pf=Ft;function mf(n,t,e){Ft(n==t,e)}function vf(n,t,e){Ft(n!=t,e)}function gf(n,t){Ft(!n,t)}function Ft(n,t){if(!n)throw new Error(t||"AssertionError")}var bf=["onclick","ondblclick","onmousedown","onmouseup","onmouseover","onmousemove","onmouseout","onmouseenter","onmouseleave","ontouchcancel","ontouchend","ontouchmove","ontouchstart","ondragstart","ondrag","ondragenter","ondragleave","ondragover","ondrop","ondragend","onkeydown","onkeypress","onkeyup","onunload","onabort","onerror","onresize","onscroll","onselect","onchange","onsubmit","onreset","onfocus","onblur","oninput","onanimationend","onanimationiteration","onanimationstart","oncontextmenu","onfocusin","onfocusout"],xo=bf,yf=xo.length,wf=1,Sf=3,Ef=8,Tf=Cf;function Cf(n,t){var e=n.nodeType,i=n.nodeName;e===wf&&_f(n,t),(e===Sf||e===Ef)&&t.nodeValue!==n.nodeValue&&(t.nodeValue=n.nodeValue),i==="INPUT"?Lf(n,t):i==="OPTION"?Af(n,t):i==="TEXTAREA"&&xf(n,t),kf(n,t)}function _f(n,t){for(var e=t.attributes,i=n.attributes,r=null,u=null,h=null,f=null,p=null,v=i.length-1;v>=0;--v)p=i[v],f=p.name,r=p.namespaceURI,u=p.value,r?(f=p.localName||f,h=t.getAttributeNS(r,f),h!==u&&t.setAttributeNS(r,f,u)):t.hasAttribute(f)?(h=t.getAttribute(f),h!==u&&(u==="null"||u==="undefined"?t.removeAttribute(f):t.setAttribute(f,u))):t.setAttribute(f,u);for(var g=e.length-1;g>=0;--g)p=e[g],p.specified!==!1&&(f=p.name,r=p.namespaceURI,r?(f=p.localName||f,n.hasAttributeNS(r,f)||t.removeAttributeNS(r,f)):n.hasAttributeNS(null,f)||t.removeAttribute(f))}function kf(n,t){for(var e=0;e<yf;e++){var i=xo[e];n[i]?t[i]=n[i]:t[i]&&(t[i]=void 0)}}function Af(n,t){ki(n,t,"selected")}function Lf(n,t){var e=n.value,i=t.value;ki(n,t,"checked"),ki(n,t,"disabled"),n.indeterminate!==t.indeterminate&&(t.indeterminate=n.indeterminate),t.type!=="file"&&(e!==i&&(t.setAttribute("value",e),t.value=e),e==="null"&&(t.value="",t.removeAttribute("value")),n.hasAttributeNS(null,"value")?t.type==="range"&&(t.value=e):t.removeAttribute("value"))}function xf(n,t){var e=n.value;if(e!==t.value&&(t.value=e),t.firstChild&&t.firstChild.nodeValue!==e){if(e===""&&t.firstChild.nodeValue===t.placeholder)return;t.firstChild.nodeValue=e}}function ki(n,t,e){n[e]!==t[e]&&(t[e]=n[e],n[e]?t.setAttribute(e,""):t.removeAttribute(e))}var si=pf,Rf=Tf,Pf=3,Of=If;function If(n,t,e){return si.equal(typeof n,"object","nanomorph: oldTree should be an object"),si.equal(typeof t,"object","nanomorph: newTree should be an object"),e&&e.childrenOnly?(Ro(t,n),n):(si.notEqual(t.nodeType,11,"nanomorph: newTree should have one root node (which is not a DocumentFragment)"),sn(t,n))}function sn(n,t){return t?n?n.isSameNode&&n.isSameNode(t)?t:n.tagName!==t.tagName||ns(n)!==ns(t)?n:(Rf(n,t),Ro(n,t),t):null:n}function ns(n){return n.dataset?n.dataset.nanomorphComponentId:void 0}function Ro(n,t){for(var e,i,r,u,h=0,f=0;e=t.childNodes[f],i=n.childNodes[f-h],!(!e&&!i);f++)if(!i)t.removeChild(e),f--;else if(!e)t.appendChild(i),h++;else if(is(i,e))r=sn(i,e),r!==e&&(t.replaceChild(r,e),h++);else{u=null;for(var p=f;p<t.childNodes.length;p++)if(is(t.childNodes[p],i)){u=t.childNodes[p];break}u?(r=sn(i,u),r!==u&&h++,t.insertBefore(r,e)):!i.id&&!e.id?(r=sn(i,e),r!==e&&(t.replaceChild(r,e),h++)):(t.insertBefore(i,e),h++)}}function is(n,t){return n.id?n.id===t.id:n.isSameNode?n.isSameNode(t):n.tagName!==t.tagName?!1:n.type===Pf?n.nodeValue===t.nodeValue:!1}const Mf=os(Of);function Ai(n){var e,i;const t=document.getElementById(n);return(i=(e=t==null?void 0:t.content)==null?void 0:e.firstElementChild)==null?void 0:i.cloneNode(!0)}function Ff(n){const t=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return t?decodeURIComponent(t[3]):null}On();window.Turbo=Zd;document.addEventListener("turbo:before-stream-render",n=>{const{detail:t}=n,e=t.render;t.render=i=>{i.action==="replace"?i.targetElements.forEach(r=>{Mf(r,i.templateContent.firstElementChild)}):e(i)}});document.addEventListener("turbo:before-fetch-response",async n=>{var i;const t=n.detail.fetchResponse.response;if(t.ok||t.status===422)return;n.preventDefault();const{target:e}=n;if(e instanceof yt){const r=Ai("frame-error");(i=r.querySelector("button"))==null||i.addEventListener("click",()=>{e.reload()}),e.replaceChildren(r)}else Waterhole.fetchError(t)});document.addEventListener("turbo:frame-missing",async n=>{n.preventDefault();const{detail:t}=n;t.visit(t.response,{action:"replace"})});Waterhole.fetchError=async function(n){let t;switch(n==null?void 0:n.status){case 401:case 403:t="forbidden-alert";break;case 419:t="session-expired-alert";break;case 422:const e=Ai("template-alert-danger");e.querySelector(".alert__message").textContent=(await n.json()).message,Waterhole.alerts.show(e,{key:"fetchError"});break;case 429:t="too-many-requests-alert";break;default:t="fatal-error-alert"}if(t){const e=Ai(t);e&&Waterhole.alerts.show(e,{key:"fetchError"})}};Object.defineProperty(Waterhole,"alerts",{get:()=>document.getElementById("alerts")});window.Stimulus=Tu.start();window.Stimulus.load(Cu(require.context("./controllers",!0,/\.ts$/)));Waterhole.fetch=Ju.create({headers:{"X-XSRF-TOKEN":Ff("XSRF-TOKEN")||void 0},hooks:{beforeError:[n=>(Waterhole.fetchError(n.response),n)]}});export{Hf as __vite_legacy_guard};
