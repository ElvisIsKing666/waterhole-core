var ju=Object.defineProperty;var Ss=n=>{throw TypeError(n)};var Uu=(n,t,e)=>t in n?ju(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var Ce=(n,t,e)=>Uu(n,typeof t!="symbol"?t+"":t,e),mi=(n,t,e)=>t.has(n)||Ss("Cannot "+e);var N=(n,t,e)=>(mi(n,t,"read from private field"),e?e.call(n):t.get(n)),st=(n,t,e)=>t.has(n)?Ss("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,e),gt=(n,t,e,i)=>(mi(n,t,"write to private field"),i?i.call(n,e):t.set(n,e),e),V=(n,t,e)=>(mi(n,t,"access private method"),e);import{C as U,A as Wu}from"./stimulus.js";import{C as $u,c as yn,i as Vu,s as zu,g as $n,d as Ku,a as Xu}from"./debounce.js";import{g as lo}from"./_commonjsHelpers.js";var Yu=function(n,t,e,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?n!==t||!r:!t.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,e):r?r.value=e:t.set(n,e),e},Es=function(n,t,e,i){if(e==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?n!==t||!i:!t.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?i:e==="a"?i.call(n):i?i.value:t.get(n)},xe;class Ju{formatToParts(t){const e=[];for(const i of t)e.push({type:"element",value:i}),e.push({type:"literal",value:", "});return e.slice(0,-1)}}const Gu=typeof Intl<"u"&&Intl.ListFormat||Ju,Qu=[["years","year"],["months","month"],["weeks","week"],["days","day"],["hours","hour"],["minutes","minute"],["seconds","second"],["milliseconds","millisecond"]],Zu={minimumIntegerDigits:2};class th{constructor(t,e={}){xe.set(this,void 0);let i=String(e.style||"short");i!=="long"&&i!=="short"&&i!=="narrow"&&i!=="digital"&&(i="short");let r=i==="digital"?"numeric":i;const c=e.hours||r;r=c==="2-digit"?"numeric":c;const u=e.minutes||r;r=u==="2-digit"?"numeric":u;const d=e.seconds||r;r=d==="2-digit"?"numeric":d;const p=e.milliseconds||r;Yu(this,xe,{locale:t,style:i,years:e.years||i==="digital"?"short":i,yearsDisplay:e.yearsDisplay==="always"?"always":"auto",months:e.months||i==="digital"?"short":i,monthsDisplay:e.monthsDisplay==="always"?"always":"auto",weeks:e.weeks||i==="digital"?"short":i,weeksDisplay:e.weeksDisplay==="always"?"always":"auto",days:e.days||i==="digital"?"short":i,daysDisplay:e.daysDisplay==="always"?"always":"auto",hours:c,hoursDisplay:e.hoursDisplay==="always"||i==="digital"?"always":"auto",minutes:u,minutesDisplay:e.minutesDisplay==="always"||i==="digital"?"always":"auto",seconds:d,secondsDisplay:e.secondsDisplay==="always"||i==="digital"?"always":"auto",milliseconds:p,millisecondsDisplay:e.millisecondsDisplay==="always"?"always":"auto"},"f")}resolvedOptions(){return Es(this,xe,"f")}formatToParts(t){const e=[],i=Es(this,xe,"f"),r=i.style,c=i.locale;for(const[u,d]of Qu){const p=t[u];if(i[`${u}Display`]==="auto"&&!p)continue;const m=i[u],g=m==="2-digit"?Zu:m==="numeric"?{}:{style:"unit",unit:d,unitDisplay:m};e.push(new Intl.NumberFormat(c,g).format(p))}return new Gu(c,{type:"unit",style:r==="digital"?"short":r}).formatToParts(e)}format(t){return this.formatToParts(t).map(e=>e.value).join("")}}xe=new WeakMap;const uo=/^[-+]?P(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)W)?(?:(\d+)D)?(?:T(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?)?$/,wn=["year","month","week","day","hour","minute","second","millisecond"],eh=n=>uo.test(n);class dt{constructor(t=0,e=0,i=0,r=0,c=0,u=0,d=0,p=0){this.years=t,this.months=e,this.weeks=i,this.days=r,this.hours=c,this.minutes=u,this.seconds=d,this.milliseconds=p,this.years||(this.years=0),this.sign||(this.sign=Math.sign(this.years)),this.months||(this.months=0),this.sign||(this.sign=Math.sign(this.months)),this.weeks||(this.weeks=0),this.sign||(this.sign=Math.sign(this.weeks)),this.days||(this.days=0),this.sign||(this.sign=Math.sign(this.days)),this.hours||(this.hours=0),this.sign||(this.sign=Math.sign(this.hours)),this.minutes||(this.minutes=0),this.sign||(this.sign=Math.sign(this.minutes)),this.seconds||(this.seconds=0),this.sign||(this.sign=Math.sign(this.seconds)),this.milliseconds||(this.milliseconds=0),this.sign||(this.sign=Math.sign(this.milliseconds)),this.blank=this.sign===0}abs(){return new dt(Math.abs(this.years),Math.abs(this.months),Math.abs(this.weeks),Math.abs(this.days),Math.abs(this.hours),Math.abs(this.minutes),Math.abs(this.seconds),Math.abs(this.milliseconds))}static from(t){var e;if(typeof t=="string"){const i=String(t).trim(),r=i.startsWith("-")?-1:1,c=(e=i.match(uo))===null||e===void 0?void 0:e.slice(1).map(u=>(Number(u)||0)*r);return c?new dt(...c):new dt}else if(typeof t=="object"){const{years:i,months:r,weeks:c,days:u,hours:d,minutes:p,seconds:m,milliseconds:g}=t;return new dt(i,r,c,u,d,p,m,g)}throw new RangeError("invalid duration")}static compare(t,e){const i=Date.now(),r=Math.abs(Ts(i,dt.from(t)).getTime()-i),c=Math.abs(Ts(i,dt.from(e)).getTime()-i);return r>c?-1:r<c?1:0}toLocaleString(t,e){return new th(t,e).format(this)}}function Ts(n,t){const e=new Date(n);return t.sign<0?(e.setUTCSeconds(e.getUTCSeconds()+t.seconds),e.setUTCMinutes(e.getUTCMinutes()+t.minutes),e.setUTCHours(e.getUTCHours()+t.hours),e.setUTCDate(e.getUTCDate()+t.weeks*7+t.days),e.setUTCMonth(e.getUTCMonth()+t.months),e.setUTCFullYear(e.getUTCFullYear()+t.years)):(e.setUTCFullYear(e.getUTCFullYear()+t.years),e.setUTCMonth(e.getUTCMonth()+t.months),e.setUTCDate(e.getUTCDate()+t.weeks*7+t.days),e.setUTCHours(e.getUTCHours()+t.hours),e.setUTCMinutes(e.getUTCMinutes()+t.minutes),e.setUTCSeconds(e.getUTCSeconds()+t.seconds)),e}function nh(n,t="second",e=Date.now()){const i=n.getTime()-e;if(i===0)return new dt;const r=Math.sign(i),c=Math.abs(i),u=Math.floor(c/1e3),d=Math.floor(u/60),p=Math.floor(d/60),m=Math.floor(p/24),g=Math.floor(m/30),v=Math.floor(g/12),y=wn.indexOf(t)||wn.length;return new dt(y>=0?v*r:0,y>=1?(g-v*12)*r:0,0,y>=3?(m-g*30)*r:0,y>=4?(p-m*24)*r:0,y>=5?(d-p*60)*r:0,y>=6?(u-d*60)*r:0,y>=7?(c-u*1e3)*r:0)}function ho(n,{relativeTo:t=Date.now()}={}){if(t=new Date(t),n.blank)return n;const e=n.sign;let i=Math.abs(n.years),r=Math.abs(n.months),c=Math.abs(n.weeks),u=Math.abs(n.days),d=Math.abs(n.hours),p=Math.abs(n.minutes),m=Math.abs(n.seconds),g=Math.abs(n.milliseconds);g>=900&&(m+=Math.round(g/1e3)),(m||p||d||u||c||r||i)&&(g=0),m>=55&&(p+=Math.round(m/60)),(p||d||u||c||r||i)&&(m=0),p>=55&&(d+=Math.round(p/60)),(d||u||c||r||i)&&(p=0),u&&d>=12&&(u+=Math.round(d/24)),!u&&d>=21&&(u+=Math.round(d/24)),(u||c||r||i)&&(d=0);const v=t.getFullYear(),y=t.getMonth(),E=t.getDate();if(u>=27||i+r+u){const x=new Date(t);x.setDate(1),x.setMonth(y+r*e+1),x.setDate(0);const C=Math.max(0,E-x.getDate()),w=new Date(t);w.setFullYear(v+i*e),w.setDate(E-C),w.setMonth(y+r*e),w.setDate(E-C+u*e);const S=w.getFullYear()-t.getFullYear(),L=w.getMonth()-t.getMonth(),O=Math.abs(Math.round((Number(w)-Number(t))/864e5))+C,I=Math.abs(S*12+L);O<27?(u>=6?(c+=Math.round(u/7),u=0):u=O,r=i=0):I<=11?(r=I,i=0):(r=0,i=S*e),(r||i)&&(u=0)}return i&&(r=0),c>=4&&(r+=Math.round(c/4)),(r||i)&&(c=0),u&&c&&!r&&!i&&(c+=Math.round(u/7),u=0),new dt(i*e,r*e,c*e,u*e,d*e,p*e,m*e,g*e)}function ih(n,t){const e=ho(n,t);if(e.blank)return[0,"second"];for(const i of wn){if(i==="millisecond")continue;const r=e[`${i}s`];if(r)return[r,i]}return[0,"second"]}var X=function(n,t,e,i){if(e==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?n!==t||!i:!t.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?i:e==="a"?i.call(n):i?i.value:t.get(n)},Xe=function(n,t,e,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?n!==t||!r:!t.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,e):r?r.value=e:t.set(n,e),e},vt,Le,Ae,ke,Kt,Ei,fo,po,mo,go,oe;const rh=globalThis.HTMLElement||null,gi=new dt,Cs=new dt(0,0,0,0,0,1);class sh extends Event{constructor(t,e,i,r){super("relative-time-updated",{bubbles:!0,composed:!0}),this.oldText=t,this.newText=e,this.oldTitle=i,this.newTitle=r}}function ks(n){if(!n.date)return 1/0;if(n.format==="duration"||n.format==="elapsed"){const e=n.precision;if(e==="second")return 1e3;if(e==="minute")return 60*1e3}const t=Math.abs(Date.now()-n.date.getTime());return t<60*1e3?1e3:t<60*60*1e3?60*1e3:60*60*1e3}const vi=new class{constructor(){this.elements=new Set,this.time=1/0,this.timer=-1}observe(n){if(this.elements.has(n))return;this.elements.add(n);const t=n.date;if(t&&t.getTime()){const e=ks(n),i=Date.now()+e;i<this.time&&(clearTimeout(this.timer),this.timer=setTimeout(()=>this.update(),e),this.time=i)}}unobserve(n){this.elements.has(n)&&this.elements.delete(n)}update(){if(clearTimeout(this.timer),!this.elements.size)return;let n=1/0;for(const t of this.elements)n=Math.min(n,ks(t)),t.update();this.time=Math.min(60*60*1e3,n),this.timer=setTimeout(()=>this.update(),this.time),this.time+=Date.now()}};class oh extends rh{constructor(){super(...arguments),vt.add(this),Le.set(this,!1),Ae.set(this,!1),Kt.set(this,this.shadowRoot?this.shadowRoot:this.attachShadow?this.attachShadow({mode:"open"}):this),oe.set(this,null)}static define(t="relative-time",e=customElements){return e.define(t,this),this}static get observedAttributes(){return["second","minute","hour","weekday","day","month","year","time-zone-name","prefix","threshold","tense","precision","format","format-style","no-title","datetime","lang","title"]}get onRelativeTimeUpdated(){return X(this,oe,"f")}set onRelativeTimeUpdated(t){X(this,oe,"f")&&this.removeEventListener("relative-time-updated",X(this,oe,"f")),Xe(this,oe,typeof t=="object"||typeof t=="function"?t:null,"f"),typeof t=="function"&&this.addEventListener("relative-time-updated",t)}get second(){const t=this.getAttribute("second");if(t==="numeric"||t==="2-digit")return t}set second(t){this.setAttribute("second",t||"")}get minute(){const t=this.getAttribute("minute");if(t==="numeric"||t==="2-digit")return t}set minute(t){this.setAttribute("minute",t||"")}get hour(){const t=this.getAttribute("hour");if(t==="numeric"||t==="2-digit")return t}set hour(t){this.setAttribute("hour",t||"")}get weekday(){const t=this.getAttribute("weekday");if(t==="long"||t==="short"||t==="narrow")return t;if(this.format==="datetime"&&t!=="")return this.formatStyle}set weekday(t){this.setAttribute("weekday",t||"")}get day(){var t;const e=(t=this.getAttribute("day"))!==null&&t!==void 0?t:"numeric";if(e==="numeric"||e==="2-digit")return e}set day(t){this.setAttribute("day",t||"")}get month(){const t=this.format;let e=this.getAttribute("month");if(e!==""&&(e??(e=t==="datetime"?this.formatStyle:"short"),e==="numeric"||e==="2-digit"||e==="short"||e==="long"||e==="narrow"))return e}set month(t){this.setAttribute("month",t||"")}get year(){var t;const e=this.getAttribute("year");if(e==="numeric"||e==="2-digit")return e;if(!this.hasAttribute("year")&&new Date().getUTCFullYear()!==((t=this.date)===null||t===void 0?void 0:t.getUTCFullYear()))return"numeric"}set year(t){this.setAttribute("year",t||"")}get timeZoneName(){const t=this.getAttribute("time-zone-name");if(t==="long"||t==="short"||t==="shortOffset"||t==="longOffset"||t==="shortGeneric"||t==="longGeneric")return t}set timeZoneName(t){this.setAttribute("time-zone-name",t||"")}get prefix(){var t;return(t=this.getAttribute("prefix"))!==null&&t!==void 0?t:this.format==="datetime"?"":"on"}set prefix(t){this.setAttribute("prefix",t)}get threshold(){const t=this.getAttribute("threshold");return t&&eh(t)?t:"P30D"}set threshold(t){this.setAttribute("threshold",t)}get tense(){const t=this.getAttribute("tense");return t==="past"?"past":t==="future"?"future":"auto"}set tense(t){this.setAttribute("tense",t)}get precision(){const t=this.getAttribute("precision");return wn.includes(t)?t:this.format==="micro"?"minute":"second"}set precision(t){this.setAttribute("precision",t)}get format(){const t=this.getAttribute("format");return t==="datetime"?"datetime":t==="relative"?"relative":t==="duration"?"duration":t==="micro"?"micro":t==="elapsed"?"elapsed":"auto"}set format(t){this.setAttribute("format",t)}get formatStyle(){const t=this.getAttribute("format-style");if(t==="long")return"long";if(t==="short")return"short";if(t==="narrow")return"narrow";const e=this.format;return e==="elapsed"||e==="micro"?"narrow":e==="datetime"?"short":"long"}set formatStyle(t){this.setAttribute("format-style",t)}get noTitle(){return this.hasAttribute("no-title")}set noTitle(t){this.toggleAttribute("no-title",t)}get datetime(){return this.getAttribute("datetime")||""}set datetime(t){this.setAttribute("datetime",t)}get date(){const t=Date.parse(this.datetime);return Number.isNaN(t)?null:new Date(t)}set date(t){this.datetime=(t==null?void 0:t.toISOString())||""}connectedCallback(){this.update()}disconnectedCallback(){vi.unobserve(this)}attributeChangedCallback(t,e,i){e!==i&&(t==="title"&&Xe(this,Le,i!==null&&(this.date&&X(this,vt,"m",Ei).call(this,this.date))!==i,"f"),!X(this,Ae,"f")&&!(t==="title"&&X(this,Le,"f"))&&Xe(this,Ae,(async()=>{await Promise.resolve(),this.update(),Xe(this,Ae,!1,"f")})(),"f"))}update(){const t=X(this,Kt,"f").textContent||this.textContent||"",e=this.getAttribute("title")||"";let i=e;const r=this.date;if(typeof Intl>"u"||!Intl.DateTimeFormat||!r){X(this,Kt,"f").textContent=t;return}const c=Date.now();X(this,Le,"f")||(i=X(this,vt,"m",Ei).call(this,r)||"",i&&!this.noTitle&&this.setAttribute("title",i));const u=nh(r,this.precision,c),d=X(this,vt,"m",fo).call(this,u);let p=t;d==="duration"?p=X(this,vt,"m",po).call(this,u):d==="relative"?p=X(this,vt,"m",mo).call(this,u):p=X(this,vt,"m",go).call(this,r),p?X(this,Kt,"f").textContent=p:this.shadowRoot===X(this,Kt,"f")&&this.textContent&&(X(this,Kt,"f").textContent=this.textContent),(p!==t||i!==e)&&this.dispatchEvent(new sh(t,p,e,i)),d==="relative"||d==="duration"?vi.observe(this):vi.unobserve(this)}}Le=new WeakMap,Ae=new WeakMap,Kt=new WeakMap,oe=new WeakMap,vt=new WeakSet,ke=function(){var t;const e=((t=this.closest("[lang]"))===null||t===void 0?void 0:t.getAttribute("lang"))||this.ownerDocument.documentElement.getAttribute("lang");try{return new Intl.Locale(e??"").toString()}catch{return"default"}},Ei=function(t){return new Intl.DateTimeFormat(X(this,vt,"a",ke),{day:"numeric",month:"short",year:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"}).format(t)},fo=function(t){const e=this.format;if(e==="datetime")return"datetime";if(e==="duration"||e==="elapsed"||e==="micro")return"duration";if((e==="auto"||e==="relative")&&typeof Intl<"u"&&Intl.RelativeTimeFormat){const i=this.tense;if(i==="past"||i==="future"||dt.compare(t,this.threshold)===1)return"relative"}return"datetime"},po=function(t){const e=X(this,vt,"a",ke),i=this.format,r=this.formatStyle,c=this.tense;let u=gi;i==="micro"?(t=ho(t),u=Cs,(this.tense==="past"&&t.sign!==-1||this.tense==="future"&&t.sign!==1)&&(t=Cs)):(c==="past"&&t.sign!==-1||c==="future"&&t.sign!==1)&&(t=u);const d=`${this.precision}sDisplay`;return t.blank?u.toLocaleString(e,{style:r,[d]:"always"}):t.abs().toLocaleString(e,{style:r})},mo=function(t){const e=new Intl.RelativeTimeFormat(X(this,vt,"a",ke),{numeric:"auto",style:this.formatStyle}),i=this.tense;i==="future"&&t.sign!==1&&(t=gi),i==="past"&&t.sign!==-1&&(t=gi);const[r,c]=ih(t);return c==="second"&&r<10?e.format(0,this.precision==="millisecond"?"second":this.precision):e.format(r,c)},go=function(t){const e=new Intl.DateTimeFormat(X(this,vt,"a",ke),{second:this.second,minute:this.minute,hour:this.hour,weekday:this.weekday,day:this.day,month:this.month,year:this.year,timeZoneName:this.timeZoneName});return`${this.prefix} ${e.format(t)}`.trim()};const _s=typeof globalThis<"u"?globalThis:window;try{_s.RelativeTimeElement=oh.define()}catch(n){if(!(_s.DOMException&&n instanceof DOMException&&n.name==="NotSupportedError")&&!(n instanceof ReferenceError))throw n}class xs extends Error{constructor(t,e,i){const r=t.status||t.status===0?t.status:"",c=t.statusText||"",u=`${r} ${c}`.trim(),d=u?`status code ${u}`:"an unknown error";super(`Request failed with ${d}`),Object.defineProperty(this,"response",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="HTTPError",this.response=t,this.request=e,this.options=i}}class vo extends Error{constructor(t){super("Request timed out"),Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="TimeoutError",this.request=t}}const cn=n=>n!==null&&typeof n=="object",Ye=(...n)=>{for(const t of n)if((!cn(t)||Array.isArray(t))&&typeof t<"u")throw new TypeError("The `options` argument must be an object");return ar({},...n)},bo=(n={},t={})=>{const e=new globalThis.Headers(n),i=t instanceof globalThis.Headers,r=new globalThis.Headers(t);for(const[c,u]of r.entries())i&&u==="undefined"||u===void 0?e.delete(c):e.set(c,u);return e},ar=(...n)=>{let t={},e={};for(const i of n)if(Array.isArray(i))Array.isArray(t)||(t=[]),t=[...t,...i];else if(cn(i)){for(let[r,c]of Object.entries(i))cn(c)&&r in t&&(c=ar(t[r],c)),t={...t,[r]:c};cn(i.headers)&&(e=bo(e,i.headers),t.headers=e)}return t},ah=(()=>{let n=!1,t=!1;const e=typeof globalThis.ReadableStream=="function",i=typeof globalThis.Request=="function";return e&&i&&(t=new globalThis.Request("https://a.com",{body:new globalThis.ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type")),n&&!t})(),ch=typeof globalThis.AbortController=="function",lh=typeof globalThis.ReadableStream=="function",uh=typeof globalThis.FormData=="function",yo=["get","post","put","patch","head","delete"],hh={json:"application/json",text:"text/*",formData:"multipart/form-data",arrayBuffer:"*/*",blob:"*/*"},bi=2147483647,wo=Symbol("stop"),dh=n=>yo.includes(n)?n.toUpperCase():n,fh=["get","put","head","delete","options","trace"],ph=[408,413,429,500,502,503,504],So=[413,429,503],Ls={limit:2,methods:fh,statusCodes:ph,afterStatusCodes:So,maxRetryAfter:Number.POSITIVE_INFINITY,backoffLimit:Number.POSITIVE_INFINITY},mh=(n={})=>{if(typeof n=="number")return{...Ls,limit:n};if(n.methods&&!Array.isArray(n.methods))throw new Error("retry.methods must be an array");if(n.statusCodes&&!Array.isArray(n.statusCodes))throw new Error("retry.statusCodes must be an array");return{...Ls,...n,afterStatusCodes:So}};async function gh(n,t,e){return new Promise((i,r)=>{const c=setTimeout(()=>{t&&t.abort(),r(new vo(n))},e.timeout);e.fetch(n).then(i).catch(r).then(()=>{clearTimeout(c)})})}const vh=!!globalThis.DOMException;function As(n){if(vh)return new DOMException((n==null?void 0:n.reason)??"The operation was aborted.","AbortError");const t=new Error((n==null?void 0:n.reason)??"The operation was aborted.");return t.name="AbortError",t}async function bh(n,{signal:t}){return new Promise((e,i)=>{if(t){if(t.aborted){i(As(t));return}t.addEventListener("abort",r,{once:!0})}function r(){i(As(t)),clearTimeout(c)}const c=setTimeout(()=>{t==null||t.removeEventListener("abort",r),e()},n)})}class Sn{static create(t,e){const i=new Sn(t,e),r=async()=>{if(i._options.timeout>bi)throw new RangeError(`The \`timeout\` option cannot be greater than ${bi}`);await Promise.resolve();let d=await i._fetch();for(const p of i._options.hooks.afterResponse){const m=await p(i.request,i._options,i._decorateResponse(d.clone()));m instanceof globalThis.Response&&(d=m)}if(i._decorateResponse(d),!d.ok&&i._options.throwHttpErrors){let p=new xs(d,i.request,i._options);for(const m of i._options.hooks.beforeError)p=await m(p);throw p}if(i._options.onDownloadProgress){if(typeof i._options.onDownloadProgress!="function")throw new TypeError("The `onDownloadProgress` option must be a function");if(!lh)throw new Error("Streams are not supported in your environment. `ReadableStream` is missing.");return i._stream(d.clone(),i._options.onDownloadProgress)}return d},u=i._options.retry.methods.includes(i.request.method.toLowerCase())?i._retry(r):r();for(const[d,p]of Object.entries(hh))u[d]=async()=>{i.request.headers.set("accept",i.request.headers.get("accept")||p);const g=(await u).clone();if(d==="json"){if(g.status===204||(await g.clone().arrayBuffer()).byteLength===0)return"";if(e.parseJson)return e.parseJson(await g.text())}return g[d]()};return u}constructor(t,e={}){if(Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"abortController",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_retryCount",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_input",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._input=t,this._options={credentials:this._input.credentials||"same-origin",...e,headers:bo(this._input.headers,e.headers),hooks:ar({beforeRequest:[],beforeRetry:[],beforeError:[],afterResponse:[]},e.hooks),method:dh(e.method??this._input.method),prefixUrl:String(e.prefixUrl||""),retry:mh(e.retry),throwHttpErrors:e.throwHttpErrors!==!1,timeout:typeof e.timeout>"u"?1e4:e.timeout,fetch:e.fetch??globalThis.fetch.bind(globalThis)},typeof this._input!="string"&&!(this._input instanceof URL||this._input instanceof globalThis.Request))throw new TypeError("`input` must be a string, URL, or Request");if(this._options.prefixUrl&&typeof this._input=="string"){if(this._input.startsWith("/"))throw new Error("`input` must not begin with a slash when using `prefixUrl`");this._options.prefixUrl.endsWith("/")||(this._options.prefixUrl+="/"),this._input=this._options.prefixUrl+this._input}if(ch){if(this.abortController=new globalThis.AbortController,this._options.signal){const i=this._options.signal;this._options.signal.addEventListener("abort",()=>{this.abortController.abort(i.reason)})}this._options.signal=this.abortController.signal}if(ah&&(this._options.duplex="half"),this.request=new globalThis.Request(this._input,this._options),this._options.searchParams){const r="?"+(typeof this._options.searchParams=="string"?this._options.searchParams.replace(/^\?/,""):new URLSearchParams(this._options.searchParams).toString()),c=this.request.url.replace(/(?:\?.*?)?(?=#|$)/,r);(uh&&this._options.body instanceof globalThis.FormData||this._options.body instanceof URLSearchParams)&&!(this._options.headers&&this._options.headers["content-type"])&&this.request.headers.delete("content-type"),this.request=new globalThis.Request(new globalThis.Request(c,{...this.request}),this._options)}this._options.json!==void 0&&(this._options.body=JSON.stringify(this._options.json),this.request.headers.set("content-type",this._options.headers.get("content-type")??"application/json"),this.request=new globalThis.Request(this.request,{body:this._options.body}))}_calculateRetryDelay(t){if(this._retryCount++,this._retryCount<this._options.retry.limit&&!(t instanceof vo)){if(t instanceof xs){if(!this._options.retry.statusCodes.includes(t.response.status))return 0;const i=t.response.headers.get("Retry-After");if(i&&this._options.retry.afterStatusCodes.includes(t.response.status)){let r=Number(i);return Number.isNaN(r)?r=Date.parse(i)-Date.now():r*=1e3,typeof this._options.retry.maxRetryAfter<"u"&&r>this._options.retry.maxRetryAfter?0:r}if(t.response.status===413)return 0}return Math.min(this._options.retry.backoffLimit,.3*2**(this._retryCount-1)*1e3)}return 0}_decorateResponse(t){return this._options.parseJson&&(t.json=async()=>this._options.parseJson(await t.text())),t}async _retry(t){try{return await t()}catch(e){const i=Math.min(this._calculateRetryDelay(e),bi);if(i!==0&&this._retryCount>0){await bh(i,{signal:this._options.signal});for(const r of this._options.hooks.beforeRetry)if(await r({request:this.request,options:this._options,error:e,retryCount:this._retryCount})===wo)return;return this._retry(t)}throw e}}async _fetch(){for(const t of this._options.hooks.beforeRequest){const e=await t(this.request,this._options);if(e instanceof Request){this.request=e;break}if(e instanceof Response)return e}return this._options.timeout===!1?this._options.fetch(this.request.clone()):gh(this.request.clone(),this.abortController,this._options)}_stream(t,e){const i=Number(t.headers.get("content-length"))||0;let r=0;return t.status===204?(e&&e({percent:1,totalBytes:i,transferredBytes:r},new Uint8Array),new globalThis.Response(null,{status:t.status,statusText:t.statusText,headers:t.headers})):new globalThis.Response(new globalThis.ReadableStream({async start(c){const u=t.body.getReader();e&&e({percent:0,transferredBytes:0,totalBytes:i},new Uint8Array);async function d(){const{done:p,value:m}=await u.read();if(p){c.close();return}if(e){r+=m.byteLength;const g=i===0?0:r/i;e({percent:g,transferredBytes:r,totalBytes:i},m)}c.enqueue(m),await d()}await d()}}),{status:t.status,statusText:t.statusText,headers:t.headers})}}/*! MIT License Â© Sindre Sorhus */const Ti=n=>{const t=(e,i)=>Sn.create(e,Ye(n,i));for(const e of yo)t[e]=(i,r)=>Sn.create(i,Ye(n,r,{method:e}));return t.create=e=>Ti(Ye(e)),t.extend=e=>Ti(Ye(n,e)),t.stop=wo,t},yh=Ti(),wh=/\s|\(|\[/;function Sh(n,t,e,{multiWord:i,lookBackIndex:r,lastMatchPosition:c}={multiWord:!1,lookBackIndex:0,lastMatchPosition:null}){let u=n.lastIndexOf(t,e-1);if(u===-1||u<r)return;if(i){if(c!=null){if(c===u)return;u=c-t.length}if(n[u+1]===" "&&e>=u+t.length+1||n.lastIndexOf(`
`,e-1)>u||n.lastIndexOf(".",e-1)>u)return}else if(n.lastIndexOf(" ",e-1)>u)return;const d=n[u-1];return d&&!wh.test(d)?void 0:{text:n.substring(u+t.length,e),position:u+t.length}}class Eh extends HTMLElement{}class Th extends Event{constructor(){super("update")}}const yi=new WeakMap;var Fe,De,He,Ft,j,Ci,ae,he,de,ki,fe,ln,un,hn,qe,Xt;const Or=class Or extends Eh{constructor(){super(...arguments);st(this,j);st(this,Fe,new MutationObserver(()=>V(this,j,un).call(this)));st(this,De,new ResizeObserver(()=>V(this,j,ln).call(this)));st(this,He);st(this,Ft);st(this,he,0);st(this,de,0);st(this,fe,!1);st(this,qe,()=>V(this,j,hn).call(this));st(this,Xt,e=>{V(this,j,ae).call(this,i=>{(e.target===document||e.target===window||e.target instanceof Node&&e.target.contains(i))&&V(this,j,ln).call(this)})})}static for(e){let i=yi.get(e);return i||(i=new Or,i.connect(e),yi.set(e,i)),i}connect(e){gt(this,He,new WeakRef(e)),gt(this,Ft,document.createElement("div")),N(this,Ft).style.position="absolute",N(this,Ft).style.pointerEvents="none",e.after(N(this,Ft)),N(this,Ft).appendChild(this)}forceUpdate(){V(this,j,un).call(this),V(this,j,hn).call(this)}connectedCallback(){V(this,j,ae).call(this,e=>{this.style.pointerEvents="none",this.style.userSelect="none",this.style.overflow="hidden",this.style.display="block",this.style.visibility="hidden",e instanceof HTMLTextAreaElement?(this.style.whiteSpace="pre-wrap",this.style.wordWrap="break-word"):(this.style.whiteSpace="nowrap",this.style.display="table-cell",this.style.verticalAlign="middle"),this.setAttribute("aria-hidden","true"),V(this,j,un).call(this),V(this,j,hn).call(this),N(this,Fe).observe(e,{attributeFilter:["style","dir"]}),N(this,De).observe(e),document.addEventListener("scroll",N(this,Xt),{capture:!0}),window.addEventListener("resize",N(this,Xt),{capture:!0}),e.addEventListener("input",N(this,qe),{capture:!0})})}disconnectedCallback(){var i;(i=N(this,Ft))==null||i.remove(),N(this,Fe).disconnect(),N(this,De).disconnect(),document.removeEventListener("scroll",N(this,Xt),{capture:!0}),window.removeEventListener("resize",N(this,Xt),{capture:!0});const e=N(this,j,Ci);e&&(e.removeEventListener("input",N(this,qe),{capture:!0}),yi.delete(e))}};Fe=new WeakMap,De=new WeakMap,He=new WeakMap,Ft=new WeakMap,j=new WeakSet,Ci=function(){var e;return(e=N(this,He))==null?void 0:e.deref()},ae=function(e){const i=N(this,j,Ci);return i?e(i):this.remove()},he=new WeakMap,de=new WeakMap,ki=function(){V(this,j,ae).call(this,e=>{const i=window.getComputedStyle(e);this.style.height=i.height,this.style.width=i.width,e.clientHeight!==this.clientHeight&&(this.style.height=`calc(${i.height} + ${e.clientHeight-this.clientHeight}px)`),e.clientWidth!==this.clientWidth&&(this.style.width=`calc(${i.width} + ${e.clientWidth-this.clientWidth}px)`);const r=e.getBoundingClientRect(),c=this.getBoundingClientRect();gt(this,he,N(this,he)+r.left-c.left),gt(this,de,N(this,de)+r.top-c.top),this.style.transform=`translate(${N(this,he)}px, ${N(this,de)}px)`,this.scrollTop=e.scrollTop,this.scrollLeft=e.scrollLeft,this.dispatchEvent(new Th)})},fe=new WeakMap,ln=function(){N(this,fe)||(gt(this,fe,!0),requestAnimationFrame(()=>{V(this,j,ki).call(this),gt(this,fe,!1)}))},un=function(){V(this,j,ae).call(this,e=>{const i=window.getComputedStyle(e);for(const r of Ch)this.style[r]=i[r];V(this,j,ln).call(this)})},hn=function(){V(this,j,ae).call(this,e=>{this.textContent=e.value,V(this,j,ki).call(this)})},qe=new WeakMap,Xt=new WeakMap;let En=Or;const Ch=["direction","writingMode","unicodeBidi","textOrientation","boxSizing","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"];try{customElements.define("input-style-clone",En)}catch(n){if(!(n instanceof DOMException&&n.name==="NotSupportedError"))throw n}var kt,pe,me,ot,xi,Eo,Li,Re;const Nn=class Nn{constructor(t,e=0,i=e){st(this,ot);st(this,kt);st(this,pe);st(this,me);gt(this,kt,t),gt(this,pe,e),gt(this,me,i)}static fromSelection(t){const{selectionStart:e,selectionEnd:i}=t;return new Nn(t,e??void 0,i??void 0)}get collapsed(){return this.startOffset===this.endOffset}get commonAncestorContainer(){return N(this,kt)}get endContainer(){return N(this,kt)}get startContainer(){return N(this,kt)}get startOffset(){return N(this,pe)}get endOffset(){return N(this,me)}setStartOffset(t){gt(this,pe,V(this,ot,Li).call(this,t))}setEndOffset(t){gt(this,me,V(this,ot,Li).call(this,t))}collapse(t=!1){t?this.setEndOffset(this.startOffset):this.setStartOffset(this.endOffset)}cloneContents(){return V(this,ot,Re).call(this).cloneContents()}cloneRange(){return new Nn(N(this,kt),this.startOffset,this.endOffset)}getBoundingClientRect(){return V(this,ot,Re).call(this).getBoundingClientRect()}getClientRects(){return V(this,ot,Re).call(this).getClientRects()}toString(){return V(this,ot,Re).call(this).toString()}getStyleClone(){return N(this,ot,xi)}};kt=new WeakMap,pe=new WeakMap,me=new WeakMap,ot=new WeakSet,xi=function(){return En.for(N(this,kt))},Eo=function(){return N(this,ot,xi)},Li=function(t){return Math.max(0,Math.min(t,N(this,kt).value.length))},Re=function(){const t=document.createRange(),e=N(this,ot,Eo).childNodes[0];return e&&(t.setStart(e,this.startOffset),t.setEnd(e,this.endOffset)),t};let _i=Nn;const Je=new WeakMap;class kh{constructor(t,e){this.expander=t,this.input=e,this.combobox=null,this.menu=null,this.match=null,this.justPasted=!1,this.lookBackIndex=0,this.oninput=this.onInput.bind(this),this.onpaste=this.onPaste.bind(this),this.onkeydown=this.onKeydown.bind(this),this.oncommit=this.onCommit.bind(this),this.onmousedown=this.onMousedown.bind(this),this.onblur=this.onBlur.bind(this),this.interactingWithList=!1,e.addEventListener("paste",this.onpaste),e.addEventListener("input",this.oninput),e.addEventListener("keydown",this.onkeydown),e.addEventListener("blur",this.onblur)}destroy(){this.input.removeEventListener("paste",this.onpaste),this.input.removeEventListener("input",this.oninput),this.input.removeEventListener("keydown",this.onkeydown),this.input.removeEventListener("blur",this.onblur)}dismissMenu(){this.deactivate()&&(this.lookBackIndex=this.input.selectionEnd||this.lookBackIndex)}activate(t,e){var i,r;this.input!==document.activeElement&&this.input!==((r=(i=document.activeElement)===null||i===void 0?void 0:i.shadowRoot)===null||r===void 0?void 0:r.activeElement)||(this.deactivate(),this.menu=e,e.id||(e.id=`text-expander-${Math.floor(Math.random()*1e5).toString()}`),this.expander.append(e),this.combobox=new $u(this.input,e),this.expander.dispatchEvent(new Event("text-expander-activate")),this.positionMenu(e,t.position),this.combobox.start(),e.addEventListener("combobox-commit",this.oncommit),e.addEventListener("mousedown",this.onmousedown),this.combobox.navigate(1))}positionMenu(t,e){const i=new _i(this.input,e).getBoundingClientRect(),r={left:i.left,top:i.top+i.height},c=t.getBoundingClientRect(),u={left:r.left-c.left,top:r.top-c.top};if(u.left!==0||u.top!==0){const d=getComputedStyle(t);t.style.left=d.left?`calc(${d.left} + ${u.left}px)`:`${u.left}px`,t.style.top=d.top?`calc(${d.top} + ${u.top}px)`:`${u.top}px`}}deactivate(){const t=this.menu;return!t||!this.combobox?!1:(this.expander.dispatchEvent(new Event("text-expander-deactivate")),this.menu=null,t.removeEventListener("combobox-commit",this.oncommit),t.removeEventListener("mousedown",this.onmousedown),this.combobox.destroy(),this.combobox=null,t.remove(),!0)}onCommit({target:t}){var e;const i=t;if(!(i instanceof HTMLElement)||!this.combobox)return;const r=this.match;if(!r)return;const c=this.input.value.substring(0,r.position-r.key.length),u=this.input.value.substring(r.position+r.text.length),d={item:i,key:r.key,value:null,continue:!1};if(!this.expander.dispatchEvent(new CustomEvent("text-expander-value",{cancelable:!0,detail:d}))||!d.value)return;let m=(e=this.expander.getAttribute("suffix"))!==null&&e!==void 0?e:" ";d.continue&&(m="");const g=`${d.value}${m}`;this.input.value=c+g+u;const v=c.length+g.length;this.deactivate(),this.input.focus({preventScroll:!0}),this.input.selectionStart=v,this.input.selectionEnd=v,d.continue||(this.lookBackIndex=v,this.match=null),this.expander.dispatchEvent(new CustomEvent("text-expander-committed",{cancelable:!1,detail:{input:this.input}}))}onBlur(){if(this.interactingWithList){this.interactingWithList=!1;return}this.deactivate()}onPaste(){this.justPasted=!0}async onInput(){if(this.justPasted){this.justPasted=!1;return}const t=this.findMatch();if(t){this.match=t;const e=await this.notifyProviders(t);if(!this.match)return;e?this.activate(t,e):this.deactivate()}else this.match=null,this.deactivate()}findMatch(){const t=this.input.selectionEnd||0,e=this.input.value;t<=this.lookBackIndex&&(this.lookBackIndex=t-1);for(const{key:i,multiWord:r}of this.expander.keys){const c=Sh(e,i,t,{multiWord:r,lookBackIndex:this.lookBackIndex,lastMatchPosition:this.match?this.match.position:null});if(c)return{text:c.text,key:i,position:c.position}}}async notifyProviders(t){const e=[],i=p=>e.push(p),r=new CustomEvent("text-expander-change",{cancelable:!0,detail:{provide:i,text:t.text,key:t.key}});return this.expander.dispatchEvent(r)?(await Promise.all(e)).filter(p=>p.matched).map(p=>p.fragment)[0]:void 0}onMousedown(){this.interactingWithList=!0}onKeydown(t){t.key==="Escape"&&(this.match=null,this.deactivate()&&(this.lookBackIndex=this.input.selectionEnd||this.lookBackIndex,t.stopImmediatePropagation(),t.preventDefault()))}}class Rs extends HTMLElement{get keys(){const t=this.getAttribute("keys"),e=t?t.split(" "):[],i=this.getAttribute("multiword"),r=i?i.split(" "):[],c=r.length===0&&this.hasAttribute("multiword");return e.map(u=>({key:u,multiWord:c||r.includes(u)}))}set keys(t){this.setAttribute("keys",t)}connectedCallback(){const t=this.querySelector('input[type="text"], textarea');if(!(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement))return;const e=new kh(this,t);Je.set(this,e)}disconnectedCallback(){const t=Je.get(this);t&&(t.destroy(),Je.delete(this))}dismiss(){const t=Je.get(this);t&&t.dismissMenu()}}window.customElements.get("text-expander")||(window.TextExpanderElement=Rs,window.customElements.define("text-expander",Rs));var _h=Object.defineProperty,xh=(n,t,e)=>t in n?_h(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,Lh=(n,t,e)=>(xh(n,t+"",e),e);let Ah=class extends HTMLElement{constructor(){super(...arguments),Lh(this,"onToggle",t=>{const e=t.target;e.open&&this.querySelectorAll(":scope > :is(ui-disclosure, details)").forEach(i=>{i.toggleAttribute("open",i===e),this.required&&i.toggleAttribute("disabled",i===e)})})}connectedCallback(){this.addEventListener("toggle",this.onToggle,{capture:!0})}disconnectedCallback(){this.removeEventListener("toggle",this.onToggle,{capture:!0})}get required(){return this.hasAttribute("required")}};function Ps(n,t,e={}){const i=new WeakMap,r=_o(e);n instanceof HTMLCollection&&(n=Array.from(n)),n.forEach(c=>{getComputedStyle(c).display!=="none"&&i.set(c,c.getBoundingClientRect())}),t(),n.forEach(c=>{const u=i.get(c);if(!u)return;const d=u.left-c.getBoundingClientRect().left,p=u.top-c.getBoundingClientRect().top;if(!d&&!p)return;const m=c.style;m.transitionDuration="0s",m.transform=`translate(${d}px, ${p}px)`,requestAnimationFrame(async()=>{c.classList.add(r+"move"),m.transitionDuration=m.transform="",await ko(c),c.classList.remove(r+"move")})})}function Tn(n){n._currentTransition&&(n.classList.remove(...["active","from","to"].map(t=>n._currentTransition+t)),n._currentTransition=null)}async function To(n,t,e={}){const i=_o(e)+t+"-",r=n.classList;Tn(n),n._currentTransition=i,r.add(i+"active",i+"from"),await Co(),r.add(i+"to"),r.remove(i+"from"),await ko(n),r.remove(i+"to",i+"active"),n._currentTransition===i&&(n._currentTransition=null)}function Jt(n,t={}){return To(n,"enter",t)}function ge(n,t={}){return To(n,"leave",t)}function Co(){return new Promise(n=>requestAnimationFrame(()=>requestAnimationFrame(()=>n())))}async function ko(n){if(getComputedStyle(n).transitionDuration.startsWith("0s"))return;let t=!1;const e=i=>t||(t=i.target===n);if(n.addEventListener("transitionstart",e),await Co(),n.removeEventListener("transitionstart",e),!!t)return new Promise(i=>{const r=c=>{c.target===n&&(i(),n.removeEventListener("transitionend",r),n.removeEventListener("transitioncancel",r))};n.addEventListener("transitionend",r),n.addEventListener("transitioncancel",r)})}function _o(n){return n!=null&&n.prefix?n.prefix+"-":""}var Rh=Object.defineProperty,Ph=(n,t,e)=>t in n?Rh(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,dn=(n,t,e)=>(Ph(n,typeof t!="symbol"?t+"":t,e),e);const xo=class extends HTMLElement{constructor(){super(),dn(this,"added",new Set),dn(this,"timeouts",new Map),dn(this,"index",0),new MutationObserver(n=>{n.forEach(t=>{t.addedNodes.forEach(e=>{e instanceof HTMLElement&&!this.added.has(e)&&this.show(e)})})}).observe(this,{childList:!0})}connectedCallback(){this.hasAttribute("role")||this.setAttribute("role","status"),this.hasAttribute("aria-live")||this.setAttribute("aria-live","polite"),this.hasAttribute("aria-relevant")||this.setAttribute("aria-relevant","additions");for(const n of this.children)this.show(n,{animate:!1})}show(n,t={}){const e=t.key||n.dataset.key||String(this.index++);this.dismiss(e),n.dataset.key=e,this.contains(n)?Jt(n):t.animate===!1?this.append(n):Ps(this.children,()=>{this.append(n),Jt(n)}),this.added.add(n);const i=Number(t.duration!==void 0?t.duration:n.dataset.duration||xo.duration);return i>0&&(this.startTimeout(n,i),n.addEventListener("mouseenter",this.clearTimeout.bind(this,n)),n.addEventListener("focusin",this.clearTimeout.bind(this,n)),n.addEventListener("mouseleave",this.startTimeout.bind(this,n,i)),n.addEventListener("focusout",this.startTimeout.bind(this,n,i))),e}dismiss(n){if(typeof n=="string"){this.querySelectorAll(`[data-key="${n}"]`).forEach(t=>this.dismiss(t));return}this.added.delete(n),Ps(this.children,()=>ge(n).then(()=>n.remove())),this.clearTimeout(n)}clear(){Array.from(this.children).forEach(n=>{this.dismiss(n)})}speak(n){const t=document.createElement("div");Object.assign(t.style,{clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",width:"1px"}),t.textContent=n,this.show(t)}startTimeout(n,t){this.clearTimeout(n),this.timeouts.set(n,window.setTimeout(()=>{this.dismiss(n)},t))}clearTimeout(n){this.timeouts.has(n)&&clearTimeout(this.timeouts.get(n))}};let Lo=xo;dn(Lo,"duration",1e4);function Ao(n){return n.altKey||n.ctrlKey||n.metaKey||n.shiftKey||n.button!==void 0&&n.button!==0}var Oh=Object.defineProperty,Mh=(n,t,e)=>t in n?Oh(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,Ih=(n,t,e)=>(Mh(n,t+"",e),e);class Fh extends HTMLElement{constructor(){super(...arguments),Ih(this,"onButtonClick",t=>{!Ao(t)&&!this.disabled&&(this.open=!this.open,t.preventDefault())})}static get observedAttributes(){return["open"]}connectedCallback(){this.content.hidden=!this.open,this.button.setAttribute("aria-expanded",String(this.open)),this.button.addEventListener("click",this.onButtonClick)}disconnectedCallback(){Tn(this.content),this.button.removeAttribute("aria-expanded"),this.button.removeEventListener("click",this.onButtonClick)}get open(){return this.hasAttribute("open")}set open(t){t?this.setAttribute("open",""):this.removeAttribute("open")}get disabled(){return this.hasAttribute("disabled")}attributeChangedCallback(t,e,i){t==="open"&&(i!==null?this.wasOpened():this.wasClosed())}wasOpened(){this.content.hidden&&(this.content.hidden=!1,Jt(this.content)),this.button.setAttribute("aria-expanded","true"),this.dispatchEvent(new Event("toggle"))}wasClosed(){this.content.hidden||ge(this.content).then(()=>this.content.hidden=!0),this.button.setAttribute("aria-expanded","false"),this.dispatchEvent(new Event("toggle"))}get button(){return this.querySelector("button, [role=button]")}get content(){return this.children[1]}}/*!
* tabbable 5.3.3
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var Ro=["input","select","textarea","a[href]","button","[tabindex]:not(slot)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],Cn=Ro.join(","),Po=typeof Element>"u",Gt=Po?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Ai=!Po&&Element.prototype.getRootNode?function(n){return n.getRootNode()}:function(n){return n.ownerDocument},Oo=function(t,e,i){var r=Array.prototype.slice.apply(t.querySelectorAll(Cn));return e&&Gt.call(t,Cn)&&r.unshift(t),r=r.filter(i),r},Mo=function n(t,e,i){for(var r=[],c=Array.from(t);c.length;){var u=c.shift();if(u.tagName==="SLOT"){var d=u.assignedElements(),p=d.length?d:u.children,m=n(p,!0,i);i.flatten?r.push.apply(r,m):r.push({scope:u,candidates:m})}else{var g=Gt.call(u,Cn);g&&i.filter(u)&&(e||!t.includes(u))&&r.push(u);var v=u.shadowRoot||typeof i.getShadowRoot=="function"&&i.getShadowRoot(u),y=!i.shadowRootFilter||i.shadowRootFilter(u);if(v&&y){var E=n(v===!0?u.children:v.children,!0,i);i.flatten?r.push.apply(r,E):r.push({scope:u,candidates:E})}else c.unshift.apply(c,u.children)}}return r},Io=function(t,e){return t.tabIndex<0&&(e||/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||t.isContentEditable)&&isNaN(parseInt(t.getAttribute("tabindex"),10))?0:t.tabIndex},Dh=function(t,e){return t.tabIndex===e.tabIndex?t.documentOrder-e.documentOrder:t.tabIndex-e.tabIndex},Fo=function(t){return t.tagName==="INPUT"},Hh=function(t){return Fo(t)&&t.type==="hidden"},qh=function(t){var e=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(i){return i.tagName==="SUMMARY"});return e},Nh=function(t,e){for(var i=0;i<t.length;i++)if(t[i].checked&&t[i].form===e)return t[i]},Bh=function(t){if(!t.name)return!0;var e=t.form||Ai(t),i=function(d){return e.querySelectorAll('input[type="radio"][name="'+d+'"]')},r;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")r=i(window.CSS.escape(t.name));else try{r=i(t.name)}catch(u){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",u.message),!1}var c=Nh(r,t.form);return!c||c===t},jh=function(t){return Fo(t)&&t.type==="radio"},Uh=function(t){return jh(t)&&!Bh(t)},Os=function(t){var e=t.getBoundingClientRect(),i=e.width,r=e.height;return i===0&&r===0},Wh=function(t,e){var i=e.displayCheck,r=e.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var c=Gt.call(t,"details>summary:first-of-type"),u=c?t.parentElement:t;if(Gt.call(u,"details:not([open]) *"))return!0;var d=Ai(t).host,p=(d==null?void 0:d.ownerDocument.contains(d))||t.ownerDocument.contains(t);if(!i||i==="full"){if(typeof r=="function"){for(var m=t;t;){var g=t.parentElement,v=Ai(t);if(g&&!g.shadowRoot&&r(g)===!0)return Os(t);t.assignedSlot?t=t.assignedSlot:!g&&v!==t.ownerDocument?t=v.host:t=g}t=m}if(p)return!t.getClientRects().length}else if(i==="non-zero-area")return Os(t);return!1},$h=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var e=t.parentElement;e;){if(e.tagName==="FIELDSET"&&e.disabled){for(var i=0;i<e.children.length;i++){var r=e.children.item(i);if(r.tagName==="LEGEND")return Gt.call(e,"fieldset[disabled] *")?!0:!r.contains(t)}return!0}e=e.parentElement}return!1},kn=function(t,e){return!(e.disabled||Hh(e)||Wh(e,t)||qh(e)||$h(e))},Ri=function(t,e){return!(Uh(e)||Io(e)<0||!kn(t,e))},Vh=function(t){var e=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(e)||e>=0)},zh=function n(t){var e=[],i=[];return t.forEach(function(r,c){var u=!!r.scope,d=u?r.scope:r,p=Io(d,u),m=u?n(r.candidates):d;p===0?u?e.push.apply(e,m):e.push(d):i.push({documentOrder:c,tabIndex:p,item:r,isScope:u,content:m})}),i.sort(Dh).reduce(function(r,c){return c.isScope?r.push.apply(r,c.content):r.push(c.content),r},[]).concat(e)},Kh=function(t,e){e=e||{};var i;return e.getShadowRoot?i=Mo([t],e.includeContainer,{filter:Ri.bind(null,e),flatten:!1,getShadowRoot:e.getShadowRoot,shadowRootFilter:Vh}):i=Oo(t,e.includeContainer,Ri.bind(null,e)),zh(i)},cr=function(t,e){e=e||{};var i;return e.getShadowRoot?i=Mo([t],e.includeContainer,{filter:kn.bind(null,e),flatten:!0,getShadowRoot:e.getShadowRoot}):i=Oo(t,e.includeContainer,kn.bind(null,e)),i},Ge=function(t,e){if(e=e||{},!t)throw new Error("No node provided");return Gt.call(t,Cn)===!1?!1:Ri(e,t)},Xh=Ro.concat("iframe").join(","),fn=function(t,e){if(e=e||{},!t)throw new Error("No node provided");return Gt.call(t,Xh)===!1?!1:kn(e,t)},Yh=Object.defineProperty,Jh=(n,t,e)=>t in n?Yh(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,pn=(n,t,e)=>(Jh(n,typeof t!="symbol"?t+"":t,e),e);const Do=class extends HTMLElement{constructor(){super(...arguments),pn(this,"search",""),pn(this,"searchTimeout"),pn(this,"onKeyDown",t=>{if(!this.hidden){if(t.key==="ArrowUp"){this.navigate(-1),t.preventDefault();return}if(t.key==="ArrowDown"){this.navigate(1),t.preventDefault();return}t.key.length>1||t.ctrlKey||t.metaKey||t.altKey||(this.search+=t.key.toLowerCase(),t.preventDefault(),clearTimeout(this.searchTimeout),this.searchTimeout=window.setTimeout(()=>{this.search=""},Do.searchDelay),this.items.some(e=>{var i;return((i=e.textContent)==null?void 0:i.trim().toLowerCase().indexOf(this.search))===0?(e.focus(),!0):!1}))}})}connectedCallback(){this.hasAttribute("role")||this.setAttribute("role","menu"),this.hasAttribute("tabindex")||this.setAttribute("tabindex","-1"),this.items.forEach(t=>{t.hasAttribute("tabindex")||t.setAttribute("tabindex","-1")}),this.addEventListener("keydown",this.onKeyDown)}disconnectedCallback(){this.removeEventListener("keydown",this.onKeyDown)}get items(){return Array.from(this.querySelectorAll("[role^=menuitem]")).filter(t=>fn(t))}navigate(t){var e;const i=this.items;let r=(document.activeElement instanceof HTMLElement?i.indexOf(document.activeElement):-1)+t;r<0&&(r=i.length-1),r>=i.length&&(r=0),(e=i[r])==null||e.focus()}};let Ho=Do;pn(Ho,"searchDelay",800);/*!
* focus-trap 6.9.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function Ms(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function Is(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Ms(Object(e),!0).forEach(function(i){Gh(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Ms(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function Gh(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}var Fs=function(){var n=[];return{activateTrap:function(e){if(n.length>0){var i=n[n.length-1];i!==e&&i.pause()}var r=n.indexOf(e);r===-1||n.splice(r,1),n.push(e)},deactivateTrap:function(e){var i=n.indexOf(e);i!==-1&&n.splice(i,1),n.length>0&&n[n.length-1].unpause()}}}(),Qh=function(t){return t.tagName&&t.tagName.toLowerCase()==="input"&&typeof t.select=="function"},Zh=function(t){return t.key==="Escape"||t.key==="Esc"||t.keyCode===27},td=function(t){return t.key==="Tab"||t.keyCode===9},Ds=function(t){return setTimeout(t,0)},Hs=function(t,e){var i=-1;return t.every(function(r,c){return e(r)?(i=c,!1):!0}),i},_e=function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];return typeof t=="function"?t.apply(void 0,i):t},Qe=function(t){return t.target.shadowRoot&&typeof t.composedPath=="function"?t.composedPath()[0]:t.target},ed=function(t,e){var i=(e==null?void 0:e.document)||document,r=Is({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},e),c={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},u,d=function(T,k,R){return T&&T[k]!==void 0?T[k]:r[R||k]},p=function(T){return c.containerGroups.findIndex(function(k){var R=k.container,F=k.tabbableNodes;return R.contains(T)||F.find(function(D){return D===T})})},m=function(T){var k=r[T];if(typeof k=="function"){for(var R=arguments.length,F=new Array(R>1?R-1:0),D=1;D<R;D++)F[D-1]=arguments[D];k=k.apply(void 0,F)}if(k===!0&&(k=void 0),!k){if(k===void 0||k===!1)return k;throw new Error("`".concat(T,"` was specified but was not a node, or did not return a node"))}var B=k;if(typeof k=="string"&&(B=i.querySelector(k),!B))throw new Error("`".concat(T,"` as selector refers to no known node"));return B},g=function(){var T=m("initialFocus");if(T===!1)return!1;if(T===void 0)if(p(i.activeElement)>=0)T=i.activeElement;else{var k=c.tabbableGroups[0],R=k&&k.firstTabbableNode;T=R||m("fallbackFocus")}if(!T)throw new Error("Your focus-trap needs to have at least one focusable element");return T},v=function(){if(c.containerGroups=c.containers.map(function(T){var k=Kh(T,r.tabbableOptions),R=cr(T,r.tabbableOptions);return{container:T,tabbableNodes:k,focusableNodes:R,firstTabbableNode:k.length>0?k[0]:null,lastTabbableNode:k.length>0?k[k.length-1]:null,nextTabbableNode:function(D){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,Y=R.findIndex(function(G){return G===D});if(!(Y<0))return B?R.slice(Y+1).find(function(G){return Ge(G,r.tabbableOptions)}):R.slice(0,Y).reverse().find(function(G){return Ge(G,r.tabbableOptions)})}}}),c.tabbableGroups=c.containerGroups.filter(function(T){return T.tabbableNodes.length>0}),c.tabbableGroups.length<=0&&!m("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},y=function P(T){if(T!==!1&&T!==i.activeElement){if(!T||!T.focus){P(g());return}T.focus({preventScroll:!!r.preventScroll}),c.mostRecentlyFocusedNode=T,Qh(T)&&T.select()}},E=function(T){var k=m("setReturnFocus",T);return k||(k===!1?!1:T)},x=function(T){var k=Qe(T);if(!(p(k)>=0)){if(_e(r.clickOutsideDeactivates,T)){u.deactivate({returnFocus:r.returnFocusOnDeactivate&&!fn(k,r.tabbableOptions)});return}_e(r.allowOutsideClick,T)||T.preventDefault()}},C=function(T){var k=Qe(T),R=p(k)>=0;R||k instanceof Document?R&&(c.mostRecentlyFocusedNode=k):(T.stopImmediatePropagation(),y(c.mostRecentlyFocusedNode||g()))},w=function(T){var k=Qe(T);v();var R=null;if(c.tabbableGroups.length>0){var F=p(k),D=F>=0?c.containerGroups[F]:void 0;if(F<0)T.shiftKey?R=c.tabbableGroups[c.tabbableGroups.length-1].lastTabbableNode:R=c.tabbableGroups[0].firstTabbableNode;else if(T.shiftKey){var B=Hs(c.tabbableGroups,function(K){var tt=K.firstTabbableNode;return k===tt});if(B<0&&(D.container===k||fn(k,r.tabbableOptions)&&!Ge(k,r.tabbableOptions)&&!D.nextTabbableNode(k,!1))&&(B=F),B>=0){var Y=B===0?c.tabbableGroups.length-1:B-1,G=c.tabbableGroups[Y];R=G.lastTabbableNode}}else{var z=Hs(c.tabbableGroups,function(K){var tt=K.lastTabbableNode;return k===tt});if(z<0&&(D.container===k||fn(k,r.tabbableOptions)&&!Ge(k,r.tabbableOptions)&&!D.nextTabbableNode(k))&&(z=F),z>=0){var yt=z===c.tabbableGroups.length-1?0:z+1,mt=c.tabbableGroups[yt];R=mt.firstTabbableNode}}}else R=m("fallbackFocus");R&&(T.preventDefault(),y(R))},S=function(T){if(Zh(T)&&_e(r.escapeDeactivates,T)!==!1){T.preventDefault(),u.deactivate();return}if(td(T)){w(T);return}},L=function(T){var k=Qe(T);p(k)>=0||_e(r.clickOutsideDeactivates,T)||_e(r.allowOutsideClick,T)||(T.preventDefault(),T.stopImmediatePropagation())},O=function(){if(c.active)return Fs.activateTrap(u),c.delayInitialFocusTimer=r.delayInitialFocus?Ds(function(){y(g())}):y(g()),i.addEventListener("focusin",C,!0),i.addEventListener("mousedown",x,{capture:!0,passive:!1}),i.addEventListener("touchstart",x,{capture:!0,passive:!1}),i.addEventListener("click",L,{capture:!0,passive:!1}),i.addEventListener("keydown",S,{capture:!0,passive:!1}),u},I=function(){if(c.active)return i.removeEventListener("focusin",C,!0),i.removeEventListener("mousedown",x,!0),i.removeEventListener("touchstart",x,!0),i.removeEventListener("click",L,!0),i.removeEventListener("keydown",S,!0),u};return u={get active(){return c.active},get paused(){return c.paused},activate:function(T){if(c.active)return this;var k=d(T,"onActivate"),R=d(T,"onPostActivate"),F=d(T,"checkCanFocusTrap");F||v(),c.active=!0,c.paused=!1,c.nodeFocusedBeforeActivation=i.activeElement,k&&k();var D=function(){F&&v(),O(),R&&R()};return F?(F(c.containers.concat()).then(D,D),this):(D(),this)},deactivate:function(T){if(!c.active)return this;var k=Is({onDeactivate:r.onDeactivate,onPostDeactivate:r.onPostDeactivate,checkCanReturnFocus:r.checkCanReturnFocus},T);clearTimeout(c.delayInitialFocusTimer),c.delayInitialFocusTimer=void 0,I(),c.active=!1,c.paused=!1,Fs.deactivateTrap(u);var R=d(k,"onDeactivate"),F=d(k,"onPostDeactivate"),D=d(k,"checkCanReturnFocus"),B=d(k,"returnFocus","returnFocusOnDeactivate");R&&R();var Y=function(){Ds(function(){B&&y(E(c.nodeFocusedBeforeActivation)),F&&F()})};return B&&D?(D(E(c.nodeFocusedBeforeActivation)).then(Y,Y),this):(Y(),this)},pause:function(){return c.paused||!c.active?this:(c.paused=!0,I(),this)},unpause:function(){return!c.paused||!c.active?this:(c.paused=!1,v(),O(),this)},updateContainerElements:function(T){var k=[].concat(T).filter(Boolean);return c.containers=k.map(function(R){return typeof R=="string"?i.querySelector(R):R}),c.active&&v(),this}},u.updateContainerElements(t),u},nd=Object.defineProperty,id=(n,t,e)=>t in n?nd(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,Pi=(n,t,e)=>(id(n,typeof t!="symbol"?t+"":t,e),e);const Oi=class extends HTMLElement{constructor(){super(),Pi(this,"focusTrap"),Pi(this,"connected",!1);const t=document.createElement("template");t.innerHTML=`
            <div part="backdrop" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0"></div>
            <div part="content" style="z-index: 1"><slot></slot></div>
        `;const e=this.attachShadow({mode:"open"});e.appendChild(t.content.cloneNode(!0)),this.backdrop.addEventListener("click",()=>{var i;this.hasAttribute("static")?(i=Oi.attention)==null||i.call(Oi,e.children[1]):this.close()}),this.focusTrap=ed(this,{escapeDeactivates:!1,allowOutsideClick:!0,preventScroll:!0})}static get observedAttributes(){return["open"]}connectedCallback(){var t,e,i,r,c,u;this.connected=!0,(t=this.content)!=null&&t.hasAttribute("role")||(e=this.content)==null||e.setAttribute("role","dialog"),(i=this.content)!=null&&i.hasAttribute("aria-modal")||(r=this.content)==null||r.setAttribute("aria-modal","true"),(c=this.content)!=null&&c.hasAttribute("tabindex")||(u=this.content)==null||u.setAttribute("tabindex","-1"),this.addEventListener("keydown",d=>{d.key==="Escape"&&this.open&&(d.preventDefault(),d.stopPropagation(),this.close())}),this.open&&this.wasOpened()}disconnectedCallback(){this.connected=!1}get open(){return this.hasAttribute("open")}set open(t){t?this.setAttribute("open",""):this.removeAttribute("open")}close(){if(!this.open)return;const t=new Event("beforeclose",{cancelable:!0});this.dispatchEvent(t)&&(this.open=!1)}attributeChangedCallback(t,e,i){t!=="open"||!this.connected||(i!==null?this.wasOpened():this.wasClosed())}wasOpened(){var t,e;this.hidden=!1,Jt(this),(t=this.focusTrap)==null||t.activate(),(e=this.querySelector("[autofocus]"))==null||e.focus(),this.dispatchEvent(new Event("open"))}wasClosed(){var t;(t=this.focusTrap)==null||t.deactivate(),ge(this).then(()=>this.hidden=!0),this.dispatchEvent(new Event("close"))}get backdrop(){var t;return(t=this.shadowRoot)==null?void 0:t.firstElementChild}get content(){return this.firstElementChild}};let qo=Oi;Pi(qo,"attention",n=>n.animate([{transform:"scale(1)"},{transform:"scale(1.1)"},{transform:"scale(1)"}],300));const ve=Math.min,ft=Math.max,_n=Math.round,Ze=Math.floor,_t=n=>({x:n,y:n}),rd={left:"right",right:"left",bottom:"top",top:"bottom"},sd={start:"end",end:"start"};function qs(n,t,e){return ft(n,ve(t,e))}function Ne(n,t){return typeof n=="function"?n(t):n}function jt(n){return n.split("-")[0]}function Be(n){return n.split("-")[1]}function No(n){return n==="x"?"y":"x"}function Bo(n){return n==="y"?"height":"width"}function Qt(n){return["top","bottom"].includes(jt(n))?"y":"x"}function jo(n){return No(Qt(n))}function od(n,t,e){e===void 0&&(e=!1);const i=Be(n),r=jo(n),c=Bo(r);let u=r==="x"?i===(e?"end":"start")?"right":"left":i==="start"?"bottom":"top";return t.reference[c]>t.floating[c]&&(u=xn(u)),[u,xn(u)]}function ad(n){const t=xn(n);return[Mi(n),t,Mi(t)]}function Mi(n){return n.replace(/start|end/g,t=>sd[t])}function cd(n,t,e){const i=["left","right"],r=["right","left"],c=["top","bottom"],u=["bottom","top"];switch(n){case"top":case"bottom":return e?t?r:i:t?i:r;case"left":case"right":return t?c:u;default:return[]}}function ld(n,t,e,i){const r=Be(n);let c=cd(jt(n),e==="start",i);return r&&(c=c.map(u=>u+"-"+r),t&&(c=c.concat(c.map(Mi)))),c}function xn(n){return n.replace(/left|right|bottom|top/g,t=>rd[t])}function ud(n){return{top:0,right:0,bottom:0,left:0,...n}}function hd(n){return typeof n!="number"?ud(n):{top:n,right:n,bottom:n,left:n}}function Ln(n){const{x:t,y:e,width:i,height:r}=n;return{width:i,height:r,top:e,left:t,right:t+i,bottom:e+r,x:t,y:e}}function Ns(n,t,e){let{reference:i,floating:r}=n;const c=Qt(t),u=jo(t),d=Bo(u),p=jt(t),m=c==="y",g=i.x+i.width/2-r.width/2,v=i.y+i.height/2-r.height/2,y=i[d]/2-r[d]/2;let E;switch(p){case"top":E={x:g,y:i.y-r.height};break;case"bottom":E={x:g,y:i.y+i.height};break;case"right":E={x:i.x+i.width,y:v};break;case"left":E={x:i.x-r.width,y:v};break;default:E={x:i.x,y:i.y}}switch(Be(t)){case"start":E[u]-=y*(e&&m?-1:1);break;case"end":E[u]+=y*(e&&m?-1:1);break}return E}const dd=async(n,t,e)=>{const{placement:i="bottom",strategy:r="absolute",middleware:c=[],platform:u}=e,d=c.filter(Boolean),p=await(u.isRTL==null?void 0:u.isRTL(t));let m=await u.getElementRects({reference:n,floating:t,strategy:r}),{x:g,y:v}=Ns(m,i,p),y=i,E={},x=0;for(let C=0;C<d.length;C++){const{name:w,fn:S}=d[C],{x:L,y:O,data:I,reset:P}=await S({x:g,y:v,initialPlacement:i,placement:y,strategy:r,middlewareData:E,rects:m,platform:u,elements:{reference:n,floating:t}});g=L??g,v=O??v,E={...E,[w]:{...E[w],...I}},P&&x<=50&&(x++,typeof P=="object"&&(P.placement&&(y=P.placement),P.rects&&(m=P.rects===!0?await u.getElementRects({reference:n,floating:t,strategy:r}):P.rects),{x:g,y:v}=Ns(m,y,p)),C=-1)}return{x:g,y:v,placement:y,strategy:r,middlewareData:E}};async function lr(n,t){var e;t===void 0&&(t={});const{x:i,y:r,platform:c,rects:u,elements:d,strategy:p}=n,{boundary:m="clippingAncestors",rootBoundary:g="viewport",elementContext:v="floating",altBoundary:y=!1,padding:E=0}=Ne(t,n),x=hd(E),w=d[y?v==="floating"?"reference":"floating":v],S=Ln(await c.getClippingRect({element:(e=await(c.isElement==null?void 0:c.isElement(w)))==null||e?w:w.contextElement||await(c.getDocumentElement==null?void 0:c.getDocumentElement(d.floating)),boundary:m,rootBoundary:g,strategy:p})),L=v==="floating"?{x:i,y:r,width:u.floating.width,height:u.floating.height}:u.reference,O=await(c.getOffsetParent==null?void 0:c.getOffsetParent(d.floating)),I=await(c.isElement==null?void 0:c.isElement(O))?await(c.getScale==null?void 0:c.getScale(O))||{x:1,y:1}:{x:1,y:1},P=Ln(c.convertOffsetParentRelativeRectToViewportRelativeRect?await c.convertOffsetParentRelativeRectToViewportRelativeRect({elements:d,rect:L,offsetParent:O,strategy:p}):L);return{top:(S.top-P.top+x.top)/I.y,bottom:(P.bottom-S.bottom+x.bottom)/I.y,left:(S.left-P.left+x.left)/I.x,right:(P.right-S.right+x.right)/I.x}}const fd=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(t){var e,i;const{placement:r,middlewareData:c,rects:u,initialPlacement:d,platform:p,elements:m}=t,{mainAxis:g=!0,crossAxis:v=!0,fallbackPlacements:y,fallbackStrategy:E="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:C=!0,...w}=Ne(n,t);if((e=c.arrow)!=null&&e.alignmentOffset)return{};const S=jt(r),L=Qt(d),O=jt(d)===d,I=await(p.isRTL==null?void 0:p.isRTL(m.floating)),P=y||(O||!C?[xn(d)]:ad(d)),T=x!=="none";!y&&T&&P.push(...ld(d,C,x,I));const k=[d,...P],R=await lr(t,w),F=[];let D=((i=c.flip)==null?void 0:i.overflows)||[];if(g&&F.push(R[S]),v){const z=od(r,u,I);F.push(R[z[0]],R[z[1]])}if(D=[...D,{placement:r,overflows:F}],!F.every(z=>z<=0)){var B,Y;const z=(((B=c.flip)==null?void 0:B.index)||0)+1,yt=k[z];if(yt)return{data:{index:z,overflows:D},reset:{placement:yt}};let mt=(Y=D.filter(K=>K.overflows[0]<=0).sort((K,tt)=>K.overflows[1]-tt.overflows[1])[0])==null?void 0:Y.placement;if(!mt)switch(E){case"bestFit":{var G;const K=(G=D.filter(tt=>{if(T){const ht=Qt(tt.placement);return ht===L||ht==="y"}return!0}).map(tt=>[tt.placement,tt.overflows.filter(ht=>ht>0).reduce((ht,ne)=>ht+ne,0)]).sort((tt,ht)=>tt[1]-ht[1])[0])==null?void 0:G[0];K&&(mt=K);break}case"initialPlacement":mt=d;break}if(r!==mt)return{reset:{placement:mt}}}return{}}}};async function pd(n,t){const{placement:e,platform:i,elements:r}=n,c=await(i.isRTL==null?void 0:i.isRTL(r.floating)),u=jt(e),d=Be(e),p=Qt(e)==="y",m=["left","top"].includes(u)?-1:1,g=c&&p?-1:1,v=Ne(t,n);let{mainAxis:y,crossAxis:E,alignmentAxis:x}=typeof v=="number"?{mainAxis:v,crossAxis:0,alignmentAxis:null}:{mainAxis:v.mainAxis||0,crossAxis:v.crossAxis||0,alignmentAxis:v.alignmentAxis};return d&&typeof x=="number"&&(E=d==="end"?x*-1:x),p?{x:E*g,y:y*m}:{x:y*m,y:E*g}}const md=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(t){var e,i;const{x:r,y:c,placement:u,middlewareData:d}=t,p=await pd(t,n);return u===((e=d.offset)==null?void 0:e.placement)&&(i=d.arrow)!=null&&i.alignmentOffset?{}:{x:r+p.x,y:c+p.y,data:{...p,placement:u}}}}},gd=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(t){const{x:e,y:i,placement:r}=t,{mainAxis:c=!0,crossAxis:u=!1,limiter:d={fn:w=>{let{x:S,y:L}=w;return{x:S,y:L}}},...p}=Ne(n,t),m={x:e,y:i},g=await lr(t,p),v=Qt(jt(r)),y=No(v);let E=m[y],x=m[v];if(c){const w=y==="y"?"top":"left",S=y==="y"?"bottom":"right",L=E+g[w],O=E-g[S];E=qs(L,E,O)}if(u){const w=v==="y"?"top":"left",S=v==="y"?"bottom":"right",L=x+g[w],O=x-g[S];x=qs(L,x,O)}const C=d.fn({...t,[y]:E,[v]:x});return{...C,data:{x:C.x-e,y:C.y-i,enabled:{[y]:c,[v]:u}}}}}},vd=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(t){var e,i;const{placement:r,rects:c,platform:u,elements:d}=t,{apply:p=()=>{},...m}=Ne(n,t),g=await lr(t,m),v=jt(r),y=Be(r),E=Qt(r)==="y",{width:x,height:C}=c.floating;let w,S;v==="top"||v==="bottom"?(w=v,S=y===(await(u.isRTL==null?void 0:u.isRTL(d.floating))?"start":"end")?"left":"right"):(S=v,w=y==="end"?"top":"bottom");const L=C-g.top-g.bottom,O=x-g.left-g.right,I=ve(C-g[w],L),P=ve(x-g[S],O),T=!t.middlewareData.shift;let k=I,R=P;if((e=t.middlewareData.shift)!=null&&e.enabled.x&&(R=O),(i=t.middlewareData.shift)!=null&&i.enabled.y&&(k=L),T&&!y){const D=ft(g.left,0),B=ft(g.right,0),Y=ft(g.top,0),G=ft(g.bottom,0);E?R=x-2*(D!==0||B!==0?D+B:ft(g.left,g.right)):k=C-2*(Y!==0||G!==0?Y+G:ft(g.top,g.bottom))}await p({...t,availableWidth:R,availableHeight:k});const F=await u.getDimensions(d.floating);return x!==F.width||C!==F.height?{reset:{rects:!0}}:{}}}};function Vn(){return typeof window<"u"}function we(n){return Uo(n)?(n.nodeName||"").toLowerCase():"#document"}function pt(n){var t;return(n==null||(t=n.ownerDocument)==null?void 0:t.defaultView)||window}function Lt(n){var t;return(t=(Uo(n)?n.ownerDocument:n.document)||window.document)==null?void 0:t.documentElement}function Uo(n){return Vn()?n instanceof Node||n instanceof pt(n).Node:!1}function St(n){return Vn()?n instanceof Element||n instanceof pt(n).Element:!1}function xt(n){return Vn()?n instanceof HTMLElement||n instanceof pt(n).HTMLElement:!1}function Bs(n){return!Vn()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof pt(n).ShadowRoot}function je(n){const{overflow:t,overflowX:e,overflowY:i,display:r}=Et(n);return/auto|scroll|overlay|hidden|clip/.test(t+i+e)&&!["inline","contents"].includes(r)}function bd(n){return["table","td","th"].includes(we(n))}function zn(n){return[":popover-open",":modal"].some(t=>{try{return n.matches(t)}catch{return!1}})}function ur(n){const t=hr(),e=St(n)?Et(n):n;return["transform","translate","scale","rotate","perspective"].some(i=>e[i]?e[i]!=="none":!1)||(e.containerType?e.containerType!=="normal":!1)||!t&&(e.backdropFilter?e.backdropFilter!=="none":!1)||!t&&(e.filter?e.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(i=>(e.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(e.contain||"").includes(i))}function yd(n){let t=Ut(n);for(;xt(t)&&!be(t);){if(ur(t))return t;if(zn(t))return null;t=Ut(t)}return null}function hr(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function be(n){return["html","body","#document"].includes(we(n))}function Et(n){return pt(n).getComputedStyle(n)}function Kn(n){return St(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Ut(n){if(we(n)==="html")return n;const t=n.assignedSlot||n.parentNode||Bs(n)&&n.host||Lt(n);return Bs(t)?t.host:t}function Wo(n){const t=Ut(n);return be(t)?n.ownerDocument?n.ownerDocument.body:n.body:xt(t)&&je(t)?t:Wo(t)}function Oe(n,t,e){var i;t===void 0&&(t=[]),e===void 0&&(e=!0);const r=Wo(n),c=r===((i=n.ownerDocument)==null?void 0:i.body),u=pt(r);if(c){const d=Ii(u);return t.concat(u,u.visualViewport||[],je(r)?r:[],d&&e?Oe(d):[])}return t.concat(r,Oe(r,[],e))}function Ii(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function $o(n){const t=Et(n);let e=parseFloat(t.width)||0,i=parseFloat(t.height)||0;const r=xt(n),c=r?n.offsetWidth:e,u=r?n.offsetHeight:i,d=_n(e)!==c||_n(i)!==u;return d&&(e=c,i=u),{width:e,height:i,$:d}}function dr(n){return St(n)?n:n.contextElement}function le(n){const t=dr(n);if(!xt(t))return _t(1);const e=t.getBoundingClientRect(),{width:i,height:r,$:c}=$o(t);let u=(c?_n(e.width):e.width)/i,d=(c?_n(e.height):e.height)/r;return(!u||!Number.isFinite(u))&&(u=1),(!d||!Number.isFinite(d))&&(d=1),{x:u,y:d}}const wd=_t(0);function Vo(n){const t=pt(n);return!hr()||!t.visualViewport?wd:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Sd(n,t,e){return t===void 0&&(t=!1),!e||t&&e!==pt(n)?!1:t}function Zt(n,t,e,i){t===void 0&&(t=!1),e===void 0&&(e=!1);const r=n.getBoundingClientRect(),c=dr(n);let u=_t(1);t&&(i?St(i)&&(u=le(i)):u=le(n));const d=Sd(c,e,i)?Vo(c):_t(0);let p=(r.left+d.x)/u.x,m=(r.top+d.y)/u.y,g=r.width/u.x,v=r.height/u.y;if(c){const y=pt(c),E=i&&St(i)?pt(i):i;let x=y,C=Ii(x);for(;C&&i&&E!==x;){const w=le(C),S=C.getBoundingClientRect(),L=Et(C),O=S.left+(C.clientLeft+parseFloat(L.paddingLeft))*w.x,I=S.top+(C.clientTop+parseFloat(L.paddingTop))*w.y;p*=w.x,m*=w.y,g*=w.x,v*=w.y,p+=O,m+=I,x=pt(C),C=Ii(x)}}return Ln({width:g,height:v,x:p,y:m})}function fr(n,t){const e=Kn(n).scrollLeft;return t?t.left+e:Zt(Lt(n)).left+e}function zo(n,t,e){e===void 0&&(e=!1);const i=n.getBoundingClientRect(),r=i.left+t.scrollLeft-(e?0:fr(n,i)),c=i.top+t.scrollTop;return{x:r,y:c}}function Ed(n){let{elements:t,rect:e,offsetParent:i,strategy:r}=n;const c=r==="fixed",u=Lt(i),d=t?zn(t.floating):!1;if(i===u||d&&c)return e;let p={scrollLeft:0,scrollTop:0},m=_t(1);const g=_t(0),v=xt(i);if((v||!v&&!c)&&((we(i)!=="body"||je(u))&&(p=Kn(i)),xt(i))){const E=Zt(i);m=le(i),g.x=E.x+i.clientLeft,g.y=E.y+i.clientTop}const y=u&&!v&&!c?zo(u,p,!0):_t(0);return{width:e.width*m.x,height:e.height*m.y,x:e.x*m.x-p.scrollLeft*m.x+g.x+y.x,y:e.y*m.y-p.scrollTop*m.y+g.y+y.y}}function Td(n){return Array.from(n.getClientRects())}function Cd(n){const t=Lt(n),e=Kn(n),i=n.ownerDocument.body,r=ft(t.scrollWidth,t.clientWidth,i.scrollWidth,i.clientWidth),c=ft(t.scrollHeight,t.clientHeight,i.scrollHeight,i.clientHeight);let u=-e.scrollLeft+fr(n);const d=-e.scrollTop;return Et(i).direction==="rtl"&&(u+=ft(t.clientWidth,i.clientWidth)-r),{width:r,height:c,x:u,y:d}}function kd(n,t){const e=pt(n),i=Lt(n),r=e.visualViewport;let c=i.clientWidth,u=i.clientHeight,d=0,p=0;if(r){c=r.width,u=r.height;const m=hr();(!m||m&&t==="fixed")&&(d=r.offsetLeft,p=r.offsetTop)}return{width:c,height:u,x:d,y:p}}function _d(n,t){const e=Zt(n,!0,t==="fixed"),i=e.top+n.clientTop,r=e.left+n.clientLeft,c=xt(n)?le(n):_t(1),u=n.clientWidth*c.x,d=n.clientHeight*c.y,p=r*c.x,m=i*c.y;return{width:u,height:d,x:p,y:m}}function js(n,t,e){let i;if(t==="viewport")i=kd(n,e);else if(t==="document")i=Cd(Lt(n));else if(St(t))i=_d(t,e);else{const r=Vo(n);i={x:t.x-r.x,y:t.y-r.y,width:t.width,height:t.height}}return Ln(i)}function Ko(n,t){const e=Ut(n);return e===t||!St(e)||be(e)?!1:Et(e).position==="fixed"||Ko(e,t)}function xd(n,t){const e=t.get(n);if(e)return e;let i=Oe(n,[],!1).filter(d=>St(d)&&we(d)!=="body"),r=null;const c=Et(n).position==="fixed";let u=c?Ut(n):n;for(;St(u)&&!be(u);){const d=Et(u),p=ur(u);!p&&d.position==="fixed"&&(r=null),(c?!p&&!r:!p&&d.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||je(u)&&!p&&Ko(n,u))?i=i.filter(g=>g!==u):r=d,u=Ut(u)}return t.set(n,i),i}function Ld(n){let{element:t,boundary:e,rootBoundary:i,strategy:r}=n;const u=[...e==="clippingAncestors"?zn(t)?[]:xd(t,this._c):[].concat(e),i],d=u[0],p=u.reduce((m,g)=>{const v=js(t,g,r);return m.top=ft(v.top,m.top),m.right=ve(v.right,m.right),m.bottom=ve(v.bottom,m.bottom),m.left=ft(v.left,m.left),m},js(t,d,r));return{width:p.right-p.left,height:p.bottom-p.top,x:p.left,y:p.top}}function Ad(n){const{width:t,height:e}=$o(n);return{width:t,height:e}}function Rd(n,t,e){const i=xt(t),r=Lt(t),c=e==="fixed",u=Zt(n,!0,c,t);let d={scrollLeft:0,scrollTop:0};const p=_t(0);if(i||!i&&!c)if((we(t)!=="body"||je(r))&&(d=Kn(t)),i){const y=Zt(t,!0,c,t);p.x=y.x+t.clientLeft,p.y=y.y+t.clientTop}else r&&(p.x=fr(r));const m=r&&!i&&!c?zo(r,d):_t(0),g=u.left+d.scrollLeft-p.x-m.x,v=u.top+d.scrollTop-p.y-m.y;return{x:g,y:v,width:u.width,height:u.height}}function wi(n){return Et(n).position==="static"}function Us(n,t){if(!xt(n)||Et(n).position==="fixed")return null;if(t)return t(n);let e=n.offsetParent;return Lt(n)===e&&(e=e.ownerDocument.body),e}function Xo(n,t){const e=pt(n);if(zn(n))return e;if(!xt(n)){let r=Ut(n);for(;r&&!be(r);){if(St(r)&&!wi(r))return r;r=Ut(r)}return e}let i=Us(n,t);for(;i&&bd(i)&&wi(i);)i=Us(i,t);return i&&be(i)&&wi(i)&&!ur(i)?e:i||yd(n)||e}const Pd=async function(n){const t=this.getOffsetParent||Xo,e=this.getDimensions,i=await e(n.floating);return{reference:Rd(n.reference,await t(n.floating),n.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function Od(n){return Et(n).direction==="rtl"}const Md={convertOffsetParentRelativeRectToViewportRelativeRect:Ed,getDocumentElement:Lt,getClippingRect:Ld,getOffsetParent:Xo,getElementRects:Pd,getClientRects:Td,getDimensions:Ad,getScale:le,isElement:St,isRTL:Od};function Yo(n,t){return n.x===t.x&&n.y===t.y&&n.width===t.width&&n.height===t.height}function Id(n,t){let e=null,i;const r=Lt(n);function c(){var d;clearTimeout(i),(d=e)==null||d.disconnect(),e=null}function u(d,p){d===void 0&&(d=!1),p===void 0&&(p=1),c();const m=n.getBoundingClientRect(),{left:g,top:v,width:y,height:E}=m;if(d||t(),!y||!E)return;const x=Ze(v),C=Ze(r.clientWidth-(g+y)),w=Ze(r.clientHeight-(v+E)),S=Ze(g),O={rootMargin:-x+"px "+-C+"px "+-w+"px "+-S+"px",threshold:ft(0,ve(1,p))||1};let I=!0;function P(T){const k=T[0].intersectionRatio;if(k!==p){if(!I)return u();k?u(!1,k):i=setTimeout(()=>{u(!1,1e-7)},1e3)}k===1&&!Yo(m,n.getBoundingClientRect())&&u(),I=!1}try{e=new IntersectionObserver(P,{...O,root:r.ownerDocument})}catch{e=new IntersectionObserver(P,O)}e.observe(n)}return u(!0),c}function Jo(n,t,e,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:c=!0,elementResize:u=typeof ResizeObserver=="function",layoutShift:d=typeof IntersectionObserver=="function",animationFrame:p=!1}=i,m=dr(n),g=r||c?[...m?Oe(m):[],...Oe(t)]:[];g.forEach(S=>{r&&S.addEventListener("scroll",e,{passive:!0}),c&&S.addEventListener("resize",e)});const v=m&&d?Id(m,e):null;let y=-1,E=null;u&&(E=new ResizeObserver(S=>{let[L]=S;L&&L.target===m&&E&&(E.unobserve(t),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{var O;(O=E)==null||O.observe(t)})),e()}),m&&!p&&E.observe(m),E.observe(t));let x,C=p?Zt(n):null;p&&w();function w(){const S=Zt(n);C&&!Yo(C,S)&&e(),C=S,x=requestAnimationFrame(w)}return e(),()=>{var S;g.forEach(L=>{r&&L.removeEventListener("scroll",e),c&&L.removeEventListener("resize",e)}),v==null||v(),(S=E)==null||S.disconnect(),E=null,p&&cancelAnimationFrame(x)}}const Fd=md,pr=gd,mr=fd,Dd=vd,gr=(n,t,e)=>{const i=new Map,r={platform:Md,...e},c={...r.platform,_c:i};return dd(n,t,{...r,platform:c})};var Hd=Object.defineProperty,qd=(n,t,e)=>t in n?Hd(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,se=(n,t,e)=>(qd(n,typeof t!="symbol"?t+"":t,e),e);class Nd extends HTMLElement{constructor(){super(),se(this,"cleanup"),se(this,"onButtonClick",e=>{!Ao(e)&&!this.disabled&&(this.open=!this.open,e.preventDefault())}),se(this,"onButtonKeyDown",e=>{var i;e.key==="ArrowDown"&&!this.disabled&&(e.preventDefault(),this.open=!0,(i=cr(this.content)[0])==null||i.focus())}),se(this,"onKeyDown",e=>{e.key==="Escape"&&this.open&&(e.preventDefault(),e.stopPropagation(),this.open=!1,this.button.focus())}),se(this,"onFocusOut",e=>{(!(e.relatedTarget instanceof Node)||!this.contains(e.relatedTarget))&&(this.open=!1)}),se(this,"onContentClick",e=>{e.target instanceof Element&&e.target.closest("[role=menuitem], [role=menuitemradio]")&&(this.open=!1,this.button.focus())});const t=document.createElement("template");t.innerHTML=`
            <div part="backdrop" hidden style="position: fixed; top: 0; left: 0; right: 0; bottom: 0"></div>
            <slot></slot>
        `,this.attachShadow({mode:"open"}).appendChild(t.content.cloneNode(!0)),this.backdrop.onclick=()=>this.open=!1}static get observedAttributes(){return["open"]}connectedCallback(){this.backdrop.hidden=!0,this.content.hidden=!0,this.open=!1,this.button.setAttribute("aria-expanded","false"),setTimeout(()=>{this.content.getAttribute("role")==="menu"&&this.button.setAttribute("aria-haspopup","true")}),this.button.addEventListener("click",this.onButtonClick),this.button.addEventListener("keydown",this.onButtonKeyDown),this.addEventListener("keydown",this.onKeyDown),this.addEventListener("focusout",this.onFocusOut),this.content.addEventListener("click",this.onContentClick)}disconnectedCallback(){Tn(this.backdrop),Tn(this.content),this.button.removeAttribute("aria-expanded"),this.button.removeAttribute("aria-haspopup"),this.button.removeEventListener("click",this.onButtonClick),this.button.removeEventListener("keydown",this.onButtonKeyDown),this.removeEventListener("keydown",this.onKeyDown),this.removeEventListener("focusout",this.onFocusOut),this.content.removeEventListener("click",this.onContentClick)}get open(){return this.hasAttribute("open")}set open(t){t?this.setAttribute("open",""):this.removeAttribute("open")}get disabled(){return this.hasAttribute("disabled")}attributeChangedCallback(t,e,i){t==="open"&&(i!==null?this.wasOpened():this.wasClosed())}wasOpened(){if(!this.content.hidden)return;this.content.hidden=!1,this.content.style.position="absolute",this.backdrop.hidden=!1,Jt(this.content),Jt(this.backdrop),this.button.setAttribute("aria-expanded","true"),this.cleanup=Jo(this.button,this.content,()=>{gr(this.button,this.content,{placement:this.getAttribute("placement")||"bottom",middleware:[pr(),mr(),Dd({apply:({availableWidth:e,availableHeight:i})=>{Object.assign(this.content.style,{maxWidth:"",maxHeight:""});const r=getComputedStyle(this.content);(r.maxWidth==="none"||e<parseInt(r.maxWidth))&&(this.content.style.maxWidth=`${e}px`),(r.maxHeight==="none"||i<parseInt(r.maxHeight))&&(this.content.style.maxHeight=`${i}px`)}})]}).then(({x:e,y:i,placement:r})=>{Object.assign(this.content.style,{left:`${e}px`,top:`${i}px`}),this.content.dataset.placement=r})},{ancestorScroll:!1});const t=this.content.querySelector("[autofocus]");t?t.focus():this.content.focus(),this.dispatchEvent(new Event("open"))}wasClosed(){var t;this.content.hidden||(this.button.setAttribute("aria-expanded","false"),(t=this.cleanup)==null||t.call(this),ge(this.backdrop).then(()=>this.backdrop.hidden=!0),ge(this.content).then(()=>this.content.hidden=!0),this.dispatchEvent(new Event("close")))}get backdrop(){var t;return(t=this.shadowRoot)==null?void 0:t.firstElementChild}get button(){return this.querySelector("button, [role=button]")}get content(){return this.children[1]}}var Bd=Object.defineProperty,jd=(n,t,e)=>t in n?Bd(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,Ws=(n,t,e)=>(jd(n,typeof t!="symbol"?t+"":t,e),e);class Ud extends HTMLElement{constructor(){super(...arguments),Ws(this,"onInitialFocus",()=>{this.removeAttribute("tabindex"),this.focusControlAtIndex(0)}),Ws(this,"onKeyDown",t=>{if(t.key!=="ArrowRight"&&t.key!=="ArrowLeft"&&t.key!=="Home"&&t.key!=="End")return;const e=this.controls,i=this.controls.length,r=e.indexOf(t.target);if(r===-1)return;let c=0;t.key==="ArrowLeft"&&(c=r-1),t.key==="ArrowRight"&&(c=r+1),t.key==="End"&&(c=i-1),c<0&&(c=i-1),c>i-1&&(c=0),this.focusControlAtIndex(c),t.preventDefault()})}connectedCallback(){this.hasAttribute("role")||this.setAttribute("role","toolbar"),this.setAttribute("tabindex","0"),this.addEventListener("focus",this.onInitialFocus,{once:!0}),this.addEventListener("keydown",this.onKeyDown)}disconnectedCallback(){this.removeEventListener("keydown",this.onKeyDown)}focusControlAtIndex(t){this.controls.forEach((e,i)=>{i===t?(e.setAttribute("tabindex","0"),e.focus()):e.setAttribute("tabindex","-1")})}get controls(){return cr(this)}}var Wd=Object.defineProperty,$d=(n,t,e)=>t in n?Wd(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,it=(n,t,e)=>($d(n,typeof t!="symbol"?t+"":t,e),e);const mn=class extends HTMLElement{constructor(){super(...arguments),it(this,"parent"),it(this,"tooltip"),it(this,"timeout"),it(this,"disabledObserver"),it(this,"showing",!1),it(this,"cleanup"),it(this,"prevInnerHTML"),it(this,"onMouseEnter",this.afterDelay.bind(this,this.show)),it(this,"onFocus",this.show.bind(this)),it(this,"onMouseLeave",this.afterDelay.bind(this,this.hide)),it(this,"onBlur",this.hide.bind(this)),it(this,"onPointerUp",n=>{n.pointerType==="mouse"?this.hide():this.show()}),it(this,"onKeyDown",n=>{n.key==="Escape"&&this.hide()})}connectedCallback(){this.parent=this.parentNode,this.parent&&(this.parent.addEventListener("mouseenter",this.onMouseEnter),this.parent.addEventListener("focus",this.onFocus),this.parent.addEventListener("mouseleave",this.onMouseLeave),this.parent.addEventListener("blur",this.onBlur),this.parent.addEventListener("pointerup",this.onPointerUp),this.disabledObserver=new MutationObserver(n=>{n.forEach(t=>{t.attributeName==="disabled"&&this.hide()})}),this.disabledObserver.observe(this.parent,{attributes:!0})),document.addEventListener("keydown",this.onKeyDown),document.addEventListener("scroll",this.onBlur)}disconnectedCallback(){var n,t;(n=this.cleanup)==null||n.call(this),this.tooltip&&(this.tooltip.remove(),this.tooltip=void 0),this.parent&&(this.parent.removeEventListener("mouseenter",this.onMouseEnter),this.parent.removeEventListener("focus",this.onFocus),this.parent.removeEventListener("mouseleave",this.onMouseLeave),this.parent.removeEventListener("blur",this.onBlur),this.parent.removeEventListener("pointerup",this.onPointerUp),this.parent=void 0),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("scroll",this.onBlur),(t=this.disabledObserver)==null||t.disconnect(),clearTimeout(this.timeout)}get disabled(){return this.hasAttribute("disabled")}set disabled(n){n?this.setAttribute("disabled",""):this.removeAttribute("disabled")}show(){var n;if(this.disabled)return;const t=this.createTooltip();clearTimeout(this.timeout),this.showing||(t.hidden=!1,Jt(t),this.showing=!0),this.innerHTML!==this.prevInnerHTML&&(this.prevInnerHTML=t.innerHTML=this.innerHTML),t.style.position="absolute",(n=this.cleanup)==null||n.call(this),this.cleanup=Jo(this.parent,t,()=>gr(this.parent,t,{placement:this.getAttribute("placement")||mn.placement,middleware:[pr(),mr()]}).then(({x:e,y:i,placement:r})=>{Object.assign(t.style,{left:`${e}px`,top:`${i}px`}),t.dataset.placement=r}))}hide(){var n;clearTimeout(this.timeout),(n=this.cleanup)==null||n.call(this),this.showing&&(this.showing=!1,ge(this.tooltip).then(()=>{this.tooltip&&(this.tooltip.hidden=!0)}))}afterDelay(n){clearTimeout(this.timeout);const t=parseInt(this.getAttribute("delay")||"");this.timeout=window.setTimeout(n.bind(this),isNaN(t)?mn.delay:t)}createTooltip(){return this.tooltip||(this.tooltip=document.createElement("div"),this.tooltip.className=this.getAttribute("tooltip-class")||mn.tooltipClass,this.tooltip.hidden=!0,this.tooltip.addEventListener("mouseenter",this.show.bind(this)),this.tooltip.addEventListener("mouseleave",this.afterDelay.bind(this,this.hide)),document.body.appendChild(this.tooltip)),this.tooltip}};let gn=mn;it(gn,"delay",100),it(gn,"placement","top"),it(gn,"tooltipClass","tooltip");window.customElements.define("ui-accordion",Ah);window.customElements.define("ui-alerts",Lo);window.customElements.define("ui-disclosure",Fh);window.customElements.define("ui-menu",Ho);window.customElements.define("ui-modal",qo);window.customElements.define("ui-popup",Nd);window.customElements.define("ui-toolbar",Ud);window.customElements.define("ui-tooltip",gn);class Vd{constructor(){this.title="",this.count=0}initialize(){this.title=document.title,this.count=0}increment(){this.count++,this.update()}reset(){this.count=0,this.update()}update(){document.title=(this.count?`(${this.count}) `:"")+this.title}}Waterhole.documentTitle=new Vd;document.addEventListener("turbo:load",()=>Waterhole.documentTitle.initialize());window.addEventListener("focus",()=>Waterhole.documentTitle.reset());function Pe(n){"@babel/helpers - typeof";return Pe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pe(n)}function Q(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function zd(n,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function Z(n,t,e){return t&&zd(n.prototype,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function Me(){return Me=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Me.apply(this,arguments)}function lt(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Fi(n,t)}function An(n){return An=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},An(n)}function Fi(n,t){return Fi=Object.setPrototypeOf||function(i,r){return i.__proto__=r,i},Fi(n,t)}function Kd(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Xd(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Yd(n,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xd(n)}function ut(n){var t=Kd();return function(){var i=An(n),r;if(t){var c=An(this).constructor;r=Reflect.construct(i,arguments,c)}else r=i.apply(this,arguments);return Yd(this,r)}}var vr=function(){function n(){Q(this,n)}return Z(n,[{key:"listenForWhisper",value:function(e,i){return this.listen(".client-"+e,i)}},{key:"notification",value:function(e){return this.listen(".Illuminate\\Notifications\\Events\\BroadcastNotificationCreated",e)}},{key:"stopListeningForWhisper",value:function(e,i){return this.stopListening(".client-"+e,i)}}]),n}(),Go=function(){function n(t){Q(this,n),this.namespace=t}return Z(n,[{key:"format",value:function(e){return[".","\\"].includes(e.charAt(0))?e.substring(1):(this.namespace&&(e=this.namespace+"."+e),e.replace(/\./g,"\\"))}},{key:"setNamespace",value:function(e){this.namespace=e}}]),n}();function Jd(n){try{new n}catch(t){if(t.message.includes("is not a constructor"))return!1}return!0}var br=function(n){lt(e,n);var t=ut(e);function e(i,r,c){var u;return Q(this,e),u=t.call(this),u.name=r,u.pusher=i,u.options=c,u.eventFormatter=new Go(u.options.namespace),u.subscribe(),u}return Z(e,[{key:"subscribe",value:function(){this.subscription=this.pusher.subscribe(this.name)}},{key:"unsubscribe",value:function(){this.pusher.unsubscribe(this.name)}},{key:"listen",value:function(r,c){return this.on(this.eventFormatter.format(r),c),this}},{key:"listenToAll",value:function(r){var c=this;return this.subscription.bind_global(function(u,d){if(!u.startsWith("pusher:")){var p=c.options.namespace.replace(/\./g,"\\"),m=u.startsWith(p)?u.substring(p.length+1):"."+u;r(m,d)}}),this}},{key:"stopListening",value:function(r,c){return c?this.subscription.unbind(this.eventFormatter.format(r),c):this.subscription.unbind(this.eventFormatter.format(r)),this}},{key:"stopListeningToAll",value:function(r){return r?this.subscription.unbind_global(r):this.subscription.unbind_global(),this}},{key:"subscribed",value:function(r){return this.on("pusher:subscription_succeeded",function(){r()}),this}},{key:"error",value:function(r){return this.on("pusher:subscription_error",function(c){r(c)}),this}},{key:"on",value:function(r,c){return this.subscription.bind(r,c),this}}]),e}(vr),Qo=function(n){lt(e,n);var t=ut(e);function e(){return Q(this,e),t.apply(this,arguments)}return Z(e,[{key:"whisper",value:function(r,c){return this.pusher.channels.channels[this.name].trigger("client-".concat(r),c),this}}]),e}(br),Gd=function(n){lt(e,n);var t=ut(e);function e(){return Q(this,e),t.apply(this,arguments)}return Z(e,[{key:"whisper",value:function(r,c){return this.pusher.channels.channels[this.name].trigger("client-".concat(r),c),this}}]),e}(br),Qd=function(n){lt(e,n);var t=ut(e);function e(){return Q(this,e),t.apply(this,arguments)}return Z(e,[{key:"here",value:function(r){return this.on("pusher:subscription_succeeded",function(c){r(Object.keys(c.members).map(function(u){return c.members[u]}))}),this}},{key:"joining",value:function(r){return this.on("pusher:member_added",function(c){r(c.info)}),this}},{key:"whisper",value:function(r,c){return this.pusher.channels.channels[this.name].trigger("client-".concat(r),c),this}},{key:"leaving",value:function(r){return this.on("pusher:member_removed",function(c){r(c.info)}),this}}]),e}(Qo),Zo=function(n){lt(e,n);var t=ut(e);function e(i,r,c){var u;return Q(this,e),u=t.call(this),u.events={},u.listeners={},u.name=r,u.socket=i,u.options=c,u.eventFormatter=new Go(u.options.namespace),u.subscribe(),u}return Z(e,[{key:"subscribe",value:function(){this.socket.emit("subscribe",{channel:this.name,auth:this.options.auth||{}})}},{key:"unsubscribe",value:function(){this.unbind(),this.socket.emit("unsubscribe",{channel:this.name,auth:this.options.auth||{}})}},{key:"listen",value:function(r,c){return this.on(this.eventFormatter.format(r),c),this}},{key:"stopListening",value:function(r,c){return this.unbindEvent(this.eventFormatter.format(r),c),this}},{key:"subscribed",value:function(r){return this.on("connect",function(c){r(c)}),this}},{key:"error",value:function(r){return this}},{key:"on",value:function(r,c){var u=this;return this.listeners[r]=this.listeners[r]||[],this.events[r]||(this.events[r]=function(d,p){u.name===d&&u.listeners[r]&&u.listeners[r].forEach(function(m){return m(p)})},this.socket.on(r,this.events[r])),this.listeners[r].push(c),this}},{key:"unbind",value:function(){var r=this;Object.keys(this.events).forEach(function(c){r.unbindEvent(c)})}},{key:"unbindEvent",value:function(r,c){this.listeners[r]=this.listeners[r]||[],c&&(this.listeners[r]=this.listeners[r].filter(function(u){return u!==c})),(!c||this.listeners[r].length===0)&&(this.events[r]&&(this.socket.removeListener(r,this.events[r]),delete this.events[r]),delete this.listeners[r])}}]),e}(vr),ta=function(n){lt(e,n);var t=ut(e);function e(){return Q(this,e),t.apply(this,arguments)}return Z(e,[{key:"whisper",value:function(r,c){return this.socket.emit("client event",{channel:this.name,event:"client-".concat(r),data:c}),this}}]),e}(Zo),Zd=function(n){lt(e,n);var t=ut(e);function e(){return Q(this,e),t.apply(this,arguments)}return Z(e,[{key:"here",value:function(r){return this.on("presence:subscribed",function(c){r(c.map(function(u){return u.user_info}))}),this}},{key:"joining",value:function(r){return this.on("presence:joining",function(c){return r(c.user_info)}),this}},{key:"whisper",value:function(r,c){return this.socket.emit("client event",{channel:this.name,event:"client-".concat(r),data:c}),this}},{key:"leaving",value:function(r){return this.on("presence:leaving",function(c){return r(c.user_info)}),this}}]),e}(ta),Rn=function(n){lt(e,n);var t=ut(e);function e(){return Q(this,e),t.apply(this,arguments)}return Z(e,[{key:"subscribe",value:function(){}},{key:"unsubscribe",value:function(){}},{key:"listen",value:function(r,c){return this}},{key:"listenToAll",value:function(r){return this}},{key:"stopListening",value:function(r,c){return this}},{key:"subscribed",value:function(r){return this}},{key:"error",value:function(r){return this}},{key:"on",value:function(r,c){return this}}]),e}(vr),ea=function(n){lt(e,n);var t=ut(e);function e(){return Q(this,e),t.apply(this,arguments)}return Z(e,[{key:"whisper",value:function(r,c){return this}}]),e}(Rn),tf=function(n){lt(e,n);var t=ut(e);function e(){return Q(this,e),t.apply(this,arguments)}return Z(e,[{key:"whisper",value:function(r,c){return this}}]),e}(Rn),ef=function(n){lt(e,n);var t=ut(e);function e(){return Q(this,e),t.apply(this,arguments)}return Z(e,[{key:"here",value:function(r){return this}},{key:"joining",value:function(r){return this}},{key:"whisper",value:function(r,c){return this}},{key:"leaving",value:function(r){return this}}]),e}(ea),yr=function(){function n(t){Q(this,n),this._defaultOptions={auth:{headers:{}},authEndpoint:"/broadcasting/auth",userAuthentication:{endpoint:"/broadcasting/user-auth",headers:{}},broadcaster:"pusher",csrfToken:null,bearerToken:null,host:null,key:null,namespace:"App.Events"},this.setOptions(t),this.connect()}return Z(n,[{key:"setOptions",value:function(e){this.options=Me(this._defaultOptions,e);var i=this.csrfToken();return i&&(this.options.auth.headers["X-CSRF-TOKEN"]=i,this.options.userAuthentication.headers["X-CSRF-TOKEN"]=i),i=this.options.bearerToken,i&&(this.options.auth.headers.Authorization="Bearer "+i,this.options.userAuthentication.headers.Authorization="Bearer "+i),e}},{key:"csrfToken",value:function(){var e;return typeof window<"u"&&window.Laravel&&window.Laravel.csrfToken?window.Laravel.csrfToken:this.options.csrfToken?this.options.csrfToken:typeof document<"u"&&typeof document.querySelector=="function"&&(e=document.querySelector('meta[name="csrf-token"]'))?e.getAttribute("content"):null}}]),n}(),$s=function(n){lt(e,n);var t=ut(e);function e(){var i;return Q(this,e),i=t.apply(this,arguments),i.channels={},i}return Z(e,[{key:"connect",value:function(){typeof this.options.client<"u"?this.pusher=this.options.client:this.options.Pusher?this.pusher=new this.options.Pusher(this.options.key,this.options):this.pusher=new Pusher(this.options.key,this.options)}},{key:"signin",value:function(){this.pusher.signin()}},{key:"listen",value:function(r,c,u){return this.channel(r).listen(c,u)}},{key:"channel",value:function(r){return this.channels[r]||(this.channels[r]=new br(this.pusher,r,this.options)),this.channels[r]}},{key:"privateChannel",value:function(r){return this.channels["private-"+r]||(this.channels["private-"+r]=new Qo(this.pusher,"private-"+r,this.options)),this.channels["private-"+r]}},{key:"encryptedPrivateChannel",value:function(r){return this.channels["private-encrypted-"+r]||(this.channels["private-encrypted-"+r]=new Gd(this.pusher,"private-encrypted-"+r,this.options)),this.channels["private-encrypted-"+r]}},{key:"presenceChannel",value:function(r){return this.channels["presence-"+r]||(this.channels["presence-"+r]=new Qd(this.pusher,"presence-"+r,this.options)),this.channels["presence-"+r]}},{key:"leave",value:function(r){var c=this,u=[r,"private-"+r,"private-encrypted-"+r,"presence-"+r];u.forEach(function(d,p){c.leaveChannel(d)})}},{key:"leaveChannel",value:function(r){this.channels[r]&&(this.channels[r].unsubscribe(),delete this.channels[r])}},{key:"socketId",value:function(){return this.pusher.connection.socket_id}},{key:"disconnect",value:function(){this.pusher.disconnect()}}]),e}(yr),Vs=function(n){lt(e,n);var t=ut(e);function e(){var i;return Q(this,e),i=t.apply(this,arguments),i.channels={},i}return Z(e,[{key:"connect",value:function(){var r=this,c=this.getSocketIO();return this.socket=c(this.options.host,this.options),this.socket.on("reconnect",function(){Object.values(r.channels).forEach(function(u){u.subscribe()})}),this.socket}},{key:"getSocketIO",value:function(){if(typeof this.options.client<"u")return this.options.client;if(typeof io<"u")return io;throw new Error("Socket.io client not found. Should be globally available or passed via options.client")}},{key:"listen",value:function(r,c,u){return this.channel(r).listen(c,u)}},{key:"channel",value:function(r){return this.channels[r]||(this.channels[r]=new Zo(this.socket,r,this.options)),this.channels[r]}},{key:"privateChannel",value:function(r){return this.channels["private-"+r]||(this.channels["private-"+r]=new ta(this.socket,"private-"+r,this.options)),this.channels["private-"+r]}},{key:"presenceChannel",value:function(r){return this.channels["presence-"+r]||(this.channels["presence-"+r]=new Zd(this.socket,"presence-"+r,this.options)),this.channels["presence-"+r]}},{key:"leave",value:function(r){var c=this,u=[r,"private-"+r,"presence-"+r];u.forEach(function(d){c.leaveChannel(d)})}},{key:"leaveChannel",value:function(r){this.channels[r]&&(this.channels[r].unsubscribe(),delete this.channels[r])}},{key:"socketId",value:function(){return this.socket.id}},{key:"disconnect",value:function(){this.socket.disconnect()}}]),e}(yr),nf=function(n){lt(e,n);var t=ut(e);function e(){var i;return Q(this,e),i=t.apply(this,arguments),i.channels={},i}return Z(e,[{key:"connect",value:function(){}},{key:"listen",value:function(r,c,u){return new Rn}},{key:"channel",value:function(r){return new Rn}},{key:"privateChannel",value:function(r){return new ea}},{key:"encryptedPrivateChannel",value:function(r){return new tf}},{key:"presenceChannel",value:function(r){return new ef}},{key:"leave",value:function(r){}},{key:"leaveChannel",value:function(r){}},{key:"socketId",value:function(){return"fake-socket-id"}},{key:"disconnect",value:function(){}}]),e}(yr),rf=function(){function n(t){Q(this,n),this.options=t,this.connect(),this.options.withoutInterceptors||this.registerInterceptors()}return Z(n,[{key:"channel",value:function(e){return this.connector.channel(e)}},{key:"connect",value:function(){if(this.options.broadcaster=="reverb")this.connector=new $s(Me(Me({},this.options),{cluster:""}));else if(this.options.broadcaster=="pusher")this.connector=new $s(this.options);else if(this.options.broadcaster=="socket.io")this.connector=new Vs(this.options);else if(this.options.broadcaster=="null")this.connector=new nf(this.options);else if(typeof this.options.broadcaster=="function"&&Jd(this.options.broadcaster))this.connector=new this.options.broadcaster(this.options);else throw new Error("Broadcaster ".concat(Pe(this.options.broadcaster)," ").concat(this.options.broadcaster," is not supported."))}},{key:"disconnect",value:function(){this.connector.disconnect()}},{key:"join",value:function(e){return this.connector.presenceChannel(e)}},{key:"leave",value:function(e){this.connector.leave(e)}},{key:"leaveChannel",value:function(e){this.connector.leaveChannel(e)}},{key:"leaveAllChannels",value:function(){for(var e in this.connector.channels)this.leaveChannel(e)}},{key:"listen",value:function(e,i,r){return this.connector.listen(e,i,r)}},{key:"private",value:function(e){return this.connector.privateChannel(e)}},{key:"encryptedPrivate",value:function(e){if(this.connector instanceof Vs)throw new Error("Broadcaster ".concat(Pe(this.options.broadcaster)," ").concat(this.options.broadcaster," does not support encrypted private channels."));return this.connector.encryptedPrivateChannel(e)}},{key:"socketId",value:function(){return this.connector.socketId()}},{key:"registerInterceptors",value:function(){typeof Vue=="function"&&Vue.http&&this.registerVueRequestInterceptor(),typeof axios=="function"&&this.registerAxiosRequestInterceptor(),typeof jQuery=="function"&&this.registerjQueryAjaxSetup(),(typeof Turbo>"u"?"undefined":Pe(Turbo))==="object"&&this.registerTurboRequestInterceptor()}},{key:"registerVueRequestInterceptor",value:function(){var e=this;Vue.http.interceptors.push(function(i,r){e.socketId()&&i.headers.set("X-Socket-ID",e.socketId()),r()})}},{key:"registerAxiosRequestInterceptor",value:function(){var e=this;axios.interceptors.request.use(function(i){return e.socketId()&&(i.headers["X-Socket-Id"]=e.socketId()),i})}},{key:"registerjQueryAjaxSetup",value:function(){var e=this;typeof jQuery.ajax<"u"&&jQuery.ajaxPrefilter(function(i,r,c){e.socketId()&&c.setRequestHeader("X-Socket-Id",e.socketId())})}},{key:"registerTurboRequestInterceptor",value:function(){var e=this;document.addEventListener("turbo:before-fetch-request",function(i){i.detail.fetchOptions.headers["X-Socket-Id"]=e.socketId()})}}]),n}(),na={exports:{}};/*!
 * Pusher JavaScript Library v7.6.0
 * https://pusher.com/
 *
 * Copyright 2020, Pusher
 * Released under the MIT licence.
 */(function(n,t){(function(i,r){n.exports=r()})(window,function(){return function(e){var i={};function r(c){if(i[c])return i[c].exports;var u=i[c]={i:c,l:!1,exports:{}};return e[c].call(u.exports,u,u.exports,r),u.l=!0,u.exports}return r.m=e,r.c=i,r.d=function(c,u,d){r.o(c,u)||Object.defineProperty(c,u,{enumerable:!0,get:d})},r.r=function(c){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})},r.t=function(c,u){if(u&1&&(c=r(c)),u&8||u&4&&typeof c=="object"&&c&&c.__esModule)return c;var d=Object.create(null);if(r.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:c}),u&2&&typeof c!="string")for(var p in c)r.d(d,p,(function(m){return c[m]}).bind(null,p));return d},r.n=function(c){var u=c&&c.__esModule?function(){return c.default}:function(){return c};return r.d(u,"a",u),u},r.o=function(c,u){return Object.prototype.hasOwnProperty.call(c,u)},r.p="",r(r.s=2)}([function(e,i,r){var c=this&&this.__extends||function(){var C=function(w,S){return C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,O){L.__proto__=O}||function(L,O){for(var I in O)O.hasOwnProperty(I)&&(L[I]=O[I])},C(w,S)};return function(w,S){C(w,S);function L(){this.constructor=w}w.prototype=S===null?Object.create(S):(L.prototype=S.prototype,new L)}}();Object.defineProperty(i,"__esModule",{value:!0});var u=256,d=function(){function C(w){w===void 0&&(w="="),this._paddingCharacter=w}return C.prototype.encodedLength=function(w){return this._paddingCharacter?(w+2)/3*4|0:(w*8+5)/6|0},C.prototype.encode=function(w){for(var S="",L=0;L<w.length-2;L+=3){var O=w[L]<<16|w[L+1]<<8|w[L+2];S+=this._encodeByte(O>>>3*6&63),S+=this._encodeByte(O>>>2*6&63),S+=this._encodeByte(O>>>1*6&63),S+=this._encodeByte(O>>>0*6&63)}var I=w.length-L;if(I>0){var O=w[L]<<16|(I===2?w[L+1]<<8:0);S+=this._encodeByte(O>>>3*6&63),S+=this._encodeByte(O>>>2*6&63),I===2?S+=this._encodeByte(O>>>1*6&63):S+=this._paddingCharacter||"",S+=this._paddingCharacter||""}return S},C.prototype.maxDecodedLength=function(w){return this._paddingCharacter?w/4*3|0:(w*6+7)/8|0},C.prototype.decodedLength=function(w){return this.maxDecodedLength(w.length-this._getPaddingLength(w))},C.prototype.decode=function(w){if(w.length===0)return new Uint8Array(0);for(var S=this._getPaddingLength(w),L=w.length-S,O=new Uint8Array(this.maxDecodedLength(L)),I=0,P=0,T=0,k=0,R=0,F=0,D=0;P<L-4;P+=4)k=this._decodeChar(w.charCodeAt(P+0)),R=this._decodeChar(w.charCodeAt(P+1)),F=this._decodeChar(w.charCodeAt(P+2)),D=this._decodeChar(w.charCodeAt(P+3)),O[I++]=k<<2|R>>>4,O[I++]=R<<4|F>>>2,O[I++]=F<<6|D,T|=k&u,T|=R&u,T|=F&u,T|=D&u;if(P<L-1&&(k=this._decodeChar(w.charCodeAt(P)),R=this._decodeChar(w.charCodeAt(P+1)),O[I++]=k<<2|R>>>4,T|=k&u,T|=R&u),P<L-2&&(F=this._decodeChar(w.charCodeAt(P+2)),O[I++]=R<<4|F>>>2,T|=F&u),P<L-3&&(D=this._decodeChar(w.charCodeAt(P+3)),O[I++]=F<<6|D,T|=D&u),T!==0)throw new Error("Base64Coder: incorrect characters for decoding");return O},C.prototype._encodeByte=function(w){var S=w;return S+=65,S+=25-w>>>8&6,S+=51-w>>>8&-75,S+=61-w>>>8&-15,S+=62-w>>>8&3,String.fromCharCode(S)},C.prototype._decodeChar=function(w){var S=u;return S+=(42-w&w-44)>>>8&-u+w-43+62,S+=(46-w&w-48)>>>8&-u+w-47+63,S+=(47-w&w-58)>>>8&-u+w-48+52,S+=(64-w&w-91)>>>8&-u+w-65+0,S+=(96-w&w-123)>>>8&-u+w-97+26,S},C.prototype._getPaddingLength=function(w){var S=0;if(this._paddingCharacter){for(var L=w.length-1;L>=0&&w[L]===this._paddingCharacter;L--)S++;if(w.length<4||S>2)throw new Error("Base64Coder: incorrect padding")}return S},C}();i.Coder=d;var p=new d;function m(C){return p.encode(C)}i.encode=m;function g(C){return p.decode(C)}i.decode=g;var v=function(C){c(w,C);function w(){return C!==null&&C.apply(this,arguments)||this}return w.prototype._encodeByte=function(S){var L=S;return L+=65,L+=25-S>>>8&6,L+=51-S>>>8&-75,L+=61-S>>>8&-13,L+=62-S>>>8&49,String.fromCharCode(L)},w.prototype._decodeChar=function(S){var L=u;return L+=(44-S&S-46)>>>8&-u+S-45+62,L+=(94-S&S-96)>>>8&-u+S-95+63,L+=(47-S&S-58)>>>8&-u+S-48+52,L+=(64-S&S-91)>>>8&-u+S-65+0,L+=(96-S&S-123)>>>8&-u+S-97+26,L},w}(d);i.URLSafeCoder=v;var y=new v;function E(C){return y.encode(C)}i.encodeURLSafe=E;function x(C){return y.decode(C)}i.decodeURLSafe=x,i.encodedLength=function(C){return p.encodedLength(C)},i.maxDecodedLength=function(C){return p.maxDecodedLength(C)},i.decodedLength=function(C){return p.decodedLength(C)}},function(e,i,r){Object.defineProperty(i,"__esModule",{value:!0});var c="utf8: invalid string",u="utf8: invalid source encoding";function d(g){for(var v=new Uint8Array(p(g)),y=0,E=0;E<g.length;E++){var x=g.charCodeAt(E);x<128?v[y++]=x:x<2048?(v[y++]=192|x>>6,v[y++]=128|x&63):x<55296?(v[y++]=224|x>>12,v[y++]=128|x>>6&63,v[y++]=128|x&63):(E++,x=(x&1023)<<10,x|=g.charCodeAt(E)&1023,x+=65536,v[y++]=240|x>>18,v[y++]=128|x>>12&63,v[y++]=128|x>>6&63,v[y++]=128|x&63)}return v}i.encode=d;function p(g){for(var v=0,y=0;y<g.length;y++){var E=g.charCodeAt(y);if(E<128)v+=1;else if(E<2048)v+=2;else if(E<55296)v+=3;else if(E<=57343){if(y>=g.length-1)throw new Error(c);y++,v+=4}else throw new Error(c)}return v}i.encodedLength=p;function m(g){for(var v=[],y=0;y<g.length;y++){var E=g[y];if(E&128){var x=void 0;if(E<224){if(y>=g.length)throw new Error(u);var C=g[++y];if((C&192)!==128)throw new Error(u);E=(E&31)<<6|C&63,x=128}else if(E<240){if(y>=g.length-1)throw new Error(u);var C=g[++y],w=g[++y];if((C&192)!==128||(w&192)!==128)throw new Error(u);E=(E&15)<<12|(C&63)<<6|w&63,x=2048}else if(E<248){if(y>=g.length-2)throw new Error(u);var C=g[++y],w=g[++y],S=g[++y];if((C&192)!==128||(w&192)!==128||(S&192)!==128)throw new Error(u);E=(E&15)<<18|(C&63)<<12|(w&63)<<6|S&63,x=65536}else throw new Error(u);if(E<x||E>=55296&&E<=57343)throw new Error(u);if(E>=65536){if(E>1114111)throw new Error(u);E-=65536,v.push(String.fromCharCode(55296|E>>10)),E=56320|E&1023}}v.push(String.fromCharCode(E))}return v.join("")}i.decode=m},function(e,i,r){e.exports=r(3).default},function(e,i,r){r.r(i);var c=function(){function o(s,a){this.lastId=0,this.prefix=s,this.name=a}return o.prototype.create=function(s){this.lastId++;var a=this.lastId,l=this.prefix+a,h=this.name+"["+a+"]",f=!1,b=function(){f||(s.apply(null,arguments),f=!0)};return this[a]=b,{number:a,id:l,name:h,callback:b}},o.prototype.remove=function(s){delete this[s.number]},o}(),u=new c("_pusher_script_","Pusher.ScriptReceivers"),d={VERSION:"7.6.0",PROTOCOL:7,wsPort:80,wssPort:443,wsPath:"",httpHost:"sockjs.pusher.com",httpPort:80,httpsPort:443,httpPath:"/pusher",stats_host:"stats.pusher.com",authEndpoint:"/pusher/auth",authTransport:"ajax",activityTimeout:12e4,pongTimeout:3e4,unavailableTimeout:1e4,cluster:"mt1",userAuthentication:{endpoint:"/pusher/user-auth",transport:"ajax"},channelAuthorization:{endpoint:"/pusher/auth",transport:"ajax"},cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",dependency_suffix:""},p=d,m=function(){function o(s){this.options=s,this.receivers=s.receivers||u,this.loading={}}return o.prototype.load=function(s,a,l){var h=this;if(h.loading[s]&&h.loading[s].length>0)h.loading[s].push(l);else{h.loading[s]=[l];var f=H.createScriptRequest(h.getPath(s,a)),b=h.receivers.create(function(_){if(h.receivers.remove(b),h.loading[s]){var M=h.loading[s];delete h.loading[s];for(var A=function(J){J||f.cleanup()},q=0;q<M.length;q++)M[q](_,A)}});f.send(b)}},o.prototype.getRoot=function(s){var a,l=H.getDocument().location.protocol;return s&&s.useTLS||l==="https:"?a=this.options.cdn_https:a=this.options.cdn_http,a.replace(/\/*$/,"")+"/"+this.options.version},o.prototype.getPath=function(s,a){return this.getRoot(a)+"/"+s+this.options.suffix+".js"},o}(),g=m,v=new c("_pusher_dependencies","Pusher.DependenciesReceivers"),y=new g({cdn_http:p.cdn_http,cdn_https:p.cdn_https,version:p.VERSION,suffix:p.dependency_suffix,receivers:v}),E={baseUrl:"https://pusher.com",urls:{authenticationEndpoint:{path:"/docs/channels/server_api/authenticating_users"},authorizationEndpoint:{path:"/docs/channels/server_api/authorizing-users/"},javascriptQuickStart:{path:"/docs/javascript_quick_start"},triggeringClientEvents:{path:"/docs/client_api_guide/client_events#trigger-events"},encryptedChannelSupport:{fullUrl:"https://github.com/pusher/pusher-js/tree/cc491015371a4bde5743d1c87a0fbac0feb53195#encrypted-channel-support"}}},x=function(o){var s="See:",a=E.urls[o];if(!a)return"";var l;return a.fullUrl?l=a.fullUrl:a.path&&(l=E.baseUrl+a.path),l?s+" "+l:""},C={buildLogSuffix:x},w;(function(o){o.UserAuthentication="user-authentication",o.ChannelAuthorization="channel-authorization"})(w||(w={}));var S=function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var f in h)h.hasOwnProperty(f)&&(l[f]=h[f])},o(s,a)};return function(s,a){o(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}}(),L=function(o){S(s,o);function s(a){var l=this.constructor,h=o.call(this,a)||this;return Object.setPrototypeOf(h,l.prototype),h}return s}(Error),O=function(o){S(s,o);function s(a){var l=this.constructor,h=o.call(this,a)||this;return Object.setPrototypeOf(h,l.prototype),h}return s}(Error),I=function(o){S(s,o);function s(a){var l=this.constructor,h=o.call(this,a)||this;return Object.setPrototypeOf(h,l.prototype),h}return s}(Error),P=function(o){S(s,o);function s(a){var l=this.constructor,h=o.call(this,a)||this;return Object.setPrototypeOf(h,l.prototype),h}return s}(Error),T=function(o){S(s,o);function s(a){var l=this.constructor,h=o.call(this,a)||this;return Object.setPrototypeOf(h,l.prototype),h}return s}(Error),k=function(o){S(s,o);function s(a){var l=this.constructor,h=o.call(this,a)||this;return Object.setPrototypeOf(h,l.prototype),h}return s}(Error),R=function(o){S(s,o);function s(a){var l=this.constructor,h=o.call(this,a)||this;return Object.setPrototypeOf(h,l.prototype),h}return s}(Error),F=function(o){S(s,o);function s(a){var l=this.constructor,h=o.call(this,a)||this;return Object.setPrototypeOf(h,l.prototype),h}return s}(Error),D=function(o){S(s,o);function s(a,l){var h=this.constructor,f=o.call(this,l)||this;return f.status=a,Object.setPrototypeOf(f,h.prototype),f}return s}(Error),B=function(o,s,a,l,h){var f=H.createXHR();f.open("POST",a.endpoint,!0),f.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(var b in a.headers)f.setRequestHeader(b,a.headers[b]);if(a.headersProvider!=null){var _=a.headersProvider();for(var b in _)f.setRequestHeader(b,_[b])}return f.onreadystatechange=function(){if(f.readyState===4)if(f.status===200){var M=void 0,A=!1;try{M=JSON.parse(f.responseText),A=!0}catch{h(new D(200,"JSON returned from "+l.toString()+" endpoint was invalid, yet status code was 200. Data was: "+f.responseText),null)}A&&h(null,M)}else{var q="";switch(l){case w.UserAuthentication:q=C.buildLogSuffix("authenticationEndpoint");break;case w.ChannelAuthorization:q="Clients must be authorized to join private or presence channels. "+C.buildLogSuffix("authorizationEndpoint");break}h(new D(f.status,"Unable to retrieve auth string from "+l.toString()+" endpoint - "+("received status: "+f.status+" from "+a.endpoint+". "+q)),null)}},f.send(s),f},Y=B;function G(o){return ht(K(o))}var z=String.fromCharCode,yt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",mt=function(o){var s=o.charCodeAt(0);return s<128?o:s<2048?z(192|s>>>6)+z(128|s&63):z(224|s>>>12&15)+z(128|s>>>6&63)+z(128|s&63)},K=function(o){return o.replace(/[^\x00-\x7F]/g,mt)},tt=function(o){var s=[0,2,1][o.length%3],a=o.charCodeAt(0)<<16|(o.length>1?o.charCodeAt(1):0)<<8|(o.length>2?o.charCodeAt(2):0),l=[yt.charAt(a>>>18),yt.charAt(a>>>12&63),s>=2?"=":yt.charAt(a>>>6&63),s>=1?"=":yt.charAt(a&63)];return l.join("")},ht=window.btoa||function(o){return o.replace(/[\s\S]{1,3}/g,tt)},ne=function(){function o(s,a,l,h){var f=this;this.clear=a,this.timer=s(function(){f.timer&&(f.timer=h(f.timer))},l)}return o.prototype.isRunning=function(){return this.timer!==null},o.prototype.ensureAborted=function(){this.timer&&(this.clear(this.timer),this.timer=null)},o}(),Vr=ne,zr=function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var f in h)h.hasOwnProperty(f)&&(l[f]=h[f])},o(s,a)};return function(s,a){o(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}}();function Ja(o){window.clearTimeout(o)}function Ga(o){window.clearInterval(o)}var Wt=function(o){zr(s,o);function s(a,l){return o.call(this,setTimeout,Ja,a,function(h){return l(),null})||this}return s}(Vr),Qa=function(o){zr(s,o);function s(a,l){return o.call(this,setInterval,Ga,a,function(h){return l(),h})||this}return s}(Vr),Za={now:function(){return Date.now?Date.now():new Date().valueOf()},defer:function(o){return new Wt(0,o)},method:function(o){var s=Array.prototype.slice.call(arguments,1);return function(a){return a[o].apply(a,s.concat(arguments))}}},nt=Za;function at(o){for(var s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];for(var l=0;l<s.length;l++){var h=s[l];for(var f in h)h[f]&&h[f].constructor&&h[f].constructor===Object?o[f]=at(o[f]||{},h[f]):o[f]=h[f]}return o}function tc(){for(var o=["Pusher"],s=0;s<arguments.length;s++)typeof arguments[s]=="string"?o.push(arguments[s]):o.push($e(arguments[s]));return o.join(" : ")}function Kr(o,s){var a=Array.prototype.indexOf;if(o===null)return-1;if(a&&o.indexOf===a)return o.indexOf(s);for(var l=0,h=o.length;l<h;l++)if(o[l]===s)return l;return-1}function At(o,s){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&s(o[a],a,o)}function Xr(o){var s=[];return At(o,function(a,l){s.push(l)}),s}function ec(o){var s=[];return At(o,function(a){s.push(a)}),s}function Se(o,s,a){for(var l=0;l<o.length;l++)s.call(a||window,o[l],l,o)}function Yr(o,s){for(var a=[],l=0;l<o.length;l++)a.push(s(o[l],l,o,a));return a}function nc(o,s){var a={};return At(o,function(l,h){a[h]=s(l)}),a}function Jr(o,s){s=s||function(h){return!!h};for(var a=[],l=0;l<o.length;l++)s(o[l],l,o,a)&&a.push(o[l]);return a}function Gr(o,s){var a={};return At(o,function(l,h){(s&&s(l,h,o,a)||l)&&(a[h]=l)}),a}function ic(o){var s=[];return At(o,function(a,l){s.push([l,a])}),s}function Qr(o,s){for(var a=0;a<o.length;a++)if(s(o[a],a,o))return!0;return!1}function rc(o,s){for(var a=0;a<o.length;a++)if(!s(o[a],a,o))return!1;return!0}function sc(o){return nc(o,function(s){return typeof s=="object"&&(s=$e(s)),encodeURIComponent(G(s.toString()))})}function oc(o){var s=Gr(o,function(l){return l!==void 0}),a=Yr(ic(sc(s)),nt.method("join","=")).join("&");return a}function ac(o){var s=[],a=[];return function l(h,f){var b,_,M;switch(typeof h){case"object":if(!h)return null;for(b=0;b<s.length;b+=1)if(s[b]===h)return{$ref:a[b]};if(s.push(h),a.push(f),Object.prototype.toString.apply(h)==="[object Array]")for(M=[],b=0;b<h.length;b+=1)M[b]=l(h[b],f+"["+b+"]");else{M={};for(_ in h)Object.prototype.hasOwnProperty.call(h,_)&&(M[_]=l(h[_],f+"["+JSON.stringify(_)+"]"))}return M;case"number":case"string":case"boolean":return h}}(o,"$")}function $e(o){try{return JSON.stringify(o)}catch{return JSON.stringify(ac(o))}}var cc=function(){function o(){this.globalLog=function(s){window.console&&window.console.log&&window.console.log(s)}}return o.prototype.debug=function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];this.log(this.globalLog,s)},o.prototype.warn=function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];this.log(this.globalLogWarn,s)},o.prototype.error=function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];this.log(this.globalLogError,s)},o.prototype.globalLogWarn=function(s){window.console&&window.console.warn?window.console.warn(s):this.globalLog(s)},o.prototype.globalLogError=function(s){window.console&&window.console.error?window.console.error(s):this.globalLogWarn(s)},o.prototype.log=function(s){var a=tc.apply(this,arguments);if(di.log)di.log(a);else if(di.logToConsole){var l=s.bind(this);l(a)}},o}(),W=new cc,lc=function(o,s,a,l,h){(a.headers!==void 0||a.headersProvider!=null)&&W.warn("To send headers with the "+l.toString()+" request, you must use AJAX, rather than JSONP.");var f=o.nextAuthCallbackID.toString();o.nextAuthCallbackID++;var b=o.getDocument(),_=b.createElement("script");o.auth_callbacks[f]=function(q){h(null,q)};var M="Pusher.auth_callbacks['"+f+"']";_.src=a.endpoint+"?callback="+encodeURIComponent(M)+"&"+s;var A=b.getElementsByTagName("head")[0]||b.documentElement;A.insertBefore(_,A.firstChild)},uc=lc,hc=function(){function o(s){this.src=s}return o.prototype.send=function(s){var a=this,l="Error loading "+a.src;a.script=document.createElement("script"),a.script.id=s.id,a.script.src=a.src,a.script.type="text/javascript",a.script.charset="UTF-8",a.script.addEventListener?(a.script.onerror=function(){s.callback(l)},a.script.onload=function(){s.callback(null)}):a.script.onreadystatechange=function(){(a.script.readyState==="loaded"||a.script.readyState==="complete")&&s.callback(null)},a.script.async===void 0&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(a.errorScript=document.createElement("script"),a.errorScript.id=s.id+"_error",a.errorScript.text=s.name+"('"+l+"');",a.script.async=a.errorScript.async=!1):a.script.async=!0;var h=document.getElementsByTagName("head")[0];h.insertBefore(a.script,h.firstChild),a.errorScript&&h.insertBefore(a.errorScript,a.script.nextSibling)},o.prototype.cleanup=function(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null},o}(),dc=hc,fc=function(){function o(s,a){this.url=s,this.data=a}return o.prototype.send=function(s){if(!this.request){var a=oc(this.data),l=this.url+"/"+s.number+"?"+a;this.request=H.createScriptRequest(l),this.request.send(s)}},o.prototype.cleanup=function(){this.request&&this.request.cleanup()},o}(),pc=fc,mc=function(o,s){return function(a,l){var h="http"+(s?"s":"")+"://",f=h+(o.host||o.options.host)+o.options.path,b=H.createJSONPRequest(f,a),_=H.ScriptReceivers.create(function(M,A){u.remove(_),b.cleanup(),A&&A.host&&(o.host=A.host),l&&l(M,A)});b.send(_)}},gc={name:"jsonp",getAgent:mc},vc=gc;function ni(o,s,a){var l=o+(s.useTLS?"s":""),h=s.useTLS?s.hostTLS:s.hostNonTLS;return l+"://"+h+a}function ii(o,s){var a="/app/"+o,l="?protocol="+p.PROTOCOL+"&client=js&version="+p.VERSION+(s?"&"+s:"");return a+l}var bc={getInitial:function(o,s){var a=(s.httpPath||"")+ii(o,"flash=false");return ni("ws",s,a)}},yc={getInitial:function(o,s){var a=(s.httpPath||"/pusher")+ii(o);return ni("http",s,a)}},wc={getInitial:function(o,s){return ni("http",s,s.httpPath||"/pusher")},getPath:function(o,s){return ii(o)}},Sc=function(){function o(){this._callbacks={}}return o.prototype.get=function(s){return this._callbacks[ri(s)]},o.prototype.add=function(s,a,l){var h=ri(s);this._callbacks[h]=this._callbacks[h]||[],this._callbacks[h].push({fn:a,context:l})},o.prototype.remove=function(s,a,l){if(!s&&!a&&!l){this._callbacks={};return}var h=s?[ri(s)]:Xr(this._callbacks);a||l?this.removeCallback(h,a,l):this.removeAllCallbacks(h)},o.prototype.removeCallback=function(s,a,l){Se(s,function(h){this._callbacks[h]=Jr(this._callbacks[h]||[],function(f){return a&&a!==f.fn||l&&l!==f.context}),this._callbacks[h].length===0&&delete this._callbacks[h]},this)},o.prototype.removeAllCallbacks=function(s){Se(s,function(a){delete this._callbacks[a]},this)},o}(),Ec=Sc;function ri(o){return"_"+o}var Tc=function(){function o(s){this.callbacks=new Ec,this.global_callbacks=[],this.failThrough=s}return o.prototype.bind=function(s,a,l){return this.callbacks.add(s,a,l),this},o.prototype.bind_global=function(s){return this.global_callbacks.push(s),this},o.prototype.unbind=function(s,a,l){return this.callbacks.remove(s,a,l),this},o.prototype.unbind_global=function(s){return s?(this.global_callbacks=Jr(this.global_callbacks||[],function(a){return a!==s}),this):(this.global_callbacks=[],this)},o.prototype.unbind_all=function(){return this.unbind(),this.unbind_global(),this},o.prototype.emit=function(s,a,l){for(var h=0;h<this.global_callbacks.length;h++)this.global_callbacks[h](s,a);var f=this.callbacks.get(s),b=[];if(l?b.push(a,l):a&&b.push(a),f&&f.length>0)for(var h=0;h<f.length;h++)f[h].fn.apply(f[h].context||window,b);else this.failThrough&&this.failThrough(s,a);return this},o}(),Rt=Tc,Cc=function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var f in h)h.hasOwnProperty(f)&&(l[f]=h[f])},o(s,a)};return function(s,a){o(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}}(),kc=function(o){Cc(s,o);function s(a,l,h,f,b){var _=o.call(this)||this;return _.initialize=H.transportConnectionInitializer,_.hooks=a,_.name=l,_.priority=h,_.key=f,_.options=b,_.state="new",_.timeline=b.timeline,_.activityTimeout=b.activityTimeout,_.id=_.timeline.generateUniqueID(),_}return s.prototype.handlesActivityChecks=function(){return!!this.hooks.handlesActivityChecks},s.prototype.supportsPing=function(){return!!this.hooks.supportsPing},s.prototype.connect=function(){var a=this;if(this.socket||this.state!=="initialized")return!1;var l=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(l,this.options)}catch(h){return nt.defer(function(){a.onError(h),a.changeState("closed")}),!1}return this.bindListeners(),W.debug("Connecting",{transport:this.name,url:l}),this.changeState("connecting"),!0},s.prototype.close=function(){return this.socket?(this.socket.close(),!0):!1},s.prototype.send=function(a){var l=this;return this.state==="open"?(nt.defer(function(){l.socket&&l.socket.send(a)}),!0):!1},s.prototype.ping=function(){this.state==="open"&&this.supportsPing()&&this.socket.ping()},s.prototype.onOpen=function(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0},s.prototype.onError=function(a){this.emit("error",{type:"WebSocketError",error:a}),this.timeline.error(this.buildTimelineMessage({error:a.toString()}))},s.prototype.onClose=function(a){a?this.changeState("closed",{code:a.code,reason:a.reason,wasClean:a.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0},s.prototype.onMessage=function(a){this.emit("message",a)},s.prototype.onActivity=function(){this.emit("activity")},s.prototype.bindListeners=function(){var a=this;this.socket.onopen=function(){a.onOpen()},this.socket.onerror=function(l){a.onError(l)},this.socket.onclose=function(l){a.onClose(l)},this.socket.onmessage=function(l){a.onMessage(l)},this.supportsPing()&&(this.socket.onactivity=function(){a.onActivity()})},s.prototype.unbindListeners=function(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))},s.prototype.changeState=function(a,l){this.state=a,this.timeline.info(this.buildTimelineMessage({state:a,params:l})),this.emit(a,l)},s.prototype.buildTimelineMessage=function(a){return at({cid:this.id},a)},s}(Rt),_c=kc,xc=function(){function o(s){this.hooks=s}return o.prototype.isSupported=function(s){return this.hooks.isSupported(s)},o.prototype.createConnection=function(s,a,l,h){return new _c(this.hooks,s,a,l,h)},o}(),ie=xc,Lc=new ie({urls:bc,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return!!H.getWebSocketAPI()},isSupported:function(){return!!H.getWebSocketAPI()},getSocket:function(o){return H.createWebSocket(o)}}),Zr={urls:yc,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}},ts=at({getSocket:function(o){return H.HTTPFactory.createStreamingSocket(o)}},Zr),es=at({getSocket:function(o){return H.HTTPFactory.createPollingSocket(o)}},Zr),ns={isSupported:function(){return H.isXHRSupported()}},Ac=new ie(at({},ts,ns)),Rc=new ie(at({},es,ns)),Pc={ws:Lc,xhr_streaming:Ac,xhr_polling:Rc},Ve=Pc,Oc=new ie({file:"sockjs",urls:wc,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return window.SockJS!==void 0},getSocket:function(o,s){return new window.SockJS(o,null,{js_path:y.getPath("sockjs",{useTLS:s.useTLS}),ignore_null_origin:s.ignoreNullOrigin})},beforeOpen:function(o,s){o.send(JSON.stringify({path:s}))}}),is={isSupported:function(o){var s=H.isXDRSupported(o.useTLS);return s}},Mc=new ie(at({},ts,is)),Ic=new ie(at({},es,is));Ve.xdr_streaming=Mc,Ve.xdr_polling=Ic,Ve.sockjs=Oc;var Fc=Ve,Dc=function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var f in h)h.hasOwnProperty(f)&&(l[f]=h[f])},o(s,a)};return function(s,a){o(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}}(),Hc=function(o){Dc(s,o);function s(){var a=o.call(this)||this,l=a;return window.addEventListener!==void 0&&(window.addEventListener("online",function(){l.emit("online")},!1),window.addEventListener("offline",function(){l.emit("offline")},!1)),a}return s.prototype.isOnline=function(){return window.navigator.onLine===void 0?!0:window.navigator.onLine},s}(Rt),qc=new Hc,Nc=function(){function o(s,a,l){this.manager=s,this.transport=a,this.minPingDelay=l.minPingDelay,this.maxPingDelay=l.maxPingDelay,this.pingDelay=void 0}return o.prototype.createConnection=function(s,a,l,h){var f=this;h=at({},h,{activityTimeout:this.pingDelay});var b=this.transport.createConnection(s,a,l,h),_=null,M=function(){b.unbind("open",M),b.bind("closed",A),_=nt.now()},A=function(q){if(b.unbind("closed",A),q.code===1002||q.code===1003)f.manager.reportDeath();else if(!q.wasClean&&_){var J=nt.now()-_;J<2*f.maxPingDelay&&(f.manager.reportDeath(),f.pingDelay=Math.max(J/2,f.minPingDelay))}};return b.bind("open",M),b},o.prototype.isSupported=function(s){return this.manager.isAlive()&&this.transport.isSupported(s)},o}(),Bc=Nc,rs={decodeMessage:function(o){try{var s=JSON.parse(o.data),a=s.data;if(typeof a=="string")try{a=JSON.parse(s.data)}catch{}var l={event:s.event,channel:s.channel,data:a};return s.user_id&&(l.user_id=s.user_id),l}catch(h){throw{type:"MessageParseError",error:h,data:o.data}}},encodeMessage:function(o){return JSON.stringify(o)},processHandshake:function(o){var s=rs.decodeMessage(o);if(s.event==="pusher:connection_established"){if(!s.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:s.data.socket_id,activityTimeout:s.data.activity_timeout*1e3}}else{if(s.event==="pusher:error")return{action:this.getCloseAction(s.data),error:this.getCloseError(s.data)};throw"Invalid handshake"}},getCloseAction:function(o){return o.code<4e3?o.code>=1002&&o.code<=1004?"backoff":null:o.code===4e3?"tls_only":o.code<4100?"refused":o.code<4200?"backoff":o.code<4300?"retry":"refused"},getCloseError:function(o){return o.code!==1e3&&o.code!==1001?{type:"PusherError",data:{code:o.code,message:o.reason||o.message}}:null}},$t=rs,jc=function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var f in h)h.hasOwnProperty(f)&&(l[f]=h[f])},o(s,a)};return function(s,a){o(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}}(),Uc=function(o){jc(s,o);function s(a,l){var h=o.call(this)||this;return h.id=a,h.transport=l,h.activityTimeout=l.activityTimeout,h.bindListeners(),h}return s.prototype.handlesActivityChecks=function(){return this.transport.handlesActivityChecks()},s.prototype.send=function(a){return this.transport.send(a)},s.prototype.send_event=function(a,l,h){var f={event:a,data:l};return h&&(f.channel=h),W.debug("Event sent",f),this.send($t.encodeMessage(f))},s.prototype.ping=function(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})},s.prototype.close=function(){this.transport.close()},s.prototype.bindListeners=function(){var a=this,l={message:function(f){var b;try{b=$t.decodeMessage(f)}catch(_){a.emit("error",{type:"MessageParseError",error:_,data:f.data})}if(b!==void 0){switch(W.debug("Event recd",b),b.event){case"pusher:error":a.emit("error",{type:"PusherError",data:b.data});break;case"pusher:ping":a.emit("ping");break;case"pusher:pong":a.emit("pong");break}a.emit("message",b)}},activity:function(){a.emit("activity")},error:function(f){a.emit("error",f)},closed:function(f){h(),f&&f.code&&a.handleCloseEvent(f),a.transport=null,a.emit("closed")}},h=function(){At(l,function(f,b){a.transport.unbind(b,f)})};At(l,function(f,b){a.transport.bind(b,f)})},s.prototype.handleCloseEvent=function(a){var l=$t.getCloseAction(a),h=$t.getCloseError(a);h&&this.emit("error",h),l&&this.emit(l,{action:l,error:h})},s}(Rt),Wc=Uc,$c=function(){function o(s,a){this.transport=s,this.callback=a,this.bindListeners()}return o.prototype.close=function(){this.unbindListeners(),this.transport.close()},o.prototype.bindListeners=function(){var s=this;this.onMessage=function(a){s.unbindListeners();var l;try{l=$t.processHandshake(a)}catch(h){s.finish("error",{error:h}),s.transport.close();return}l.action==="connected"?s.finish("connected",{connection:new Wc(l.id,s.transport),activityTimeout:l.activityTimeout}):(s.finish(l.action,{error:l.error}),s.transport.close())},this.onClosed=function(a){s.unbindListeners();var l=$t.getCloseAction(a)||"backoff",h=$t.getCloseError(a);s.finish(l,{error:h})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)},o.prototype.unbindListeners=function(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)},o.prototype.finish=function(s,a){this.callback(at({transport:this.transport,action:s},a))},o}(),Vc=$c,zc=function(){function o(s,a){this.timeline=s,this.options=a||{}}return o.prototype.send=function(s,a){this.timeline.isEmpty()||this.timeline.send(H.TimelineTransport.getAgent(this,s),a)},o}(),Kc=zc,Xc=function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var f in h)h.hasOwnProperty(f)&&(l[f]=h[f])},o(s,a)};return function(s,a){o(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}}(),Yc=function(o){Xc(s,o);function s(a,l){var h=o.call(this,function(f,b){W.debug("No callbacks on "+a+" for "+f)})||this;return h.name=a,h.pusher=l,h.subscribed=!1,h.subscriptionPending=!1,h.subscriptionCancelled=!1,h}return s.prototype.authorize=function(a,l){return l(null,{auth:""})},s.prototype.trigger=function(a,l){if(a.indexOf("client-")!==0)throw new L("Event '"+a+"' does not start with 'client-'");if(!this.subscribed){var h=C.buildLogSuffix("triggeringClientEvents");W.warn("Client event triggered before channel 'subscription_succeeded' event . "+h)}return this.pusher.send_event(a,l,this.name)},s.prototype.disconnect=function(){this.subscribed=!1,this.subscriptionPending=!1},s.prototype.handleEvent=function(a){var l=a.event,h=a.data;if(l==="pusher_internal:subscription_succeeded")this.handleSubscriptionSucceededEvent(a);else if(l==="pusher_internal:subscription_count")this.handleSubscriptionCountEvent(a);else if(l.indexOf("pusher_internal:")!==0){var f={};this.emit(l,h,f)}},s.prototype.handleSubscriptionSucceededEvent=function(a){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",a.data)},s.prototype.handleSubscriptionCountEvent=function(a){a.data.subscription_count&&(this.subscriptionCount=a.data.subscription_count),this.emit("pusher:subscription_count",a.data)},s.prototype.subscribe=function(){var a=this;this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,function(l,h){l?(a.subscriptionPending=!1,W.error(l.toString()),a.emit("pusher:subscription_error",Object.assign({},{type:"AuthError",error:l.message},l instanceof D?{status:l.status}:{}))):a.pusher.send_event("pusher:subscribe",{auth:h.auth,channel_data:h.channel_data,channel:a.name})}))},s.prototype.unsubscribe=function(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})},s.prototype.cancelSubscription=function(){this.subscriptionCancelled=!0},s.prototype.reinstateSubscription=function(){this.subscriptionCancelled=!1},s}(Rt),si=Yc,Jc=function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var f in h)h.hasOwnProperty(f)&&(l[f]=h[f])},o(s,a)};return function(s,a){o(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}}(),Gc=function(o){Jc(s,o);function s(){return o!==null&&o.apply(this,arguments)||this}return s.prototype.authorize=function(a,l){return this.pusher.config.channelAuthorizer({channelName:this.name,socketId:a},l)},s}(si),oi=Gc,Qc=function(){function o(){this.reset()}return o.prototype.get=function(s){return Object.prototype.hasOwnProperty.call(this.members,s)?{id:s,info:this.members[s]}:null},o.prototype.each=function(s){var a=this;At(this.members,function(l,h){s(a.get(h))})},o.prototype.setMyID=function(s){this.myID=s},o.prototype.onSubscription=function(s){this.members=s.presence.hash,this.count=s.presence.count,this.me=this.get(this.myID)},o.prototype.addMember=function(s){return this.get(s.user_id)===null&&this.count++,this.members[s.user_id]=s.user_info,this.get(s.user_id)},o.prototype.removeMember=function(s){var a=this.get(s.user_id);return a&&(delete this.members[s.user_id],this.count--),a},o.prototype.reset=function(){this.members={},this.count=0,this.myID=null,this.me=null},o}(),Zc=Qc,tl=function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var f in h)h.hasOwnProperty(f)&&(l[f]=h[f])},o(s,a)};return function(s,a){o(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}}(),el=function(o,s,a,l){function h(f){return f instanceof a?f:new a(function(b){b(f)})}return new(a||(a=Promise))(function(f,b){function _(q){try{A(l.next(q))}catch(J){b(J)}}function M(q){try{A(l.throw(q))}catch(J){b(J)}}function A(q){q.done?f(q.value):h(q.value).then(_,M)}A((l=l.apply(o,s||[])).next())})},nl=function(o,s){var a={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},l,h,f,b;return b={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function _(A){return function(q){return M([A,q])}}function M(A){if(l)throw new TypeError("Generator is already executing.");for(;a;)try{if(l=1,h&&(f=A[0]&2?h.return:A[0]?h.throw||((f=h.return)&&f.call(h),0):h.next)&&!(f=f.call(h,A[1])).done)return f;switch(h=0,f&&(A=[A[0]&2,f.value]),A[0]){case 0:case 1:f=A;break;case 4:return a.label++,{value:A[1],done:!1};case 5:a.label++,h=A[1],A=[0];continue;case 7:A=a.ops.pop(),a.trys.pop();continue;default:if(f=a.trys,!(f=f.length>0&&f[f.length-1])&&(A[0]===6||A[0]===2)){a=0;continue}if(A[0]===3&&(!f||A[1]>f[0]&&A[1]<f[3])){a.label=A[1];break}if(A[0]===6&&a.label<f[1]){a.label=f[1],f=A;break}if(f&&a.label<f[2]){a.label=f[2],a.ops.push(A);break}f[2]&&a.ops.pop(),a.trys.pop();continue}A=s.call(o,a)}catch(q){A=[6,q],h=0}finally{l=f=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},il=function(o){tl(s,o);function s(a,l){var h=o.call(this,a,l)||this;return h.members=new Zc,h}return s.prototype.authorize=function(a,l){var h=this;o.prototype.authorize.call(this,a,function(f,b){return el(h,void 0,void 0,function(){var _,M;return nl(this,function(A){switch(A.label){case 0:return f?[3,3]:(b=b,b.channel_data==null?[3,1]:(_=JSON.parse(b.channel_data),this.members.setMyID(_.user_id),[3,3]));case 1:return[4,this.pusher.user.signinDonePromise];case 2:if(A.sent(),this.pusher.user.user_data!=null)this.members.setMyID(this.pusher.user.user_data.id);else return M=C.buildLogSuffix("authorizationEndpoint"),W.error("Invalid auth response for channel '"+this.name+"', "+("expected 'channel_data' field. "+M+", ")+"or the user should be signed in."),l("Invalid auth response"),[2];A.label=3;case 3:return l(f,b),[2]}})})})},s.prototype.handleEvent=function(a){var l=a.event;if(l.indexOf("pusher_internal:")===0)this.handleInternalEvent(a);else{var h=a.data,f={};a.user_id&&(f.user_id=a.user_id),this.emit(l,h,f)}},s.prototype.handleInternalEvent=function(a){var l=a.event,h=a.data;switch(l){case"pusher_internal:subscription_succeeded":this.handleSubscriptionSucceededEvent(a);break;case"pusher_internal:subscription_count":this.handleSubscriptionCountEvent(a);break;case"pusher_internal:member_added":var f=this.members.addMember(h);this.emit("pusher:member_added",f);break;case"pusher_internal:member_removed":var b=this.members.removeMember(h);b&&this.emit("pusher:member_removed",b);break}},s.prototype.handleSubscriptionSucceededEvent=function(a){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(a.data),this.emit("pusher:subscription_succeeded",this.members))},s.prototype.disconnect=function(){this.members.reset(),o.prototype.disconnect.call(this)},s}(oi),rl=il,sl=r(1),ai=r(0),ol=function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var f in h)h.hasOwnProperty(f)&&(l[f]=h[f])},o(s,a)};return function(s,a){o(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}}(),al=function(o){ol(s,o);function s(a,l,h){var f=o.call(this,a,l)||this;return f.key=null,f.nacl=h,f}return s.prototype.authorize=function(a,l){var h=this;o.prototype.authorize.call(this,a,function(f,b){if(f){l(f,b);return}var _=b.shared_secret;if(!_){l(new Error("No shared_secret key in auth payload for encrypted channel: "+h.name),null);return}h.key=Object(ai.decode)(_),delete b.shared_secret,l(null,b)})},s.prototype.trigger=function(a,l){throw new k("Client events are not currently supported for encrypted channels")},s.prototype.handleEvent=function(a){var l=a.event,h=a.data;if(l.indexOf("pusher_internal:")===0||l.indexOf("pusher:")===0){o.prototype.handleEvent.call(this,a);return}this.handleEncryptedEvent(l,h)},s.prototype.handleEncryptedEvent=function(a,l){var h=this;if(!this.key){W.debug("Received encrypted event before key has been retrieved from the authEndpoint");return}if(!l.ciphertext||!l.nonce){W.error("Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: "+l);return}var f=Object(ai.decode)(l.ciphertext);if(f.length<this.nacl.secretbox.overheadLength){W.error("Expected encrypted event ciphertext length to be "+this.nacl.secretbox.overheadLength+", got: "+f.length);return}var b=Object(ai.decode)(l.nonce);if(b.length<this.nacl.secretbox.nonceLength){W.error("Expected encrypted event nonce length to be "+this.nacl.secretbox.nonceLength+", got: "+b.length);return}var _=this.nacl.secretbox.open(f,b,this.key);if(_===null){W.debug("Failed to decrypt an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint..."),this.authorize(this.pusher.connection.socket_id,function(M,A){if(M){W.error("Failed to make a request to the authEndpoint: "+A+". Unable to fetch new key, so dropping encrypted event");return}if(_=h.nacl.secretbox.open(f,b,h.key),_===null){W.error("Failed to decrypt event with new key. Dropping encrypted event");return}h.emit(a,h.getDataToEmit(_))});return}this.emit(a,this.getDataToEmit(_))},s.prototype.getDataToEmit=function(a){var l=Object(sl.decode)(a);try{return JSON.parse(l)}catch{return l}},s}(oi),cl=al,ll=function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var f in h)h.hasOwnProperty(f)&&(l[f]=h[f])},o(s,a)};return function(s,a){o(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}}(),ul=function(o){ll(s,o);function s(a,l){var h=o.call(this)||this;h.state="initialized",h.connection=null,h.key=a,h.options=l,h.timeline=h.options.timeline,h.usingTLS=h.options.useTLS,h.errorCallbacks=h.buildErrorCallbacks(),h.connectionCallbacks=h.buildConnectionCallbacks(h.errorCallbacks),h.handshakeCallbacks=h.buildHandshakeCallbacks(h.errorCallbacks);var f=H.getNetwork();return f.bind("online",function(){h.timeline.info({netinfo:"online"}),(h.state==="connecting"||h.state==="unavailable")&&h.retryIn(0)}),f.bind("offline",function(){h.timeline.info({netinfo:"offline"}),h.connection&&h.sendActivityCheck()}),h.updateStrategy(),h}return s.prototype.connect=function(){if(!(this.connection||this.runner)){if(!this.strategy.isSupported()){this.updateState("failed");return}this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()}},s.prototype.send=function(a){return this.connection?this.connection.send(a):!1},s.prototype.send_event=function(a,l,h){return this.connection?this.connection.send_event(a,l,h):!1},s.prototype.disconnect=function(){this.disconnectInternally(),this.updateState("disconnected")},s.prototype.isUsingTLS=function(){return this.usingTLS},s.prototype.startConnecting=function(){var a=this,l=function(h,f){h?a.runner=a.strategy.connect(0,l):f.action==="error"?(a.emit("error",{type:"HandshakeError",error:f.error}),a.timeline.error({handshakeError:f.error})):(a.abortConnecting(),a.handshakeCallbacks[f.action](f))};this.runner=this.strategy.connect(0,l)},s.prototype.abortConnecting=function(){this.runner&&(this.runner.abort(),this.runner=null)},s.prototype.disconnectInternally=function(){if(this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection){var a=this.abandonConnection();a.close()}},s.prototype.updateStrategy=function(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,useTLS:this.usingTLS})},s.prototype.retryIn=function(a){var l=this;this.timeline.info({action:"retry",delay:a}),a>0&&this.emit("connecting_in",Math.round(a/1e3)),this.retryTimer=new Wt(a||0,function(){l.disconnectInternally(),l.connect()})},s.prototype.clearRetryTimer=function(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)},s.prototype.setUnavailableTimer=function(){var a=this;this.unavailableTimer=new Wt(this.options.unavailableTimeout,function(){a.updateState("unavailable")})},s.prototype.clearUnavailableTimer=function(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()},s.prototype.sendActivityCheck=function(){var a=this;this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new Wt(this.options.pongTimeout,function(){a.timeline.error({pong_timed_out:a.options.pongTimeout}),a.retryIn(0)})},s.prototype.resetActivityCheck=function(){var a=this;this.stopActivityCheck(),this.connection&&!this.connection.handlesActivityChecks()&&(this.activityTimer=new Wt(this.activityTimeout,function(){a.sendActivityCheck()}))},s.prototype.stopActivityCheck=function(){this.activityTimer&&this.activityTimer.ensureAborted()},s.prototype.buildConnectionCallbacks=function(a){var l=this;return at({},a,{message:function(h){l.resetActivityCheck(),l.emit("message",h)},ping:function(){l.send_event("pusher:pong",{})},activity:function(){l.resetActivityCheck()},error:function(h){l.emit("error",h)},closed:function(){l.abandonConnection(),l.shouldRetry()&&l.retryIn(1e3)}})},s.prototype.buildHandshakeCallbacks=function(a){var l=this;return at({},a,{connected:function(h){l.activityTimeout=Math.min(l.options.activityTimeout,h.activityTimeout,h.connection.activityTimeout||1/0),l.clearUnavailableTimer(),l.setConnection(h.connection),l.socket_id=l.connection.id,l.updateState("connected",{socket_id:l.socket_id})}})},s.prototype.buildErrorCallbacks=function(){var a=this,l=function(h){return function(f){f.error&&a.emit("error",{type:"WebSocketError",error:f.error}),h(f)}};return{tls_only:l(function(){a.usingTLS=!0,a.updateStrategy(),a.retryIn(0)}),refused:l(function(){a.disconnect()}),backoff:l(function(){a.retryIn(1e3)}),retry:l(function(){a.retryIn(0)})}},s.prototype.setConnection=function(a){this.connection=a;for(var l in this.connectionCallbacks)this.connection.bind(l,this.connectionCallbacks[l]);this.resetActivityCheck()},s.prototype.abandonConnection=function(){if(this.connection){this.stopActivityCheck();for(var a in this.connectionCallbacks)this.connection.unbind(a,this.connectionCallbacks[a]);var l=this.connection;return this.connection=null,l}},s.prototype.updateState=function(a,l){var h=this.state;if(this.state=a,h!==a){var f=a;f==="connected"&&(f+=" with new socket ID "+l.socket_id),W.debug("State changed",h+" -> "+f),this.timeline.info({state:a,params:l}),this.emit("state_change",{previous:h,current:a}),this.emit(a,l)}},s.prototype.shouldRetry=function(){return this.state==="connecting"||this.state==="connected"},s}(Rt),hl=ul,dl=function(){function o(){this.channels={}}return o.prototype.add=function(s,a){return this.channels[s]||(this.channels[s]=pl(s,a)),this.channels[s]},o.prototype.all=function(){return ec(this.channels)},o.prototype.find=function(s){return this.channels[s]},o.prototype.remove=function(s){var a=this.channels[s];return delete this.channels[s],a},o.prototype.disconnect=function(){At(this.channels,function(s){s.disconnect()})},o}(),fl=dl;function pl(o,s){if(o.indexOf("private-encrypted-")===0){if(s.config.nacl)return Pt.createEncryptedChannel(o,s,s.config.nacl);var a="Tried to subscribe to a private-encrypted- channel but no nacl implementation available",l=C.buildLogSuffix("encryptedChannelSupport");throw new k(a+". "+l)}else{if(o.indexOf("private-")===0)return Pt.createPrivateChannel(o,s);if(o.indexOf("presence-")===0)return Pt.createPresenceChannel(o,s);if(o.indexOf("#")===0)throw new O('Cannot create a channel with name "'+o+'".');return Pt.createChannel(o,s)}}var ml={createChannels:function(){return new fl},createConnectionManager:function(o,s){return new hl(o,s)},createChannel:function(o,s){return new si(o,s)},createPrivateChannel:function(o,s){return new oi(o,s)},createPresenceChannel:function(o,s){return new rl(o,s)},createEncryptedChannel:function(o,s,a){return new cl(o,s,a)},createTimelineSender:function(o,s){return new Kc(o,s)},createHandshake:function(o,s){return new Vc(o,s)},createAssistantToTheTransportManager:function(o,s,a){return new Bc(o,s,a)}},Pt=ml,gl=function(){function o(s){this.options=s||{},this.livesLeft=this.options.lives||1/0}return o.prototype.getAssistant=function(s){return Pt.createAssistantToTheTransportManager(this,s,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})},o.prototype.isAlive=function(){return this.livesLeft>0},o.prototype.reportDeath=function(){this.livesLeft-=1},o}(),ss=gl,vl=function(){function o(s,a){this.strategies=s,this.loop=!!a.loop,this.failFast=!!a.failFast,this.timeout=a.timeout,this.timeoutLimit=a.timeoutLimit}return o.prototype.isSupported=function(){return Qr(this.strategies,nt.method("isSupported"))},o.prototype.connect=function(s,a){var l=this,h=this.strategies,f=0,b=this.timeout,_=null,M=function(A,q){q?a(null,q):(f=f+1,l.loop&&(f=f%h.length),f<h.length?(b&&(b=b*2,l.timeoutLimit&&(b=Math.min(b,l.timeoutLimit))),_=l.tryStrategy(h[f],s,{timeout:b,failFast:l.failFast},M)):a(!0))};return _=this.tryStrategy(h[f],s,{timeout:b,failFast:this.failFast},M),{abort:function(){_.abort()},forceMinPriority:function(A){s=A,_&&_.forceMinPriority(A)}}},o.prototype.tryStrategy=function(s,a,l,h){var f=null,b=null;return l.timeout>0&&(f=new Wt(l.timeout,function(){b.abort(),h(!0)})),b=s.connect(a,function(_,M){_&&f&&f.isRunning()&&!l.failFast||(f&&f.ensureAborted(),h(_,M))}),{abort:function(){f&&f.ensureAborted(),b.abort()},forceMinPriority:function(_){b.forceMinPriority(_)}}},o}(),Vt=vl,bl=function(){function o(s){this.strategies=s}return o.prototype.isSupported=function(){return Qr(this.strategies,nt.method("isSupported"))},o.prototype.connect=function(s,a){return yl(this.strategies,s,function(l,h){return function(f,b){if(h[l].error=f,f){wl(h)&&a(!0);return}Se(h,function(_){_.forceMinPriority(b.transport.priority)}),a(null,b)}})},o}(),ci=bl;function yl(o,s,a){var l=Yr(o,function(h,f,b,_){return h.connect(s,a(f,_))});return{abort:function(){Se(l,Sl)},forceMinPriority:function(h){Se(l,function(f){f.forceMinPriority(h)})}}}function wl(o){return rc(o,function(s){return!!s.error})}function Sl(o){!o.error&&!o.aborted&&(o.abort(),o.aborted=!0)}var El=function(){function o(s,a,l){this.strategy=s,this.transports=a,this.ttl=l.ttl||1800*1e3,this.usingTLS=l.useTLS,this.timeline=l.timeline}return o.prototype.isSupported=function(){return this.strategy.isSupported()},o.prototype.connect=function(s,a){var l=this.usingTLS,h=Cl(l),f=[this.strategy];if(h&&h.timestamp+this.ttl>=nt.now()){var b=this.transports[h.transport];b&&(this.timeline.info({cached:!0,transport:h.transport,latency:h.latency}),f.push(new Vt([b],{timeout:h.latency*2+1e3,failFast:!0})))}var _=nt.now(),M=f.pop().connect(s,function A(q,J){q?(os(l),f.length>0?(_=nt.now(),M=f.pop().connect(s,A)):a(q)):(kl(l,J.transport.name,nt.now()-_),a(null,J))});return{abort:function(){M.abort()},forceMinPriority:function(A){s=A,M&&M.forceMinPriority(A)}}},o}(),Tl=El;function li(o){return"pusherTransport"+(o?"TLS":"NonTLS")}function Cl(o){var s=H.getLocalStorage();if(s)try{var a=s[li(o)];if(a)return JSON.parse(a)}catch{os(o)}return null}function kl(o,s,a){var l=H.getLocalStorage();if(l)try{l[li(o)]=$e({timestamp:nt.now(),transport:s,latency:a})}catch{}}function os(o){var s=H.getLocalStorage();if(s)try{delete s[li(o)]}catch{}}var _l=function(){function o(s,a){var l=a.delay;this.strategy=s,this.options={delay:l}}return o.prototype.isSupported=function(){return this.strategy.isSupported()},o.prototype.connect=function(s,a){var l=this.strategy,h,f=new Wt(this.options.delay,function(){h=l.connect(s,a)});return{abort:function(){f.ensureAborted(),h&&h.abort()},forceMinPriority:function(b){s=b,h&&h.forceMinPriority(b)}}},o}(),ze=_l,xl=function(){function o(s,a,l){this.test=s,this.trueBranch=a,this.falseBranch=l}return o.prototype.isSupported=function(){var s=this.test()?this.trueBranch:this.falseBranch;return s.isSupported()},o.prototype.connect=function(s,a){var l=this.test()?this.trueBranch:this.falseBranch;return l.connect(s,a)},o}(),Ee=xl,Ll=function(){function o(s){this.strategy=s}return o.prototype.isSupported=function(){return this.strategy.isSupported()},o.prototype.connect=function(s,a){var l=this.strategy.connect(s,function(h,f){f&&l.abort(),a(h,f)});return l},o}(),Al=Ll;function Te(o){return function(){return o.isSupported()}}var Rl=function(o,s,a){var l={};function h(ys,Hu,qu,Nu,Bu){var ws=a(o,ys,Hu,qu,Nu,Bu);return l[ys]=ws,ws}var f=Object.assign({},s,{hostNonTLS:o.wsHost+":"+o.wsPort,hostTLS:o.wsHost+":"+o.wssPort,httpPath:o.wsPath}),b=Object.assign({},f,{useTLS:!0}),_=Object.assign({},s,{hostNonTLS:o.httpHost+":"+o.httpPort,hostTLS:o.httpHost+":"+o.httpsPort,httpPath:o.httpPath}),M={loop:!0,timeout:15e3,timeoutLimit:6e4},A=new ss({lives:2,minPingDelay:1e4,maxPingDelay:o.activityTimeout}),q=new ss({lives:2,minPingDelay:1e4,maxPingDelay:o.activityTimeout}),J=h("ws","ws",3,f,A),Ct=h("wss","ws",3,b,A),Ou=h("sockjs","sockjs",1,_),fs=h("xhr_streaming","xhr_streaming",1,_,q),Mu=h("xdr_streaming","xdr_streaming",1,_,q),ps=h("xhr_polling","xhr_polling",1,_),Iu=h("xdr_polling","xdr_polling",1,_),ms=new Vt([J],M),Fu=new Vt([Ct],M),Du=new Vt([Ou],M),gs=new Vt([new Ee(Te(fs),fs,Mu)],M),vs=new Vt([new Ee(Te(ps),ps,Iu)],M),bs=new Vt([new Ee(Te(gs),new ci([gs,new ze(vs,{delay:4e3})]),vs)],M),fi=new Ee(Te(bs),bs,Du),pi;return s.useTLS?pi=new ci([ms,new ze(fi,{delay:2e3})]):pi=new ci([ms,new ze(Fu,{delay:2e3}),new ze(fi,{delay:5e3})]),new Tl(new Al(new Ee(Te(J),pi,fi)),l,{ttl:18e5,timeline:s.timeline,useTLS:s.useTLS})},Pl=Rl,Ol=function(){var o=this;o.timeline.info(o.buildTimelineMessage({transport:o.name+(o.options.useTLS?"s":"")})),o.hooks.isInitialized()?o.changeState("initialized"):o.hooks.file?(o.changeState("initializing"),y.load(o.hooks.file,{useTLS:o.options.useTLS},function(s,a){o.hooks.isInitialized()?(o.changeState("initialized"),a(!0)):(s&&o.onError(s),o.onClose(),a(!1))})):o.onClose()},Ml={getRequest:function(o){var s=new window.XDomainRequest;return s.ontimeout=function(){o.emit("error",new I),o.close()},s.onerror=function(a){o.emit("error",a),o.close()},s.onprogress=function(){s.responseText&&s.responseText.length>0&&o.onChunk(200,s.responseText)},s.onload=function(){s.responseText&&s.responseText.length>0&&o.onChunk(200,s.responseText),o.emit("finished",200),o.close()},s},abortRequest:function(o){o.ontimeout=o.onerror=o.onprogress=o.onload=null,o.abort()}},Il=Ml,Fl=function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var f in h)h.hasOwnProperty(f)&&(l[f]=h[f])},o(s,a)};return function(s,a){o(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}}(),Dl=256*1024,Hl=function(o){Fl(s,o);function s(a,l,h){var f=o.call(this)||this;return f.hooks=a,f.method=l,f.url=h,f}return s.prototype.start=function(a){var l=this;this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=function(){l.close()},H.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(a)},s.prototype.close=function(){this.unloader&&(H.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)},s.prototype.onChunk=function(a,l){for(;;){var h=this.advanceBuffer(l);if(h)this.emit("chunk",{status:a,data:h});else break}this.isBufferTooLong(l)&&this.emit("buffer_too_long")},s.prototype.advanceBuffer=function(a){var l=a.slice(this.position),h=l.indexOf(`
`);return h!==-1?(this.position+=h+1,l.slice(0,h)):null},s.prototype.isBufferTooLong=function(a){return this.position===a.length&&a.length>Dl},s}(Rt),ql=Hl,ui;(function(o){o[o.CONNECTING=0]="CONNECTING",o[o.OPEN=1]="OPEN",o[o.CLOSED=3]="CLOSED"})(ui||(ui={}));var zt=ui,Nl=1,Bl=function(){function o(s,a){this.hooks=s,this.session=cs(1e3)+"/"+$l(8),this.location=jl(a),this.readyState=zt.CONNECTING,this.openStream()}return o.prototype.send=function(s){return this.sendRaw(JSON.stringify([s]))},o.prototype.ping=function(){this.hooks.sendHeartbeat(this)},o.prototype.close=function(s,a){this.onClose(s,a,!0)},o.prototype.sendRaw=function(s){if(this.readyState===zt.OPEN)try{return H.createSocketRequest("POST",as(Ul(this.location,this.session))).start(s),!0}catch{return!1}else return!1},o.prototype.reconnect=function(){this.closeStream(),this.openStream()},o.prototype.onClose=function(s,a,l){this.closeStream(),this.readyState=zt.CLOSED,this.onclose&&this.onclose({code:s,reason:a,wasClean:l})},o.prototype.onChunk=function(s){if(s.status===200){this.readyState===zt.OPEN&&this.onActivity();var a,l=s.data.slice(0,1);switch(l){case"o":a=JSON.parse(s.data.slice(1)||"{}"),this.onOpen(a);break;case"a":a=JSON.parse(s.data.slice(1)||"[]");for(var h=0;h<a.length;h++)this.onEvent(a[h]);break;case"m":a=JSON.parse(s.data.slice(1)||"null"),this.onEvent(a);break;case"h":this.hooks.onHeartbeat(this);break;case"c":a=JSON.parse(s.data.slice(1)||"[]"),this.onClose(a[0],a[1],!0);break}}},o.prototype.onOpen=function(s){this.readyState===zt.CONNECTING?(s&&s.hostname&&(this.location.base=Wl(this.location.base,s.hostname)),this.readyState=zt.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)},o.prototype.onEvent=function(s){this.readyState===zt.OPEN&&this.onmessage&&this.onmessage({data:s})},o.prototype.onActivity=function(){this.onactivity&&this.onactivity()},o.prototype.onError=function(s){this.onerror&&this.onerror(s)},o.prototype.openStream=function(){var s=this;this.stream=H.createSocketRequest("POST",as(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",function(a){s.onChunk(a)}),this.stream.bind("finished",function(a){s.hooks.onFinished(s,a)}),this.stream.bind("buffer_too_long",function(){s.reconnect()});try{this.stream.start()}catch(a){nt.defer(function(){s.onError(a),s.onClose(1006,"Could not start streaming",!1)})}},o.prototype.closeStream=function(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)},o}();function jl(o){var s=/([^\?]*)\/*(\??.*)/.exec(o);return{base:s[1],queryString:s[2]}}function Ul(o,s){return o.base+"/"+s+"/xhr_send"}function as(o){var s=o.indexOf("?")===-1?"?":"&";return o+s+"t="+ +new Date+"&n="+Nl++}function Wl(o,s){var a=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(o);return a[1]+s+a[3]}function cs(o){return H.randomInt(o)}function $l(o){for(var s=[],a=0;a<o;a++)s.push(cs(32).toString(32));return s.join("")}var Vl=Bl,zl={getReceiveURL:function(o,s){return o.base+"/"+s+"/xhr_streaming"+o.queryString},onHeartbeat:function(o){o.sendRaw("[]")},sendHeartbeat:function(o){o.sendRaw("[]")},onFinished:function(o,s){o.onClose(1006,"Connection interrupted ("+s+")",!1)}},Kl=zl,Xl={getReceiveURL:function(o,s){return o.base+"/"+s+"/xhr"+o.queryString},onHeartbeat:function(){},sendHeartbeat:function(o){o.sendRaw("[]")},onFinished:function(o,s){s===200?o.reconnect():o.onClose(1006,"Connection interrupted ("+s+")",!1)}},Yl=Xl,Jl={getRequest:function(o){var s=H.getXHRAPI(),a=new s;return a.onreadystatechange=a.onprogress=function(){switch(a.readyState){case 3:a.responseText&&a.responseText.length>0&&o.onChunk(a.status,a.responseText);break;case 4:a.responseText&&a.responseText.length>0&&o.onChunk(a.status,a.responseText),o.emit("finished",a.status),o.close();break}},a},abortRequest:function(o){o.onreadystatechange=null,o.abort()}},Gl=Jl,Ql={createStreamingSocket:function(o){return this.createSocket(Kl,o)},createPollingSocket:function(o){return this.createSocket(Yl,o)},createSocket:function(o,s){return new Vl(o,s)},createXHR:function(o,s){return this.createRequest(Gl,o,s)},createRequest:function(o,s,a){return new ql(o,s,a)}},ls=Ql;ls.createXDR=function(o,s){return this.createRequest(Il,o,s)};var Zl=ls,tu={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:u,DependenciesReceivers:v,getDefaultStrategy:Pl,Transports:Fc,transportConnectionInitializer:Ol,HTTPFactory:Zl,TimelineTransport:vc,getXHRAPI:function(){return window.XMLHttpRequest},getWebSocketAPI:function(){return window.WebSocket||window.MozWebSocket},setup:function(o){var s=this;window.Pusher=o;var a=function(){s.onDocumentBody(o.ready)};window.JSON?a():y.load("json2",{},a)},getDocument:function(){return document},getProtocol:function(){return this.getDocument().location.protocol},getAuthorizers:function(){return{ajax:Y,jsonp:uc}},onDocumentBody:function(o){var s=this;document.body?o():setTimeout(function(){s.onDocumentBody(o)},0)},createJSONPRequest:function(o,s){return new pc(o,s)},createScriptRequest:function(o){return new dc(o)},getLocalStorage:function(){try{return window.localStorage}catch{return}},createXHR:function(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest:function(){var o=this.getXHRAPI();return new o},createMicrosoftXHR:function(){return new ActiveXObject("Microsoft.XMLHTTP")},getNetwork:function(){return qc},createWebSocket:function(o){var s=this.getWebSocketAPI();return new s(o)},createSocketRequest:function(o,s){if(this.isXHRSupported())return this.HTTPFactory.createXHR(o,s);if(this.isXDRSupported(s.indexOf("https:")===0))return this.HTTPFactory.createXDR(o,s);throw"Cross-origin HTTP requests are not supported"},isXHRSupported:function(){var o=this.getXHRAPI();return!!o&&new o().withCredentials!==void 0},isXDRSupported:function(o){var s=o?"https:":"http:",a=this.getProtocol();return!!window.XDomainRequest&&a===s},addUnloadListener:function(o){window.addEventListener!==void 0?window.addEventListener("unload",o,!1):window.attachEvent!==void 0&&window.attachEvent("onunload",o)},removeUnloadListener:function(o){window.addEventListener!==void 0?window.removeEventListener("unload",o,!1):window.detachEvent!==void 0&&window.detachEvent("onunload",o)},randomInt:function(o){var s=function(){var a=window.crypto||window.msCrypto,l=a.getRandomValues(new Uint32Array(1))[0];return l/Math.pow(2,32)};return Math.floor(s()*o)}},H=tu,hi;(function(o){o[o.ERROR=3]="ERROR",o[o.INFO=6]="INFO",o[o.DEBUG=7]="DEBUG"})(hi||(hi={}));var Ke=hi,eu=function(){function o(s,a,l){this.key=s,this.session=a,this.events=[],this.options=l||{},this.sent=0,this.uniqueID=0}return o.prototype.log=function(s,a){s<=this.options.level&&(this.events.push(at({},a,{timestamp:nt.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())},o.prototype.error=function(s){this.log(Ke.ERROR,s)},o.prototype.info=function(s){this.log(Ke.INFO,s)},o.prototype.debug=function(s){this.log(Ke.DEBUG,s)},o.prototype.isEmpty=function(){return this.events.length===0},o.prototype.send=function(s,a){var l=this,h=at({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],s(h,function(f,b){f||l.sent++,a&&a(f,b)}),!0},o.prototype.generateUniqueID=function(){return this.uniqueID++,this.uniqueID},o}(),nu=eu,iu=function(){function o(s,a,l,h){this.name=s,this.priority=a,this.transport=l,this.options=h||{}}return o.prototype.isSupported=function(){return this.transport.isSupported({useTLS:this.options.useTLS})},o.prototype.connect=function(s,a){var l=this;if(this.isSupported()){if(this.priority<s)return us(new P,a)}else return us(new F,a);var h=!1,f=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),b=null,_=function(){f.unbind("initialized",_),f.connect()},M=function(){b=Pt.createHandshake(f,function(Ct){h=!0,J(),a(null,Ct)})},A=function(Ct){J(),a(Ct)},q=function(){J();var Ct;Ct=$e(f),a(new T(Ct))},J=function(){f.unbind("initialized",_),f.unbind("open",M),f.unbind("error",A),f.unbind("closed",q)};return f.bind("initialized",_),f.bind("open",M),f.bind("error",A),f.bind("closed",q),f.initialize(),{abort:function(){h||(J(),b?b.close():f.close())},forceMinPriority:function(Ct){h||l.priority<Ct&&(b?b.close():f.close())}}},o}(),ru=iu;function us(o,s){return nt.defer(function(){s(o)}),{abort:function(){},forceMinPriority:function(){}}}var su=H.Transports,ou=function(o,s,a,l,h,f){var b=su[a];if(!b)throw new R(a);var _=(!o.enabledTransports||Kr(o.enabledTransports,s)!==-1)&&(!o.disabledTransports||Kr(o.disabledTransports,s)===-1),M;return _?(h=Object.assign({ignoreNullOrigin:o.ignoreNullOrigin},h),M=new ru(s,l,f?f.getAssistant(b):b,h)):M=au,M},au={isSupported:function(){return!1},connect:function(o,s){var a=nt.defer(function(){s(new F)});return{abort:function(){a.ensureAborted()},forceMinPriority:function(){}}}},cu=function(o,s){var a="socket_id="+encodeURIComponent(o.socketId);for(var l in s.params)a+="&"+encodeURIComponent(l)+"="+encodeURIComponent(s.params[l]);if(s.paramsProvider!=null){var h=s.paramsProvider();for(var l in h)a+="&"+encodeURIComponent(l)+"="+encodeURIComponent(h[l])}return a},lu=function(o){if(typeof H.getAuthorizers()[o.transport]>"u")throw"'"+o.transport+"' is not a recognized auth transport";return function(s,a){var l=cu(s,o);H.getAuthorizers()[o.transport](H,l,o,w.UserAuthentication,a)}},uu=lu,hu=function(o,s){var a="socket_id="+encodeURIComponent(o.socketId);a+="&channel_name="+encodeURIComponent(o.channelName);for(var l in s.params)a+="&"+encodeURIComponent(l)+"="+encodeURIComponent(s.params[l]);if(s.paramsProvider!=null){var h=s.paramsProvider();for(var l in h)a+="&"+encodeURIComponent(l)+"="+encodeURIComponent(h[l])}return a},du=function(o){if(typeof H.getAuthorizers()[o.transport]>"u")throw"'"+o.transport+"' is not a recognized auth transport";return function(s,a){var l=hu(s,o);H.getAuthorizers()[o.transport](H,l,o,w.ChannelAuthorization,a)}},fu=du,pu=function(o,s,a){var l={authTransport:s.transport,authEndpoint:s.endpoint,auth:{params:s.params,headers:s.headers}};return function(h,f){var b=o.channel(h.channelName),_=a(b,l);_.authorize(h.socketId,f)}},re=function(){return re=Object.assign||function(o){for(var s,a=1,l=arguments.length;a<l;a++){s=arguments[a];for(var h in s)Object.prototype.hasOwnProperty.call(s,h)&&(o[h]=s[h])}return o},re.apply(this,arguments)};function mu(o,s){var a={activityTimeout:o.activityTimeout||p.activityTimeout,cluster:o.cluster||p.cluster,httpPath:o.httpPath||p.httpPath,httpPort:o.httpPort||p.httpPort,httpsPort:o.httpsPort||p.httpsPort,pongTimeout:o.pongTimeout||p.pongTimeout,statsHost:o.statsHost||p.stats_host,unavailableTimeout:o.unavailableTimeout||p.unavailableTimeout,wsPath:o.wsPath||p.wsPath,wsPort:o.wsPort||p.wsPort,wssPort:o.wssPort||p.wssPort,enableStats:yu(o),httpHost:gu(o),useTLS:bu(o),wsHost:vu(o),userAuthenticator:wu(o),channelAuthorizer:Eu(o,s)};return"disabledTransports"in o&&(a.disabledTransports=o.disabledTransports),"enabledTransports"in o&&(a.enabledTransports=o.enabledTransports),"ignoreNullOrigin"in o&&(a.ignoreNullOrigin=o.ignoreNullOrigin),"timelineParams"in o&&(a.timelineParams=o.timelineParams),"nacl"in o&&(a.nacl=o.nacl),a}function gu(o){return o.httpHost?o.httpHost:o.cluster?"sockjs-"+o.cluster+".pusher.com":p.httpHost}function vu(o){return o.wsHost?o.wsHost:o.cluster?hs(o.cluster):hs(p.cluster)}function hs(o){return"ws-"+o+".pusher.com"}function bu(o){return H.getProtocol()==="https:"?!0:o.forceTLS!==!1}function yu(o){return"enableStats"in o?o.enableStats:"disableStats"in o?!o.disableStats:!1}function wu(o){var s=re(re({},p.userAuthentication),o.userAuthentication);return"customHandler"in s&&s.customHandler!=null?s.customHandler:uu(s)}function Su(o,s){var a;return"channelAuthorization"in o?a=re(re({},p.channelAuthorization),o.channelAuthorization):(a={transport:o.authTransport||p.authTransport,endpoint:o.authEndpoint||p.authEndpoint},"auth"in o&&("params"in o.auth&&(a.params=o.auth.params),"headers"in o.auth&&(a.headers=o.auth.headers)),"authorizer"in o&&(a.customHandler=pu(s,a,o.authorizer))),a}function Eu(o,s){var a=Su(o,s);return"customHandler"in a&&a.customHandler!=null?a.customHandler:fu(a)}var Tu=function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var f in h)h.hasOwnProperty(f)&&(l[f]=h[f])},o(s,a)};return function(s,a){o(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}}(),Cu=function(o){Tu(s,o);function s(a){var l=o.call(this,function(h,f){W.debug("No callbacks on watchlist events for "+h)})||this;return l.pusher=a,l.bindWatchlistInternalEvent(),l}return s.prototype.handleEvent=function(a){var l=this;a.data.events.forEach(function(h){l.emit(h.name,h)})},s.prototype.bindWatchlistInternalEvent=function(){var a=this;this.pusher.connection.bind("message",function(l){var h=l.event;h==="pusher_internal:watchlist_events"&&a.handleEvent(l)})},s}(Rt),ku=Cu;function _u(){var o,s,a=new Promise(function(l,h){o=l,s=h});return{promise:a,resolve:o,reject:s}}var xu=_u,Lu=function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var f in h)h.hasOwnProperty(f)&&(l[f]=h[f])},o(s,a)};return function(s,a){o(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}}(),Au=function(o){Lu(s,o);function s(a){var l=o.call(this,function(h,f){W.debug("No callbacks on user for "+h)})||this;return l.signin_requested=!1,l.user_data=null,l.serverToUserChannel=null,l.signinDonePromise=null,l._signinDoneResolve=null,l._onAuthorize=function(h,f){if(h){W.warn("Error during signin: "+h),l._cleanup();return}l.pusher.send_event("pusher:signin",{auth:f.auth,user_data:f.user_data})},l.pusher=a,l.pusher.connection.bind("state_change",function(h){var f=h.previous,b=h.current;f!=="connected"&&b==="connected"&&l._signin(),f==="connected"&&b!=="connected"&&(l._cleanup(),l._newSigninPromiseIfNeeded())}),l.watchlist=new ku(a),l.pusher.connection.bind("message",function(h){var f=h.event;f==="pusher:signin_success"&&l._onSigninSuccess(h.data),l.serverToUserChannel&&l.serverToUserChannel.name===h.channel&&l.serverToUserChannel.handleEvent(h)}),l}return s.prototype.signin=function(){this.signin_requested||(this.signin_requested=!0,this._signin())},s.prototype._signin=function(){this.signin_requested&&(this._newSigninPromiseIfNeeded(),this.pusher.connection.state==="connected"&&this.pusher.config.userAuthenticator({socketId:this.pusher.connection.socket_id},this._onAuthorize))},s.prototype._onSigninSuccess=function(a){try{this.user_data=JSON.parse(a.user_data)}catch{W.error("Failed parsing user data after signin: "+a.user_data),this._cleanup();return}if(typeof this.user_data.id!="string"||this.user_data.id===""){W.error("user_data doesn't contain an id. user_data: "+this.user_data),this._cleanup();return}this._signinDoneResolve(),this._subscribeChannels()},s.prototype._subscribeChannels=function(){var a=this,l=function(h){h.subscriptionPending&&h.subscriptionCancelled?h.reinstateSubscription():!h.subscriptionPending&&a.pusher.connection.state==="connected"&&h.subscribe()};this.serverToUserChannel=new si("#server-to-user-"+this.user_data.id,this.pusher),this.serverToUserChannel.bind_global(function(h,f){h.indexOf("pusher_internal:")===0||h.indexOf("pusher:")===0||a.emit(h,f)}),l(this.serverToUserChannel)},s.prototype._cleanup=function(){this.user_data=null,this.serverToUserChannel&&(this.serverToUserChannel.unbind_all(),this.serverToUserChannel.disconnect(),this.serverToUserChannel=null),this.signin_requested&&this._signinDoneResolve()},s.prototype._newSigninPromiseIfNeeded=function(){if(this.signin_requested&&!(this.signinDonePromise&&!this.signinDonePromise.done)){var a=xu(),l=a.promise,h=a.resolve;l.done=!1;var f=function(){l.done=!0};l.then(f).catch(f),this.signinDonePromise=l,this._signinDoneResolve=h}},s}(Rt),Ru=Au,ds=function(){function o(s,a){var l=this;if(Pu(s),a=a||{},!a.cluster&&!(a.wsHost||a.httpHost)){var h=C.buildLogSuffix("javascriptQuickStart");W.warn("You should always specify a cluster when connecting. "+h)}"disableStats"in a&&W.warn("The disableStats option is deprecated in favor of enableStats"),this.key=s,this.config=mu(a,this),this.channels=Pt.createChannels(),this.global_emitter=new Rt,this.sessionID=H.randomInt(1e9),this.timeline=new nu(this.key,this.sessionID,{cluster:this.config.cluster,features:o.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:Ke.INFO,version:p.VERSION}),this.config.enableStats&&(this.timelineSender=Pt.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+H.TimelineTransport.name}));var f=function(b){return H.getDefaultStrategy(l.config,b,ou)};this.connection=Pt.createConnectionManager(this.key,{getStrategy:f,timeline:this.timeline,activityTimeout:this.config.activityTimeout,pongTimeout:this.config.pongTimeout,unavailableTimeout:this.config.unavailableTimeout,useTLS:!!this.config.useTLS}),this.connection.bind("connected",function(){l.subscribeAll(),l.timelineSender&&l.timelineSender.send(l.connection.isUsingTLS())}),this.connection.bind("message",function(b){var _=b.event,M=_.indexOf("pusher_internal:")===0;if(b.channel){var A=l.channel(b.channel);A&&A.handleEvent(b)}M||l.global_emitter.emit(b.event,b.data)}),this.connection.bind("connecting",function(){l.channels.disconnect()}),this.connection.bind("disconnected",function(){l.channels.disconnect()}),this.connection.bind("error",function(b){W.warn(b)}),o.instances.push(this),this.timeline.info({instances:o.instances.length}),this.user=new Ru(this),o.isReady&&this.connect()}return o.ready=function(){o.isReady=!0;for(var s=0,a=o.instances.length;s<a;s++)o.instances[s].connect()},o.getClientFeatures=function(){return Xr(Gr({ws:H.Transports.ws},function(s){return s.isSupported({})}))},o.prototype.channel=function(s){return this.channels.find(s)},o.prototype.allChannels=function(){return this.channels.all()},o.prototype.connect=function(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var s=this.connection.isUsingTLS(),a=this.timelineSender;this.timelineSenderTimer=new Qa(6e4,function(){a.send(s)})}},o.prototype.disconnect=function(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)},o.prototype.bind=function(s,a,l){return this.global_emitter.bind(s,a,l),this},o.prototype.unbind=function(s,a,l){return this.global_emitter.unbind(s,a,l),this},o.prototype.bind_global=function(s){return this.global_emitter.bind_global(s),this},o.prototype.unbind_global=function(s){return this.global_emitter.unbind_global(s),this},o.prototype.unbind_all=function(s){return this.global_emitter.unbind_all(),this},o.prototype.subscribeAll=function(){var s;for(s in this.channels.channels)this.channels.channels.hasOwnProperty(s)&&this.subscribe(s)},o.prototype.subscribe=function(s){var a=this.channels.add(s,this);return a.subscriptionPending&&a.subscriptionCancelled?a.reinstateSubscription():!a.subscriptionPending&&this.connection.state==="connected"&&a.subscribe(),a},o.prototype.unsubscribe=function(s){var a=this.channels.find(s);a&&a.subscriptionPending?a.cancelSubscription():(a=this.channels.remove(s),a&&a.subscribed&&a.unsubscribe())},o.prototype.send_event=function(s,a,l){return this.connection.send_event(s,a,l)},o.prototype.shouldUseTLS=function(){return this.config.useTLS},o.prototype.signin=function(){this.user.signin()},o.instances=[],o.isReady=!1,o.logToConsole=!1,o.Runtime=H,o.ScriptReceivers=H.ScriptReceivers,o.DependenciesReceivers=H.DependenciesReceivers,o.auth_callbacks=H.auth_callbacks,o}(),di=i.default=ds;function Pu(o){if(o==null)throw"You must pass your app key when you instantiate Pusher."}H.setup(ds)}])})})(na);var sf=na.exports;const of=lo(sf);(function(){if(window.Reflect===void 0||window.customElements===void 0||window.customElements.polyfillWrapFlushCallback)return;const n=HTMLElement,t={HTMLElement:function(){return Reflect.construct(n,[],this.constructor)}};window.HTMLElement=t.HTMLElement,HTMLElement.prototype=n.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,n)})();(function(n){if(typeof n.requestSubmit=="function")return;n.requestSubmit=function(i){i?(t(i,this),i.click()):(i=document.createElement("input"),i.type="submit",i.hidden=!0,this.appendChild(i),i.click(),this.removeChild(i))};function t(i,r){i instanceof HTMLElement||e(TypeError,"parameter 1 is not of type 'HTMLElement'"),i.type=="submit"||e(TypeError,"The specified element is not a submit button"),i.form==r||e(DOMException,"The specified element is not owned by this form element","NotFoundError")}function e(i,r,c){throw new i("Failed to execute 'requestSubmit' on 'HTMLFormElement': "+r+".",c)}})(HTMLFormElement.prototype);const ia=new WeakMap;function af(n){const t=n instanceof Element?n:n instanceof Node?n.parentElement:null,e=t?t.closest("input, button"):null;return(e==null?void 0:e.type)=="submit"?e:null}function cf(n){const t=af(n.target);t&&t.form&&ia.set(t.form,t)}(function(){if("submitter"in Event.prototype)return;let n=window.Event.prototype;if("SubmitEvent"in window&&/Apple Computer/.test(navigator.vendor))n=window.SubmitEvent.prototype;else if("SubmitEvent"in window)return;addEventListener("click",cf,!0),Object.defineProperty(n,"submitter",{get(){if(this.type=="submit"&&this.target instanceof HTMLFormElement)return ia.get(this.target)}})})();var Dt;(function(n){n.eager="eager",n.lazy="lazy"})(Dt||(Dt={}));class Tt extends HTMLElement{static get observedAttributes(){return["disabled","complete","loading","src"]}constructor(){super(),this.loaded=Promise.resolve(),this.delegate=new Tt.delegateConstructor(this)}connectedCallback(){this.delegate.connect()}disconnectedCallback(){this.delegate.disconnect()}reload(){return this.delegate.sourceURLReloaded()}attributeChangedCallback(t){t=="loading"?this.delegate.loadingStyleChanged():t=="complete"?this.delegate.completeChanged():t=="src"?this.delegate.sourceURLChanged():this.delegate.disabledChanged()}get src(){return this.getAttribute("src")}set src(t){t?this.setAttribute("src",t):this.removeAttribute("src")}get loading(){return lf(this.getAttribute("loading")||"")}set loading(t){t?this.setAttribute("loading",t):this.removeAttribute("loading")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get autoscroll(){return this.hasAttribute("autoscroll")}set autoscroll(t){t?this.setAttribute("autoscroll",""):this.removeAttribute("autoscroll")}get complete(){return!this.delegate.isLoading}get isActive(){return this.ownerDocument===document&&!this.isPreview}get isPreview(){var t,e;return(e=(t=this.ownerDocument)===null||t===void 0?void 0:t.documentElement)===null||e===void 0?void 0:e.hasAttribute("data-turbo-preview")}}function lf(n){switch(n.toLowerCase()){case"lazy":return Dt.lazy;default:return Dt.eager}}function rt(n){return new URL(n.toString(),document.baseURI)}function Yt(n){let t;if(n.hash)return n.hash.slice(1);if(t=n.href.match(/#(.*)$/))return t[1]}function wr(n,t){const e=(t==null?void 0:t.getAttribute("formaction"))||n.getAttribute("action")||n.action;return rt(e)}function uf(n){return(mf(n).match(/\.[^.]*$/)||[])[0]||""}function hf(n){return!!uf(n).match(/^(?:|\.(?:htm|html|xhtml|php))$/)}function df(n,t){const e=gf(t);return n.href===rt(e).href||n.href.startsWith(e)}function ue(n,t){return df(n,t)&&hf(n)}function Di(n){const t=Yt(n);return t!=null?n.href.slice(0,-(t.length+1)):n.href}function tn(n){return Di(n)}function ff(n,t){return rt(n).href==rt(t).href}function pf(n){return n.pathname.split("/").slice(1)}function mf(n){return pf(n).slice(-1)[0]}function gf(n){return vf(n.origin+n.pathname)}function vf(n){return n.endsWith("/")?n:n+"/"}class Sr{constructor(t){this.response=t}get succeeded(){return this.response.ok}get failed(){return!this.succeeded}get clientError(){return this.statusCode>=400&&this.statusCode<=499}get serverError(){return this.statusCode>=500&&this.statusCode<=599}get redirected(){return this.response.redirected}get location(){return rt(this.response.url)}get isHTML(){return this.contentType&&this.contentType.match(/^(?:text\/([^\s;,]+\b)?html|application\/xhtml\+xml)\b/)}get statusCode(){return this.response.status}get contentType(){return this.header("Content-Type")}get responseText(){return this.response.clone().text()}get responseHTML(){return this.isHTML?this.response.clone().text():Promise.resolve(void 0)}header(t){return this.response.headers.get(t)}}function Ie(n){if(n.getAttribute("data-turbo-eval")=="false")return n;{const t=document.createElement("script"),e=On("csp-nonce");return e&&(t.nonce=e),t.textContent=n.textContent,t.async=!1,bf(t,n),t}}function bf(n,t){for(const{name:e,value:i}of t.attributes)n.setAttribute(e,i)}function yf(n){const t=document.createElement("template");return t.innerHTML=n,t.content}function et(n,{target:t,cancelable:e,detail:i}={}){const r=new CustomEvent(n,{cancelable:e,bubbles:!0,composed:!0,detail:i});return t&&t.isConnected?t.dispatchEvent(r):document.documentElement.dispatchEvent(r),r}function vn(){return new Promise(n=>requestAnimationFrame(()=>n()))}function wf(){return new Promise(n=>setTimeout(()=>n(),0))}function Sf(){return Promise.resolve()}function ra(n=""){return new DOMParser().parseFromString(n,"text/html")}function sa(n,...t){const e=Ef(n,t).replace(/^\n/,"").split(`
`),i=e[0].match(/^\s+/),r=i?i[0].length:0;return e.map(c=>c.slice(r)).join(`
`)}function Ef(n,t){return n.reduce((e,i,r)=>{const c=t[r]==null?"":t[r];return e+i+c},"")}function ye(){return Array.from({length:36}).map((n,t)=>t==8||t==13||t==18||t==23?"-":t==14?"4":t==19?(Math.floor(Math.random()*4)+8).toString(16):Math.floor(Math.random()*15).toString(16)).join("")}function Pn(n,...t){for(const e of t.map(i=>i==null?void 0:i.getAttribute(n)))if(typeof e=="string")return e;return null}function Tf(n,...t){return t.some(e=>e&&e.hasAttribute(n))}function Hi(...n){for(const t of n)t.localName=="turbo-frame"&&t.setAttribute("busy",""),t.setAttribute("aria-busy","true")}function qi(...n){for(const t of n)t.localName=="turbo-frame"&&t.removeAttribute("busy"),t.removeAttribute("aria-busy")}function Cf(n,t=2e3){return new Promise(e=>{const i=()=>{n.removeEventListener("error",i),n.removeEventListener("load",i),e()};n.addEventListener("load",i,{once:!0}),n.addEventListener("error",i,{once:!0}),setTimeout(e,t)})}function oa(n){switch(n){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}function kf(n){return n=="advance"||n=="replace"||n=="restore"}function Xn(...n){const t=Pn("data-turbo-action",...n);return kf(t)?t:null}function aa(n){return document.querySelector(`meta[name="${n}"]`)}function On(n){const t=aa(n);return t&&t.content}function _f(n,t){let e=aa(n);return e||(e=document.createElement("meta"),e.setAttribute("name",n),document.head.appendChild(e)),e.setAttribute("content",t),e}function Mn(n,t){var e;if(n instanceof Element)return n.closest(t)||Mn(n.assignedSlot||((e=n.getRootNode())===null||e===void 0?void 0:e.host),t)}var ct;(function(n){n[n.get=0]="get",n[n.post=1]="post",n[n.put=2]="put",n[n.patch=3]="patch",n[n.delete=4]="delete"})(ct||(ct={}));function xf(n){switch(n.toLowerCase()){case"get":return ct.get;case"post":return ct.post;case"put":return ct.put;case"patch":return ct.patch;case"delete":return ct.delete}}class Er{constructor(t,e,i,r=new URLSearchParams,c=null){this.abortController=new AbortController,this.resolveRequestPromise=u=>{},this.delegate=t,this.method=e,this.headers=this.defaultHeaders,this.body=r,this.url=i,this.target=c}get location(){return this.url}get params(){return this.url.searchParams}get entries(){return this.body?Array.from(this.body.entries()):[]}cancel(){this.abortController.abort()}async perform(){const{fetchOptions:t}=this;this.delegate.prepareRequest(this),await this.allowRequestToBeIntercepted(t);try{this.delegate.requestStarted(this);const e=await fetch(this.url.href,t);return await this.receive(e)}catch(e){if(e.name!=="AbortError")throw this.willDelegateErrorHandling(e)&&this.delegate.requestErrored(this,e),e}finally{this.delegate.requestFinished(this)}}async receive(t){const e=new Sr(t);return et("turbo:before-fetch-response",{cancelable:!0,detail:{fetchResponse:e},target:this.target}).defaultPrevented?this.delegate.requestPreventedHandlingResponse(this,e):e.succeeded?this.delegate.requestSucceededWithResponse(this,e):this.delegate.requestFailedWithResponse(this,e),e}get fetchOptions(){var t;return{method:ct[this.method].toUpperCase(),credentials:"same-origin",headers:this.headers,redirect:"follow",body:this.isSafe?null:this.body,signal:this.abortSignal,referrer:(t=this.delegate.referrer)===null||t===void 0?void 0:t.href}}get defaultHeaders(){return{Accept:"text/html, application/xhtml+xml"}}get isSafe(){return this.method===ct.get}get abortSignal(){return this.abortController.signal}acceptResponseType(t){this.headers.Accept=[t,this.headers.Accept].join(", ")}async allowRequestToBeIntercepted(t){const e=new Promise(r=>this.resolveRequestPromise=r);et("turbo:before-fetch-request",{cancelable:!0,detail:{fetchOptions:t,url:this.url,resume:this.resolveRequestPromise},target:this.target}).defaultPrevented&&await e}willDelegateErrorHandling(t){return!et("turbo:fetch-request-error",{target:this.target,cancelable:!0,detail:{request:this,error:t}}).defaultPrevented}}class Lf{constructor(t,e){this.started=!1,this.intersect=i=>{const r=i.slice(-1)[0];r!=null&&r.isIntersecting&&this.delegate.elementAppearedInViewport(this.element)},this.delegate=t,this.element=e,this.intersectionObserver=new IntersectionObserver(this.intersect)}start(){this.started||(this.started=!0,this.intersectionObserver.observe(this.element))}stop(){this.started&&(this.started=!1,this.intersectionObserver.unobserve(this.element))}}class te{static wrap(t){return typeof t=="string"?new this(yf(t)):t}constructor(t){this.fragment=Af(t)}}te.contentType="text/vnd.turbo-stream.html";function Af(n){for(const t of n.querySelectorAll("turbo-stream")){const e=document.importNode(t,!0);for(const i of e.templateElement.content.querySelectorAll("script"))i.replaceWith(Ie(i));t.replaceWith(e)}return n}var qt;(function(n){n[n.initialized=0]="initialized",n[n.requesting=1]="requesting",n[n.waiting=2]="waiting",n[n.receiving=3]="receiving",n[n.stopping=4]="stopping",n[n.stopped=5]="stopped"})(qt||(qt={}));var Nt;(function(n){n.urlEncoded="application/x-www-form-urlencoded",n.multipart="multipart/form-data",n.plain="text/plain"})(Nt||(Nt={}));function Rf(n){switch(n.toLowerCase()){case Nt.multipart:return Nt.multipart;case Nt.plain:return Nt.plain;default:return Nt.urlEncoded}}class Ue{static confirmMethod(t,e,i){return Promise.resolve(confirm(t))}constructor(t,e,i,r=!1){this.state=qt.initialized,this.delegate=t,this.formElement=e,this.submitter=i,this.formData=Pf(e,i),this.location=rt(this.action),this.method==ct.get&&If(this.location,[...this.body.entries()]),this.fetchRequest=new Er(this,this.method,this.location,this.body,this.formElement),this.mustRedirect=r}get method(){var t;const e=((t=this.submitter)===null||t===void 0?void 0:t.getAttribute("formmethod"))||this.formElement.getAttribute("method")||"";return xf(e.toLowerCase())||ct.get}get action(){var t;const e=typeof this.formElement.action=="string"?this.formElement.action:null;return!((t=this.submitter)===null||t===void 0)&&t.hasAttribute("formaction")?this.submitter.getAttribute("formaction")||"":this.formElement.getAttribute("action")||e||""}get body(){return this.enctype==Nt.urlEncoded||this.method==ct.get?new URLSearchParams(this.stringFormData):this.formData}get enctype(){var t;return Rf(((t=this.submitter)===null||t===void 0?void 0:t.getAttribute("formenctype"))||this.formElement.enctype)}get isSafe(){return this.fetchRequest.isSafe}get stringFormData(){return[...this.formData].reduce((t,[e,i])=>t.concat(typeof i=="string"?[[e,i]]:[]),[])}async start(){const{initialized:t,requesting:e}=qt,i=Pn("data-turbo-confirm",this.submitter,this.formElement);if(!(typeof i=="string"&&!await Ue.confirmMethod(i,this.formElement,this.submitter))&&this.state==t)return this.state=e,this.fetchRequest.perform()}stop(){const{stopping:t,stopped:e}=qt;if(this.state!=t&&this.state!=e)return this.state=t,this.fetchRequest.cancel(),!0}prepareRequest(t){if(!t.isSafe){const e=Of(On("csrf-param"))||On("csrf-token");e&&(t.headers["X-CSRF-Token"]=e)}this.requestAcceptsTurboStreamResponse(t)&&t.acceptResponseType(te.contentType)}requestStarted(t){var e;this.state=qt.waiting,(e=this.submitter)===null||e===void 0||e.setAttribute("disabled",""),this.setSubmitsWith(),et("turbo:submit-start",{target:this.formElement,detail:{formSubmission:this}}),this.delegate.formSubmissionStarted(this)}requestPreventedHandlingResponse(t,e){this.result={success:e.succeeded,fetchResponse:e}}requestSucceededWithResponse(t,e){if(e.clientError||e.serverError)this.delegate.formSubmissionFailedWithResponse(this,e);else if(this.requestMustRedirect(t)&&Mf(e)){const i=new Error("Form responses must redirect to another location");this.delegate.formSubmissionErrored(this,i)}else this.state=qt.receiving,this.result={success:!0,fetchResponse:e},this.delegate.formSubmissionSucceededWithResponse(this,e)}requestFailedWithResponse(t,e){this.result={success:!1,fetchResponse:e},this.delegate.formSubmissionFailedWithResponse(this,e)}requestErrored(t,e){this.result={success:!1,error:e},this.delegate.formSubmissionErrored(this,e)}requestFinished(t){var e;this.state=qt.stopped,(e=this.submitter)===null||e===void 0||e.removeAttribute("disabled"),this.resetSubmitterText(),et("turbo:submit-end",{target:this.formElement,detail:Object.assign({formSubmission:this},this.result)}),this.delegate.formSubmissionFinished(this)}setSubmitsWith(){if(!(!this.submitter||!this.submitsWith)){if(this.submitter.matches("button"))this.originalSubmitText=this.submitter.innerHTML,this.submitter.innerHTML=this.submitsWith;else if(this.submitter.matches("input")){const t=this.submitter;this.originalSubmitText=t.value,t.value=this.submitsWith}}}resetSubmitterText(){if(!(!this.submitter||!this.originalSubmitText)){if(this.submitter.matches("button"))this.submitter.innerHTML=this.originalSubmitText;else if(this.submitter.matches("input")){const t=this.submitter;t.value=this.originalSubmitText}}}requestMustRedirect(t){return!t.isSafe&&this.mustRedirect}requestAcceptsTurboStreamResponse(t){return!t.isSafe||Tf("data-turbo-stream",this.submitter,this.formElement)}get submitsWith(){var t;return(t=this.submitter)===null||t===void 0?void 0:t.getAttribute("data-turbo-submits-with")}}function Pf(n,t){const e=new FormData(n),i=t==null?void 0:t.getAttribute("name"),r=t==null?void 0:t.getAttribute("value");return i&&e.append(i,r||""),e}function Of(n){if(n!=null){const e=(document.cookie?document.cookie.split("; "):[]).find(i=>i.startsWith(n));if(e){const i=e.split("=").slice(1).join("=");return i?decodeURIComponent(i):void 0}}}function Mf(n){return n.statusCode==200&&!n.redirected}function If(n,t){const e=new URLSearchParams;for(const[i,r]of t)r instanceof File||e.append(i,r);return n.search=e.toString(),n}class Yn{constructor(t){this.element=t}get activeElement(){return this.element.ownerDocument.activeElement}get children(){return[...this.element.children]}hasAnchor(t){return this.getElementForAnchor(t)!=null}getElementForAnchor(t){return t?this.element.querySelector(`[id='${t}'], a[name='${t}']`):null}get isConnected(){return this.element.isConnected}get firstAutofocusableElement(){const t="[inert], :disabled, [hidden], details:not([open]), dialog:not([open])";for(const e of this.element.querySelectorAll("[autofocus]"))if(e.closest(t)==null)return e;return null}get permanentElements(){return la(this.element)}getPermanentElementById(t){return ca(this.element,t)}getPermanentElementMapForSnapshot(t){const e={};for(const i of this.permanentElements){const{id:r}=i,c=t.getPermanentElementById(r);c&&(e[r]=[i,c])}return e}}function ca(n,t){return n.querySelector(`#${t}[data-turbo-permanent]`)}function la(n){return n.querySelectorAll("[id][data-turbo-permanent]")}class Tr{constructor(t,e){this.started=!1,this.submitCaptured=()=>{this.eventTarget.removeEventListener("submit",this.submitBubbled,!1),this.eventTarget.addEventListener("submit",this.submitBubbled,!1)},this.submitBubbled=i=>{if(!i.defaultPrevented){const r=i.target instanceof HTMLFormElement?i.target:void 0,c=i.submitter||void 0;r&&Ff(r,c)&&Df(r,c)&&this.delegate.willSubmitForm(r,c)&&(i.preventDefault(),i.stopImmediatePropagation(),this.delegate.formSubmitted(r,c))}},this.delegate=t,this.eventTarget=e}start(){this.started||(this.eventTarget.addEventListener("submit",this.submitCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("submit",this.submitCaptured,!0),this.started=!1)}}function Ff(n,t){return((t==null?void 0:t.getAttribute("formmethod"))||n.getAttribute("method"))!="dialog"}function Df(n,t){if(t!=null&&t.hasAttribute("formtarget")||n.hasAttribute("target")){const e=(t==null?void 0:t.getAttribute("formtarget"))||n.target;for(const i of document.getElementsByName(e))if(i instanceof HTMLIFrameElement)return!1;return!0}else return!0}class ua{constructor(t,e){this.resolveRenderPromise=i=>{},this.resolveInterceptionPromise=i=>{},this.delegate=t,this.element=e}scrollToAnchor(t){const e=this.snapshot.getElementForAnchor(t);e?(this.scrollToElement(e),this.focusElement(e)):this.scrollToPosition({x:0,y:0})}scrollToAnchorFromLocation(t){this.scrollToAnchor(Yt(t))}scrollToElement(t){t.scrollIntoView()}focusElement(t){t instanceof HTMLElement&&(t.hasAttribute("tabindex")?t.focus():(t.setAttribute("tabindex","-1"),t.focus(),t.removeAttribute("tabindex")))}scrollToPosition({x:t,y:e}){this.scrollRoot.scrollTo(t,e)}scrollToTop(){this.scrollToPosition({x:0,y:0})}get scrollRoot(){return window}async render(t){const{isPreview:e,shouldRender:i,newSnapshot:r}=t;if(i)try{this.renderPromise=new Promise(p=>this.resolveRenderPromise=p),this.renderer=t,await this.prepareToRenderSnapshot(t);const c=new Promise(p=>this.resolveInterceptionPromise=p),u={resume:this.resolveInterceptionPromise,render:this.renderer.renderElement};this.delegate.allowsImmediateRender(r,u)||await c,await this.renderSnapshot(t),this.delegate.viewRenderedSnapshot(r,e),this.delegate.preloadOnLoadLinksForView(this.element),this.finishRenderingSnapshot(t)}finally{delete this.renderer,this.resolveRenderPromise(void 0),delete this.renderPromise}else this.invalidate(t.reloadReason)}invalidate(t){this.delegate.viewInvalidated(t)}async prepareToRenderSnapshot(t){this.markAsPreview(t.isPreview),await t.prepareToRender()}markAsPreview(t){t?this.element.setAttribute("data-turbo-preview",""):this.element.removeAttribute("data-turbo-preview")}async renderSnapshot(t){await t.render()}finishRenderingSnapshot(t){t.finishRendering()}}class Hf extends ua{missing(){this.element.innerHTML='<strong class="turbo-frame-error">Content missing</strong>'}get snapshot(){return new Yn(this.element)}}class ha{constructor(t,e){this.clickBubbled=i=>{this.respondsToEventTarget(i.target)?this.clickEvent=i:delete this.clickEvent},this.linkClicked=i=>{this.clickEvent&&this.respondsToEventTarget(i.target)&&i.target instanceof Element&&this.delegate.shouldInterceptLinkClick(i.target,i.detail.url,i.detail.originalEvent)&&(this.clickEvent.preventDefault(),i.preventDefault(),this.delegate.linkClickIntercepted(i.target,i.detail.url,i.detail.originalEvent)),delete this.clickEvent},this.willVisit=i=>{delete this.clickEvent},this.delegate=t,this.element=e}start(){this.element.addEventListener("click",this.clickBubbled),document.addEventListener("turbo:click",this.linkClicked),document.addEventListener("turbo:before-visit",this.willVisit)}stop(){this.element.removeEventListener("click",this.clickBubbled),document.removeEventListener("turbo:click",this.linkClicked),document.removeEventListener("turbo:before-visit",this.willVisit)}respondsToEventTarget(t){const e=t instanceof Element?t:t instanceof Node?t.parentElement:null;return e&&e.closest("turbo-frame, html")==this.element}}class da{constructor(t,e){this.started=!1,this.clickCaptured=()=>{this.eventTarget.removeEventListener("click",this.clickBubbled,!1),this.eventTarget.addEventListener("click",this.clickBubbled,!1)},this.clickBubbled=i=>{if(i instanceof MouseEvent&&this.clickEventIsSignificant(i)){const r=i.composedPath&&i.composedPath()[0]||i.target,c=this.findLinkFromClickTarget(r);if(c&&qf(c)){const u=this.getLocationForLink(c);this.delegate.willFollowLinkToLocation(c,u,i)&&(i.preventDefault(),this.delegate.followedLinkToLocation(c,u))}}},this.delegate=t,this.eventTarget=e}start(){this.started||(this.eventTarget.addEventListener("click",this.clickCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("click",this.clickCaptured,!0),this.started=!1)}clickEventIsSignificant(t){return!(t.target&&t.target.isContentEditable||t.defaultPrevented||t.which>1||t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)}findLinkFromClickTarget(t){return Mn(t,"a[href]:not([target^=_]):not([download])")}getLocationForLink(t){return rt(t.getAttribute("href")||"")}}function qf(n){if(n.hasAttribute("target")){for(const t of document.getElementsByName(n.target))if(t instanceof HTMLIFrameElement)return!1;return!0}else return!0}class fa{constructor(t,e){this.delegate=t,this.linkInterceptor=new da(this,e)}start(){this.linkInterceptor.start()}stop(){this.linkInterceptor.stop()}willFollowLinkToLocation(t,e,i){return this.delegate.willSubmitFormLinkToLocation(t,e,i)&&t.hasAttribute("data-turbo-method")}followedLinkToLocation(t,e){const i=document.createElement("form"),r="hidden";for(const[v,y]of e.searchParams)i.append(Object.assign(document.createElement("input"),{type:r,name:v,value:y}));const c=Object.assign(e,{search:""});i.setAttribute("data-turbo","true"),i.setAttribute("action",c.href),i.setAttribute("hidden","");const u=t.getAttribute("data-turbo-method");u&&i.setAttribute("method",u);const d=t.getAttribute("data-turbo-frame");d&&i.setAttribute("data-turbo-frame",d);const p=Xn(t);p&&i.setAttribute("data-turbo-action",p);const m=t.getAttribute("data-turbo-confirm");m&&i.setAttribute("data-turbo-confirm",m),t.hasAttribute("data-turbo-stream")&&i.setAttribute("data-turbo-stream",""),this.delegate.submittedFormLinkToLocation(t,e,i),document.body.appendChild(i),i.addEventListener("turbo:submit-end",()=>i.remove(),{once:!0}),requestAnimationFrame(()=>i.requestSubmit())}}class pa{static async preservingPermanentElements(t,e,i){const r=new this(t,e);r.enter(),await i(),r.leave()}constructor(t,e){this.delegate=t,this.permanentElementMap=e}enter(){for(const t in this.permanentElementMap){const[e,i]=this.permanentElementMap[t];this.delegate.enteringBardo(e,i),this.replaceNewPermanentElementWithPlaceholder(i)}}leave(){for(const t in this.permanentElementMap){const[e]=this.permanentElementMap[t];this.replaceCurrentPermanentElementWithClone(e),this.replacePlaceholderWithPermanentElement(e),this.delegate.leavingBardo(e)}}replaceNewPermanentElementWithPlaceholder(t){const e=Nf(t);t.replaceWith(e)}replaceCurrentPermanentElementWithClone(t){const e=t.cloneNode(!0);t.replaceWith(e)}replacePlaceholderWithPermanentElement(t){const e=this.getPlaceholderById(t.id);e==null||e.replaceWith(t)}getPlaceholderById(t){return this.placeholders.find(e=>e.content==t)}get placeholders(){return[...document.querySelectorAll("meta[name=turbo-permanent-placeholder][content]")]}}function Nf(n){const t=document.createElement("meta");return t.setAttribute("name","turbo-permanent-placeholder"),t.setAttribute("content",n.id),t}class Cr{constructor(t,e,i,r,c=!0){this.activeElement=null,this.currentSnapshot=t,this.newSnapshot=e,this.isPreview=r,this.willRender=c,this.renderElement=i,this.promise=new Promise((u,d)=>this.resolvingFunctions={resolve:u,reject:d})}get shouldRender(){return!0}get reloadReason(){}prepareToRender(){}finishRendering(){this.resolvingFunctions&&(this.resolvingFunctions.resolve(),delete this.resolvingFunctions)}async preservingPermanentElements(t){await pa.preservingPermanentElements(this,this.permanentElementMap,t)}focusFirstAutofocusableElement(){const t=this.connectedSnapshot.firstAutofocusableElement;Bf(t)&&t.focus()}enteringBardo(t){this.activeElement||t.contains(this.currentSnapshot.activeElement)&&(this.activeElement=this.currentSnapshot.activeElement)}leavingBardo(t){t.contains(this.activeElement)&&this.activeElement instanceof HTMLElement&&(this.activeElement.focus(),this.activeElement=null)}get connectedSnapshot(){return this.newSnapshot.isConnected?this.newSnapshot:this.currentSnapshot}get currentElement(){return this.currentSnapshot.element}get newElement(){return this.newSnapshot.element}get permanentElementMap(){return this.currentSnapshot.getPermanentElementMapForSnapshot(this.newSnapshot)}}function Bf(n){return n&&typeof n.focus=="function"}class In extends Cr{static renderElement(t,e){var i;const r=document.createRange();r.selectNodeContents(t),r.deleteContents();const c=e,u=(i=c.ownerDocument)===null||i===void 0?void 0:i.createRange();u&&(u.selectNodeContents(c),t.appendChild(u.extractContents()))}constructor(t,e,i,r,c,u=!0){super(e,i,r,c,u),this.delegate=t}get shouldRender(){return!0}async render(){await vn(),this.preservingPermanentElements(()=>{this.loadFrameElement()}),this.scrollFrameIntoView(),await vn(),this.focusFirstAutofocusableElement(),await vn(),this.activateScriptElements()}loadFrameElement(){this.delegate.willRenderFrame(this.currentElement,this.newElement),this.renderElement(this.currentElement,this.newElement)}scrollFrameIntoView(){if(this.currentElement.autoscroll||this.newElement.autoscroll){const t=this.currentElement.firstElementChild,e=jf(this.currentElement.getAttribute("data-autoscroll-block"),"end"),i=Uf(this.currentElement.getAttribute("data-autoscroll-behavior"),"auto");if(t)return t.scrollIntoView({block:e,behavior:i}),!0}return!1}activateScriptElements(){for(const t of this.newScriptElements){const e=Ie(t);t.replaceWith(e)}}get newScriptElements(){return this.currentElement.querySelectorAll("script")}}function jf(n,t){return n=="end"||n=="start"||n=="center"||n=="nearest"?n:t}function Uf(n,t){return n=="auto"||n=="smooth"?n:t}class Mt{static get defaultCSS(){return sa`
      .turbo-progress-bar {
        position: fixed;
        display: block;
        top: 0;
        left: 0;
        height: 3px;
        background: #0076ff;
        z-index: 2147483647;
        transition:
          width ${Mt.animationDuration}ms ease-out,
          opacity ${Mt.animationDuration/2}ms ${Mt.animationDuration/2}ms ease-in;
        transform: translate3d(0, 0, 0);
      }
    `}constructor(){this.hiding=!1,this.value=0,this.visible=!1,this.trickle=()=>{this.setValue(this.value+Math.random()/100)},this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement(),this.installStylesheetElement(),this.setValue(0)}show(){this.visible||(this.visible=!0,this.installProgressElement(),this.startTrickling())}hide(){this.visible&&!this.hiding&&(this.hiding=!0,this.fadeProgressElement(()=>{this.uninstallProgressElement(),this.stopTrickling(),this.visible=!1,this.hiding=!1}))}setValue(t){this.value=t,this.refresh()}installStylesheetElement(){document.head.insertBefore(this.stylesheetElement,document.head.firstChild)}installProgressElement(){this.progressElement.style.width="0",this.progressElement.style.opacity="1",document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()}fadeProgressElement(t){this.progressElement.style.opacity="0",setTimeout(t,Mt.animationDuration*1.5)}uninstallProgressElement(){this.progressElement.parentNode&&document.documentElement.removeChild(this.progressElement)}startTrickling(){this.trickleInterval||(this.trickleInterval=window.setInterval(this.trickle,Mt.animationDuration))}stopTrickling(){window.clearInterval(this.trickleInterval),delete this.trickleInterval}refresh(){requestAnimationFrame(()=>{this.progressElement.style.width=`${10+this.value*90}%`})}createStylesheetElement(){const t=document.createElement("style");return t.type="text/css",t.textContent=Mt.defaultCSS,this.cspNonce&&(t.nonce=this.cspNonce),t}createProgressElement(){const t=document.createElement("div");return t.className="turbo-progress-bar",t}get cspNonce(){return On("csp-nonce")}}Mt.animationDuration=300;class Wf extends Yn{constructor(){super(...arguments),this.detailsByOuterHTML=this.children.filter(t=>!Kf(t)).map(t=>Jf(t)).reduce((t,e)=>{const{outerHTML:i}=e,r=i in t?t[i]:{type:$f(e),tracked:Vf(e),elements:[]};return Object.assign(Object.assign({},t),{[i]:Object.assign(Object.assign({},r),{elements:[...r.elements,e]})})},{})}get trackedElementSignature(){return Object.keys(this.detailsByOuterHTML).filter(t=>this.detailsByOuterHTML[t].tracked).join("")}getScriptElementsNotInSnapshot(t){return this.getElementsMatchingTypeNotInSnapshot("script",t)}getStylesheetElementsNotInSnapshot(t){return this.getElementsMatchingTypeNotInSnapshot("stylesheet",t)}getElementsMatchingTypeNotInSnapshot(t,e){return Object.keys(this.detailsByOuterHTML).filter(i=>!(i in e.detailsByOuterHTML)).map(i=>this.detailsByOuterHTML[i]).filter(({type:i})=>i==t).map(({elements:[i]})=>i)}get provisionalElements(){return Object.keys(this.detailsByOuterHTML).reduce((t,e)=>{const{type:i,tracked:r,elements:c}=this.detailsByOuterHTML[e];return i==null&&!r?[...t,...c]:c.length>1?[...t,...c.slice(1)]:t},[])}getMetaValue(t){const e=this.findMetaElementByName(t);return e?e.getAttribute("content"):null}findMetaElementByName(t){return Object.keys(this.detailsByOuterHTML).reduce((e,i)=>{const{elements:[r]}=this.detailsByOuterHTML[i];return Yf(r,t)?r:e},void 0)}}function $f(n){if(zf(n))return"script";if(Xf(n))return"stylesheet"}function Vf(n){return n.getAttribute("data-turbo-track")=="reload"}function zf(n){return n.localName=="script"}function Kf(n){return n.localName=="noscript"}function Xf(n){const t=n.localName;return t=="style"||t=="link"&&n.getAttribute("rel")=="stylesheet"}function Yf(n,t){return n.localName=="meta"&&n.getAttribute("name")==t}function Jf(n){return n.hasAttribute("nonce")&&n.setAttribute("nonce",""),n}class bt extends Yn{static fromHTMLString(t=""){return this.fromDocument(ra(t))}static fromElement(t){return this.fromDocument(t.ownerDocument)}static fromDocument({head:t,body:e}){return new this(e,new Wf(t))}constructor(t,e){super(t),this.headSnapshot=e}clone(){const t=this.element.cloneNode(!0),e=this.element.querySelectorAll("select"),i=t.querySelectorAll("select");for(const[r,c]of e.entries()){const u=i[r];for(const d of u.selectedOptions)d.selected=!1;for(const d of c.selectedOptions)u.options[d.index].selected=!0}for(const r of t.querySelectorAll('input[type="password"]'))r.value="";return new bt(t,this.headSnapshot)}get headElement(){return this.headSnapshot.element}get rootLocation(){var t;const e=(t=this.getSetting("root"))!==null&&t!==void 0?t:"/";return rt(e)}get cacheControlValue(){return this.getSetting("cache-control")}get isPreviewable(){return this.cacheControlValue!="no-preview"}get isCacheable(){return this.cacheControlValue!="no-cache"}get isVisitable(){return this.getSetting("visit-control")!="reload"}getSetting(t){return this.headSnapshot.getMetaValue(`turbo-${t}`)}}var ce;(function(n){n.visitStart="visitStart",n.requestStart="requestStart",n.requestEnd="requestEnd",n.visitEnd="visitEnd"})(ce||(ce={}));var wt;(function(n){n.initialized="initialized",n.started="started",n.canceled="canceled",n.failed="failed",n.completed="completed"})(wt||(wt={}));const Gf={action:"advance",historyChanged:!1,visitCachedSnapshot:()=>{},willRender:!0,updateHistory:!0,shouldCacheSnapshot:!0,acceptsStreamResponse:!1};var Bt;(function(n){n[n.networkFailure=0]="networkFailure",n[n.timeoutFailure=-1]="timeoutFailure",n[n.contentTypeMismatch=-2]="contentTypeMismatch"})(Bt||(Bt={}));class Qf{constructor(t,e,i,r={}){this.identifier=ye(),this.timingMetrics={},this.followedRedirect=!1,this.historyChanged=!1,this.scrolled=!1,this.shouldCacheSnapshot=!0,this.acceptsStreamResponse=!1,this.snapshotCached=!1,this.state=wt.initialized,this.delegate=t,this.location=e,this.restorationIdentifier=i||ye();const{action:c,historyChanged:u,referrer:d,snapshot:p,snapshotHTML:m,response:g,visitCachedSnapshot:v,willRender:y,updateHistory:E,shouldCacheSnapshot:x,acceptsStreamResponse:C}=Object.assign(Object.assign({},Gf),r);this.action=c,this.historyChanged=u,this.referrer=d,this.snapshot=p,this.snapshotHTML=m,this.response=g,this.isSamePage=this.delegate.locationWithActionIsSamePage(this.location,this.action),this.visitCachedSnapshot=v,this.willRender=y,this.updateHistory=E,this.scrolled=!y,this.shouldCacheSnapshot=x,this.acceptsStreamResponse=C}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get history(){return this.delegate.history}get restorationData(){return this.history.getRestorationDataForIdentifier(this.restorationIdentifier)}get silent(){return this.isSamePage}start(){this.state==wt.initialized&&(this.recordTimingMetric(ce.visitStart),this.state=wt.started,this.adapter.visitStarted(this),this.delegate.visitStarted(this))}cancel(){this.state==wt.started&&(this.request&&this.request.cancel(),this.cancelRender(),this.state=wt.canceled)}complete(){this.state==wt.started&&(this.recordTimingMetric(ce.visitEnd),this.state=wt.completed,this.followRedirect(),this.followedRedirect||(this.adapter.visitCompleted(this),this.delegate.visitCompleted(this)))}fail(){this.state==wt.started&&(this.state=wt.failed,this.adapter.visitFailed(this))}changeHistory(){var t;if(!this.historyChanged&&this.updateHistory){const e=this.location.href===((t=this.referrer)===null||t===void 0?void 0:t.href)?"replace":this.action,i=oa(e);this.history.update(i,this.location,this.restorationIdentifier),this.historyChanged=!0}}issueRequest(){this.hasPreloadedResponse()?this.simulateRequest():this.shouldIssueRequest()&&!this.request&&(this.request=new Er(this,ct.get,this.location),this.request.perform())}simulateRequest(){this.response&&(this.startRequest(),this.recordResponse(),this.finishRequest())}startRequest(){this.recordTimingMetric(ce.requestStart),this.adapter.visitRequestStarted(this)}recordResponse(t=this.response){if(this.response=t,t){const{statusCode:e}=t;zs(e)?this.adapter.visitRequestCompleted(this):this.adapter.visitRequestFailedWithStatusCode(this,e)}}finishRequest(){this.recordTimingMetric(ce.requestEnd),this.adapter.visitRequestFinished(this)}loadResponse(){if(this.response){const{statusCode:t,responseHTML:e}=this.response;this.render(async()=>{this.shouldCacheSnapshot&&this.cacheSnapshot(),this.view.renderPromise&&await this.view.renderPromise,zs(t)&&e!=null?(await this.view.renderPage(bt.fromHTMLString(e),!1,this.willRender,this),this.performScroll(),this.adapter.visitRendered(this),this.complete()):(await this.view.renderError(bt.fromHTMLString(e),this),this.adapter.visitRendered(this),this.fail())})}}getCachedSnapshot(){const t=this.view.getCachedSnapshotForLocation(this.location)||this.getPreloadedSnapshot();if(t&&(!Yt(this.location)||t.hasAnchor(Yt(this.location)))&&(this.action=="restore"||t.isPreviewable))return t}getPreloadedSnapshot(){if(this.snapshotHTML)return bt.fromHTMLString(this.snapshotHTML)}hasCachedSnapshot(){return this.getCachedSnapshot()!=null}loadCachedSnapshot(){const t=this.getCachedSnapshot();if(t){const e=this.shouldIssueRequest();this.render(async()=>{this.cacheSnapshot(),this.isSamePage?this.adapter.visitRendered(this):(this.view.renderPromise&&await this.view.renderPromise,await this.view.renderPage(t,e,this.willRender,this),this.performScroll(),this.adapter.visitRendered(this),e||this.complete())})}}followRedirect(){var t;this.redirectedToLocation&&!this.followedRedirect&&(!((t=this.response)===null||t===void 0)&&t.redirected)&&(this.adapter.visitProposedToLocation(this.redirectedToLocation,{action:"replace",response:this.response,shouldCacheSnapshot:!1,willRender:!1}),this.followedRedirect=!0)}goToSamePageAnchor(){this.isSamePage&&this.render(async()=>{this.cacheSnapshot(),this.performScroll(),this.changeHistory(),this.adapter.visitRendered(this)})}prepareRequest(t){this.acceptsStreamResponse&&t.acceptResponseType(te.contentType)}requestStarted(){this.startRequest()}requestPreventedHandlingResponse(t,e){}async requestSucceededWithResponse(t,e){const i=await e.responseHTML,{redirected:r,statusCode:c}=e;i==null?this.recordResponse({statusCode:Bt.contentTypeMismatch,redirected:r}):(this.redirectedToLocation=e.redirected?e.location:void 0,this.recordResponse({statusCode:c,responseHTML:i,redirected:r}))}async requestFailedWithResponse(t,e){const i=await e.responseHTML,{redirected:r,statusCode:c}=e;i==null?this.recordResponse({statusCode:Bt.contentTypeMismatch,redirected:r}):this.recordResponse({statusCode:c,responseHTML:i,redirected:r})}requestErrored(t,e){this.recordResponse({statusCode:Bt.networkFailure,redirected:!1})}requestFinished(){this.finishRequest()}performScroll(){!this.scrolled&&!this.view.forceReloaded&&(this.action=="restore"?this.scrollToRestoredPosition()||this.scrollToAnchor()||this.view.scrollToTop():this.scrollToAnchor()||this.view.scrollToTop(),this.isSamePage&&this.delegate.visitScrolledToSamePageLocation(this.view.lastRenderedLocation,this.location),this.scrolled=!0)}scrollToRestoredPosition(){const{scrollPosition:t}=this.restorationData;if(t)return this.view.scrollToPosition(t),!0}scrollToAnchor(){const t=Yt(this.location);if(t!=null)return this.view.scrollToAnchor(t),!0}recordTimingMetric(t){this.timingMetrics[t]=new Date().getTime()}getTimingMetrics(){return Object.assign({},this.timingMetrics)}getHistoryMethodForAction(t){switch(t){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}hasPreloadedResponse(){return typeof this.response=="object"}shouldIssueRequest(){return this.isSamePage?!1:this.action=="restore"?!this.hasCachedSnapshot():this.willRender}cacheSnapshot(){this.snapshotCached||(this.view.cacheSnapshot(this.snapshot).then(t=>t&&this.visitCachedSnapshot(t)),this.snapshotCached=!0)}async render(t){this.cancelRender(),await new Promise(e=>{this.frame=requestAnimationFrame(()=>e())}),await t(),delete this.frame}cancelRender(){this.frame&&(cancelAnimationFrame(this.frame),delete this.frame)}}function zs(n){return n>=200&&n<300}class Zf{constructor(t){this.progressBar=new Mt,this.showProgressBar=()=>{this.progressBar.show()},this.session=t}visitProposedToLocation(t,e){this.navigator.startVisit(t,(e==null?void 0:e.restorationIdentifier)||ye(),e)}visitStarted(t){this.location=t.location,t.loadCachedSnapshot(),t.issueRequest(),t.goToSamePageAnchor()}visitRequestStarted(t){this.progressBar.setValue(0),t.hasCachedSnapshot()||t.action!="restore"?this.showVisitProgressBarAfterDelay():this.showProgressBar()}visitRequestCompleted(t){t.loadResponse()}visitRequestFailedWithStatusCode(t,e){switch(e){case Bt.networkFailure:case Bt.timeoutFailure:case Bt.contentTypeMismatch:return this.reload({reason:"request_failed",context:{statusCode:e}});default:return t.loadResponse()}}visitRequestFinished(t){this.progressBar.setValue(1),this.hideVisitProgressBar()}visitCompleted(t){}pageInvalidated(t){this.reload(t)}visitFailed(t){}visitRendered(t){}formSubmissionStarted(t){this.progressBar.setValue(0),this.showFormProgressBarAfterDelay()}formSubmissionFinished(t){this.progressBar.setValue(1),this.hideFormProgressBar()}showVisitProgressBarAfterDelay(){this.visitProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay)}hideVisitProgressBar(){this.progressBar.hide(),this.visitProgressBarTimeout!=null&&(window.clearTimeout(this.visitProgressBarTimeout),delete this.visitProgressBarTimeout)}showFormProgressBarAfterDelay(){this.formProgressBarTimeout==null&&(this.formProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay))}hideFormProgressBar(){this.progressBar.hide(),this.formProgressBarTimeout!=null&&(window.clearTimeout(this.formProgressBarTimeout),delete this.formProgressBarTimeout)}reload(t){var e;et("turbo:reload",{detail:t}),window.location.href=((e=this.location)===null||e===void 0?void 0:e.toString())||window.location.href}get navigator(){return this.session.navigator}}class tp{constructor(){this.selector="[data-turbo-temporary]",this.deprecatedSelector="[data-turbo-cache=false]",this.started=!1,this.removeTemporaryElements=t=>{for(const e of this.temporaryElements)e.remove()}}start(){this.started||(this.started=!0,addEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}stop(){this.started&&(this.started=!1,removeEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}get temporaryElements(){return[...document.querySelectorAll(this.selector),...this.temporaryElementsWithDeprecation]}get temporaryElementsWithDeprecation(){const t=document.querySelectorAll(this.deprecatedSelector);return t.length&&console.warn(`The ${this.deprecatedSelector} selector is deprecated and will be removed in a future version. Use ${this.selector} instead.`),[...t]}}class ep{constructor(t,e){this.session=t,this.element=e,this.linkInterceptor=new ha(this,e),this.formSubmitObserver=new Tr(this,e)}start(){this.linkInterceptor.start(),this.formSubmitObserver.start()}stop(){this.linkInterceptor.stop(),this.formSubmitObserver.stop()}shouldInterceptLinkClick(t,e,i){return this.shouldRedirect(t)}linkClickIntercepted(t,e,i){const r=this.findFrameElement(t);r&&r.delegate.linkClickIntercepted(t,e,i)}willSubmitForm(t,e){return t.closest("turbo-frame")==null&&this.shouldSubmit(t,e)&&this.shouldRedirect(t,e)}formSubmitted(t,e){const i=this.findFrameElement(t,e);i&&i.delegate.formSubmitted(t,e)}shouldSubmit(t,e){var i;const r=wr(t,e),c=this.element.ownerDocument.querySelector('meta[name="turbo-root"]'),u=rt((i=c==null?void 0:c.content)!==null&&i!==void 0?i:"/");return this.shouldRedirect(t,e)&&ue(r,u)}shouldRedirect(t,e){if(t instanceof HTMLFormElement?this.session.submissionIsNavigatable(t,e):this.session.elementIsNavigatable(t)){const r=this.findFrameElement(t,e);return r?r!=t.closest("turbo-frame"):!1}else return!1}findFrameElement(t,e){const i=(e==null?void 0:e.getAttribute("data-turbo-frame"))||t.getAttribute("data-turbo-frame");if(i&&i!="_top"){const r=this.element.querySelector(`#${i}:not([disabled])`);if(r instanceof Tt)return r}}}class np{constructor(t){this.restorationIdentifier=ye(),this.restorationData={},this.started=!1,this.pageLoaded=!1,this.onPopState=e=>{if(this.shouldHandlePopState()){const{turbo:i}=e.state||{};if(i){this.location=new URL(window.location.href);const{restorationIdentifier:r}=i;this.restorationIdentifier=r,this.delegate.historyPoppedToLocationWithRestorationIdentifier(this.location,r)}}},this.onPageLoad=async e=>{await Sf(),this.pageLoaded=!0},this.delegate=t}start(){this.started||(addEventListener("popstate",this.onPopState,!1),addEventListener("load",this.onPageLoad,!1),this.started=!0,this.replace(new URL(window.location.href)))}stop(){this.started&&(removeEventListener("popstate",this.onPopState,!1),removeEventListener("load",this.onPageLoad,!1),this.started=!1)}push(t,e){this.update(history.pushState,t,e)}replace(t,e){this.update(history.replaceState,t,e)}update(t,e,i=ye()){const r={turbo:{restorationIdentifier:i}};t.call(history,r,"",e.href),this.location=e,this.restorationIdentifier=i}getRestorationDataForIdentifier(t){return this.restorationData[t]||{}}updateRestorationData(t){const{restorationIdentifier:e}=this,i=this.restorationData[e];this.restorationData[e]=Object.assign(Object.assign({},i),t)}assumeControlOfScrollRestoration(){var t;this.previousScrollRestoration||(this.previousScrollRestoration=(t=history.scrollRestoration)!==null&&t!==void 0?t:"auto",history.scrollRestoration="manual")}relinquishControlOfScrollRestoration(){this.previousScrollRestoration&&(history.scrollRestoration=this.previousScrollRestoration,delete this.previousScrollRestoration)}shouldHandlePopState(){return this.pageIsLoaded()}pageIsLoaded(){return this.pageLoaded||document.readyState=="complete"}}class ip{constructor(t){this.delegate=t}proposeVisit(t,e={}){this.delegate.allowsVisitingLocationWithAction(t,e.action)&&(ue(t,this.view.snapshot.rootLocation)?this.delegate.visitProposedToLocation(t,e):window.location.href=t.toString())}startVisit(t,e,i={}){this.stop(),this.currentVisit=new Qf(this,rt(t),e,Object.assign({referrer:this.location},i)),this.currentVisit.start()}submitForm(t,e){this.stop(),this.formSubmission=new Ue(this,t,e,!0),this.formSubmission.start()}stop(){this.formSubmission&&(this.formSubmission.stop(),delete this.formSubmission),this.currentVisit&&(this.currentVisit.cancel(),delete this.currentVisit)}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get history(){return this.delegate.history}formSubmissionStarted(t){typeof this.adapter.formSubmissionStarted=="function"&&this.adapter.formSubmissionStarted(t)}async formSubmissionSucceededWithResponse(t,e){if(t==this.formSubmission){const i=await e.responseHTML;if(i){const r=t.isSafe;r||this.view.clearSnapshotCache();const{statusCode:c,redirected:u}=e,p={action:this.getActionForFormSubmission(t),shouldCacheSnapshot:r,response:{statusCode:c,responseHTML:i,redirected:u}};this.proposeVisit(e.location,p)}}}async formSubmissionFailedWithResponse(t,e){const i=await e.responseHTML;if(i){const r=bt.fromHTMLString(i);e.serverError?await this.view.renderError(r,this.currentVisit):await this.view.renderPage(r,!1,!0,this.currentVisit),this.view.scrollToTop(),this.view.clearSnapshotCache()}}formSubmissionErrored(t,e){console.error(e)}formSubmissionFinished(t){typeof this.adapter.formSubmissionFinished=="function"&&this.adapter.formSubmissionFinished(t)}visitStarted(t){this.delegate.visitStarted(t)}visitCompleted(t){this.delegate.visitCompleted(t)}locationWithActionIsSamePage(t,e){const i=Yt(t),r=Yt(this.view.lastRenderedLocation),c=e==="restore"&&typeof i>"u";return e!=="replace"&&Di(t)===Di(this.view.lastRenderedLocation)&&(c||i!=null&&i!==r)}visitScrolledToSamePageLocation(t,e){this.delegate.visitScrolledToSamePageLocation(t,e)}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}getActionForFormSubmission({submitter:t,formElement:e}){return Xn(t,e)||"advance"}}var Ot;(function(n){n[n.initial=0]="initial",n[n.loading=1]="loading",n[n.interactive=2]="interactive",n[n.complete=3]="complete"})(Ot||(Ot={}));class rp{constructor(t){this.stage=Ot.initial,this.started=!1,this.interpretReadyState=()=>{const{readyState:e}=this;e=="interactive"?this.pageIsInteractive():e=="complete"&&this.pageIsComplete()},this.pageWillUnload=()=>{this.delegate.pageWillUnload()},this.delegate=t}start(){this.started||(this.stage==Ot.initial&&(this.stage=Ot.loading),document.addEventListener("readystatechange",this.interpretReadyState,!1),addEventListener("pagehide",this.pageWillUnload,!1),this.started=!0)}stop(){this.started&&(document.removeEventListener("readystatechange",this.interpretReadyState,!1),removeEventListener("pagehide",this.pageWillUnload,!1),this.started=!1)}pageIsInteractive(){this.stage==Ot.loading&&(this.stage=Ot.interactive,this.delegate.pageBecameInteractive())}pageIsComplete(){this.pageIsInteractive(),this.stage==Ot.interactive&&(this.stage=Ot.complete,this.delegate.pageLoaded())}get readyState(){return document.readyState}}class sp{constructor(t){this.started=!1,this.onScroll=()=>{this.updatePosition({x:window.pageXOffset,y:window.pageYOffset})},this.delegate=t}start(){this.started||(addEventListener("scroll",this.onScroll,!1),this.onScroll(),this.started=!0)}stop(){this.started&&(removeEventListener("scroll",this.onScroll,!1),this.started=!1)}updatePosition(t){this.delegate.scrollPositionChanged(t)}}class op{render({fragment:t}){pa.preservingPermanentElements(this,ap(t),()=>document.documentElement.appendChild(t))}enteringBardo(t,e){e.replaceWith(t.cloneNode(!0))}leavingBardo(){}}function ap(n){const t=la(document.documentElement),e={};for(const i of t){const{id:r}=i;for(const c of n.querySelectorAll("turbo-stream")){const u=ca(c.templateElement.content,r);u&&(e[r]=[i,u])}}return e}class cp{constructor(t){this.sources=new Set,this.started=!1,this.inspectFetchResponse=e=>{const i=lp(e);i&&up(i)&&(e.preventDefault(),this.receiveMessageResponse(i))},this.receiveMessageEvent=e=>{this.started&&typeof e.data=="string"&&this.receiveMessageHTML(e.data)},this.delegate=t}start(){this.started||(this.started=!0,addEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}stop(){this.started&&(this.started=!1,removeEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}connectStreamSource(t){this.streamSourceIsConnected(t)||(this.sources.add(t),t.addEventListener("message",this.receiveMessageEvent,!1))}disconnectStreamSource(t){this.streamSourceIsConnected(t)&&(this.sources.delete(t),t.removeEventListener("message",this.receiveMessageEvent,!1))}streamSourceIsConnected(t){return this.sources.has(t)}async receiveMessageResponse(t){const e=await t.responseHTML;e&&this.receiveMessageHTML(e)}receiveMessageHTML(t){this.delegate.receivedMessageFromStream(te.wrap(t))}}function lp(n){var t;const e=(t=n.detail)===null||t===void 0?void 0:t.fetchResponse;if(e instanceof Sr)return e}function up(n){var t;return((t=n.contentType)!==null&&t!==void 0?t:"").startsWith(te.contentType)}class Ks extends Cr{static renderElement(t,e){const{documentElement:i,body:r}=document;i.replaceChild(e,r)}async render(){this.replaceHeadAndBody(),this.activateScriptElements()}replaceHeadAndBody(){const{documentElement:t,head:e}=document;t.replaceChild(this.newHead,e),this.renderElement(this.currentElement,this.newElement)}activateScriptElements(){for(const t of this.scriptElements){const e=t.parentNode;if(e){const i=Ie(t);e.replaceChild(i,t)}}}get newHead(){return this.newSnapshot.headSnapshot.element}get scriptElements(){return document.documentElement.querySelectorAll("script")}}class Fn extends Cr{static renderElement(t,e){document.body&&e instanceof HTMLBodyElement?document.body.replaceWith(e):document.documentElement.appendChild(e)}get shouldRender(){return this.newSnapshot.isVisitable&&this.trackedElementsAreIdentical}get reloadReason(){if(!this.newSnapshot.isVisitable)return{reason:"turbo_visit_control_is_reload"};if(!this.trackedElementsAreIdentical)return{reason:"tracked_element_mismatch"}}async prepareToRender(){await this.mergeHead()}async render(){this.willRender&&await this.replaceBody()}finishRendering(){super.finishRendering(),this.isPreview||this.focusFirstAutofocusableElement()}get currentHeadSnapshot(){return this.currentSnapshot.headSnapshot}get newHeadSnapshot(){return this.newSnapshot.headSnapshot}get newElement(){return this.newSnapshot.element}async mergeHead(){const t=this.mergeProvisionalElements(),e=this.copyNewHeadStylesheetElements();this.copyNewHeadScriptElements(),await t,await e}async replaceBody(){await this.preservingPermanentElements(async()=>{this.activateNewBody(),await this.assignNewBody()})}get trackedElementsAreIdentical(){return this.currentHeadSnapshot.trackedElementSignature==this.newHeadSnapshot.trackedElementSignature}async copyNewHeadStylesheetElements(){const t=[];for(const e of this.newHeadStylesheetElements)t.push(Cf(e)),document.head.appendChild(e);await Promise.all(t)}copyNewHeadScriptElements(){for(const t of this.newHeadScriptElements)document.head.appendChild(Ie(t))}async mergeProvisionalElements(){const t=[...this.newHeadProvisionalElements];for(const e of this.currentHeadProvisionalElements)this.isCurrentElementInElementList(e,t)||document.head.removeChild(e);for(const e of t)document.head.appendChild(e)}isCurrentElementInElementList(t,e){for(const[i,r]of e.entries()){if(t.tagName=="TITLE"){if(r.tagName!="TITLE")continue;if(t.innerHTML==r.innerHTML)return e.splice(i,1),!0}if(r.isEqualNode(t))return e.splice(i,1),!0}return!1}removeCurrentHeadProvisionalElements(){for(const t of this.currentHeadProvisionalElements)document.head.removeChild(t)}copyNewHeadProvisionalElements(){for(const t of this.newHeadProvisionalElements)document.head.appendChild(t)}activateNewBody(){document.adoptNode(this.newElement),this.activateNewBodyScriptElements()}activateNewBodyScriptElements(){for(const t of this.newBodyScriptElements){const e=Ie(t);t.replaceWith(e)}}async assignNewBody(){await this.renderElement(this.currentElement,this.newElement)}get newHeadStylesheetElements(){return this.newHeadSnapshot.getStylesheetElementsNotInSnapshot(this.currentHeadSnapshot)}get newHeadScriptElements(){return this.newHeadSnapshot.getScriptElementsNotInSnapshot(this.currentHeadSnapshot)}get currentHeadProvisionalElements(){return this.currentHeadSnapshot.provisionalElements}get newHeadProvisionalElements(){return this.newHeadSnapshot.provisionalElements}get newBodyScriptElements(){return this.newElement.querySelectorAll("script")}}class hp{constructor(t){this.keys=[],this.snapshots={},this.size=t}has(t){return tn(t)in this.snapshots}get(t){if(this.has(t)){const e=this.read(t);return this.touch(t),e}}put(t,e){return this.write(t,e),this.touch(t),e}clear(){this.snapshots={}}read(t){return this.snapshots[tn(t)]}write(t,e){this.snapshots[tn(t)]=e}touch(t){const e=tn(t),i=this.keys.indexOf(e);i>-1&&this.keys.splice(i,1),this.keys.unshift(e),this.trim()}trim(){for(const t of this.keys.splice(this.size))delete this.snapshots[t]}}class dp extends ua{constructor(){super(...arguments),this.snapshotCache=new hp(10),this.lastRenderedLocation=new URL(location.href),this.forceReloaded=!1}renderPage(t,e=!1,i=!0,r){const c=new Fn(this.snapshot,t,Fn.renderElement,e,i);return c.shouldRender?r==null||r.changeHistory():this.forceReloaded=!0,this.render(c)}renderError(t,e){e==null||e.changeHistory();const i=new Ks(this.snapshot,t,Ks.renderElement,!1);return this.render(i)}clearSnapshotCache(){this.snapshotCache.clear()}async cacheSnapshot(t=this.snapshot){if(t.isCacheable){this.delegate.viewWillCacheSnapshot();const{lastRenderedLocation:e}=this;await wf();const i=t.clone();return this.snapshotCache.put(e,i),i}}getCachedSnapshotForLocation(t){return this.snapshotCache.get(t)}get snapshot(){return bt.fromElement(this.element)}}class fp{constructor(t){this.selector="a[data-turbo-preload]",this.delegate=t}get snapshotCache(){return this.delegate.navigator.view.snapshotCache}start(){if(document.readyState==="loading")return document.addEventListener("DOMContentLoaded",()=>{this.preloadOnLoadLinksForView(document.body)});this.preloadOnLoadLinksForView(document.body)}preloadOnLoadLinksForView(t){for(const e of t.querySelectorAll(this.selector))this.preloadURL(e)}async preloadURL(t){const e=new URL(t.href);if(!this.snapshotCache.has(e))try{const r=await(await fetch(e.toString(),{headers:{"VND.PREFETCH":"true",Accept:"text/html"}})).text(),c=bt.fromHTMLString(r);this.snapshotCache.put(e,c)}catch{}}}class pp{constructor(){this.navigator=new ip(this),this.history=new np(this),this.preloader=new fp(this),this.view=new dp(this,document.documentElement),this.adapter=new Zf(this),this.pageObserver=new rp(this),this.cacheObserver=new tp,this.linkClickObserver=new da(this,window),this.formSubmitObserver=new Tr(this,document),this.scrollObserver=new sp(this),this.streamObserver=new cp(this),this.formLinkClickObserver=new fa(this,document.documentElement),this.frameRedirector=new ep(this,document.documentElement),this.streamMessageRenderer=new op,this.drive=!0,this.enabled=!0,this.progressBarDelay=500,this.started=!1,this.formMode="on"}start(){this.started||(this.pageObserver.start(),this.cacheObserver.start(),this.formLinkClickObserver.start(),this.linkClickObserver.start(),this.formSubmitObserver.start(),this.scrollObserver.start(),this.streamObserver.start(),this.frameRedirector.start(),this.history.start(),this.preloader.start(),this.started=!0,this.enabled=!0)}disable(){this.enabled=!1}stop(){this.started&&(this.pageObserver.stop(),this.cacheObserver.stop(),this.formLinkClickObserver.stop(),this.linkClickObserver.stop(),this.formSubmitObserver.stop(),this.scrollObserver.stop(),this.streamObserver.stop(),this.frameRedirector.stop(),this.history.stop(),this.started=!1)}registerAdapter(t){this.adapter=t}visit(t,e={}){const i=e.frame?document.getElementById(e.frame):null;i instanceof Tt?(i.src=t.toString(),i.loaded):this.navigator.proposeVisit(rt(t),e)}connectStreamSource(t){this.streamObserver.connectStreamSource(t)}disconnectStreamSource(t){this.streamObserver.disconnectStreamSource(t)}renderStreamMessage(t){this.streamMessageRenderer.render(te.wrap(t))}clearCache(){this.view.clearSnapshotCache()}setProgressBarDelay(t){this.progressBarDelay=t}setFormMode(t){this.formMode=t}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}historyPoppedToLocationWithRestorationIdentifier(t,e){this.enabled?this.navigator.startVisit(t,e,{action:"restore",historyChanged:!0}):this.adapter.pageInvalidated({reason:"turbo_disabled"})}scrollPositionChanged(t){this.history.updateRestorationData({scrollPosition:t})}willSubmitFormLinkToLocation(t,e){return this.elementIsNavigatable(t)&&ue(e,this.snapshot.rootLocation)}submittedFormLinkToLocation(){}willFollowLinkToLocation(t,e,i){return this.elementIsNavigatable(t)&&ue(e,this.snapshot.rootLocation)&&this.applicationAllowsFollowingLinkToLocation(t,e,i)}followedLinkToLocation(t,e){const i=this.getActionForLink(t),r=t.hasAttribute("data-turbo-stream");this.visit(e.href,{action:i,acceptsStreamResponse:r})}allowsVisitingLocationWithAction(t,e){return this.locationWithActionIsSamePage(t,e)||this.applicationAllowsVisitingLocation(t)}visitProposedToLocation(t,e){Xs(t),this.adapter.visitProposedToLocation(t,e)}visitStarted(t){t.acceptsStreamResponse||Hi(document.documentElement),Xs(t.location),t.silent||this.notifyApplicationAfterVisitingLocation(t.location,t.action)}visitCompleted(t){qi(document.documentElement),this.notifyApplicationAfterPageLoad(t.getTimingMetrics())}locationWithActionIsSamePage(t,e){return this.navigator.locationWithActionIsSamePage(t,e)}visitScrolledToSamePageLocation(t,e){this.notifyApplicationAfterVisitingSamePageLocation(t,e)}willSubmitForm(t,e){const i=wr(t,e);return this.submissionIsNavigatable(t,e)&&ue(rt(i),this.snapshot.rootLocation)}formSubmitted(t,e){this.navigator.submitForm(t,e)}pageBecameInteractive(){this.view.lastRenderedLocation=this.location,this.notifyApplicationAfterPageLoad()}pageLoaded(){this.history.assumeControlOfScrollRestoration()}pageWillUnload(){this.history.relinquishControlOfScrollRestoration()}receivedMessageFromStream(t){this.renderStreamMessage(t)}viewWillCacheSnapshot(){var t;!((t=this.navigator.currentVisit)===null||t===void 0)&&t.silent||this.notifyApplicationBeforeCachingSnapshot()}allowsImmediateRender({element:t},e){const i=this.notifyApplicationBeforeRender(t,e),{defaultPrevented:r,detail:{render:c}}=i;return this.view.renderer&&c&&(this.view.renderer.renderElement=c),!r}viewRenderedSnapshot(t,e){this.view.lastRenderedLocation=this.history.location,this.notifyApplicationAfterRender()}preloadOnLoadLinksForView(t){this.preloader.preloadOnLoadLinksForView(t)}viewInvalidated(t){this.adapter.pageInvalidated(t)}frameLoaded(t){this.notifyApplicationAfterFrameLoad(t)}frameRendered(t,e){this.notifyApplicationAfterFrameRender(t,e)}applicationAllowsFollowingLinkToLocation(t,e,i){return!this.notifyApplicationAfterClickingLinkToLocation(t,e,i).defaultPrevented}applicationAllowsVisitingLocation(t){return!this.notifyApplicationBeforeVisitingLocation(t).defaultPrevented}notifyApplicationAfterClickingLinkToLocation(t,e,i){return et("turbo:click",{target:t,detail:{url:e.href,originalEvent:i},cancelable:!0})}notifyApplicationBeforeVisitingLocation(t){return et("turbo:before-visit",{detail:{url:t.href},cancelable:!0})}notifyApplicationAfterVisitingLocation(t,e){return et("turbo:visit",{detail:{url:t.href,action:e}})}notifyApplicationBeforeCachingSnapshot(){return et("turbo:before-cache")}notifyApplicationBeforeRender(t,e){return et("turbo:before-render",{detail:Object.assign({newBody:t},e),cancelable:!0})}notifyApplicationAfterRender(){return et("turbo:render")}notifyApplicationAfterPageLoad(t={}){return et("turbo:load",{detail:{url:this.location.href,timing:t}})}notifyApplicationAfterVisitingSamePageLocation(t,e){dispatchEvent(new HashChangeEvent("hashchange",{oldURL:t.toString(),newURL:e.toString()}))}notifyApplicationAfterFrameLoad(t){return et("turbo:frame-load",{target:t})}notifyApplicationAfterFrameRender(t,e){return et("turbo:frame-render",{detail:{fetchResponse:t},target:e,cancelable:!0})}submissionIsNavigatable(t,e){if(this.formMode=="off")return!1;{const i=e?this.elementIsNavigatable(e):!0;return this.formMode=="optin"?i&&t.closest('[data-turbo="true"]')!=null:i&&this.elementIsNavigatable(t)}}elementIsNavigatable(t){const e=Mn(t,"[data-turbo]"),i=Mn(t,"turbo-frame");return this.drive||i?e?e.getAttribute("data-turbo")!="false":!0:e?e.getAttribute("data-turbo")=="true":!1}getActionForLink(t){return Xn(t)||"advance"}get snapshot(){return this.view.snapshot}}function Xs(n){Object.defineProperties(n,mp)}const mp={absoluteURL:{get(){return this.toString()}}};class gp{constructor(t){this.session=t}clear(){this.session.clearCache()}resetCacheControl(){this.setCacheControl("")}exemptPageFromCache(){this.setCacheControl("no-cache")}exemptPageFromPreview(){this.setCacheControl("no-preview")}setCacheControl(t){_f("turbo-cache-control",t)}}const kr={after(){this.targetElements.forEach(n=>{var t;return(t=n.parentElement)===null||t===void 0?void 0:t.insertBefore(this.templateContent,n.nextSibling)})},append(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(n=>n.append(this.templateContent))},before(){this.targetElements.forEach(n=>{var t;return(t=n.parentElement)===null||t===void 0?void 0:t.insertBefore(this.templateContent,n)})},prepend(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(n=>n.prepend(this.templateContent))},remove(){this.targetElements.forEach(n=>n.remove())},replace(){this.targetElements.forEach(n=>n.replaceWith(this.templateContent))},update(){this.targetElements.forEach(n=>{n.innerHTML="",n.append(this.templateContent)})}},$=new pp,ma=new gp($),{navigator:ga}=$;function Jn(){$.start()}function va(n){$.registerAdapter(n)}function _r(n,t){$.visit(n,t)}function Gn(n){$.connectStreamSource(n)}function Qn(n){$.disconnectStreamSource(n)}function xr(n){$.renderStreamMessage(n)}function ba(){console.warn("Please replace `Turbo.clearCache()` with `Turbo.cache.clear()`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),$.clearCache()}function ya(n){$.setProgressBarDelay(n)}function wa(n){Ue.confirmMethod=n}function Sa(n){$.setFormMode(n)}var vp=Object.freeze({__proto__:null,navigator:ga,session:$,cache:ma,PageRenderer:Fn,PageSnapshot:bt,FrameRenderer:In,start:Jn,registerAdapter:va,visit:_r,connectStreamSource:Gn,disconnectStreamSource:Qn,renderStreamMessage:xr,clearCache:ba,setProgressBarDelay:ya,setConfirmMethod:wa,setFormMode:Sa,StreamActions:kr});class bp extends Error{}class yp{constructor(t){this.fetchResponseLoaded=e=>{},this.currentFetchRequest=null,this.resolveVisitPromise=()=>{},this.connected=!1,this.hasBeenLoaded=!1,this.ignoredAttributes=new Set,this.action=null,this.visitCachedSnapshot=({element:e})=>{const i=e.querySelector("#"+this.element.id);i&&this.previousFrameElement&&i.replaceChildren(...this.previousFrameElement.children),delete this.previousFrameElement},this.element=t,this.view=new Hf(this,this.element),this.appearanceObserver=new Lf(this,this.element),this.formLinkClickObserver=new fa(this,this.element),this.linkInterceptor=new ha(this,this.element),this.restorationIdentifier=ye(),this.formSubmitObserver=new Tr(this,this.element)}connect(){this.connected||(this.connected=!0,this.loadingStyle==Dt.lazy?this.appearanceObserver.start():this.loadSourceURL(),this.formLinkClickObserver.start(),this.linkInterceptor.start(),this.formSubmitObserver.start())}disconnect(){this.connected&&(this.connected=!1,this.appearanceObserver.stop(),this.formLinkClickObserver.stop(),this.linkInterceptor.stop(),this.formSubmitObserver.stop())}disabledChanged(){this.loadingStyle==Dt.eager&&this.loadSourceURL()}sourceURLChanged(){this.isIgnoringChangesTo("src")||(this.element.isConnected&&(this.complete=!1),(this.loadingStyle==Dt.eager||this.hasBeenLoaded)&&this.loadSourceURL())}sourceURLReloaded(){const{src:t}=this.element;return this.ignoringChangesToAttribute("complete",()=>{this.element.removeAttribute("complete")}),this.element.src=null,this.element.src=t,this.element.loaded}completeChanged(){this.isIgnoringChangesTo("complete")||this.loadSourceURL()}loadingStyleChanged(){this.loadingStyle==Dt.lazy?this.appearanceObserver.start():(this.appearanceObserver.stop(),this.loadSourceURL())}async loadSourceURL(){this.enabled&&this.isActive&&!this.complete&&this.sourceURL&&(this.element.loaded=this.visit(rt(this.sourceURL)),this.appearanceObserver.stop(),await this.element.loaded,this.hasBeenLoaded=!0)}async loadResponse(t){(t.redirected||t.succeeded&&t.isHTML)&&(this.sourceURL=t.response.url);try{const e=await t.responseHTML;if(e){const i=ra(e);bt.fromDocument(i).isVisitable?await this.loadFrameResponse(t,i):await this.handleUnvisitableFrameResponse(t)}}finally{this.fetchResponseLoaded=()=>{}}}elementAppearedInViewport(t){this.proposeVisitIfNavigatedWithAction(t,t),this.loadSourceURL()}willSubmitFormLinkToLocation(t){return this.shouldInterceptNavigation(t)}submittedFormLinkToLocation(t,e,i){const r=this.findFrameElement(t);r&&i.setAttribute("data-turbo-frame",r.id)}shouldInterceptLinkClick(t,e,i){return this.shouldInterceptNavigation(t)}linkClickIntercepted(t,e){this.navigateFrame(t,e)}willSubmitForm(t,e){return t.closest("turbo-frame")==this.element&&this.shouldInterceptNavigation(t,e)}formSubmitted(t,e){this.formSubmission&&this.formSubmission.stop(),this.formSubmission=new Ue(this,t,e);const{fetchRequest:i}=this.formSubmission;this.prepareRequest(i),this.formSubmission.start()}prepareRequest(t){var e;t.headers["Turbo-Frame"]=this.id,!((e=this.currentNavigationElement)===null||e===void 0)&&e.hasAttribute("data-turbo-stream")&&t.acceptResponseType(te.contentType)}requestStarted(t){Hi(this.element)}requestPreventedHandlingResponse(t,e){this.resolveVisitPromise()}async requestSucceededWithResponse(t,e){await this.loadResponse(e),this.resolveVisitPromise()}async requestFailedWithResponse(t,e){await this.loadResponse(e),this.resolveVisitPromise()}requestErrored(t,e){console.error(e),this.resolveVisitPromise()}requestFinished(t){qi(this.element)}formSubmissionStarted({formElement:t}){Hi(t,this.findFrameElement(t))}formSubmissionSucceededWithResponse(t,e){const i=this.findFrameElement(t.formElement,t.submitter);i.delegate.proposeVisitIfNavigatedWithAction(i,t.formElement,t.submitter),i.delegate.loadResponse(e),t.isSafe||$.clearCache()}formSubmissionFailedWithResponse(t,e){this.element.delegate.loadResponse(e),$.clearCache()}formSubmissionErrored(t,e){console.error(e)}formSubmissionFinished({formElement:t}){qi(t,this.findFrameElement(t))}allowsImmediateRender({element:t},e){const i=et("turbo:before-frame-render",{target:this.element,detail:Object.assign({newFrame:t},e),cancelable:!0}),{defaultPrevented:r,detail:{render:c}}=i;return this.view.renderer&&c&&(this.view.renderer.renderElement=c),!r}viewRenderedSnapshot(t,e){}preloadOnLoadLinksForView(t){$.preloadOnLoadLinksForView(t)}viewInvalidated(){}willRenderFrame(t,e){this.previousFrameElement=t.cloneNode(!0)}async loadFrameResponse(t,e){const i=await this.extractForeignFrameElement(e.body);if(i){const r=new Yn(i),c=new In(this,this.view.snapshot,r,In.renderElement,!1,!1);this.view.renderPromise&&await this.view.renderPromise,this.changeHistory(),await this.view.render(c),this.complete=!0,$.frameRendered(t,this.element),$.frameLoaded(this.element),this.fetchResponseLoaded(t)}else this.willHandleFrameMissingFromResponse(t)&&this.handleFrameMissingFromResponse(t)}async visit(t){var e;const i=new Er(this,ct.get,t,new URLSearchParams,this.element);return(e=this.currentFetchRequest)===null||e===void 0||e.cancel(),this.currentFetchRequest=i,new Promise(r=>{this.resolveVisitPromise=()=>{this.resolveVisitPromise=()=>{},this.currentFetchRequest=null,r()},i.perform()})}navigateFrame(t,e,i){const r=this.findFrameElement(t,i);r.delegate.proposeVisitIfNavigatedWithAction(r,t,i),this.withCurrentNavigationElement(t,()=>{r.src=e})}proposeVisitIfNavigatedWithAction(t,e,i){if(this.action=Xn(i,e,t),this.action){const r=bt.fromElement(t).clone(),{visitCachedSnapshot:c}=t.delegate;t.delegate.fetchResponseLoaded=u=>{if(t.src){const{statusCode:d,redirected:p}=u,m=t.ownerDocument.documentElement.outerHTML,v={response:{statusCode:d,redirected:p,responseHTML:m},visitCachedSnapshot:c,willRender:!1,updateHistory:!1,restorationIdentifier:this.restorationIdentifier,snapshot:r};this.action&&(v.action=this.action),$.visit(t.src,v)}}}}changeHistory(){if(this.action){const t=oa(this.action);$.history.update(t,rt(this.element.src||""),this.restorationIdentifier)}}async handleUnvisitableFrameResponse(t){console.warn(`The response (${t.statusCode}) from <turbo-frame id="${this.element.id}"> is performing a full page visit due to turbo-visit-control.`),await this.visitResponse(t.response)}willHandleFrameMissingFromResponse(t){this.element.setAttribute("complete","");const e=t.response,i=async(c,u={})=>{c instanceof Response?this.visitResponse(c):$.visit(c,u)};return!et("turbo:frame-missing",{target:this.element,detail:{response:e,visit:i},cancelable:!0}).defaultPrevented}handleFrameMissingFromResponse(t){this.view.missing(),this.throwFrameMissingError(t)}throwFrameMissingError(t){const e=`The response (${t.statusCode}) did not contain the expected <turbo-frame id="${this.element.id}"> and will be ignored. To perform a full page visit instead, set turbo-visit-control to reload.`;throw new bp(e)}async visitResponse(t){const e=new Sr(t),i=await e.responseHTML,{location:r,redirected:c,statusCode:u}=e;return $.visit(r,{response:{redirected:c,statusCode:u,responseHTML:i}})}findFrameElement(t,e){var i;const r=Pn("data-turbo-frame",e,t)||this.element.getAttribute("target");return(i=Ys(r))!==null&&i!==void 0?i:this.element}async extractForeignFrameElement(t){let e;const i=CSS.escape(this.id);try{if(e=Js(t.querySelector(`turbo-frame#${i}`),this.sourceURL),e)return e;if(e=Js(t.querySelector(`turbo-frame[src][recurse~=${i}]`),this.sourceURL),e)return await e.loaded,await this.extractForeignFrameElement(e)}catch(r){return console.error(r),new Tt}return null}formActionIsVisitable(t,e){const i=wr(t,e);return ue(rt(i),this.rootLocation)}shouldInterceptNavigation(t,e){const i=Pn("data-turbo-frame",e,t)||this.element.getAttribute("target");if(t instanceof HTMLFormElement&&!this.formActionIsVisitable(t,e)||!this.enabled||i=="_top")return!1;if(i){const r=Ys(i);if(r)return!r.disabled}return!(!$.elementIsNavigatable(t)||e&&!$.elementIsNavigatable(e))}get id(){return this.element.id}get enabled(){return!this.element.disabled}get sourceURL(){if(this.element.src)return this.element.src}set sourceURL(t){this.ignoringChangesToAttribute("src",()=>{this.element.src=t??null})}get loadingStyle(){return this.element.loading}get isLoading(){return this.formSubmission!==void 0||this.resolveVisitPromise()!==void 0}get complete(){return this.element.hasAttribute("complete")}set complete(t){this.ignoringChangesToAttribute("complete",()=>{t?this.element.setAttribute("complete",""):this.element.removeAttribute("complete")})}get isActive(){return this.element.isActive&&this.connected}get rootLocation(){var t;const e=this.element.ownerDocument.querySelector('meta[name="turbo-root"]'),i=(t=e==null?void 0:e.content)!==null&&t!==void 0?t:"/";return rt(i)}isIgnoringChangesTo(t){return this.ignoredAttributes.has(t)}ignoringChangesToAttribute(t,e){this.ignoredAttributes.add(t),e(),this.ignoredAttributes.delete(t)}withCurrentNavigationElement(t,e){this.currentNavigationElement=t,e(),delete this.currentNavigationElement}}function Ys(n){if(n!=null){const t=document.getElementById(n);if(t instanceof Tt)return t}}function Js(n,t){if(n){const e=n.getAttribute("src");if(e!=null&&t!=null&&ff(e,t))throw new Error(`Matching <turbo-frame id="${n.id}"> element has a source URL which references itself`);if(n.ownerDocument!==document&&(n=document.importNode(n,!0)),n instanceof Tt)return n.connectedCallback(),n.disconnectedCallback(),n}}class Zn extends HTMLElement{static async renderElement(t){await t.performAction()}async connectedCallback(){try{await this.render()}catch(t){console.error(t)}finally{this.disconnect()}}async render(){var t;return(t=this.renderPromise)!==null&&t!==void 0?t:this.renderPromise=(async()=>{const e=this.beforeRenderEvent;this.dispatchEvent(e)&&(await vn(),await e.detail.render(this))})()}disconnect(){try{this.remove()}catch{}}removeDuplicateTargetChildren(){this.duplicateChildren.forEach(t=>t.remove())}get duplicateChildren(){var t;const e=this.targetElements.flatMap(r=>[...r.children]).filter(r=>!!r.id),i=[...((t=this.templateContent)===null||t===void 0?void 0:t.children)||[]].filter(r=>!!r.id).map(r=>r.id);return e.filter(r=>i.includes(r.id))}get performAction(){if(this.action){const t=kr[this.action];if(t)return t;this.raise("unknown action")}this.raise("action attribute is missing")}get targetElements(){if(this.target)return this.targetElementsById;if(this.targets)return this.targetElementsByQuery;this.raise("target or targets attribute is missing")}get templateContent(){return this.templateElement.content.cloneNode(!0)}get templateElement(){if(this.firstElementChild===null){const t=this.ownerDocument.createElement("template");return this.appendChild(t),t}else if(this.firstElementChild instanceof HTMLTemplateElement)return this.firstElementChild;this.raise("first child element must be a <template> element")}get action(){return this.getAttribute("action")}get target(){return this.getAttribute("target")}get targets(){return this.getAttribute("targets")}raise(t){throw new Error(`${this.description}: ${t}`)}get description(){var t,e;return(e=((t=this.outerHTML.match(/<[^>]+>/))!==null&&t!==void 0?t:[])[0])!==null&&e!==void 0?e:"<turbo-stream>"}get beforeRenderEvent(){return new CustomEvent("turbo:before-stream-render",{bubbles:!0,cancelable:!0,detail:{newStream:this,render:Zn.renderElement}})}get targetElementsById(){var t;const e=(t=this.ownerDocument)===null||t===void 0?void 0:t.getElementById(this.target);return e!==null?[e]:[]}get targetElementsByQuery(){var t;const e=(t=this.ownerDocument)===null||t===void 0?void 0:t.querySelectorAll(this.targets);return e.length!==0?Array.prototype.slice.call(e):[]}}class Ea extends HTMLElement{constructor(){super(...arguments),this.streamSource=null}connectedCallback(){this.streamSource=this.src.match(/^ws{1,2}:/)?new WebSocket(this.src):new EventSource(this.src),Gn(this.streamSource)}disconnectedCallback(){this.streamSource&&Qn(this.streamSource)}get src(){return this.getAttribute("src")||""}}Tt.delegateConstructor=yp;customElements.get("turbo-frame")===void 0&&customElements.define("turbo-frame",Tt);customElements.get("turbo-stream")===void 0&&customElements.define("turbo-stream",Zn);customElements.get("turbo-stream-source")===void 0&&customElements.define("turbo-stream-source",Ea);(()=>{let n=document.currentScript;if(n&&!n.hasAttribute("data-turbo-suppress-warning"))for(n=n.parentElement;n;){if(n==document.body)return console.warn(sa`
        You are loading Turbo from a <script> element inside the <body> element. This is probably not what you meant to do!

        Load your applicationâs JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.

        For more information, see: https://turbo.hotwired.dev/handbook/building#working-with-script-elements

        ââ
        Suppress this warning by adding a "data-turbo-suppress-warning" attribute to: %s
      `,n.outerHTML);n=n.parentElement}})();window.Turbo=vp;Jn();const wp=Object.freeze(Object.defineProperty({__proto__:null,FrameElement:Tt,get FrameLoadingStyle(){return Dt},FrameRenderer:In,PageRenderer:Fn,PageSnapshot:bt,StreamActions:kr,StreamElement:Zn,StreamSourceElement:Ea,cache:ma,clearCache:ba,connectStreamSource:Gn,disconnectStreamSource:Qn,navigator:ga,registerAdapter:va,renderStreamMessage:xr,session:$,setConfirmMethod:wa,setFormMode:Sa,setProgressBarDelay:ya,start:Jn,visit:_r},Symbol.toStringTag,{value:"Module"})),Sp=(n,t)=>n==="presence"?window.Echo.join(t):window.Echo[n](t);class Ep extends HTMLElement{async connectedCallback(){Gn(this),this.subscription=Sp(this.type,this.channel).listenToAll((t,e)=>{this.dispatchMessageEvent(e.streams)})}disconnectedCallback(){Qn(this),this.subscription&&(window.Echo.leave(this.channel),this.subscription=null)}dispatchMessageEvent(t){const e=new MessageEvent("message",{data:t});return this.dispatchEvent(e)}get channel(){return this.getAttribute("channel")||""}get type(){return this.getAttribute("type")||"private"}}window.Pusher=of;window.Waterhole.echoConfig.broadcaster&&(window.Echo=new rf({namespace:"Waterhole.Events",...window.Waterhole.echoConfig}),window.Echo.registerTurboRequestInterceptor(),customElements.define("turbo-echo-stream-source",Ep));class Ni{constructor(t){this.children=[],this.parent=t}delete(t){const e=this.children.indexOf(t);return e===-1?!1:(this.children=this.children.slice(0,e).concat(this.children.slice(e+1)),this.children.length===0&&this.parent.delete(this),!0)}add(t){return this.children.push(t),this}}class Dn{constructor(t){this.parent=null,this.children={},this.parent=t||null}get(t){return this.children[t]}insert(t){let e=this;for(let i=0;i<t.length;i+=1){const r=t[i];let c=e.get(r);if(i===t.length-1)return c instanceof Dn&&(e.delete(c),c=null),c||(c=new Ni(e),e.children[r]=c),c;c instanceof Ni&&(c=null),c||(c=new Dn(e),e.children[r]=c),e=c}return e}delete(t){for(const e in this.children)if(this.children[e]===t){const r=delete this.children[e];return Object.keys(this.children).length===0&&this.parent&&this.parent.delete(this),r}return!1}}const Tp={"Â¡":"1","â¢":"2","Â£":"3","Â¢":"4","â":"5","Â§":"6","Â¶":"7","â¢":"8",Âª:"9",Âº:"0","â":"-","â ":"=","â":"!","â¬":"@","â¹":"#","âº":"$",ï¬:"%",ï¬:"^","â¡":"&","Â°":"*","Â·":"(","â":")","â":"_","Â±":"+",Å:"q","â":"w","Â®":"r","â ":"t","Â¥":"y",Ã¸:"o",Ï:"p","â":"[","â":"]","Â«":"\\",Å:"Q","â":"W","Â´":"E","â°":"R","Ë":"T",Ã:"Y","Â¨":"U","Ë":"I",Ã:"O","â":"P","â":"{","â":"}","Â»":"|",Ã¥:"a",Ã:"s","â":"d",Æ:"f","Â©":"g","Ë":"h","â":"j","Ë":"k","Â¬":"l","â¦":";",Ã¦:"'",Ã:"A",Ã:"S",Ã:"D",Ã:"F","Ë":"G",Ã:"H",Ã:"J","ï£¿":"K",Ã:"L",Ã:":",Ã:'"',Î©:"z","â":"x",Ã§:"c","â":"v","â«":"b",Âµ:"m","â¤":",","â¥":".","Ã·":"/","Â¸":"Z","Ë":"X",Ã:"C","â":"V",Ä±:"B","Ë":"N",Ã:"M","Â¯":"<","Ë":">","Â¿":"?"},Cp={" ":"Space","+":"Plus"};function Ta(n,t=navigator.platform){var e,i;const{ctrlKey:r,altKey:c,metaKey:u,key:d}=n,p=[],m=[r,c,u,kp(n)];for(const[g,v]of m.entries())v&&p.push(Gs[g]);if(!Gs.includes(d)){const g=p.includes("Alt")&&Ca.test(t)&&(e=Tp[d])!==null&&e!==void 0?e:d,v=(i=Cp[g])!==null&&i!==void 0?i:g;p.push(v)}return p.join("+")}const Gs=["Control","Alt","Meta","Shift"];function kp(n){const{shiftKey:t,code:e,key:i}=n;return t&&!(e.startsWith("Key")&&i.toUpperCase()===i)}function _p(n,t){let e;return e=xp(n,t),e=Lp(e),e}const Ca=/Mac|iPod|iPhone|iPad/i;function xp(n,t=navigator.platform){const e=Ca.test(t)?"Meta":"Control";return n.replace("Mod",e)}function Lp(n){const t=n.split("+").pop(),e=[];for(const i of["Control","Alt","Meta","Shift"])n.includes(i)&&e.push(i);return e.push(t),e.join("+")}const ka=" ";class ti{constructor({onReset:t}={}){this._path=[],this.timer=null,this.onReset=t}get path(){return this._path}get sequence(){return this._path.join(ka)}registerKeypress(t){this._path=[...this._path,Ta(t)],this.startTimer()}reset(){var t;this.killTimer(),this._path=[],(t=this.onReset)===null||t===void 0||t.call(this)}killTimer(){this.timer!=null&&window.clearTimeout(this.timer),this.timer=null}startTimer(){this.killTimer(),this.timer=window.setTimeout(()=>this.reset(),ti.CHORD_TIMEOUT)}}ti.CHORD_TIMEOUT=1500;function Bi(n){if(!(n instanceof HTMLElement))return!1;const t=n.nodeName.toLowerCase(),e=(n.getAttribute("type")||"").toLowerCase();return t==="select"||t==="textarea"||t==="input"&&e!=="submit"&&e!=="reset"&&e!=="checkbox"&&e!=="radio"&&e!=="file"||n.isContentEditable}function Ap(n,t){const e=new CustomEvent("hotkey-fire",{cancelable:!0,detail:{path:t}});n.dispatchEvent(e)&&(Bi(n)?n.focus():n.click())}function Rp(n){const t=[];let e=[""],i=!1;for(let r=0;r<n.length;r++){if(i&&n[r]===","){t.push(e),e=[""],i=!1;continue}if(n[r]===ka){e.push(""),i=!1;continue}else n[r]==="+"?i=!1:i=!0;e[e.length-1]+=n[r]}return t.push(e),t.map(r=>r.map(c=>_p(c)).filter(c=>c!=="")).filter(r=>r.length>0)}const Hn=new Dn,Pp=new WeakMap;let ji=Hn;const en=new ti({onReset(){ji=Hn}});function Op(n){if(n.defaultPrevented||!(n.target instanceof Node))return;if(Bi(n.target)){const e=n.target;if(!e.id||!e.ownerDocument.querySelector(`[data-hotkey-scope="${e.id}"]`))return}const t=ji.get(Ta(n));if(!t){en.reset();return}if(en.registerKeypress(n),ji=t,t instanceof Ni){const e=n.target;let i=!1,r;const c=Bi(e);for(let u=t.children.length-1;u>=0;u-=1){r=t.children[u];const d=r.getAttribute("data-hotkey-scope");if(!c&&!d||c&&e.id===d){i=!0;break}}r&&i&&(Ap(r,en.path),n.preventDefault()),en.reset()}}function Mp(n,t){Object.keys(Hn.children).length===0&&document.addEventListener("keydown",Op);const i=Rp(n.getAttribute("data-hotkey")||"").map(r=>Hn.insert(r).add(n));Pp.set(n,i)}function Lr(n){n.target.querySelectorAll("[data-hotkey]").forEach(t=>{Mp(t)})}document.addEventListener("DOMContentLoaded",Lr);document.addEventListener("turbo:render",Lr);document.addEventListener("turbo:frame-render",Lr);Ht.notEqual=Dp;Ht.notOk=Hp;Ht.equal=Fp;Ht.ok=Ht;var Ip=Ht;function Fp(n,t,e){Ht(n==t,e)}function Dp(n,t,e){Ht(n!=t,e)}function Hp(n,t){Ht(!n,t)}function Ht(n,t){if(!n)throw new Error(t||"AssertionError")}var qp=["onclick","ondblclick","onmousedown","onmouseup","onmouseover","onmousemove","onmouseout","onmouseenter","onmouseleave","ontouchcancel","ontouchend","ontouchmove","ontouchstart","ondragstart","ondrag","ondragenter","ondragleave","ondragover","ondrop","ondragend","onkeydown","onkeypress","onkeyup","onunload","onabort","onerror","onresize","onscroll","onselect","onchange","onsubmit","onreset","onfocus","onblur","oninput","onanimationend","onanimationiteration","onanimationstart","oncontextmenu","onfocusin","onfocusout"],_a=qp,Np=_a.length,Bp=1,jp=3,Up=8,Wp=$p;function $p(n,t){var e=n.nodeType,i=n.nodeName;e===Bp&&Vp(n,t),(e===jp||e===Up)&&t.nodeValue!==n.nodeValue&&(t.nodeValue=n.nodeValue),i==="INPUT"?Xp(n,t):i==="OPTION"?Kp(n,t):i==="TEXTAREA"&&Yp(n,t),zp(n,t)}function Vp(n,t){for(var e=t.attributes,i=n.attributes,r=null,c=null,u=null,d=null,p=null,m=i.length-1;m>=0;--m)p=i[m],d=p.name,r=p.namespaceURI,c=p.value,r?(d=p.localName||d,u=t.getAttributeNS(r,d),u!==c&&t.setAttributeNS(r,d,c)):t.hasAttribute(d)?(u=t.getAttribute(d),u!==c&&(c==="null"||c==="undefined"?t.removeAttribute(d):t.setAttribute(d,c))):t.setAttribute(d,c);for(var g=e.length-1;g>=0;--g)p=e[g],p.specified!==!1&&(d=p.name,r=p.namespaceURI,r?(d=p.localName||d,n.hasAttributeNS(r,d)||t.removeAttributeNS(r,d)):n.hasAttributeNS(null,d)||t.removeAttribute(d))}function zp(n,t){for(var e=0;e<Np;e++){var i=_a[e];n[i]?t[i]=n[i]:t[i]&&(t[i]=void 0)}}function Kp(n,t){Ui(n,t,"selected")}function Xp(n,t){var e=n.value,i=t.value;Ui(n,t,"checked"),Ui(n,t,"disabled"),n.indeterminate!==t.indeterminate&&(t.indeterminate=n.indeterminate),t.type!=="file"&&(e!==i&&(t.setAttribute("value",e),t.value=e),e==="null"&&(t.value="",t.removeAttribute("value")),n.hasAttributeNS(null,"value")?t.type==="range"&&(t.value=e):t.removeAttribute("value"))}function Yp(n,t){var e=n.value;if(e!==t.value&&(t.value=e),t.firstChild&&t.firstChild.nodeValue!==e){if(e===""&&t.firstChild.nodeValue===t.placeholder)return;t.firstChild.nodeValue=e}}function Ui(n,t,e){n[e]!==t[e]&&(t[e]=n[e],n[e]?t.setAttribute(e,""):t.removeAttribute(e))}var Si=Ip,Jp=Wp,Gp=3,Qp=Zp;function Zp(n,t,e){return Si.equal(typeof n,"object","nanomorph: oldTree should be an object"),Si.equal(typeof t,"object","nanomorph: newTree should be an object"),e&&e.childrenOnly?(xa(t,n),n):(Si.notEqual(t.nodeType,11,"nanomorph: newTree should have one root node (which is not a DocumentFragment)"),bn(t,n))}function bn(n,t){return t?n?n.isSameNode&&n.isSameNode(t)?t:n.tagName!==t.tagName||Qs(n)!==Qs(t)?n:(Jp(n,t),xa(n,t),t):null:n}function Qs(n){return n.dataset?n.dataset.nanomorphComponentId:void 0}function xa(n,t){for(var e,i,r,c,u=0,d=0;e=t.childNodes[d],i=n.childNodes[d-u],!(!e&&!i);d++)if(!i)t.removeChild(e),d--;else if(!e)t.appendChild(i),u++;else if(Zs(i,e))r=bn(i,e),r!==e&&(t.replaceChild(r,e),u++);else{c=null;for(var p=d;p<t.childNodes.length;p++)if(Zs(t.childNodes[p],i)){c=t.childNodes[p];break}c?(r=bn(i,c),r!==c&&u++,t.insertBefore(r,e)):!i.id&&!e.id?(r=bn(i,e),r!==e&&(t.replaceChild(r,e),u++)):(t.insertBefore(i,e),u++)}}function Zs(n,t){return n.id?n.id===t.id:n.isSameNode?n.isSameNode(t):n.tagName!==t.tagName?!1:n.type===Gp?n.nodeValue===t.nodeValue:!1}const tm=lo(Qp);Jn();window.Turbo=wp;document.addEventListener("turbo:before-stream-render",n=>{const{detail:t}=n,e=t.render;t.render=i=>{i.action==="replace"?i.targetElements.forEach(r=>{tm(r,i.templateContent.firstElementChild)}):e(i)}});document.addEventListener("turbo:before-fetch-response",async n=>{var i;const t=n.detail.fetchResponse.response;if(t.ok||t.status===422)return;n.preventDefault();const{target:e}=n;if(e instanceof Tt){const r=yn("frame-error");(i=r.querySelector("button"))==null||i.addEventListener("click",()=>{e.reload()}),e.replaceChildren(r)}else Waterhole.fetchError(t)});document.addEventListener("turbo:frame-missing",async n=>{n.preventDefault();const{detail:t}=n;t.visit(t.response,{action:"replace"})});Waterhole.fetchError=async function(n){let t;switch(n==null?void 0:n.status){case 401:case 403:t="forbidden-alert";break;case 419:t="session-expired-alert";break;case 422:const e=yn("template-alert-danger");e.querySelector(".alert__message").textContent=(await n.json()).message,Waterhole.alerts.show(e,{key:"fetchError"});break;case 429:t="too-many-requests-alert";break;default:t="fatal-error-alert"}if(t){const e=yn(t);e&&Waterhole.alerts.show(e,{key:"fetchError"})}};const Mr=class Mr extends U{preload(){var t;this.hasFrameTarget&&((t=this.frameTarget)==null||t.setAttribute("loading","eager"))}};Mr.targets=["frame"];let Wi=Mr;class em extends U{dismiss(t){const e=this.element.closest("ui-alerts");e?e.dismiss(this.element):this.element.remove()}}const to={},Ir=class Ir extends U{get commentId(){return this.element.getAttribute("data-comment-id")||""}get parentId(){return this.element.getAttribute("data-parent-id")||""}get parentElements(){return Array.from(document.querySelectorAll(`[data-comment-id="${this.parentId}"]`))}connect(){to[this.commentId]&&this.toggleHidden()}disconnect(){to[this.commentId]=this.element.classList.contains("is-expanded")}toggleHidden(){this.element.classList.toggle("is-expanded")}highlightParent(){this.parentElements.forEach(t=>{t.classList.add("is-highlighted")}),this.parentTooltipTarget&&(this.parentTooltipTarget.disabled=this.parentElements.some(t=>Vu(t,.5)))}stopHighlightingParent(){this.parentElements.forEach(t=>{t.classList.remove("is-highlighted")})}};Ir.targets=["parentTooltip"];let $i=Ir;class nm extends U{connect(){this.element.addEventListener("click",t=>{var r;const e=this.element.getAttribute("aria-expanded")==="false";this.element.setAttribute("aria-expanded",String(e));const i=(r=this.element.closest(".comment"))==null?void 0:r.querySelector(".comment__replies");i&&(i.hidden=!e),e||t.preventDefault()})}focusAfterLoad(){addEventListener("turbo:frame-render",t=>{var i;const e=window.scrollY;(i=t.target.querySelector(".comment__replies"))==null||i.focus(),window.scroll({top:e})},{once:!0})}}var im=function(n,t,e,i){function r(c){return c instanceof e?c:new e(function(u){u(c)})}return new(e||(e=Promise))(function(c,u){function d(g){try{m(i.next(g))}catch(v){u(v)}}function p(g){try{m(i.throw(g))}catch(v){u(v)}}function m(g){g.done?c(g.value):r(g.value).then(d,p)}m((i=i.apply(n,t||[])).next())})};function nn(n){let t=0,e=0,i=n;do t+=i.offsetTop||0,e+=i.offsetLeft||0,i=i.offsetParent;while(i);return{top:t,left:e}}class rm{constructor(t){this.element=t}getHorizontalScroll(){return this.element.scrollLeft}getVerticalScroll(){return this.element.scrollTop}getMaxHorizontalScroll(){return this.element.scrollWidth-this.element.clientWidth}getMaxVerticalScroll(){return this.element.scrollHeight-this.element.clientHeight}getHorizontalElementScrollOffset(t,e){return nn(t).left-nn(e).left}getVerticalElementScrollOffset(t,e){return nn(t).top-nn(e).top}scrollTo(t,e){this.element.scrollLeft=t,this.element.scrollTop=e}}class sm{constructor(){this.element=window}getHorizontalScroll(){return window.scrollX||document.documentElement.scrollLeft}getVerticalScroll(){return window.scrollY||document.documentElement.scrollTop}getMaxHorizontalScroll(){return Math.max(document.body.scrollWidth,document.documentElement.scrollWidth,document.body.offsetWidth,document.documentElement.offsetWidth,document.body.clientWidth,document.documentElement.clientWidth)-window.innerWidth}getMaxVerticalScroll(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)-window.innerHeight}getHorizontalElementScrollOffset(t){return(window.scrollX||document.documentElement.scrollLeft)+t.getBoundingClientRect().left}getVerticalElementScrollOffset(t){return(window.scrollY||document.documentElement.scrollTop)+t.getBoundingClientRect().top}scrollTo(t,e){window.scrollTo(t,e)}}const It={elements:[],cancelMethods:[],add:(n,t)=>{It.elements.push(n),It.cancelMethods.push(t)},remove:(n,t)=>{const e=It.elements.indexOf(n);e>-1&&(t&&It.cancelMethods[e](),It.elements.splice(e,1),It.cancelMethods.splice(e,1))}},La=typeof window<"u",om={cancelOnUserAction:!0,easing:n=>--n*n*n+1,elementToScroll:La?window:null,horizontalOffset:0,maxDuration:3e3,minDuration:250,speed:500,verticalOffset:0};function Aa(n){return im(this,arguments,void 0,function*(t,e={}){if(La){if(!window.Promise)throw"Browser doesn't support Promises, and animated-scroll-to depends on it, please provide a polyfill."}else return new Promise(T=>{T(!1)});let i,r,c,u=Object.assign(Object.assign({},om),e);const d=u.elementToScroll===window,p=!!u.elementToScroll.nodeName;if(!d&&!p)throw"Element to scroll needs to be either window or DOM element.";const m=[{property:"scroll-behavior",value:"smooth"},{property:"scroll-snap-type",value:"mandatory"}],g=d?document.documentElement:u.elementToScroll,v=getComputedStyle(g);m.forEach(({property:T,value:k})=>{const R=v.getPropertyValue(T);R.includes(k)&&console.warn(`${g.tagName} has "${T}: ${R}" which can break animated-scroll-to's animations`)});const y=d?new sm:new rm(u.elementToScroll);if(t instanceof Element){if(c=t,p&&(!u.elementToScroll.contains(c)||u.elementToScroll.isSameNode(c)))throw"options.elementToScroll has to be a parent of scrollToElement";i=y.getHorizontalElementScrollOffset(c,u.elementToScroll),r=y.getVerticalElementScrollOffset(c,u.elementToScroll)}else if(typeof t=="number")i=y.getHorizontalScroll(),r=t;else if(Array.isArray(t)&&t.length===2)i=t[0]===null?y.getHorizontalScroll():t[0],r=t[1]===null?y.getVerticalScroll():t[1];else throw`Wrong function signature. Check documentation.
Available method signatures are:
  animateScrollTo(y:number, options)
  animateScrollTo([x:number | null, y:number | null], options)
  animateScrollTo(scrollToElement:Element, options)`;i+=u.horizontalOffset,r+=u.verticalOffset;const E=y.getMaxHorizontalScroll(),x=y.getHorizontalScroll();i>E&&(i=E);const C=i-x,w=y.getMaxVerticalScroll(),S=y.getVerticalScroll();r>w&&(r=w);const L=r-S,O=Math.abs(Math.round(C/1e3*u.speed)),I=Math.abs(Math.round(L/1e3*u.speed));let P=O>I?O:I;return P<u.minDuration?P=u.minDuration:P>u.maxDuration&&(P=u.maxDuration),new Promise((T,k)=>{C===0&&L===0&&T(!0),It.remove(y.element,!0);let R;const F=()=>{z(),cancelAnimationFrame(R),T(!1)};It.add(y.element,F);const D=K=>K.preventDefault(),B=u.cancelOnUserAction?F:D,Y=u.cancelOnUserAction?{passive:!0}:{passive:!1},G=["wheel","touchstart","keydown","mousedown"],z=()=>{G.forEach(K=>{y.element.removeEventListener(K,B,Y)})};G.forEach(K=>{y.element.addEventListener(K,B,Y)});const yt=Date.now(),mt=()=>{var K=Date.now()-yt,tt=K/P;const ht=Math.round(x+C*u.easing(tt)),ne=Math.round(S+L*u.easing(tt));K<P&&(ht!==i||ne!==r)?(y.scrollTo(ht,ne),R=requestAnimationFrame(mt)):(y.scrollTo(i,r),cancelAnimationFrame(R),z(),It.remove(y.element,!1),T(!0))};R=requestAnimationFrame(mt)})})}const Fr=class Fr extends U{constructor(){super(...arguments),this.onHashChange=()=>{requestAnimationFrame(()=>{window.location.hash==="#reply"&&this.open()})}}connect(){const t=Number(localStorage.getItem("composer_height"));t&&(this.element.style.height=t+"px"),window.addEventListener("hashchange",this.onHashChange),this.onHashChange()}disconnect(){window.removeEventListener("hashchange",this.onHashChange)}placeholderClick(t){zu(t)||(t.preventDefault(),this.open(),this.scrollToBottom())}scrollToBottom(){this.element.style.position="static";const t=this.element.getBoundingClientRect().top,e=parseInt(getComputedStyle(this.element).height);this.element.style.position="";const i=scrollY+t+e-window.innerHeight;scrollY>i||Aa(i,{minDuration:200,maxDuration:200})}open(){this.element.classList.add("is-open"),setTimeout(()=>{var t;return(t=this.element.querySelector("textarea"))==null?void 0:t.focus()})}close(){this.element.classList.remove("is-open"),window.location.hash==="#reply"&&history.replaceState(null,""," ")}submitEnd(t){t.detail.fetchResponse.contentType.startsWith("text/vnd.turbo-stream.html")&&this.close()}startResize(t){t.preventDefault();const e=this.element,i=t.clientY,r=e.offsetHeight,c=e.getBoundingClientRect().bottom,u=d=>{const p=r-(d.clientY-i);e.style.height=p+"px",localStorage.setItem("composer_height",String(p)),window.scroll(0,window.scrollY+e.getBoundingClientRect().bottom-c)};document.addEventListener("pointermove",u),document.addEventListener("pointerup",()=>{document.removeEventListener("pointermove",u)},{once:!0})}};Fr.targets=["handle"];let Vi=Fr;const Dr=class Dr extends U{async copy(t){t.preventDefault();const i=t.currentTarget.getAttribute("href")||"";try{if(await navigator.clipboard.writeText(i),this.hasMessageValue){const r=yn("template-alert-success");r.querySelector(".alert__message").textContent=this.messageValue,Waterhole.alerts.show(r,{key:"copy-link"})}}catch{window.prompt("",i)}}};Dr.values={message:String};let zi=Dr;class am extends U{constructor(){super(...arguments),this.lockScrollPosition=t=>{var e;t.target===t.currentTarget&&(this.anchor=this.element.nextElementSibling,this.anchor&&(this.top=this.anchor.getBoundingClientRect().top),(e=this.observer)==null||e.disconnect(),this.observer=new MutationObserver(()=>this.restore()),this.observer.observe(document.body,{subtree:!0,childList:!0,attributes:!0}))},this.unlockScrollPosition=t=>{t&&t.target!==t.currentTarget||setTimeout(()=>{var e;(e=this.observer)==null||e.disconnect(),delete this.observer})}}connect(){this.element.addEventListener("turbo:before-fetch-response",this.lockScrollPosition),this.element.addEventListener("turbo:frame-render",this.unlockScrollPosition)}disconnect(){this.element.removeEventListener("turbo:before-fetch-response",this.lockScrollPosition),this.element.removeEventListener("turbo:frame-render",this.unlockScrollPosition),this.unlockScrollPosition()}restore(){this.anchor&&this.top&&window.scroll({top:window.scrollY+this.anchor.getBoundingClientRect().top-this.top})}}class cm extends U{connect(){this.element.addEventListener("submit",()=>{var t;return(t=this.element.querySelector('button[type="submit"]'))==null?void 0:t.setAttribute("disabled","")})}disconnect(){var e;const t=((e=this.element.querySelector("input[name=email]"))==null?void 0:e.value)||"";document.addEventListener("turbo:load",()=>{const i=document.querySelector("input[name=email]");i&&(i.value=t)},{once:!0})}}const Hr=class Hr extends U{constructor(){super(...arguments),this.onTextExpanderChange=t=>{const{provide:e,text:i}=t.detail,r=new URL(this.userLookupUrlValue);r.searchParams.append("q",i),e(Waterhole.fetch(r).json().then(c=>{const u=document.createElement("ul");return u.setAttribute("role","listbox"),u.className="menu",u.style.position="absolute",u.style.marginTop="24px",u.append(...c.map(({name:p,html:m,commentUrl:g,frameId:v})=>{const y=document.createElement("li");return y.setAttribute("role","option"),y.id=`suggestion-${Math.floor(Math.random()*1e5).toString()}`,y.className="menu-item",y.dataset.value=p,y.dataset.commentUrl=g||"",y.dataset.frameId=v||"",y.innerHTML=m,y})),new MutationObserver(()=>{u.getBoundingClientRect().bottom>window.innerHeight&&(u.style.transform="translateY(-100%)",u.style.marginTop="-12px")}).observe(u,{attributes:!0,attributeFilter:["style"]}),{matched:!!c.length,fragment:u}}))},this.onTextExpanderValue=t=>{const{item:e}=t.detail;t.detail.value="@"+e.dataset.value.replace(/ /g,"Â ");const{commentUrl:i,frameId:r}=e.dataset;i&&_r(i,{frame:r})}}connect(){this.element.addEventListener("text-expander-change",this.onTextExpanderChange),this.element.addEventListener("text-expander-value",this.onTextExpanderValue)}disconnect(){this.element.removeEventListener("text-expander-change",this.onTextExpanderChange),this.element.removeEventListener("text-expander-value",this.onTextExpanderValue)}};Hr.values={userLookupUrl:String};let Ki=Hr;const qr=class qr extends U{connect(){this.frameTarget.removeAttribute("disabled")}loading(){this.element.open||(this.frameTarget.hidden=!0,this.loadingTarget.hidden=!1),this.show()}loaded(){this.frameTarget.hidden=!1,this.loadingTarget.hidden=!0,this.frameTarget.children.length?this.show():this.hide()}show(){this.element.open||(this.element.open=!0)}hide(t){t instanceof MouseEvent&&t.preventDefault(),this.element.open&&this.element.close()}};qr.targets=["frame","loading"];let Xi=qr;const Nr=class Nr extends U{open(t){this.badgeTarget.hidden||(this.badgeTarget.hidden=!0,this.frameTarget.reload()),Waterhole.alerts.dismiss("notification"),getComputedStyle(this.smTarget).display==="none"&&(window.Turbo.visit(t.currentTarget.href),this.element.open=!1)}};Nr.targets=["badge","frame","sm"];let Yi=Nr;const Br=class Br extends U{initialize(){this.observer=new IntersectionObserver(t=>{this.hasBreadcrumbTarget&&(this.hideBreadcrumb&&cancelAnimationFrame(this.hideBreadcrumb),this.breadcrumbTarget.hidden=t[0].isIntersecting,t[0].isIntersecting||(this.breadcrumbTarget.innerHTML=t[0].target.innerHTML||""))},{rootMargin:`-${$n()}px`})}connect(){this.hideBreadcrumb=requestAnimationFrame(()=>{this.hasBreadcrumbTarget&&(this.breadcrumbTarget.hidden=!0)})}titleTargetConnected(t){this.observer.observe(t)}titleTargetDisconnected(){this.observer.disconnect()}incrementDocumentTitle(){Waterhole.documentTitle.increment()}closeModal(){var t;(t=document.querySelector("#modal-element"))==null||t.close()}};Br.targets=["breadcrumb","title"];let Ji=Br;class lm extends U{appearAsRead(){this.element.classList.contains("is-unread")&&(this.element.classList.remove("is-unread","is-new"),this.element.classList.add("is-read"))}}const Bn=class Bn extends U{connect(){var t;(t=this.channelsValue)==null||t.forEach(e=>{var r;const i=(r=this.publicChannelsValue)!=null&&r.includes(e)?"channel":"private";window.Echo[i](`Waterhole.Models.Channel.${e}`).listen("NewComment",()=>{this.filterValue==="latest"&&this.showNewActivity()}).listen("NewPost",()=>{(this.filterValue==="newest"||this.filterValue==="latest")&&this.showNewActivity()})})}disconnect(){var t;(t=this.channelsValue)==null||t.forEach(e=>{window.Echo.leave(`Waterhole.Models.Channel.${e}`)})}showNewActivity(){this.newActivityTarget&&(this.newActivityTarget.hidden=!1,Waterhole.documentTitle.increment())}scrollToTop(){const t=$n()+20;this.element.getBoundingClientRect().top<t&&Aa(this.element,{verticalOffset:-t})}};Bn.targets=["newActivity"],Bn.values={filter:String,channels:Array,publicChannels:Array};let Gi=Bn;const jn=class jn extends U{constructor(){super(...arguments),this.showPostOnFirstPage=()=>{document.getElementById("page_1")&&(this.postTarget.hidden=!1)},this.beforeStreamRender=t=>{var i;const e=t.target;e.action==="remove"&&((i=e.targets)!=null&&i.endsWith("post_"+this.idValue))&&(window.history.back(),window.addEventListener("popstate",()=>{window.requestAnimationFrame(()=>{xr(e.outerHTML)})},{once:!0}),t.preventDefault())},this.onScroll=()=>{setTimeout(()=>{var t;this.hasCurrentPageTarget&&(this.currentPageTarget.textContent=((t=this.element.querySelector('.comments-pagination [aria-current="page"]'))==null?void 0:t.textContent)||"1")}),this.hasCommentsLinkTarget&&this.hasCommentsPaginationTarget&&(this.commentsLinkTarget.hidden=this.postTarget.getBoundingClientRect().bottom<$n()+10,this.commentsPaginationTarget.hidden=!this.commentsLinkTarget.hidden)}}connect(){document.addEventListener("turbo:before-stream-render",this.beforeStreamRender),document.addEventListener("turbo:frame-render",this.showPostOnFirstPage),window.addEventListener("scroll",this.onScroll,{passive:!0}),this.onScroll()}disconnect(){document.removeEventListener("turbo:before-stream-render",this.beforeStreamRender),document.removeEventListener("turbo:frame-render",this.showPostOnFirstPage),window.removeEventListener("scroll",this.onScroll)}};jn.targets=["post","currentPage","commentsLink","commentsPagination"],jn.values={id:Number};let Qi=jn;const jr=class jr extends U{constructor(){super(...arguments),this.handleSelectionChange=()=>{setTimeout(this.updateQuoteButton.bind(this),100)}}connect(){document.addEventListener("mouseup",this.handleSelectionChange)}disconnect(){document.removeEventListener("mouseup",this.handleSelectionChange)}async updateQuoteButton(){if(!this.hasButtonTarget)return;this.buttonTarget.hidden=!0;const t=window.getSelection();if(!t||t.isCollapsed||!t.anchorNode||!t.focusNode)return;const e=t.getRangeAt(0),i=e.commonAncestorContainer;if(i!==this.element&&!this.element.contains(i))return;this.buttonTarget.hidden=!1,this.buttonTarget.style.position="absolute",this.buttonTarget.style.zIndex="var(--z-index-overlay)";const r=t.anchorNode.compareDocumentPosition(t.focusNode),c=e.getClientRects();let u,d;if(r&Node.DOCUMENT_POSITION_PRECEDING||!r&&t.focusOffset<t.anchorOffset){const m=c[0];u=new DOMRect(m.left,m.top),d="top"}else{const m=c[c.length-1];u=new DOMRect(m.right,m.bottom),d="bottom"}gr({getBoundingClientRect:()=>u},this.buttonTarget,{placement:d,middleware:[Fd(10),pr(),mr()]}).then(({x:m,y:g})=>{Object.assign(this.buttonTarget.style,{left:`${m}px`,top:`${g}px`})})}quoteSelectedText(){const t=document.createElement("div"),e=window.getSelection();e&&(t.appendChild(e.getRangeAt(0).cloneContents()),t.querySelectorAll("img").forEach(i=>i.replaceWith(i.alt)),e.removeAllRanges(),setTimeout(()=>{this.dispatch("quote-text",{detail:{text:t.textContent},bubbles:!0,cancelable:!0})}))}};jr.targets=["button"];let Zi=jr;const Ur=class Ur extends U{constructor(){super(...arguments),this.toggle=t=>{const e=t.target;let i=e.value;e instanceof HTMLInputElement&&["checkbox","radio"].includes(e.type)&&!e.checked&&(i=""),this.thenTargets.forEach(r=>{if(!r.dataset.revealValue)r.hidden=!i;else{let c=r.dataset.revealValue;try{c=JSON.parse(c)}catch{}finally{Array.isArray(c)?c=c.map(u=>String(u)):c=[r.dataset.revealValue]}r.hidden=!c.includes(i)}})}}ifTargetConnected(t){t.addEventListener("change",this.toggle),(t.type!=="radio"||t.checked)&&t.dispatchEvent(new Event("change"))}ifTargetDisconnected(t){t.removeEventListener("change",this.toggle)}};Ur.targets=["if","then"];let tr=Ur;class um extends U{constructor(){super(...arguments),this.onScroll=()=>{const t=Array.from(this.links()),e=$n();t.forEach(i=>i.removeAttribute("aria-current")),t.reverse().some(i=>{const r=i.hash.substring(1);if(!r)return;const c=document.getElementById(r);if(c&&c.getBoundingClientRect().top<=e+100)return i.setAttribute("aria-current","page"),this.current!==i&&this.element&&this.element.scroll({top:i.offsetTop+i.offsetHeight/2-this.element.offsetHeight/2,left:i.offsetLeft+i.offsetWidth/2-this.element.offsetWidth/2,behavior:this.current?"smooth":"auto"}),this.current=i,!0})}}connect(){this.onScroll(),window.addEventListener("scroll",this.onScroll)}disconnect(){window.removeEventListener("scroll",this.onScroll)}links(){return this.element.querySelectorAll('a[href*="#"]')}}const Wr=class Wr extends U{constructor(){super(...arguments),this.input=Ku(this.submit,250)}submit(){var t;(t=this.submitTarget)==null||t.click()}frameTargetConnected(t){t.addEventListener("turbo:before-frame-render",e=>{t.hidden=!e.detail.newFrame.children.length})}};Wr.targets=["submit","frame"];let er=Wr;function ee(n,t){var e,i,r;const c=n.value.slice(0,(e=n.selectionStart)!==null&&e!==void 0?e:void 0),u=n.value.slice((i=n.selectionEnd)!==null&&i!==void 0?i:void 0);let d=!0;n.contentEditable="true";try{d=document.execCommand("insertText",!1,t)}catch{d=!1}if(n.contentEditable="false",d&&!n.value.slice(0,(r=n.selectionStart)!==null&&r!==void 0?r:void 0).endsWith(t)&&(d=!1),!d){try{document.execCommand("ms-beginUndoUnit")}catch{}n.value=c+t+u;try{document.execCommand("ms-endUndoUnit")}catch{}n.dispatchEvent(new CustomEvent("change",{bubbles:!0,cancelable:!0}))}}const Ar=new WeakMap;function Ra(n){const{currentTarget:t}=n,e=n.code==="KeyV"&&(n.ctrlKey||n.metaKey)&&n.shiftKey;(e||e&&n.altKey)&&Ar.set(t,!0)}function Pa(n){const{currentTarget:t}=n;Ar.delete(t)}function We(n){var t;return(t=Ar.get(n))!==null&&t!==void 0?t:!1}function hm(n,t,e){n.addEventListener("keydown",Ra);for(const i of t)i(n,e);n.addEventListener("paste",Pa)}function dm(n){n.removeEventListener("keydown",Ra),n.removeEventListener("paste",Pa)}function fm(n){n.addEventListener("paste",Oa)}function pm(n){n.removeEventListener("paste",Oa)}function Oa(n){const t=n.clipboardData,{currentTarget:e}=n;if(We(e)||!t||!bm(t))return;const i=n.currentTarget;if(!(i instanceof HTMLTextAreaElement)||gm(i))return;let r=t.getData("text/plain");const c=t.getData("text/html"),u=c.replace(/\u00A0/g," ").replace(/\uC2A0/g," ");if(!c||(r=r.trim(),!r))return;const p=new DOMParser().parseFromString(u,"text/html"),m=p.createTreeWalker(p.body,NodeFilter.SHOW_ALL,v=>v.parentNode&&nr(v.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT),g=mm(r,m);g!==r&&(n.stopPropagation(),n.preventDefault(),ee(i,g))}function mm(n,t){let e=t.firstChild(),i=n,r=0,c=0;const u=1e4;for(;e&&c<u;){c++;const d=nr(e)?(e.textContent||"").replace(/[\t\n\r ]+/g," "):(e==null?void 0:e.wholeText)||"";if(vm(d)){e=t.nextNode();continue}if(!nr(e)){r+=d.replace(/[\t\n\r ]+/g," ").trimStart().length,e=t.nextNode();continue}const p=i.indexOf(d,r);if(p>=0){const m=ym(e,d);i=i.slice(0,p)+m+i.slice(p+d.length),r=p+m.length}e=t.nextNode()}return c===u?n:i}function gm(n){const t=n.selectionStart||0;return t===0?!1:n.value.substring(t-1,t)==="@"}function vm(n){return!n||(n==null?void 0:n.trim().length)===0}function nr(n){var t;return((t=n.tagName)===null||t===void 0?void 0:t.toLowerCase())==="a"&&n.hasAttribute("href")}function bm(n){return n.types.includes("text/html")}function ym(n,t){const e=n.href||"";let i="";return Em(n)||Tm(n)?i=t:wm(n)||Sm(e,t)?i=e:i=`[${t}](${e})`,i}function wm(n){return n.className.indexOf("commit-link")>=0||!!n.getAttribute("data-hovercard-type")&&n.getAttribute("data-hovercard-type")!=="user"}function Sm(n,t){return n=n.slice(-1)==="/"?n.slice(0,-1):n,t=t.slice(-1)==="/"?t.slice(0,-1):t,n.toLowerCase()===t.toLowerCase()}function Em(n){var t;return((t=n.textContent)===null||t===void 0?void 0:t.slice(0,1))==="@"&&n.getAttribute("data-hovercard-type")==="user"}function Tm(n){var t;return((t=n.textContent)===null||t===void 0?void 0:t.slice(0,1))==="@"&&n.getAttribute("data-hovercard-type")==="team"}function Cm(n){n.addEventListener("dragover",Ia),n.addEventListener("drop",Ma),n.addEventListener("paste",Fa)}function km(n){n.removeEventListener("dragover",Ia),n.removeEventListener("drop",Ma),n.removeEventListener("paste",Fa)}function Ma(n){const t=n.dataTransfer;if(!t||_m(t)||!Ha(t))return;const e=qa(t);if(!e.some(Rr))return;n.stopPropagation(),n.preventDefault();const i=n.currentTarget;i instanceof HTMLTextAreaElement&&ee(i,e.map(Da).join(""))}function Ia(n){const t=n.dataTransfer;t&&(t.dropEffect="link")}function Fa(n){const{currentTarget:t}=n;if(We(t))return;const e=n.clipboardData;if(!e||!Ha(e))return;const i=qa(e);if(!i.some(Rr))return;n.stopPropagation(),n.preventDefault();const r=n.currentTarget;r instanceof HTMLTextAreaElement&&ee(r,i.map(Da).join(""))}function Da(n){return Rr(n)?`
![](${n})
`:n}function _m(n){return Array.from(n.types).indexOf("Files")>=0}function Ha(n){return Array.from(n.types).indexOf("text/uri-list")>=0}function qa(n){return(n.getData("text/uri-list")||"").split(`\r
`)}const xm=/\.(gif|png|jpe?g)$/i;function Rr(n){return xm.test(n)}const Na=new WeakMap;function Lm(n,t){var e;Na.set(n,((e=t==null?void 0:t.defaultPlainTextPaste)===null||e===void 0?void 0:e.urlLinks)===!0),n.addEventListener("paste",Ba)}function Am(n){n.removeEventListener("paste",Ba)}function Ba(n){var t;const{currentTarget:e}=n,i=e,r=(t=Na.get(i))!==null&&t!==void 0?t:!1,c=We(i);if(!r&&c||r&&!c)return;const u=n.clipboardData;if(!u||!Rm(u))return;const d=n.currentTarget;if(!(d instanceof HTMLTextAreaElement))return;const p=u.getData("text/plain");if(!p||!eo(p)||Pm(d))return;const m=d.value.substring(d.selectionStart,d.selectionEnd);m.length&&(eo(m.trim())||(n.stopPropagation(),n.preventDefault(),ee(d,Om(m,p.trim()))))}function Rm(n){return Array.from(n.types).includes("text/plain")}function Pm(n){const t=n.selectionStart||0;return t>1?n.value.substring(t-2,t)==="](":!1}function Om(n,t){return`[${n}](${t})`}function eo(n){try{const t=new URL(n);return no(t.href).trim()===no(n).trim()}catch{return!1}}function no(n){return n.endsWith("/")?n.slice(0,n.length-1):n}function Mm(n){n.addEventListener("dragover",Ua),n.addEventListener("drop",ja),n.addEventListener("paste",Wa)}function Im(n){n.removeEventListener("dragover",Ua),n.removeEventListener("drop",ja),n.removeEventListener("paste",Wa)}function ja(n){const t=n.dataTransfer;if(!t||Fm(t))return;const e=Va(t);if(!e)return;n.stopPropagation(),n.preventDefault();const i=n.currentTarget;i instanceof HTMLTextAreaElement&&ee(i,e)}function Ua(n){const t=n.dataTransfer;t&&(t.dropEffect="copy")}function Wa(n){const{currentTarget:t}=n;if(We(t)||!n.clipboardData)return;const e=Va(n.clipboardData);if(!e)return;n.stopPropagation(),n.preventDefault();const i=n.currentTarget;i instanceof HTMLTextAreaElement&&ee(i,e)}function Fm(n){return Array.from(n.types).indexOf("Files")>=0}function $a(n){return(n.textContent||"").trim().replace(/\|/g,"\\|").replace(/\n/g," ")||"Â "}function Dm(n){return Array.from(n.querySelectorAll("td, th")).map($a)}function Hm(n){const t=Array.from(n.querySelectorAll("tr")),e=t.shift();if(!e)return"";const i=Dm(e),r=i.map(()=>"--"),c=`${i.join(" | ")}
${r.join(" | ")}
`,u=t.map(d=>Array.from(d.querySelectorAll("td")).map($a).join(" | ")).join(`
`);return`
${c}${u}

`}function Va(n){if(Array.from(n.types).indexOf("text/html")===-1)return;const t=n.getData("text/html");if(!/<table/i.test(t))return;const e=t.substring(0,t.indexOf("<table")),i=t.lastIndexOf("</table>");if(!e||!i)return;const r=t.substring(i+8);let d=new DOMParser().parseFromString(t,"text/html").querySelector("table");if(d=!d||d.closest("[data-paste-markdown-skip]")?null:d,!d)return;const p=Hm(d);if(p)return[e,p,r].join("").replace(/<meta.*?>/,"")}function qm(n){n.addEventListener("paste",za)}function Nm(n){n.removeEventListener("paste",za)}function za(n){const{currentTarget:t}=n;if(We(t))return;const e=n.clipboardData;if(!e||!Bm(e))return;const i=n.currentTarget;if(!(i instanceof HTMLTextAreaElement))return;const r=e.getData("text/x-gfm");r&&(n.stopPropagation(),n.preventDefault(),ee(i,r))}function Bm(n){return Array.from(n.types).indexOf("text/x-gfm")>=0}function jm(n,t){return hm(n,[Mm,Cm,Lm,qm,fm],t),{unsubscribe:()=>{dm(n),Im(n),pm(n),km(n),Am(n),Nm(n)}}}var ei={},Um=/[|\\{}()[\]^$+*?.]/g,Wm=function(n){if(typeof n!="string")throw new TypeError("Expected a string");return n.replace(Um,"\\$&")},Pr={};Object.defineProperty(Pr,"__esModule",{value:!0});var $m={bold:{prefix:"**",suffix:"**"},italic:{prefix:"_",suffix:"_"},strikethrough:{prefix:"~~",suffix:"~~"},link:{prefix:{value:"[",pattern:"\\[",antipattern:"\\!\\["},suffix:{value:function(t,e,i){return"]("+i+")"},pattern:"\\]\\([^()]*?\\)"}},image:{prefix:"![",suffix:{value:function(t,e,i){return"]("+i+")"},pattern:"\\]\\([^()]*?\\)"}},header1:{prefix:{value:"# ",pattern:"# ",antipattern:"[#]{2,} "}},header2:{prefix:{value:"## ",pattern:"## ",antipattern:"[#]{3,} "}},header3:{prefix:{value:"### ",pattern:"### ",antipattern:"[#]{4,} "}},header4:{prefix:{value:"#### ",pattern:"#### ",antipattern:"[#]{5,} "}},header5:{prefix:{value:"##### ",pattern:"##### ",antipattern:"[#]{6,} "}},header6:{prefix:{value:"###### ",pattern:"###### ",antipattern:"[#]{7,} "}},code:{block:!0,prefix:"```\n",suffix:"\n```"},orderedList:{block:!0,multiline:!0,prefix:{value:function(t,e){return e+". "},pattern:"[0-9]+\\. "}},unorderedList:{block:!0,multiline:!0,prefix:"- "},taskList:{block:!0,multiline:!0,prefix:{value:"- [ ] ",pattern:"- \\[[x ]{1}\\] "}},blockquote:{block:!0,multiline:!0,prefix:"> "}};Pr.default=$m;Object.defineProperty(ei,"__esModule",{value:!0});ei.Formats=void 0;var Ka=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},rn=function(){function n(t,e){var i=[],r=!0,c=!1,u=void 0;try{for(var d=t[Symbol.iterator](),p;!(r=(p=d.next()).done)&&(i.push(p.value),!(e&&i.length===e));r=!0);}catch(m){c=!0,u=m}finally{try{!r&&d.return&&d.return()}finally{if(c)throw u}}return i}return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return n(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Vm=function(){function n(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),zm=Wm,Km=Xa(zm),Xm=Pr,ir=Xa(Xm);function Xa(n){return n&&n.__esModule?n:{default:n}}function Ym(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}var Jm=function(){function n(t){Ym(this,n),this.el=t}return Vm(n,[{key:"range",value:function(e){var i=this.el;if(e==null)return[i.selectionStart||0,i.selectionEnd||0];this.focus();var r=rn(e,2);return i.selectionStart=r[0],i.selectionEnd=r[1],this}},{key:"insert",value:function(e){var i=!0;this.el.contentEditable=!0,this.focus();try{document.execCommand("insertText",!1,e)}catch{i=!1}if(this.el.contentEditable=!1,i)return this;try{document.execCommand("ms-beginUndoUnit")}catch{}var r=this.selection(),c=r.before,u=r.after;this.el.value=c+e+u;try{document.execCommand("ms-endUndoUnit")}catch{}var d=document.createEvent("Event");return d.initEvent("input",!0,!0),this.el.dispatchEvent(d),this}},{key:"focus",value:function(){return document.activeElement!==this.el&&this.el.focus(),this}},{key:"selection",value:function(){var e=this.range(),i=rn(e,2),r=i[0],c=i[1],u=Gm(this.el.value);return{before:u.slice(0,r),content:u.slice(r,c),after:u.slice(c)}}},{key:"getFormat",value:function(e){if((typeof e>"u"?"undefined":Ka(e))=="object")return oo(e);if(!ir.default.hasOwnProperty(e))throw new Error("Invalid format "+e);return oo(ir.default[e])}},{key:"toggle",value:function(e){if(this.hasFormat(e))return this.unformat(e);for(var i=arguments.length,r=Array(i>1?i-1:0),c=1;c<i;c++)r[c-1]=arguments[c];return this.format.apply(this,[e].concat(r))}},{key:"format",value:function(e){for(var i=arguments.length,r=Array(i>1?i-1:0),c=1;c<i;c++)r[c-1]=arguments[c];var u=this.getFormat(e),d=u.prefix,p=u.suffix,m=u.multiline,g=this.selection(),v=g.before,y=g.content,E=g.after,x=m?y.split(`
`):[y],C=this.range(),w=rn(C,2),S=w[0],L=w[1];x=x.map(function(T,k){var R=co.apply(void 0,[d.value,T,k+1].concat(r)),F=co.apply(void 0,[p.value,T,k+1].concat(r));return!m||!y.length?(S+=R.length,L+=R.length):L+=R.length+F.length,R+T+F});var O=x.join(`
`);if(u.block){var I=qn(v,/\n+$/),P=qn(E,/^\n+/);if(v)for(;I<2;)O=`
`+O,S++,L++,I++;if(E)for(;P<2;)O=O+`
`,P++}return this.insert(O),this.range([S,L]),this}},{key:"unformat",value:function(e){if(!this.hasFormat(e))return this;var i=this.getFormat(e),r=i.prefix,c=i.suffix,u=i.multiline,d=this.selection(),p=d.before,m=d.content,g=d.after,v=u?m.split(`
`):[m],y=this.range(),E=rn(y,2),x=E[0],C=E[1];(!u||v.length==1)&&on(p,r)&&sn(g,c)&&(x-=so(p,r),C+=ro(g,c),this.range([x,C]),v=[this.selection().content]),v=v.map(function(S){var L=ro(S,r),O=so(S,c);return S.slice(L,S.length-O)});var w=v.join(`
`);return this.insert(w),this.range([x,x+w.length]),this}},{key:"hasFormat",value:function(e){var i=this.getFormat(e),r=i.prefix,c=i.suffix,u=i.multiline,d=this.selection(),p=d.before,m=d.content,g=d.after,v=m.split(`
`);if(!u||v.length==1)return on(p,r)&&sn(g,c)||sn(m,r)&&on(m,c);var y=v.filter(function(E){return sn(E,r)&&on(E,c)});return y.length===v.length}}]),n}(),Ya=ei.default=Jm;ei.Formats=ir.default;function sn(n,t){var e=new RegExp("^"+t.pattern),i=e.test(n);if(t.antipattern){var r=new RegExp("^"+t.antipattern);i=i&&!r.test(n)}return i}function on(n,t){var e=new RegExp(t.pattern+"$"),i=e.test(n);if(t.antipattern){var r=new RegExp(t.antipattern+"$");i=i&&!r.test(n)}return i}function qn(n,t){var e=n.match(t);return e?e[0].length:0}function ro(n,t){var e=new RegExp("^"+t.pattern);return qn(n,e)}function so(n,t){var e=new RegExp(t.pattern+"$");return qn(n,e)}function Gm(n){return n.replace(`\r
`,`
`)}function oo(n){var t=Object.assign({},n);return t.prefix=ao(n.prefix),t.suffix=ao(n.suffix),t}function ao(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return(typeof n>"u"?"undefined":Ka(n))=="object"?n:{value:n,pattern:(0,Km.default)(n)}}function co(n){for(var t=arguments.length,e=Array(t>1?t-1:0),i=1;i<t;i++)e[i-1]=arguments[i];return typeof n=="function"?n.apply(void 0,e):n}const Un=class Un extends U{inputTargetConnected(t){this.editor=new Ya(t),this.pasteMarkdown=jm(t)}inputTargetDisconnected(){var t;(t=this.pasteMarkdown)==null||t.unsubscribe()}hotkeyLabelTargetConnected(t){const e=navigator.userAgent.match(/Macintosh/);t.innerText=t.innerText.split("+").map(i=>i==="Meta"?e?"â":"Ctrl":i==="Shift"&&e?"â§":i==="Alt"&&e?"â¥":i.length===1?i.toUpperCase():i).join(e?"":"-")}format(t){var e;t.preventDefault(),(e=this.editor)==null||e.toggle(t.params.format)}async togglePreview(){var e;if(!this.inputTarget||!this.previewTarget)return;const t=!this.inputTarget.hidden;this.inputTarget.hidden=t,this.previewTarget.hidden=!t,(e=this.previewButtonTarget)==null||e.setAttribute("aria-pressed",String(t)),this.element.classList.toggle("is-previewing",t),t&&(this.previewTarget.setAttribute("aria-busy","true"),this.previewTarget.innerHTML=await Waterhole.fetch.post(this.formatUrlValue,{body:this.inputTarget.value}).text(),this.previewTarget.hidden=!1,this.previewTarget.setAttribute("aria-busy","false"))}insertQuote(t){if(!this.inputTarget||!this.editor)return;let e=(this.inputTarget.selectionStart>0?`

`:"")+"> ";this.editor.insert(e+t.detail.text.replace(/\n/g,`
> `)+`

`)}insertEmoji(t){var e;(e=this.editor)==null||e.insert(t.detail.unicode||""),t.target.closest("ui-popup").open=!1}};Un.targets=["input","preview","previewButton","hotkeyLabel"],Un.values={formatUrl:String};let rr=Un;const an="theme";class Qm extends U{connect(){window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",t=>{localStorage.getItem(an)||this.apply(t.matches?"dark":"light")}),this.updateMenuItems()}set({params:{name:t}}){t?(localStorage.setItem(an,t),this.apply(t)):(localStorage.removeItem(an),this.apply(matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),this.updateMenuItems(),this.dispatch("change",{detail:{name:t}})}apply(t){document.documentElement.dataset.theme=t}updateMenuItems(){const t=localStorage.getItem(an)||"";this.element.querySelectorAll("[data-theme-name-param]").forEach(e=>{e.setAttribute("aria-checked",e.getAttribute("data-theme-name-param")===t?"true":"false")})}}const $r=class $r extends U{connect(){this.element.scrollHeight>this.element.offsetHeight&&(this.expanderTarget.hidden=!1)}expand(){this.element.style.maxHeight="none",this.expanderTarget.hidden=!0}};$r.targets=["expander"];let sr=$r;class Zm extends U{connect(){this.element.id||(this.element.id=this.element.dataset.id||"")}reload(){this.element.reload()}disable(){this.element.disabled=!0}removeSrc(){this.element.removeAttribute("src")}remove(){this.element.replaceWith(...this.element.children)}}const Wn=class Wn extends U{constructor(){super(...arguments),this.onDrop=t=>{var e;(e=t.dataTransfer)!=null&&e.files.length&&(t.preventDefault(),Array.from(t.dataTransfer.files).forEach(i=>this.uploadFile(i)))},this.onPaste=t=>{var e;(e=t.clipboardData)!=null&&e.files.length&&(t.preventDefault(),Array.from(t.clipboardData.files).forEach(i=>this.uploadFile(i)))}}connect(){this.editor=new Ya(this.inputTarget),this.inputTarget.addEventListener("drop",this.onDrop),this.inputTarget.addEventListener("paste",this.onPaste)}disconnect(){this.inputTarget.removeEventListener("drop",this.onDrop),this.inputTarget.removeEventListener("paste",this.onPaste)}chooseFiles(){const t=document.createElement("input");t.type="file",t.multiple=!0,t.hidden=!0,document.body.appendChild(t),t.addEventListener("change",()=>{t.files&&Array.from(t.files).forEach(e=>this.uploadFile(e))}),t.click(),t.remove()}async uploadFile(t){var m;const e=t.type.startsWith("image/")?"!":"",i=`${e}[Uploading ${t.name}]()
`;let r="";(m=this.editor)==null||m.insert(i);const c=new FormData;c.append("file",t);try{const g=await Waterhole.fetch.post(this.urlValue,{body:c}).json();r=`${e}[${t.name}](${g.url})
`}catch{}const u=this.inputTarget.value.indexOf(i);if(u===-1||!this.editor)return;const d=r.length-i.length,p=this.editor.range();this.editor.range([u,u+i.length]).insert(r).range([p[0]+d,p[1]+d])}};Wn.targets=["input"],Wn.values={url:String};let or=Wn;class tg extends U{constructor(){super(...arguments),this.onScroll=()=>{const t=this.element;t.classList.toggle("is-scrolled-down",t.scrollTop>0),t.classList.toggle("is-scrolled-right",t.scrollLeft>0),t.classList.toggle("is-scrolled-up",t.scrollTop<t.scrollHeight-t.offsetHeight),t.classList.toggle("is-scrolled-left",t.scrollLeft<t.scrollWidth-t.offsetWidth)}}connect(){this.element.addEventListener("scroll",this.onScroll,{passive:!0}),this.observer=new ResizeObserver(()=>this.onScroll()),this.observer.observe(this.element)}disconnect(){var t;this.element.removeEventListener("scroll",this.onScroll),(t=this.observer)==null||t.disconnect()}}class eg{constructor(t,e,i={}){Ce(this,"el");Ce(this,"callback");Ce(this,"options");Ce(this,"observer");this.el=t,this.callback=e,this.options=i,this.start()}start(){this.stop();const t=getComputedStyle(this.el),e=["top","right","bottom","left"].map(i=>t[i]==="auto"?"100%":-1*parseInt(t[i])-1+"px").join(" ");this.observer=new IntersectionObserver(i=>{this.callback(!i[0].isIntersecting,this.el)},{threshold:[1],rootMargin:e,root:this.options.root}),this.observer.observe(this.el)}stop(){var t;(t=this.observer)==null||t.disconnect()}}class ng extends U{connect(){this.observer=new eg(this.element,t=>{this.element.classList.toggle("is-stuck",t),this.element.classList.toggle("is-unstuck",!t)})}disconnect(){var t;(t=this.observer)==null||t.stop()}}Object.defineProperty(Waterhole,"alerts",{get:()=>document.getElementById("alerts")});window.Stimulus=Wu.start();window.Stimulus.register("action-menu",Wi);window.Stimulus.register("alert",em);window.Stimulus.register("comment",$i);window.Stimulus.register("comment-replies",nm);window.Stimulus.register("composer",Vi);window.Stimulus.register("copy-link",zi);window.Stimulus.register("load-backwards",am);window.Stimulus.register("login",cm);window.Stimulus.register("mentions",Ki);window.Stimulus.register("modal",Xi);window.Stimulus.register("notifications-popup",Yi);window.Stimulus.register("page",Ji);window.Stimulus.register("post",lm);window.Stimulus.register("post-feed",Gi);window.Stimulus.register("post-page",Qi);window.Stimulus.register("quotable",Zi);window.Stimulus.register("reveal",tr);window.Stimulus.register("scrollspy",um);window.Stimulus.register("similar-posts",er);window.Stimulus.register("text-editor",rr);window.Stimulus.register("theme",Qm);window.Stimulus.register("truncated",sr);window.Stimulus.register("turbo-frame",Zm);window.Stimulus.register("uploads",or);window.Stimulus.register("watch-scroll",tg);window.Stimulus.register("watch-sticky",ng);Waterhole.fetch=yh.create({headers:{"X-XSRF-TOKEN":Xu("XSRF-TOKEN")||void 0},hooks:{beforeError:[n=>(Waterhole.fetchError(n.response),n)]}});
